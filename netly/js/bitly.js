(function (a, b) {
    function d() {
        return false
    }
    function e() {
        return true
    }
    function f(j, l, r) {
        r[0].type = j;
        return k.event.handle.apply(l, r)
    }
    function c(j) {
        var l, r, u = [], x = [], z, C, E, I, Y, ba, oa, ta;
        C = k.data(this, this.nodeType ? "events" : "__events__");
        if (typeof C === "function")
            C = C.events;
        if (!(j.liveFired === this || !C || !C.live || j.button && j.type === "click")) {
            if (j.namespace)
                ta = RegExp("(^|\\.)" + j.namespace.split(".").join("\\.(?:.*\\.)?") + "(\\.|$)");
            j.liveFired = this;
            var za = C.live.slice(0);
            for (I = 0; I < za.length; I++) {
                C = za[I];
                C.origType.replace(K,
                "") === j.type ? x.push(C.selector) : za.splice(I--, 1)
            }
            x = k(j.target).closest(x, j.currentTarget);
            Y = 0;
            for (ba = x.length; Y < ba; Y++) {
                oa = x[Y];
                for (I = 0; I < za.length; I++) {
                    C = za[I];
                    if (oa.selector === C.selector && (!ta || ta.test(C.namespace))) {
                        E = oa.elem;
                        z = null;
                        if (C.preType === "mouseenter" || C.preType === "mouseleave") {
                            j.type = C.preType;
                            z = k(j.relatedTarget).closest(C.selector)[0]
                        }
                        if (!z || z !== E)
                            u.push({ elem: E, handleObj: C, level: oa.level })
                    }
                }
            }
            Y = 0;
            for (ba = u.length; Y < ba; Y++) {
                x = u[Y];
                if (r && x.level > r)
                    break;
                j.currentTarget = x.elem;
                j.data = x.handleObj.data;
                j.handleObj = x.handleObj;
                ta = x.handleObj.origHandler.apply(x.elem, arguments);
                if (ta === false || j.isPropagationStopped()) {
                    r = x.level;
                    if (ta === false)
                        l = false
                }
            }
            return l
        }
    }
    function g(j, l) {
        return (j && j !== "*" ? j + "." : "") + l.replace(T, "`").replace(ea, "&")
    }
    function h(j, l, r) {
        if (k.isFunction(l))
            return k.grep(j, function (x, z) {
                return !!l.call(x, z, x) === r
            });
        else if (l.nodeType)
            return k.grep(j, function (x) {
                return x === l === r
            });
        else if (typeof l === "string") {
            var u = k.grep(j, function (x) {
                return x.nodeType === 1
            });
            if (ha.test(l))
                return k.filter(l,
                u, !r);
            else
                l = k.filter(l, u)
        }
        return k.grep(j, function (x) {
            return k.inArray(x, l) >= 0 === r
        })
    }
    function n(j, l) {
        var r = 0;
        l.each(function () {
            if (this.nodeName === (j[r] && j[r].nodeName)) {
                var u = k.data(j[r++]), x = k.data(this, u);
                if (u = u && u.events) {
                    delete x.handle;
                    x.events = {};
                    for (var z in u)
                        for (var C in u[z])
                            k.event.add(this, z, u[z][C], u[z][C].data)
                }
            }
        })
    }
    function o(j, l) {
        l.src ? k.ajax({ url: l.src, async: false, dataType: "script" }) : k.globalEval(l.text || l.textContent || l.innerHTML || "");
        l.parentNode && l.parentNode.removeChild(l)
    }
    function p(j,
    l, r) {
        var u = l === "width" ? j.offsetWidth : j.offsetHeight;
        if (r === "border")
            return u;
        k.each(l === "width" ? bb : cb, function () {
            r || (u -= parseFloat(k.css(j, "padding" + this)) || 0);
            if (r === "margin")
                u += parseFloat(k.css(j, "margin" + this)) || 0;
            else
                u -= parseFloat(k.css(j, "border" + this + "Width")) || 0
        });
        return u
    }
    function m(j, l, r, u) {
        if (k.isArray(l) && l.length)
            k.each(l, function (x, z) {
                r || db.test(j) ? u(j, z) : m(j + "[" + (typeof z === "object" || k.isArray(z) ? x : "") + "]", z, r, u)
            });
        else if (!r && l != null && typeof l === "object")
            k.isEmptyObject(l) ? u(j, "") :
            k.each(l, function (x, z) {
                m(j + "[" + x + "]", z, r, u)
            });
        else
            u(j, l)
    }
    function q(j, l) {
        var r = {};
        k.each(Va.concat.apply([], Va.slice(0, l)), function () {
            r[this] = j
        });
        return r
    }
    function v(j) {
        if (!Ra[j]) {
            var l = k("<" + j + ">").appendTo("body"), r = l.css("display");
            l.remove();
            if (r === "none" || r === "")
                r = "block";
            Ra[j] = r
        }
        return Ra[j]
    }
    function w(j) {
        return k.isWindow(j) ? j : j.nodeType === 9 ? j.defaultView || j.parentWindow : false
    }
    var s = a.document, k = function () {
        function j() {
            if (!l.isReady) {
                try {
                    s.documentElement.doScroll("left")
                } catch (A) {
                    setTimeout(j,
                    1);
                    return
                }
                l.ready()
            }
        }
        var l = function (A, X) {
            return new l.fn.init(A, X)
        }, r = a.jQuery, u = a.$, x, z = /^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/, C = /\S/, E = /^\s+/, I = /\s+$/, Y = /\W/, ba = /\d/, oa = /^<(\w+)\s*\/?>(?:<\/\1>)?$/, ta = /^[\],:{}\s]*$/, za = /\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, ia = /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ya = /(?:^|:|,)(?:\s*\[)+/g, Ga = /(webkit)[ \/]([\w.]+)/, y = /(opera)(?:.*version)?[ \/]([\w.]+)/, B = /(msie) ([\w.]+)/, L = /(mozilla)(?:.*? rv:([\w.]+))?/, H = navigator.userAgent,
        O = false, Q = [], Z, ja = Object.prototype.toString, ra = Object.prototype.hasOwnProperty, Ka = Array.prototype.push, Ha = Array.prototype.slice, Na = String.prototype.trim, La = Array.prototype.indexOf, Ea = {};
        l.fn = l.prototype = { init: function (A, X) {
            var la, na, va;
            if (!A)
                return this;
            if (A.nodeType) {
                this.context = this[0] = A;
                this.length = 1;
                return this
            }
            if (A === "body" && !X && s.body) {
                this.context = s;
                this[0] = s.body;
                this.selector = "body";
                this.length = 1;
                return this
            }
            if (typeof A === "string")
                if ((la = z.exec(A)) && (la[1] || !X))
                    if (la[1]) {
                        va = X ? X.ownerDocument ||
                            X : s;
                        if (na = oa.exec(A))
                            if (l.isPlainObject(X)) {
                                A = [s.createElement(na[1])];
                                l.fn.attr.call(A, X, true)
                            } else
                                A = [va.createElement(na[1])];
                        else {
                            na = l.buildFragment([la[1]], [va]);
                            A = (na.cacheable ? na.fragment.cloneNode(true) : na.fragment).childNodes
                        }
                        return l.merge(this, A)
                    } else {
                        if ((na = s.getElementById(la[2])) && na.parentNode) {
                            if (na.id !== la[2])
                                return x.find(A);
                            this.length = 1;
                            this[0] = na
                        }
                        this.context = s;
                        this.selector = A;
                        return this
                    }
                else if (!X && !Y.test(A)) {
                    this.selector = A;
                    this.context = s;
                    A = s.getElementsByTagName(A);
                    return l.merge(this,
                        A)
                } else
                    return !X || X.jquery ? (X || x).find(A) : l(X).find(A);
            else if (l.isFunction(A))
                return x.ready(A);
            if (A.selector !== b) {
                this.selector = A.selector;
                this.context = A.context
            }
            return l.makeArray(A, this)
        }, selector: "", jquery: "1.4.3", length: 0, size: function () {
            return this.length
        }, toArray: function () {
            return Ha.call(this, 0)
        }, get: function (A) {
            return A == null ? this.toArray() : A < 0 ? this.slice(A)[0] : this[A]
        }, pushStack: function (A, X, la) {
            var na = l();
            l.isArray(A) ? Ka.apply(na, A) : l.merge(na, A);
            na.prevObject = this;
            na.context = this.context;
            if (X === "find")
                na.selector = this.selector + (this.selector ? " " : "") + la;
            else if (X)
                na.selector = this.selector + "." + X + "(" + la + ")";
            return na
        }, each: function (A, X) {
            return l.each(this, A, X)
        }, ready: function (A) {
            l.bindReady();
            if (l.isReady)
                A.call(s, l);
            else
                Q && Q.push(A);
            return this
        }, eq: function (A) {
            return A === -1 ? this.slice(A) : this.slice(A, +A + 1)
        }, first: function () {
            return this.eq(0)
        }, last: function () {
            return this.eq(-1)
        }, slice: function () {
            return this.pushStack(Ha.apply(this, arguments), "slice", Ha.call(arguments).join(","))
        }, map: function (A) {
            return this.pushStack(l.map(this,
                function (X, la) {
                    return A.call(X, la, X)
                }))
        }, end: function () {
            return this.prevObject || l(null)
        }, push: Ka, sort: [].sort, splice: [].splice
        };
        l.fn.init.prototype = l.fn;
        l.extend = l.fn.extend = function () {
            var A = arguments[0] || {}, X = 1, la = arguments.length, na = false, va, Aa, Da, Ba, Sa;
            if (typeof A === "boolean") {
                na = A;
                A = arguments[1] || {};
                X = 2
            }
            if (typeof A !== "object" && !l.isFunction(A))
                A = {};
            if (la === X) {
                A = this;
                --X
            }
            for (; X < la; X++)
                if ((va = arguments[X]) != null)
                    for (Aa in va) {
                        Da = A[Aa];
                        Ba = va[Aa];
                        if (A !== Ba)
                            if (na && Ba && (l.isPlainObject(Ba) || (Sa = l.isArray(Ba)))) {
                                if (Sa) {
                                    Sa =
                                    false;
                                    clone = Da && l.isArray(Da) ? Da : []
                                } else
                                    clone = Da && l.isPlainObject(Da) ? Da : {};
                                A[Aa] = l.extend(na, clone, Ba)
                            } else if (Ba !== b)
                                A[Aa] = Ba
                        }
                return A
            };
            l.extend({ noConflict: function (A) {
                a.$ = u;
                if (A)
                    a.jQuery = r;
                return l
            }, isReady: false, readyWait: 1, ready: function (A) {
                A === true && l.readyWait--;
                if (!l.readyWait || A !== true && !l.isReady) {
                    if (!s.body)
                        return setTimeout(l.ready, 1);
                    l.isReady = true;
                    if (!(A !== true && --l.readyWait > 0)) {
                        if (Q) {
                            for (var X = 0; A = Q[X++]; )
                                A.call(s, l);
                            Q = null
                        }
                        l.fn.triggerHandler && l(s).triggerHandler("ready")
                    }
                }
            }, bindReady: function () {
                if (!O) {
                    O =
                    true;
                    if (s.readyState === "complete")
                        return setTimeout(l.ready, 1);
                    if (s.addEventListener) {
                        s.addEventListener("DOMContentLoaded", Z, false);
                        a.addEventListener("load", l.ready, false)
                    } else if (s.attachEvent) {
                        s.attachEvent("onreadystatechange", Z);
                        a.attachEvent("onload", l.ready);
                        var A = false;
                        try {
                            A = a.frameElement == null
                        } catch (X) {
                        }
                        s.documentElement.doScroll && A && j()
                    }
                }
            }, isFunction: function (A) {
                return l.type(A) === "function"
            }, isArray: Array.isArray || function (A) {
                return l.type(A) === "array"
            }, isWindow: function (A) {
                return A &&
                typeof A === "object" && "setInterval" in A
            }, isNaN: function (A) {
                return A == null || !ba.test(A) || isNaN(A)
            }, type: function (A) {
                return A == null ? String(A) : Ea[ja.call(A)] || "object"
            }, isPlainObject: function (A) {
                if (!A || l.type(A) !== "object" || A.nodeType || l.isWindow(A))
                    return false;
                if (A.constructor && !ra.call(A, "constructor") && !ra.call(A.constructor.prototype, "isPrototypeOf"))
                    return false;
                for (var X in A)
                    ;
                return X === b || ra.call(A, X)
            }, isEmptyObject: function (A) {
                for (var X in A)
                    return false;
                return true
            }, error: function (A) {
                throw A;
            }, parseJSON: function (A) {
                if (typeof A !== "string" || !A)
                    return null;
                A = l.trim(A);
                if (ta.test(A.replace(za, "@").replace(ia, "]").replace(ya, "")))
                    return a.JSON && a.JSON.parse ? a.JSON.parse(A) : (new Function("return " + A))();
                else
                    l.error("Invalid JSON: " + A)
            }, noop: function () {
            }, globalEval: function (A) {
                if (A && C.test(A)) {
                    var X = s.getElementsByTagName("head")[0] || s.documentElement, la = s.createElement("script");
                    la.type = "text/javascript";
                    if (l.support.scriptEval)
                        la.appendChild(s.createTextNode(A));
                    else
                        la.text = A;
                    X.insertBefore(la,
                    X.firstChild);
                    X.removeChild(la)
                }
            }, nodeName: function (A, X) {
                return A.nodeName && A.nodeName.toUpperCase() === X.toUpperCase()
            }, each: function (A, X, la) {
                var na, va = 0, Aa = A.length, Da = Aa === b || l.isFunction(A);
                if (la)
                    if (Da)
                        for (na in A) {
                            if (X.apply(A[na], la) === false)
                                break
                        }
                    else
                        for (; va < Aa; ) {
                            if (X.apply(A[va++], la) === false)
                                break
                        }
                else if (Da)
                    for (na in A) {
                        if (X.call(A[na], na, A[na]) === false)
                            break
                    }
                else
                    for (la = A[0]; va < Aa && X.call(la, va, la) !== false; la = A[++va])
                        ;
                return A
            }, trim: Na ? function (A) {
                return A == null ? "" : Na.call(A)
            } : function (A) {
                return A ==
                null ? "" : A.toString().replace(E, "").replace(I, "")
            }, makeArray: function (A, X) {
                var la = X || [];
                if (A != null) {
                    var na = l.type(A);
                    A.length == null || na === "string" || na === "function" || na === "regexp" || l.isWindow(A) ? Ka.call(la, A) : l.merge(la, A)
                }
                return la
            }, inArray: function (A, X) {
                if (X.indexOf)
                    return X.indexOf(A);
                for (var la = 0, na = X.length; la < na; la++)
                    if (X[la] === A)
                        return la;
                return -1
            }, merge: function (A, X) {
                var la = A.length, na = 0;
                if (typeof X.length === "number")
                    for (var va = X.length; na < va; na++)
                        A[la++] = X[na];
                else
                    for (; X[na] !== b; )
                        A[la++] =
                        X[na++];
                A.length = la;
                return A
            }, grep: function (A, X, la) {
                var na = [], va;
                la = !!la;
                for (var Aa = 0, Da = A.length; Aa < Da; Aa++) {
                    va = !!X(A[Aa], Aa);
                    la !== va && na.push(A[Aa])
                }
                return na
            }, map: function (A, X, la) {
                for (var na = [], va, Aa = 0, Da = A.length; Aa < Da; Aa++) {
                    va = X(A[Aa], Aa, la);
                    if (va != null)
                        na[na.length] = va
                }
                return na.concat.apply([], na)
            }, guid: 1, proxy: function (A, X, la) {
                if (arguments.length === 2)
                    if (typeof X === "string") {
                        la = A;
                        A = la[X];
                        X = b
                    } else if (X && !l.isFunction(X)) {
                        la = X;
                        X = b
                    }
                if (!X && A)
                    X = function () {
                        return A.apply(la || this, arguments)
                    };
                if (A)
                    X.guid =
                    A.guid = A.guid || X.guid || l.guid++;
                return X
            }, access: function (A, X, la, na, va, Aa) {
                var Da = A.length;
                if (typeof X === "object") {
                    for (var Ba in X)
                        l.access(A, Ba, X[Ba], na, va, la);
                    return A
                }
                if (la !== b) {
                    na = !Aa && na && l.isFunction(la);
                    for (Ba = 0; Ba < Da; Ba++)
                        va(A[Ba], X, na ? la.call(A[Ba], Ba, va(A[Ba], X)) : la, Aa);
                    return A
                }
                return Da ? va(A[0], X) : b
            }, now: function () {
                return (new Date).getTime()
            }, uaMatch: function (A) {
                A = A.toLowerCase();
                A = Ga.exec(A) || y.exec(A) || B.exec(A) || A.indexOf("compatible") < 0 && L.exec(A) || [];
                return { browser: A[1] || "", version: A[2] ||
                    "0"
                }
            }, browser: {}
            });
            l.each("Boolean Number String Function Array Date RegExp Object".split(" "), function (A, X) {
                Ea["[object " + X + "]"] = X.toLowerCase()
            });
            H = l.uaMatch(H);
            if (H.browser) {
                l.browser[H.browser] = true;
                l.browser.version = H.version
            }
            if (l.browser.webkit)
                l.browser.safari = true;
            if (La)
                l.inArray = function (A, X) {
                    return La.call(X, A)
                };
            if (!/\s/.test("\u00a0")) {
                E = /^[\s\xA0]+/;
                I = /[\s\xA0]+$/
            }
            x = l(s);
            if (s.addEventListener)
                Z = function () {
                    s.removeEventListener("DOMContentLoaded", Z, false);
                    l.ready()
                };
            else if (s.attachEvent)
                Z =
            function () {
                if (s.readyState === "complete") {
                    s.detachEvent("onreadystatechange", Z);
                    l.ready()
                }
            };
            return a.jQuery = a.$ = l
        } ();
        (function () {
            k.support = {};
            var j = s.documentElement, l = s.createElement("script"), r = s.createElement("div"), u = "script" + k.now();
            r.style.display = "none";
            r.innerHTML = "   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";
            var x = r.getElementsByTagName("*"), z = r.getElementsByTagName("a")[0], C = s.createElement("select"), E = C.appendChild(s.createElement("option"));
            if (!(!x || !x.length || !z)) {
                k.support = { leadingWhitespace: r.firstChild.nodeType === 3, tbody: !r.getElementsByTagName("tbody").length, htmlSerialize: !!r.getElementsByTagName("link").length, style: /red/.test(z.getAttribute("style")), hrefNormalized: z.getAttribute("href") === "/a", opacity: /^0.55$/.test(z.style.opacity), cssFloat: !!z.style.cssFloat, checkOn: r.getElementsByTagName("input")[0].value === "on", optSelected: E.selected, optDisabled: false, checkClone: false, scriptEval: false, noCloneEvent: true, boxModel: null, inlineBlockNeedsLayout: false,
                    shrinkWrapBlocks: false, reliableHiddenOffsets: true
                };
                C.disabled = true;
                k.support.optDisabled = !E.disabled;
                l.type = "text/javascript";
                try {
                    l.appendChild(s.createTextNode("window." + u + "=1;"))
                } catch (I) {
                }
                j.insertBefore(l, j.firstChild);
                if (a[u]) {
                    k.support.scriptEval = true;
                    delete a[u]
                }
                j.removeChild(l);
                if (r.attachEvent && r.fireEvent) {
                    r.attachEvent("onclick", function Y() {
                        k.support.noCloneEvent = false;
                        r.detachEvent("onclick", Y)
                    });
                    r.cloneNode(true).fireEvent("onclick")
                }
                r = s.createElement("div");
                r.innerHTML = "<input type='radio' name='radiotest' checked='checked'/>";
                j = s.createDocumentFragment();
                j.appendChild(r.firstChild);
                k.support.checkClone = j.cloneNode(true).cloneNode(true).lastChild.checked;
                k(function () {
                    var Y = s.createElement("div");
                    Y.style.width = Y.style.paddingLeft = "1px";
                    s.body.appendChild(Y);
                    k.boxModel = k.support.boxModel = Y.offsetWidth === 2;
                    if ("zoom" in Y.style) {
                        Y.style.display = "inline";
                        Y.style.zoom = 1;
                        k.support.inlineBlockNeedsLayout = Y.offsetWidth === 2;
                        Y.style.display = "";
                        Y.innerHTML = "<div style='width:4px;'></div>";
                        k.support.shrinkWrapBlocks = Y.offsetWidth !==
                    2
                    }
                    Y.innerHTML = "<table><tr><td style='padding:0;display:none'></td><td>t</td></tr></table>";
                    var ba = Y.getElementsByTagName("td");
                    k.support.reliableHiddenOffsets = ba[0].offsetHeight === 0;
                    ba[0].style.display = "";
                    ba[1].style.display = "none";
                    k.support.reliableHiddenOffsets = k.support.reliableHiddenOffsets && ba[0].offsetHeight === 0;
                    Y.innerHTML = "";
                    s.body.removeChild(Y).style.display = "none"
                });
                j = function (Y) {
                    var ba = s.createElement("div");
                    Y = "on" + Y;
                    var oa = Y in ba;
                    if (!oa) {
                        ba.setAttribute(Y, "return;");
                        oa = typeof ba[Y] ===
                    "function"
                    }
                    return oa
                };
                k.support.submitBubbles = j("submit");
                k.support.changeBubbles = j("change");
                j = l = r = x = z = null
            }
        })();
        k.props = { "for": "htmlFor", "class": "className", readonly: "readOnly", maxlength: "maxLength", cellspacing: "cellSpacing", rowspan: "rowSpan", colspan: "colSpan", tabindex: "tabIndex", usemap: "useMap", frameborder: "frameBorder" };
        var D = {}, M = /^(?:\{.*\}|\[.*\])$/;
        k.extend({ cache: {}, uuid: 0, expando: "jQuery" + k.now(), noData: { embed: true, object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000", applet: true }, data: function (j,
        l, r) {
            if (k.acceptData(j)) {
                j = j == a ? D : j;
                var u = j.nodeType, x = u ? j[k.expando] : null, z = k.cache;
                if (!(u && !x && typeof l === "string" && r === b)) {
                    if (u)
                        x || (j[k.expando] = x = ++k.uuid);
                    else
                        z = j;
                    if (typeof l === "object")
                        if (u)
                            z[x] = k.extend(z[x], l);
                        else
                            k.extend(z, l);
                    else if (u && !z[x])
                        z[x] = {};
                    j = u ? z[x] : z;
                    if (r !== b)
                        j[l] = r;
                    return typeof l === "string" ? j[l] : j
                }
            }
        }, removeData: function (j, l) {
            if (k.acceptData(j)) {
                j = j == a ? D : j;
                var r = j.nodeType, u = r ? j[k.expando] : j, x = k.cache, z = r ? x[u] : u;
                if (l) {
                    if (z) {
                        delete z[l];
                        r && k.isEmptyObject(z) && k.removeData(j)
                    }
                } else if (r &&
                k.support.deleteExpando)
                    delete j[k.expando];
                else if (j.removeAttribute)
                    j.removeAttribute(k.expando);
                else if (r)
                    delete x[u];
                else
                    for (var C in j)
                        delete j[C]
                }
            }, acceptData: function (j) {
                if (j.nodeName) {
                    var l = k.noData[j.nodeName.toLowerCase()];
                    if (l)
                        return !(l === true || j.getAttribute("classid") !== l)
                }
                return true
            } 
        });
        k.fn.extend({ data: function (j, l) {
            if (typeof j === "undefined")
                return this.length ? k.data(this[0]) : null;
            else if (typeof j === "object")
                return this.each(function () {
                    k.data(this, j)
                });
            var r = j.split(".");
            r[1] = r[1] ?
            "." + r[1] : "";
            if (l === b) {
                var u = this.triggerHandler("getData" + r[1] + "!", [r[0]]);
                if (u === b && this.length) {
                    u = k.data(this[0], j);
                    if (u === b && this[0].nodeType === 1) {
                        u = this[0].getAttribute("data-" + j);
                        if (typeof u === "string")
                            try {
                                u = u === "true" ? true : u === "false" ? false : u === "null" ? null : !k.isNaN(u) ? parseFloat(u) : M.test(u) ? k.parseJSON(u) : u
                            } catch (x) {
                            }
                        else
                            u = b
                    }
                }
                return u === b && r[1] ? this.data(r[0]) : u
            } else
                return this.each(function () {
                    var z = k(this), C = [r[0], l];
                    z.triggerHandler("setData" + r[1] + "!", C);
                    k.data(this, j, l);
                    z.triggerHandler("changeData" +
                    r[1] + "!", C)
                })
        }, removeData: function (j) {
            return this.each(function () {
                k.removeData(this, j)
            })
        } 
        });
        k.extend({ queue: function (j, l, r) {
            if (j) {
                l = (l || "fx") + "queue";
                var u = k.data(j, l);
                if (!r)
                    return u || [];
                if (!u || k.isArray(r))
                    u = k.data(j, l, k.makeArray(r));
                else
                    u.push(r);
                return u
            }
        }, dequeue: function (j, l) {
            l = l || "fx";
            var r = k.queue(j, l), u = r.shift();
            if (u === "inprogress")
                u = r.shift();
            if (u) {
                l === "fx" && r.unshift("inprogress");
                u.call(j, function () {
                    k.dequeue(j, l)
                })
            }
        } 
        });
        k.fn.extend({ queue: function (j, l) {
            if (typeof j !== "string") {
                l = j;
                j =
                "fx"
            }
            if (l === b)
                return k.queue(this[0], j);
            return this.each(function () {
                var r = k.queue(this, j, l);
                j === "fx" && r[0] !== "inprogress" && k.dequeue(this, j)
            })
        }, dequeue: function (j) {
            return this.each(function () {
                k.dequeue(this, j)
            })
        }, delay: function (j, l) {
            j = k.fx ? k.fx.speeds[j] || j : j;
            l = l || "fx";
            return this.queue(l, function () {
                var r = this;
                setTimeout(function () {
                    k.dequeue(r, l)
                }, j)
            })
        }, clearQueue: function (j) {
            return this.queue(j || "fx", [])
        } 
        });
        var J = /[\n\t]/g, G = /\s+/, P = /\r/g, U = /^(?:href|src|style)$/, fa = /^(?:button|input)$/i, ga = /^(?:button|input|object|select|textarea)$/i,
    qa = /^a(?:rea)?$/i, S = /^(?:radio|checkbox)$/i;
        k.fn.extend({ attr: function (j, l) {
            return k.access(this, j, l, true, k.attr)
        }, removeAttr: function (j) {
            return this.each(function () {
                k.attr(this, j, "");
                this.nodeType === 1 && this.removeAttribute(j)
            })
        }, addClass: function (j) {
            if (k.isFunction(j))
                return this.each(function (Y) {
                    var ba = k(this);
                    ba.addClass(j.call(this, Y, ba.attr("class")))
                });
            if (j && typeof j === "string")
                for (var l = (j || "").split(G), r = 0, u = this.length; r < u; r++) {
                    var x = this[r];
                    if (x.nodeType === 1)
                        if (x.className) {
                            for (var z = " " +
                            x.className + " ", C = x.className, E = 0, I = l.length; E < I; E++)
                                if (z.indexOf(" " + l[E] + " ") < 0)
                                    C += " " + l[E];
                            x.className = k.trim(C)
                        } else
                            x.className = j
                    }
                return this
            }, removeClass: function (j) {
                if (k.isFunction(j))
                    return this.each(function (I) {
                        var Y = k(this);
                        Y.removeClass(j.call(this, I, Y.attr("class")))
                    });
                if (j && typeof j === "string" || j === b)
                    for (var l = (j || "").split(G), r = 0, u = this.length; r < u; r++) {
                        var x = this[r];
                        if (x.nodeType === 1 && x.className)
                            if (j) {
                                for (var z = (" " + x.className + " ").replace(J, " "), C = 0, E = l.length; C < E; C++)
                                    z = z.replace(" " +
                                l[C] + " ", " ");
                                x.className = k.trim(z)
                            } else
                                x.className = ""
                        }
                    return this
                }, toggleClass: function (j, l) {
                    var r = typeof j, u = typeof l === "boolean";
                    if (k.isFunction(j))
                        return this.each(function (x) {
                            var z = k(this);
                            z.toggleClass(j.call(this, x, z.attr("class"), l), l)
                        });
                    return this.each(function () {
                        if (r === "string")
                            for (var x, z = 0, C = k(this), E = l, I = j.split(G); x = I[z++]; ) {
                                E = u ? E : !C.hasClass(x);
                                C[E ? "addClass" : "removeClass"](x)
                            }
                        else if (r === "undefined" || r === "boolean") {
                            this.className && k.data(this, "__className__", this.className);
                            this.className =
                    this.className || j === false ? "" : k.data(this, "__className__") || ""
                        }
                    })
                }, hasClass: function (j) {
                    j = " " + j + " ";
                    for (var l = 0, r = this.length; l < r; l++)
                        if ((" " + this[l].className + " ").replace(J, " ").indexOf(j) > -1)
                            return true;
                    return false
                }, val: function (j) {
                    if (!arguments.length) {
                        var l = this[0];
                        if (l) {
                            if (k.nodeName(l, "option")) {
                                var r = l.attributes.value;
                                return !r || r.specified ? l.value : l.text
                            }
                            if (k.nodeName(l, "select")) {
                                var u = l.selectedIndex;
                                r = [];
                                var x = l.options;
                                l = l.type === "select-one";
                                if (u < 0)
                                    return null;
                                var z = l ? u : 0;
                                for (u = l ? u +
                        1 : x.length; z < u; z++) {
                                    var C = x[z];
                                    if (C.selected && (k.support.optDisabled ? !C.disabled : C.getAttribute("disabled") === null) && (!C.parentNode.disabled || !k.nodeName(C.parentNode, "optgroup"))) {
                                        j = k(C).val();
                                        if (l)
                                            return j;
                                        r.push(j)
                                    }
                                }
                                return r
                            }
                            if (S.test(l.type) && !k.support.checkOn)
                                return l.getAttribute("value") === null ? "on" : l.value;
                            return (l.value || "").replace(P, "")
                        }
                        return b
                    }
                    var E = k.isFunction(j);
                    return this.each(function (I) {
                        var Y = k(this), ba = j;
                        if (this.nodeType === 1) {
                            if (E)
                                ba = j.call(this, I, Y.val());
                            if (ba == null)
                                ba = "";
                            else if (typeof ba === "number")
                                ba += "";
                            else if (k.isArray(ba))
                                ba = k.map(ba, function (ta) {
                                    return ta == null ? "" : ta + ""
                                });
                            if (k.isArray(ba) && S.test(this.type))
                                this.checked = k.inArray(Y.val(), ba) >= 0;
                            else if (k.nodeName(this, "select")) {
                                var oa = k.makeArray(ba);
                                k("option", this).each(function () {
                                    this.selected = k.inArray(k(this).val(), oa) >= 0
                                });
                                if (!oa.length)
                                    this.selectedIndex = -1
                            } else
                                this.value = ba
                        }
                    })
                } 
            });
            k.extend({ attrFn: { val: true, css: true, html: true, text: true, data: true, width: true, height: true, offset: true }, attr: function (j,
        l, r, u) {
                if (!j || j.nodeType === 3 || j.nodeType === 8)
                    return b;
                if (u && l in k.attrFn)
                    return k(j)[l](r);
                u = j.nodeType !== 1 || !k.isXMLDoc(j);
                var x = r !== b;
                l = u && k.props[l] || l;
                if (j.nodeType === 1) {
                    var z = U.test(l);
                    if ((l in j || j[l] !== b) && u && !z) {
                        if (x) {
                            l === "type" && fa.test(j.nodeName) && j.parentNode && k.error("type property can't be changed");
                            if (r === null)
                                j.nodeType === 1 && j.removeAttribute(l);
                            else
                                j[l] = r
                        }
                        if (k.nodeName(j, "form") && j.getAttributeNode(l))
                            return j.getAttributeNode(l).nodeValue;
                        if (l === "tabIndex")
                            return (l = j.getAttributeNode("tabIndex")) &&
                        l.specified ? l.value : ga.test(j.nodeName) || qa.test(j.nodeName) && j.href ? 0 : b;
                        return j[l]
                    }
                    if (!k.support.style && u && l === "style") {
                        if (x)
                            j.style.cssText = "" + r;
                        return j.style.cssText
                    }
                    x && j.setAttribute(l, "" + r);
                    if (!j.attributes[l] && j.hasAttribute && !j.hasAttribute(l))
                        return b;
                    j = !k.support.hrefNormalized && u && z ? j.getAttribute(l, 2) : j.getAttribute(l);
                    return j === null ? b : j
                }
            } 
            });
            var K = /\.(.*)$/, N = /^(?:textarea|input|select)$/i, T = /\./g, ea = / /g, ma = /[^\w\s.|`]/g, ua = function (j) {
                return j.replace(ma, "\\$&")
            }, ka = { focusin: 0, focusout: 0 };
            k.event = { add: function (j, l, r, u) {
                if (!(j.nodeType === 3 || j.nodeType === 8)) {
                    if (k.isWindow(j) && j !== a && !j.frameElement)
                        j = a;
                    if (r === false)
                        r = d;
                    var x, z;
                    if (r.handler) {
                        x = r;
                        r = x.handler
                    }
                    if (!r.guid)
                        r.guid = k.guid++;
                    if (z = k.data(j)) {
                        var C = j.nodeType ? "events" : "__events__", E = z[C], I = z.handle;
                        if (typeof E === "function") {
                            I = E.handle;
                            E = E.events
                        } else if (!E) {
                            j.nodeType || (z[C] = z = function () {
                            });
                            z.events = E = {}
                        }
                        if (!I)
                            z.handle = I = function () {
                                return typeof k !== "undefined" && !k.event.triggered ? k.event.handle.apply(I.elem, arguments) : b
                            };
                        I.elem =
                    j;
                        l = l.split(" ");
                        for (var Y = 0, ba; C = l[Y++]; ) {
                            z = x ? k.extend({}, x) : { handler: r, data: u };
                            if (C.indexOf(".") > -1) {
                                ba = C.split(".");
                                C = ba.shift();
                                z.namespace = ba.slice(0).sort().join(".")
                            } else {
                                ba = [];
                                z.namespace = ""
                            }
                            z.type = C;
                            if (!z.guid)
                                z.guid = r.guid;
                            var oa = E[C], ta = k.event.special[C] || {};
                            if (!oa) {
                                oa = E[C] = [];
                                if (!ta.setup || ta.setup.call(j, u, ba, I) === false)
                                    if (j.addEventListener)
                                        j.addEventListener(C, I, false);
                                    else
                                        j.attachEvent && j.attachEvent("on" + C, I)
                            }
                            if (ta.add) {
                                ta.add.call(j, z);
                                if (!z.handler.guid)
                                    z.handler.guid = r.guid
                            }
                            oa.push(z);
                            k.event.global[C] = true
                        }
                        j = null
                    }
                }
            }, global: {}, remove: function (j, l, r, u) {
                if (!(j.nodeType === 3 || j.nodeType === 8)) {
                    if (r === false)
                        r = d;
                    var x, z, C = 0, E, I, Y, ba, oa, ta, za = j.nodeType ? "events" : "__events__", ia = k.data(j), ya = ia && ia[za];
                    if (ia && ya) {
                        if (typeof ya === "function") {
                            ia = ya;
                            ya = ya.events
                        }
                        if (l && l.type) {
                            r = l.handler;
                            l = l.type
                        }
                        if (!l || typeof l === "string" && l.charAt(0) === ".") {
                            l = l || "";
                            for (x in ya)
                                k.event.remove(j, x + l)
                        } else {
                            for (l = l.split(" "); x = l[C++]; ) {
                                ba = x;
                                E = x.indexOf(".") < 0;
                                I = [];
                                if (!E) {
                                    I = x.split(".");
                                    x = I.shift();
                                    Y = RegExp("(^|\\.)" +
                                k.map(I.slice(0).sort(), ua).join("\\.(?:.*\\.)?") + "(\\.|$)")
                                }
                                if (oa = ya[x])
                                    if (r) {
                                        ba = k.event.special[x] || {};
                                        for (z = u || 0; z < oa.length; z++) {
                                            ta = oa[z];
                                            if (r.guid === ta.guid) {
                                                if (E || Y.test(ta.namespace)) {
                                                    u == null && oa.splice(z--, 1);
                                                    ba.remove && ba.remove.call(j, ta)
                                                }
                                                if (u != null)
                                                    break
                                            }
                                        }
                                        if (oa.length === 0 || u != null && oa.length === 1) {
                                            if (!ba.teardown || ba.teardown.call(j, I) === false)
                                                k.removeEvent(j, x, ia.handle);
                                            delete ya[x]
                                        }
                                    } else
                                        for (z = 0; z < oa.length; z++) {
                                            ta = oa[z];
                                            if (E || Y.test(ta.namespace)) {
                                                k.event.remove(j, ba, ta.handler, z);
                                                oa.splice(z--,
                                            1)
                                            }
                                        }
                            }
                            if (k.isEmptyObject(ya)) {
                                if (l = ia.handle)
                                    l.elem = null;
                                delete ia.events;
                                delete ia.handle;
                                if (typeof ia === "function")
                                    k.removeData(j, za);
                                else
                                    k.isEmptyObject(ia) && k.removeData(j)
                            }
                        }
                    }
                }
            }, trigger: function (j, l, r, u) {
                var x = j.type || j;
                if (!u) {
                    j = typeof j === "object" ? j[k.expando] ? j : k.extend(k.Event(x), j) : k.Event(x);
                    if (x.indexOf("!") >= 0) {
                        j.type = x = x.slice(0, -1);
                        j.exclusive = true
                    }
                    if (!r) {
                        j.stopPropagation();
                        k.event.global[x] && k.each(k.cache, function () {
                            this.events && this.events[x] && k.event.trigger(j, l, this.handle.elem)
                        })
                    }
                    if (!r ||
                r.nodeType === 3 || r.nodeType === 8)
                        return b;
                    j.result = b;
                    j.target = r;
                    l = k.makeArray(l);
                    l.unshift(j)
                }
                j.currentTarget = r;
                (u = r.nodeType ? k.data(r, "handle") : (k.data(r, "__events__") || {}).handle) && u.apply(r, l);
                u = r.parentNode || r.ownerDocument;
                try {
                    if (!(r && r.nodeName && k.noData[r.nodeName.toLowerCase()]))
                        if (r["on" + x] && r["on" + x].apply(r, l) === false) {
                            j.result = false;
                            j.preventDefault()
                        }
                } catch (z) {
                }
                if (!j.isPropagationStopped() && u)
                    k.event.trigger(j, l, u, true);
                else if (!j.isDefaultPrevented()) {
                    u = j.target;
                    var C, E = x.replace(K, ""),
                I = k.nodeName(u, "a") && E === "click", Y = k.event.special[E] || {};
                    if ((!Y._default || Y._default.call(r, j) === false) && !I && !(u && u.nodeName && k.noData[u.nodeName.toLowerCase()])) {
                        try {
                            if (u[E]) {
                                if (C = u["on" + E])
                                    u["on" + E] = null;
                                k.event.triggered = true;
                                u[E]()
                            }
                        } catch (ba) {
                        }
                        if (C)
                            u["on" + E] = C;
                        k.event.triggered = false
                    }
                }
            }, handle: function (j) {
                var l, r, u;
                r = [];
                var x, z = k.makeArray(arguments);
                j = z[0] = k.event.fix(j || a.event);
                j.currentTarget = this;
                l = j.type.indexOf(".") < 0 && !j.exclusive;
                if (!l) {
                    u = j.type.split(".");
                    j.type = u.shift();
                    r = u.slice(0).sort();
                    u = RegExp("(^|\\.)" + r.join("\\.(?:.*\\.)?") + "(\\.|$)")
                }
                j.namespace = j.namespace || r.join(".");
                x = k.data(this, this.nodeType ? "events" : "__events__");
                if (typeof x === "function")
                    x = x.events;
                r = (x || {})[j.type];
                if (x && r) {
                    r = r.slice(0);
                    x = 0;
                    for (var C = r.length; x < C; x++) {
                        var E = r[x];
                        if (l || u.test(E.namespace)) {
                            j.handler = E.handler;
                            j.data = E.data;
                            j.handleObj = E;
                            E = E.handler.apply(this, z);
                            if (E !== b) {
                                j.result = E;
                                if (E === false) {
                                    j.preventDefault();
                                    j.stopPropagation()
                                }
                            }
                            if (j.isImmediatePropagationStopped())
                                break
                        }
                    }
                }
                return j.result
            }, props: "altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
                fix: function (j) {
                    if (j[k.expando])
                        return j;
                    var l = j;
                    j = k.Event(l);
                    for (var r = this.props.length, u; r; ) {
                        u = this.props[--r];
                        j[u] = l[u]
                    }
                    if (!j.target)
                        j.target = j.srcElement || s;
                    if (j.target.nodeType === 3)
                        j.target = j.target.parentNode;
                    if (!j.relatedTarget && j.fromElement)
                        j.relatedTarget = j.fromElement === j.target ? j.toElement : j.fromElement;
                    if (j.pageX == null && j.clientX != null) {
                        l = s.documentElement;
                        r = s.body;
                        j.pageX = j.clientX + (l && l.scrollLeft || r && r.scrollLeft || 0) - (l && l.clientLeft || r && r.clientLeft || 0);
                        j.pageY = j.clientY + (l && l.scrollTop ||
                r && r.scrollTop || 0) - (l && l.clientTop || r && r.clientTop || 0)
                    }
                    if (j.which == null && (j.charCode != null || j.keyCode != null))
                        j.which = j.charCode != null ? j.charCode : j.keyCode;
                    if (!j.metaKey && j.ctrlKey)
                        j.metaKey = j.ctrlKey;
                    if (!j.which && j.button !== b)
                        j.which = j.button & 1 ? 1 : j.button & 2 ? 3 : j.button & 4 ? 2 : 0;
                    return j
                }, guid: 1E8, proxy: k.proxy, special: { ready: { setup: k.bindReady, teardown: k.noop }, live: { add: function (j) {
                    k.event.add(this, g(j.origType, j.selector), k.extend({}, j, { handler: c, guid: j.handler.guid }))
                }, remove: function (j) {
                    k.event.remove(this,
                    g(j.origType, j.selector), j)
                } 
                }, beforeunload: { setup: function (j, l, r) {
                    if (k.isWindow(this))
                        this.onbeforeunload = r
                }, teardown: function (j, l) {
                    if (this.onbeforeunload === l)
                        this.onbeforeunload = null
                } 
                }
                }
            };
            k.removeEvent = s.removeEventListener ? function (j, l, r) {
                j.removeEventListener && j.removeEventListener(l, r, false)
            } : function (j, l, r) {
                j.detachEvent && j.detachEvent("on" + l, r)
            };
            k.Event = function (j) {
                if (!this.preventDefault)
                    return new k.Event(j);
                if (j && j.type) {
                    this.originalEvent = j;
                    this.type = j.type
                } else
                    this.type = j;
                this.timeStamp =
        k.now();
                this[k.expando] = true
            };
            k.Event.prototype = { preventDefault: function () {
                this.isDefaultPrevented = e;
                var j = this.originalEvent;
                if (j)
                    if (j.preventDefault)
                        j.preventDefault();
                    else
                        j.returnValue = false
                }, stopPropagation: function () {
                    this.isPropagationStopped = e;
                    var j = this.originalEvent;
                    if (j) {
                        j.stopPropagation && j.stopPropagation();
                        j.cancelBubble = true
                    }
                }, stopImmediatePropagation: function () {
                    this.isImmediatePropagationStopped = e;
                    this.stopPropagation()
                }, isDefaultPrevented: d, isPropagationStopped: d, isImmediatePropagationStopped: d
            };
            var sa = function (j) {
                var l = j.relatedTarget;
                try {
                    for (; l && l !== this; )
                        l = l.parentNode;
                    if (l !== this) {
                        j.type = j.data;
                        k.event.handle.apply(this, arguments)
                    }
                } catch (r) {
                }
            }, F = function (j) {
                j.type = j.data;
                k.event.handle.apply(this, arguments)
            };
            k.each({ mouseenter: "mouseover", mouseleave: "mouseout" }, function (j, l) {
                k.event.special[j] = { setup: function (r) {
                    k.event.add(this, l, r && r.selector ? F : sa, j)
                }, teardown: function (r) {
                    k.event.remove(this, l, r && r.selector ? F : sa)
                } 
                }
            });
            if (!k.support.submitBubbles)
                k.event.special.submit = { setup: function () {
                    if (this.nodeName.toLowerCase() !==
                "form") {
                        k.event.add(this, "click.specialSubmit", function (j) {
                            var l = j.target, r = l.type;
                            if ((r === "submit" || r === "image") && k(l).closest("form").length) {
                                j.liveFired = b;
                                return f("submit", this, arguments)
                            }
                        });
                        k.event.add(this, "keypress.specialSubmit", function (j) {
                            var l = j.target, r = l.type;
                            if ((r === "text" || r === "password") && k(l).closest("form").length && j.keyCode === 13) {
                                j.liveFired = b;
                                return f("submit", this, arguments)
                            }
                        })
                    } else
                        return false
                }, teardown: function () {
                    k.event.remove(this, ".specialSubmit")
                } 
                };
            if (!k.support.changeBubbles) {
                var V,
        da = function (j) {
            var l = j.type, r = j.value;
            if (l === "radio" || l === "checkbox")
                r = j.checked;
            else if (l === "select-multiple")
                r = j.selectedIndex > -1 ? k.map(j.options, function (u) {
                    return u.selected
                }).join("-") : "";
            else if (j.nodeName.toLowerCase() === "select")
                r = j.selectedIndex;
            return r
        }, W = function (j, l) {
            var r = j.target, u, x;
            if (!(!N.test(r.nodeName) || r.readOnly)) {
                u = k.data(r, "_change_data");
                x = da(r);
                if (j.type !== "focusout" || r.type !== "radio")
                    k.data(r, "_change_data", x);
                if (!(u === b || x === u))
                    if (u != null || x) {
                        j.type = "change";
                        j.liveFired =
                        b;
                        return k.event.trigger(j, l, r)
                    }
            }
        };
                k.event.special.change = { filters: { focusout: W, beforedeactivate: W, click: function (j) {
                    var l = j.target, r = l.type;
                    if (r === "radio" || r === "checkbox" || l.nodeName.toLowerCase() === "select")
                        return W.call(this, j)
                }, keydown: function (j) {
                    var l = j.target, r = l.type;
                    if (j.keyCode === 13 && l.nodeName.toLowerCase() !== "textarea" || j.keyCode === 32 && (r === "checkbox" || r === "radio") || r === "select-multiple")
                        return W.call(this, j)
                }, beforeactivate: function (j) {
                    j = j.target;
                    k.data(j, "_change_data", da(j))
                } 
                }, setup: function () {
                    if (this.type ===
                "file")
                        return false;
                    for (var j in V)
                        k.event.add(this, j + ".specialChange", V[j]);
                    return N.test(this.nodeName)
                }, teardown: function () {
                    k.event.remove(this, ".specialChange");
                    return N.test(this.nodeName)
                } 
                };
                V = k.event.special.change.filters;
                V.focus = V.beforeactivate
            }
            s.addEventListener && k.each({ focus: "focusin", blur: "focusout" }, function (j, l) {
                function r(u) {
                    u = k.event.fix(u);
                    u.type = l;
                    return k.event.trigger(u, null, u.target)
                }
                k.event.special[l] = { setup: function () {
                    ka[l]++ === 0 && s.addEventListener(j, r, true)
                }, teardown: function () {
                    --ka[l] ===
                0 && s.removeEventListener(j, r, true)
                } 
                }
            });
            k.each(["bind", "one"], function (j, l) {
                k.fn[l] = function (r, u, x) {
                    if (typeof r === "object") {
                        for (var z in r)
                            this[l](z, u, r[z], x);
                        return this
                    }
                    if (k.isFunction(u) || u === false) {
                        x = u;
                        u = b
                    }
                    var C = l === "one" ? k.proxy(x, function (I) {
                        k(this).unbind(I, C);
                        return x.apply(this, arguments)
                    }) : x;
                    if (r === "unload" && l !== "one")
                        this.one(r, u, x);
                    else {
                        z = 0;
                        for (var E = this.length; z < E; z++)
                            k.event.add(this[z], r, C, u)
                    }
                    return this
                }
            });
            k.fn.extend({ unbind: function (j, l) {
                if (typeof j === "object" && !j.preventDefault)
                    for (var r in j)
                        this.unbind(r,
                    j[r]);
                else {
                    r = 0;
                    for (var u = this.length; r < u; r++)
                        k.event.remove(this[r], j, l)
                }
                return this
            }, delegate: function (j, l, r, u) {
                return this.live(l, r, u, j)
            }, undelegate: function (j, l, r) {
                return arguments.length === 0 ? this.unbind("live") : this.die(l, null, r, j)
            }, trigger: function (j, l) {
                return this.each(function () {
                    k.event.trigger(j, l, this)
                })
            }, triggerHandler: function (j, l) {
                if (this[0]) {
                    var r = k.Event(j);
                    r.preventDefault();
                    r.stopPropagation();
                    k.event.trigger(r, l, this[0]);
                    return r.result
                }
            }, toggle: function (j) {
                for (var l = arguments, r =
            1; r < l.length; )
                    k.proxy(j, l[r++]);
                return this.click(k.proxy(j, function (u) {
                    var x = (k.data(this, "lastToggle" + j.guid) || 0) % r;
                    k.data(this, "lastToggle" + j.guid, x + 1);
                    u.preventDefault();
                    return l[x].apply(this, arguments) || false
                }))
            }, hover: function (j, l) {
                return this.mouseenter(j).mouseleave(l || j)
            } 
            });
            var xa = { focus: "focusin", blur: "focusout", mouseenter: "mouseover", mouseleave: "mouseout" };
            k.each(["live", "die"], function (j, l) {
                k.fn[l] = function (r, u, x, z) {
                    var C, E = 0, I, Y, ba = z || this.selector;
                    z = z ? this : k(this.context);
                    if (typeof r ===
            "object" && !r.preventDefault) {
                        for (C in r)
                            z[l](C, u, r[C], ba);
                        return this
                    }
                    if (k.isFunction(u)) {
                        x = u;
                        u = b
                    }
                    for (r = (r || "").split(" "); (C = r[E++]) != null; ) {
                        I = K.exec(C);
                        Y = "";
                        if (I) {
                            Y = I[0];
                            C = C.replace(K, "")
                        }
                        if (C === "hover")
                            r.push("mouseenter" + Y, "mouseleave" + Y);
                        else {
                            I = C;
                            if (C === "focus" || C === "blur") {
                                r.push(xa[C] + Y);
                                C += Y
                            } else
                                C = (xa[C] || C) + Y;
                            if (l === "live") {
                                Y = 0;
                                for (var oa = z.length; Y < oa; Y++)
                                    k.event.add(z[Y], "live." + g(C, ba), { data: u, selector: ba, handler: x, origType: C, origHandler: x, preType: I })
                            } else
                                z.unbind("live." + g(C, ba), x)
                        }
                    }
                    return this
                }
            });
            k.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "), function (j, l) {
                k.fn[l] = function (r, u) {
                    if (u == null) {
                        u = r;
                        r = null
                    }
                    return arguments.length > 0 ? this.bind(l, r, u) : this.trigger(l)
                };
                if (k.attrFn)
                    k.attrFn[l] = true
            });
            a.attachEvent && !a.addEventListener && k(a).bind("unload", function () {
                for (var j in k.cache)
                    if (k.cache[j].handle)
                        try {
                            k.event.remove(k.cache[j].handle.elem)
                        } catch (l) {
                        }
            });
            (function () {
                function j(y, B, L, H, O, Q) {
                    O = 0;
                    for (var Z = H.length; O < Z; O++) {
                        var ja = H[O];
                        if (ja) {
                            ja = ja[y];
                            for (var ra = false; ja; ) {
                                if (ja.sizcache === L) {
                                    ra = H[ja.sizset];
                                    break
                                }
                                if (ja.nodeType === 1 && !Q) {
                                    ja.sizcache = L;
                                    ja.sizset = O
                                }
                                if (ja.nodeName.toLowerCase() === B) {
                                    ra = ja;
                                    break
                                }
                                ja = ja[y]
                            }
                            H[O] = ra
                        }
                    }
                }
                function l(y, B, L, H, O, Q) {
                    O = 0;
                    for (var Z = H.length; O < Z; O++) {
                        var ja = H[O];
                        if (ja) {
                            ja = ja[y];
                            for (var ra = false; ja; ) {
                                if (ja.sizcache === L) {
                                    ra = H[ja.sizset];
                                    break
                                }
                                if (ja.nodeType === 1) {
                                    if (!Q) {
                                        ja.sizcache = L;
                                        ja.sizset = O
                                    }
                                    if (typeof B !== "string") {
                                        if (ja ===
                                B) {
                                            ra = true;
                                            break
                                        }
                                    } else if (E.filter(B, [ja]).length > 0) {
                                        ra = ja;
                                        break
                                    }
                                }
                                ja = ja[y]
                            }
                            H[O] = ra
                        }
                    }
                }
                var r = /((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g, u = 0, x = Object.prototype.toString, z = false, C = true;
                [0, 0].sort(function () {
                    C = false;
                    return 0
                });
                var E = function (y, B, L, H) {
                    L = L || [];
                    var O = B = B || s;
                    if (B.nodeType !== 1 && B.nodeType !== 9)
                        return [];
                    if (!y || typeof y !== "string")
                        return L;
                    var Q = [], Z, ja, ra, Ka, Ha = true, Na = E.isXML(B), La = y, Ea;
                    do {
                        r.exec("");
                        if (Z = r.exec(La)) {
                            La = Z[3];
                            Q.push(Z[1]);
                            if (Z[2]) {
                                Ka = Z[3];
                                break
                            }
                        }
                    } while (Z);
                    if (Q.length > 1 && Y.exec(y))
                        if (Q.length === 2 && I.relative[Q[0]])
                            ja = Ga(Q[0] + Q[1], B);
                        else
                            for (ja = I.relative[Q[0]] ? [B] : E(Q.shift(), B); Q.length; ) {
                                y = Q.shift();
                                if (I.relative[y])
                                    y += Q.shift();
                                ja = Ga(y, ja)
                            }
                    else {
                        if (!H && Q.length > 1 && B.nodeType === 9 && !Na && I.match.ID.test(Q[0]) && !I.match.ID.test(Q[Q.length - 1])) {
                            Z = E.find(Q.shift(), B, Na);
                            B = Z.expr ? E.filter(Z.expr, Z.set)[0] : Z.set[0]
                        }
                        if (B) {
                            Z = H ? { expr: Q.pop(), set: ta(H)} : E.find(Q.pop(), Q.length === 1 && (Q[0] ===
                    "~" || Q[0] === "+") && B.parentNode ? B.parentNode : B, Na);
                            ja = Z.expr ? E.filter(Z.expr, Z.set) : Z.set;
                            if (Q.length > 0)
                                ra = ta(ja);
                            else
                                Ha = false;
                            for (; Q.length; ) {
                                Z = Ea = Q.pop();
                                if (I.relative[Ea])
                                    Z = Q.pop();
                                else
                                    Ea = "";
                                if (Z == null)
                                    Z = B;
                                I.relative[Ea](ra, Z, Na)
                            }
                        } else
                            ra = []
                    }
                    ra || (ra = ja);
                    ra || E.error(Ea || y);
                    if (x.call(ra) === "[object Array]")
                        if (Ha)
                            if (B && B.nodeType === 1)
                                for (y = 0; ra[y] != null; y++) {
                                    if (ra[y] && (ra[y] === true || ra[y].nodeType === 1 && E.contains(B, ra[y])))
                                        L.push(ja[y])
                                }
                            else
                                for (y = 0; ra[y] != null; y++)
                                    ra[y] && ra[y].nodeType === 1 && L.push(ja[y]);
                        else
                            L.push.apply(L, ra);
                    else
                        ta(ra, L);
                    if (Ka) {
                        E(Ka, O, L, H);
                        E.uniqueSort(L)
                    }
                    return L
                };
                E.uniqueSort = function (y) {
                    if (ia) {
                        z = C;
                        y.sort(ia);
                        if (z)
                            for (var B = 1; B < y.length; B++)
                                y[B] === y[B - 1] && y.splice(B--, 1)
                    }
                    return y
                };
                E.matches = function (y, B) {
                    return E(y, null, null, B)
                };
                E.matchesSelector = function (y, B) {
                    return E(B, null, null, [y]).length > 0
                };
                E.find = function (y, B, L) {
                    var H;
                    if (!y)
                        return [];
                    for (var O = 0, Q = I.order.length; O < Q; O++) {
                        var Z = I.order[O], ja;
                        if (ja = I.leftMatch[Z].exec(y)) {
                            var ra = ja[1];
                            ja.splice(1, 1);
                            if (ra.substr(ra.length -
                    1) !== "\\") {
                                ja[1] = (ja[1] || "").replace(/\\/g, "");
                                H = I.find[Z](ja, B, L);
                                if (H != null) {
                                    y = y.replace(I.match[Z], "");
                                    break
                                }
                            }
                        }
                    }
                    H || (H = B.getElementsByTagName("*"));
                    return { set: H, expr: y }
                };
                E.filter = function (y, B, L, H) {
                    for (var O = y, Q = [], Z = B, ja, ra, Ka = B && B[0] && E.isXML(B[0]); y && B.length; ) {
                        for (var Ha in I.filter)
                            if ((ja = I.leftMatch[Ha].exec(y)) != null && ja[2]) {
                                var Na = I.filter[Ha], La, Ea;
                                Ea = ja[1];
                                ra = false;
                                ja.splice(1, 1);
                                if (Ea.substr(Ea.length - 1) !== "\\") {
                                    if (Z === Q)
                                        Q = [];
                                    if (I.preFilter[Ha])
                                        if (ja = I.preFilter[Ha](ja, Z, L, Q, H, Ka)) {
                                            if (ja ===
                                    true)
                                                continue
                                        } else
                                            ra = La = true;
                                    if (ja)
                                        for (var A = 0; (Ea = Z[A]) != null; A++)
                                            if (Ea) {
                                                La = Na(Ea, ja, A, Z);
                                                var X = H ^ !!La;
                                                if (L && La != null)
                                                    if (X)
                                                        ra = true;
                                                    else
                                                        Z[A] = false;
                                                else if (X) {
                                                    Q.push(Ea);
                                                    ra = true
                                                }
                                            }
                                    if (La !== b) {
                                        L || (Z = Q);
                                        y = y.replace(I.match[Ha], "");
                                        if (!ra)
                                            return [];
                                        break
                                    }
                                }
                            }
                        if (y === O)
                            if (ra == null)
                                E.error(y);
                            else
                                break;
                        O = y
                    }
                    return Z
                };
                E.error = function (y) {
                    throw "Syntax error, unrecognized expression: " + y;
                };
                var I = E.selectors = { order: ["ID", "NAME", "TAG"], match: { ID: /#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/, CLASS: /\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
                    NAME: /\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/, ATTR: /\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/, TAG: /^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/, CHILD: /:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/, POS: /:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/, PSEUDO: /:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/
                }, leftMatch: {}, attrMap: { "class": "className", "for": "htmlFor" }, attrHandle: { href: function (y) {
                    return y.getAttribute("href")
                } 
                },
                    relative: { "+": function (y, B) {
                        var L = typeof B === "string", H = L && !/\W/.test(B);
                        L = L && !H;
                        if (H)
                            B = B.toLowerCase();
                        H = 0;
                        for (var O = y.length, Q; H < O; H++)
                            if (Q = y[H]) {
                                for (; (Q = Q.previousSibling) && Q.nodeType !== 1; )
                                    ;
                                y[H] = L || Q && Q.nodeName.toLowerCase() === B ? Q || false : Q === B
                            }
                        L && E.filter(B, y, true)
                    }, ">": function (y, B) {
                        var L = typeof B === "string", H, O = 0, Q = y.length;
                        if (L && !/\W/.test(B))
                            for (B = B.toLowerCase(); O < Q; O++) {
                                if (H = y[O]) {
                                    L = H.parentNode;
                                    y[O] = L.nodeName.toLowerCase() === B ? L : false
                                }
                            }
                        else {
                            for (; O < Q; O++)
                                if (H = y[O])
                                    y[O] = L ? H.parentNode : H.parentNode ===
                                B;
                            L && E.filter(B, y, true)
                        }
                    }, "": function (y, B, L) {
                        var H = u++, O = l, Q;
                        if (typeof B === "string" && !/\W/.test(B)) {
                            Q = B = B.toLowerCase();
                            O = j
                        }
                        O("parentNode", B, H, y, Q, L)
                    }, "~": function (y, B, L) {
                        var H = u++, O = l, Q;
                        if (typeof B === "string" && !/\W/.test(B)) {
                            Q = B = B.toLowerCase();
                            O = j
                        }
                        O("previousSibling", B, H, y, Q, L)
                    } 
                    }, find: { ID: function (y, B, L) {
                        if (typeof B.getElementById !== "undefined" && !L)
                            return (y = B.getElementById(y[1])) && y.parentNode ? [y] : []
                    }, NAME: function (y, B) {
                        if (typeof B.getElementsByName !== "undefined") {
                            for (var L = [], H = B.getElementsByName(y[1]),
                        O = 0, Q = H.length; O < Q; O++)
                                H[O].getAttribute("name") === y[1] && L.push(H[O]);
                            return L.length === 0 ? null : L
                        }
                    }, TAG: function (y, B) {
                        return B.getElementsByTagName(y[1])
                    } 
                    }, preFilter: { CLASS: function (y, B, L, H, O, Q) {
                        y = " " + y[1].replace(/\\/g, "") + " ";
                        if (Q)
                            return y;
                        Q = 0;
                        for (var Z; (Z = B[Q]) != null; Q++)
                            if (Z)
                                if (O ^ (Z.className && (" " + Z.className + " ").replace(/[\t\n]/g, " ").indexOf(y) >= 0))
                                    L || H.push(Z);
                                else if (L)
                                    B[Q] = false;
                        return false
                    }, ID: function (y) {
                        return y[1].replace(/\\/g, "")
                    }, TAG: function (y) {
                        return y[1].toLowerCase()
                    }, CHILD: function (y) {
                        if (y[1] ===
                    "nth") {
                            var B = /(-?)(\d*)n((?:\+|-)?\d*)/.exec(y[2] === "even" && "2n" || y[2] === "odd" && "2n+1" || !/\D/.test(y[2]) && "0n+" + y[2] || y[2]);
                            y[2] = B[1] + (B[2] || 1) - 0;
                            y[3] = B[3] - 0
                        }
                        y[0] = u++;
                        return y
                    }, ATTR: function (y, B, L, H, O, Q) {
                        B = y[1].replace(/\\/g, "");
                        if (!Q && I.attrMap[B])
                            y[1] = I.attrMap[B];
                        if (y[2] === "~=")
                            y[4] = " " + y[4] + " ";
                        return y
                    }, PSEUDO: function (y, B, L, H, O) {
                        if (y[1] === "not")
                            if ((r.exec(y[3]) || "").length > 1 || /^\w/.test(y[3]))
                                y[3] = E(y[3], null, null, B);
                            else {
                                y = E.filter(y[3], B, L, true ^ O);
                                L || H.push.apply(H, y);
                                return false
                            }
                        else if (I.match.POS.test(y[0]) ||
                    I.match.CHILD.test(y[0]))
                            return true;
                        return y
                    }, POS: function (y) {
                        y.unshift(true);
                        return y
                    } 
                    }, filters: { enabled: function (y) {
                        return y.disabled === false && y.type !== "hidden"
                    }, disabled: function (y) {
                        return y.disabled === true
                    }, checked: function (y) {
                        return y.checked === true
                    }, selected: function (y) {
                        return y.selected === true
                    }, parent: function (y) {
                        return !!y.firstChild
                    }, empty: function (y) {
                        return !y.firstChild
                    }, has: function (y, B, L) {
                        return !!E(L[3], y).length
                    }, header: function (y) {
                        return /h\d/i.test(y.nodeName)
                    }, text: function (y) {
                        return "text" ===
                    y.type
                    }, radio: function (y) {
                        return "radio" === y.type
                    }, checkbox: function (y) {
                        return "checkbox" === y.type
                    }, file: function (y) {
                        return "file" === y.type
                    }, password: function (y) {
                        return "password" === y.type
                    }, submit: function (y) {
                        return "submit" === y.type
                    }, image: function (y) {
                        return "image" === y.type
                    }, reset: function (y) {
                        return "reset" === y.type
                    }, button: function (y) {
                        return "button" === y.type || y.nodeName.toLowerCase() === "button"
                    }, input: function (y) {
                        return /input|select|textarea|button/i.test(y.nodeName)
                    } 
                    }, setFilters: { first: function (y, B) {
                        return B ===
                    0
                    }, last: function (y, B, L, H) {
                        return B === H.length - 1
                    }, even: function (y, B) {
                        return B % 2 === 0
                    }, odd: function (y, B) {
                        return B % 2 === 1
                    }, lt: function (y, B, L) {
                        return B < L[3] - 0
                    }, gt: function (y, B, L) {
                        return B > L[3] - 0
                    }, nth: function (y, B, L) {
                        return L[3] - 0 === B
                    }, eq: function (y, B, L) {
                        return L[3] - 0 === B
                    } 
                    }, filter: { PSEUDO: function (y, B, L, H) {
                        var O = B[1], Q = I.filters[O];
                        if (Q)
                            return Q(y, L, B, H);
                        else if (O === "contains")
                            return (y.textContent || y.innerText || E.getText([y]) || "").indexOf(B[3]) >= 0;
                        else if (O === "not") {
                            B = B[3];
                            L = 0;
                            for (H = B.length; L < H; L++)
                                if (B[L] ===
                            y)
                                    return false;
                            return true
                        } else
                            E.error("Syntax error, unrecognized expression: " + O)
                    }, CHILD: function (y, B) {
                        var L = B[1], H = y;
                        switch (L) {
                            case "only":
                            case "first":
                                for (; H = H.previousSibling; )
                                    if (H.nodeType === 1)
                                        return false;
                                if (L === "first")
                                    return true;
                                H = y;
                            case "last":
                                for (; H = H.nextSibling; )
                                    if (H.nodeType === 1)
                                        return false;
                                return true;
                            case "nth":
                                L = B[2];
                                var O = B[3];
                                if (L === 1 && O === 0)
                                    return true;
                                var Q = B[0], Z = y.parentNode;
                                if (Z && (Z.sizcache !== Q || !y.nodeIndex)) {
                                    var ja = 0;
                                    for (H = Z.firstChild; H; H = H.nextSibling)
                                        if (H.nodeType ===
                                    1)
                                            H.nodeIndex = ++ja;
                                    Z.sizcache = Q
                                }
                                H = y.nodeIndex - O;
                                return L === 0 ? H === 0 : H % L === 0 && H / L >= 0
                        }
                    }, ID: function (y, B) {
                        return y.nodeType === 1 && y.getAttribute("id") === B
                    }, TAG: function (y, B) {
                        return B === "*" && y.nodeType === 1 || y.nodeName.toLowerCase() === B
                    }, CLASS: function (y, B) {
                        return (" " + (y.className || y.getAttribute("class")) + " ").indexOf(B) > -1
                    }, ATTR: function (y, B) {
                        var L = B[1];
                        L = I.attrHandle[L] ? I.attrHandle[L](y) : y[L] != null ? y[L] : y.getAttribute(L);
                        var H = L + "", O = B[2], Q = B[4];
                        return L == null ? O === "!=" : O === "=" ? H === Q : O === "*=" ? H.indexOf(Q) >=
                    0 : O === "~=" ? (" " + H + " ").indexOf(Q) >= 0 : !Q ? H && L !== false : O === "!=" ? H !== Q : O === "^=" ? H.indexOf(Q) === 0 : O === "$=" ? H.substr(H.length - Q.length) === Q : O === "|=" ? H === Q || H.substr(0, Q.length + 1) === Q + "-" : false
                    }, POS: function (y, B, L, H) {
                        var O = I.setFilters[B[2]];
                        if (O)
                            return O(y, L, B, H)
                    } 
                    }
                }, Y = I.match.POS, ba = function (y, B) {
                    return "\\" + (B - 0 + 1)
                }, oa;
                for (oa in I.match) {
                    I.match[oa] = RegExp(I.match[oa].source + /(?![^\[]*\])(?![^\(]*\))/.source);
                    I.leftMatch[oa] = RegExp(/(^(?:.|\r|\n)*?)/.source + I.match[oa].source.replace(/\\(\d+)/g, ba))
                }
                var ta =
        function (y, B) {
            y = Array.prototype.slice.call(y, 0);
            if (B) {
                B.push.apply(B, y);
                return B
            }
            return y
        };
                try {
                    Array.prototype.slice.call(s.documentElement.childNodes, 0)
                } catch (za) {
                    ta = function (y, B) {
                        var L = B || [], H = 0;
                        if (x.call(y) === "[object Array]")
                            Array.prototype.push.apply(L, y);
                        else if (typeof y.length === "number")
                            for (var O = y.length; H < O; H++)
                                L.push(y[H]);
                        else
                            for (; y[H]; H++)
                                L.push(y[H]);
                        return L
                    }
                }
                var ia, ya;
                if (s.documentElement.compareDocumentPosition)
                    ia = function (y, B) {
                        if (y === B) {
                            z = true;
                            return 0
                        }
                        if (!y.compareDocumentPosition ||
                !B.compareDocumentPosition)
                            return y.compareDocumentPosition ? -1 : 1;
                        return y.compareDocumentPosition(B) & 4 ? -1 : 1
                    };
                else {
                    ia = function (y, B) {
                        var L = [], H = [], O = y.parentNode, Q = B.parentNode, Z = O;
                        if (y === B) {
                            z = true;
                            return 0
                        } else if (O === Q)
                            return ya(y, B);
                        else if (O) {
                            if (!Q)
                                return 1
                        } else
                            return -1;
                        for (; Z; ) {
                            L.unshift(Z);
                            Z = Z.parentNode
                        }
                        for (Z = Q; Z; ) {
                            H.unshift(Z);
                            Z = Z.parentNode
                        }
                        O = L.length;
                        Q = H.length;
                        for (Z = 0; Z < O && Z < Q; Z++)
                            if (L[Z] !== H[Z])
                                return ya(L[Z], H[Z]);
                        return Z === O ? ya(y, H[Z], -1) : ya(L[Z], B, 1)
                    };
                    ya = function (y, B, L) {
                        if (y === B)
                            return L;
                        for (y = y.nextSibling; y; ) {
                            if (y === B)
                                return -1;
                            y = y.nextSibling
                        }
                        return 1
                    }
                }
                E.getText = function (y) {
                    for (var B = "", L, H = 0; y[H]; H++) {
                        L = y[H];
                        if (L.nodeType === 3 || L.nodeType === 4)
                            B += L.nodeValue;
                        else if (L.nodeType !== 8)
                            B += E.getText(L.childNodes)
                    }
                    return B
                };
                (function () {
                    var y = s.createElement("div"), B = "script" + (new Date).getTime();
                    y.innerHTML = "<a name='" + B + "'/>";
                    var L = s.documentElement;
                    L.insertBefore(y, L.firstChild);
                    if (s.getElementById(B)) {
                        I.find.ID = function (H, O, Q) {
                            if (typeof O.getElementById !== "undefined" && !Q)
                                return (O = O.getElementById(H[1])) ?
                        O.id === H[1] || typeof O.getAttributeNode !== "undefined" && O.getAttributeNode("id").nodeValue === H[1] ? [O] : b : []
                        };
                        I.filter.ID = function (H, O) {
                            var Q = typeof H.getAttributeNode !== "undefined" && H.getAttributeNode("id");
                            return H.nodeType === 1 && Q && Q.nodeValue === O
                        }
                    }
                    L.removeChild(y);
                    L = y = null
                })();
                (function () {
                    var y = s.createElement("div");
                    y.appendChild(s.createComment(""));
                    if (y.getElementsByTagName("*").length > 0)
                        I.find.TAG = function (B, L) {
                            var H = L.getElementsByTagName(B[1]);
                            if (B[1] === "*") {
                                for (var O = [], Q = 0; H[Q]; Q++)
                                    H[Q].nodeType ===
                            1 && O.push(H[Q]);
                                H = O
                            }
                            return H
                        };
                    y.innerHTML = "<a href='#'></a>";
                    if (y.firstChild && typeof y.firstChild.getAttribute !== "undefined" && y.firstChild.getAttribute("href") !== "#")
                        I.attrHandle.href = function (B) {
                            return B.getAttribute("href", 2)
                        };
                    y = null
                })();
                s.querySelectorAll && function () {
                    var y = E, B = s.createElement("div");
                    B.innerHTML = "<p class='TEST'></p>";
                    if (!(B.querySelectorAll && B.querySelectorAll(".TEST").length === 0)) {
                        E = function (H, O, Q, Z) {
                            O = O || s;
                            if (!Z && !E.isXML(O))
                                if (O.nodeType === 9)
                                    try {
                                        return ta(O.querySelectorAll(H),
                                Q)
                                    } catch (ja) {
                                    }
                                else if (O.nodeType === 1 && O.nodeName.toLowerCase() !== "object") {
                                    var ra = O.id, Ka = O.id = "__sizzle__";
                                    try {
                                        return ta(O.querySelectorAll("#" + Ka + " " + H), Q)
                                    } catch (Ha) {
                                    } finally {
                                        if (ra)
                                            O.id = ra;
                                        else
                                            O.removeAttribute("id")
                                    }
                                }
                            return y(H, O, Q, Z)
                        };
                        for (var L in y)
                            E[L] = y[L];
                        B = null
                    }
                } ();
                (function () {
                    var y = s.documentElement, B = y.matchesSelector || y.mozMatchesSelector || y.webkitMatchesSelector || y.msMatchesSelector, L = false;
                    try {
                        B.call(s.documentElement, ":sizzle")
                    } catch (H) {
                        L = true
                    }
                    if (B)
                        E.matchesSelector = function (O, Q) {
                            try {
                                if (L ||
                        !I.match.PSEUDO.test(Q))
                                    return B.call(O, Q)
                            } catch (Z) {
                            }
                            return E(Q, null, null, [O]).length > 0
                        }
                })();
                (function () {
                    var y = s.createElement("div");
                    y.innerHTML = "<div class='test e'></div><div class='test'></div>";
                    if (!(!y.getElementsByClassName || y.getElementsByClassName("e").length === 0)) {
                        y.lastChild.className = "e";
                        if (y.getElementsByClassName("e").length !== 1) {
                            I.order.splice(1, 0, "CLASS");
                            I.find.CLASS = function (B, L, H) {
                                if (typeof L.getElementsByClassName !== "undefined" && !H)
                                    return L.getElementsByClassName(B[1])
                            };
                            y = null
                        }
                    }
                })();
                E.contains = s.documentElement.contains ? function (y, B) {
                    return y !== B && (y.contains ? y.contains(B) : true)
                } : function (y, B) {
                    return !!(y.compareDocumentPosition(B) & 16)
                };
                E.isXML = function (y) {
                    return (y = (y ? y.ownerDocument || y : 0).documentElement) ? y.nodeName !== "HTML" : false
                };
                var Ga = function (y, B) {
                    for (var L = [], H = "", O, Q = B.nodeType ? [B] : B; O = I.match.PSEUDO.exec(y); ) {
                        H += O[0];
                        y = y.replace(I.match.PSEUDO, "")
                    }
                    y = I.relative[y] ? y + "*" : y;
                    O = 0;
                    for (var Z = Q.length; O < Z; O++)
                        E(y, Q[O], L);
                    return E.filter(H, L)
                };
                k.find = E;
                k.expr = E.selectors;
                k.expr[":"] =
        k.expr.filters;
                k.unique = E.uniqueSort;
                k.text = E.getText;
                k.isXMLDoc = E.isXML;
                k.contains = E.contains
            })();
            var wa = /Until$/, Ja = /^(?:parents|prevUntil|prevAll)/, R = /,/, ha = /^.[^:#\[\.,]*$/, aa = Array.prototype.slice, ca = k.expr.match.POS;
            k.fn.extend({ find: function (j) {
                for (var l = this.pushStack("", "find", j), r = 0, u = 0, x = this.length; u < x; u++) {
                    r = l.length;
                    k.find(j, this[u], l);
                    if (u > 0)
                        for (var z = r; z < l.length; z++)
                            for (var C = 0; C < r; C++)
                                if (l[C] === l[z]) {
                                    l.splice(z--, 1);
                                    break
                                }
                }
                return l
            }, has: function (j) {
                var l = k(j);
                return this.filter(function () {
                    for (var r =
                0, u = l.length; r < u; r++)
                        if (k.contains(this, l[r]))
                            return true
                    })
                }, not: function (j) {
                    return this.pushStack(h(this, j, false), "not", j)
                }, filter: function (j) {
                    return this.pushStack(h(this, j, true), "filter", j)
                }, is: function (j) {
                    return !!j && k.filter(j, this).length > 0
                }, closest: function (j, l) {
                    var r = [], u, x, z = this[0];
                    if (k.isArray(j)) {
                        var C = {}, E, I = 1;
                        if (z && j.length) {
                            u = 0;
                            for (x = j.length; u < x; u++) {
                                E = j[u];
                                C[E] || (C[E] = k.expr.match.POS.test(E) ? k(E, l || this.context) : E)
                            }
                            for (; z && z.ownerDocument && z !== l; ) {
                                for (E in C) {
                                    u = C[E];
                                    if (u.jquery ? u.index(z) >
                            -1 : k(z).is(u))
                                        r.push({ selector: E, elem: z, level: I })
                                }
                                z = z.parentNode;
                                I++
                            }
                        }
                        return r
                    }
                    C = ca.test(j) ? k(j, l || this.context) : null;
                    u = 0;
                    for (x = this.length; u < x; u++)
                        for (z = this[u]; z; )
                            if (C ? C.index(z) > -1 : k.find.matchesSelector(z, j)) {
                                r.push(z);
                                break
                            } else {
                                z = z.parentNode;
                                if (!z || !z.ownerDocument || z === l)
                                    break
                            }
                    r = r.length > 1 ? k.unique(r) : r;
                    return this.pushStack(r, "closest", j)
                }, index: function (j) {
                    if (!j || typeof j === "string")
                        return k.inArray(this[0], j ? k(j) : this.parent().children());
                    return k.inArray(j.jquery ? j[0] : j, this)
                }, add: function (j,
        l) {
                    var r = typeof j === "string" ? k(j, l || this.context) : k.makeArray(j), u = k.merge(this.get(), r);
                    return this.pushStack(!r[0] || !r[0].parentNode || r[0].parentNode.nodeType === 11 || !u[0] || !u[0].parentNode || u[0].parentNode.nodeType === 11 ? u : k.unique(u))
                }, andSelf: function () {
                    return this.add(this.prevObject)
                } 
            });
            k.each({ parent: function (j) {
                return (j = j.parentNode) && j.nodeType !== 11 ? j : null
            }, parents: function (j) {
                return k.dir(j, "parentNode")
            }, parentsUntil: function (j, l, r) {
                return k.dir(j, "parentNode", r)
            }, next: function (j) {
                return k.nth(j,
            2, "nextSibling")
            }, prev: function (j) {
                return k.nth(j, 2, "previousSibling")
            }, nextAll: function (j) {
                return k.dir(j, "nextSibling")
            }, prevAll: function (j) {
                return k.dir(j, "previousSibling")
            }, nextUntil: function (j, l, r) {
                return k.dir(j, "nextSibling", r)
            }, prevUntil: function (j, l, r) {
                return k.dir(j, "previousSibling", r)
            }, siblings: function (j) {
                return k.sibling(j.parentNode.firstChild, j)
            }, children: function (j) {
                return k.sibling(j.firstChild)
            }, contents: function (j) {
                return k.nodeName(j, "iframe") ? j.contentDocument || j.contentWindow.document :
            k.makeArray(j.childNodes)
            } 
            }, function (j, l) {
                k.fn[j] = function (r, u) {
                    var x = k.map(this, l, r);
                    wa.test(j) || (u = r);
                    if (u && typeof u === "string")
                        x = k.filter(u, x);
                    x = this.length > 1 ? k.unique(x) : x;
                    if ((this.length > 1 || R.test(u)) && Ja.test(j))
                        x = x.reverse();
                    return this.pushStack(x, j, aa.call(arguments).join(","))
                }
            });
            k.extend({ filter: function (j, l, r) {
                if (r)
                    j = ":not(" + j + ")";
                return l.length === 1 ? k.find.matchesSelector(l[0], j) ? [l[0]] : [] : k.find.matches(j, l)
            }, dir: function (j, l, r) {
                var u = [];
                for (j = j[l]; j && j.nodeType !== 9 && (r === b || j.nodeType !==
            1 || !k(j).is(r)); ) {
                    j.nodeType === 1 && u.push(j);
                    j = j[l]
                }
                return u
            }, nth: function (j, l, r) {
                l = l || 1;
                for (var u = 0; j; j = j[r])
                    if (j.nodeType === 1 && ++u === l)
                        break;
                return j
            }, sibling: function (j, l) {
                for (var r = []; j; j = j.nextSibling)
                    j.nodeType === 1 && j !== l && r.push(j);
                return r
            } 
            });
            var pa = / jQuery\d+="(?:\d+|null)"/g, Ca = /^\s+/, Ma = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig, Fa = /<([\w:]+)/, Ta = /<tbody/i, eb = /<|&#?\w+;/, Wa = /<(?:script|object|embed|option|style)/i, Xa = /checked\s*(?:[^=]|=\s*.checked.)/i, fb =
    /\=([^="'>\s]+\/)>/g, Ia = { option: [1, "<select multiple='multiple'>", "</select>"], legend: [1, "<fieldset>", "</fieldset>"], thead: [1, "<table>", "</table>"], tr: [2, "<table><tbody>", "</tbody></table>"], td: [3, "<table><tbody><tr>", "</tr></tbody></table>"], col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"], area: [1, "<map>", "</map>"], _default: [0, "", ""] };
            Ia.optgroup = Ia.option;
            Ia.tbody = Ia.tfoot = Ia.colgroup = Ia.caption = Ia.thead;
            Ia.th = Ia.td;
            if (!k.support.htmlSerialize)
                Ia._default = [1, "div<div>", "</div>"];
            k.fn.extend({ text: function (j) {
                if (k.isFunction(j))
                    return this.each(function (l) {
                        var r = k(this);
                        r.text(j.call(this, l, r.text()))
                    });
                if (typeof j !== "object" && j !== b)
                    return this.empty().append((this[0] && this[0].ownerDocument || s).createTextNode(j));
                return k.text(this)
            }, wrapAll: function (j) {
                if (k.isFunction(j))
                    return this.each(function (r) {
                        k(this).wrapAll(j.call(this, r))
                    });
                if (this[0]) {
                    var l = k(j, this[0].ownerDocument).eq(0).clone(true);
                    this[0].parentNode && l.insertBefore(this[0]);
                    l.map(function () {
                        for (var r = this; r.firstChild &&
                    r.firstChild.nodeType === 1; )
                            r = r.firstChild;
                        return r
                    }).append(this)
                }
                return this
            }, wrapInner: function (j) {
                if (k.isFunction(j))
                    return this.each(function (l) {
                        k(this).wrapInner(j.call(this, l))
                    });
                return this.each(function () {
                    var l = k(this), r = l.contents();
                    r.length ? r.wrapAll(j) : l.append(j)
                })
            }, wrap: function (j) {
                return this.each(function () {
                    k(this).wrapAll(j)
                })
            }, unwrap: function () {
                return this.parent().each(function () {
                    k.nodeName(this, "body") || k(this).replaceWith(this.childNodes)
                }).end()
            }, append: function () {
                return this.domManip(arguments,
            true, function (j) {
                this.nodeType === 1 && this.appendChild(j)
            })
            }, prepend: function () {
                return this.domManip(arguments, true, function (j) {
                    this.nodeType === 1 && this.insertBefore(j, this.firstChild)
                })
            }, before: function () {
                if (this[0] && this[0].parentNode)
                    return this.domManip(arguments, false, function (l) {
                        this.parentNode.insertBefore(l, this)
                    });
                else if (arguments.length) {
                    var j = k(arguments[0]);
                    j.push.apply(j, this.toArray());
                    return this.pushStack(j, "before", arguments)
                }
            }, after: function () {
                if (this[0] && this[0].parentNode)
                    return this.domManip(arguments,
                false, function (l) {
                    this.parentNode.insertBefore(l, this.nextSibling)
                });
                else if (arguments.length) {
                    var j = this.pushStack(this, "after", arguments);
                    j.push.apply(j, k(arguments[0]).toArray());
                    return j
                }
            }, remove: function (j, l) {
                for (var r = 0, u; (u = this[r]) != null; r++)
                    if (!j || k.filter(j, [u]).length) {
                        if (!l && u.nodeType === 1) {
                            k.cleanData(u.getElementsByTagName("*"));
                            k.cleanData([u])
                        }
                        u.parentNode && u.parentNode.removeChild(u)
                    }
                return this
            }, empty: function () {
                for (var j = 0, l; (l = this[j]) != null; j++)
                    for (l.nodeType === 1 && k.cleanData(l.getElementsByTagName("*")); l.firstChild; )
                        l.removeChild(l.firstChild);
                return this
            }, clone: function (j) {
                var l = this.map(function () {
                    if (!k.support.noCloneEvent && !k.isXMLDoc(this)) {
                        var r = this.outerHTML, u = this.ownerDocument;
                        if (!r) {
                            r = u.createElement("div");
                            r.appendChild(this.cloneNode(true));
                            r = r.innerHTML
                        }
                        return k.clean([r.replace(pa, "").replace(fb, '="$1">').replace(Ca, "")], u)[0]
                    } else
                        return this.cloneNode(true)
                });
                if (j === true) {
                    n(this, l);
                    n(this.find("*"), l.find("*"))
                }
                return l
            }, html: function (j) {
                if (j === b)
                    return this[0] && this[0].nodeType === 1 ? this[0].innerHTML.replace(pa, "") : null;
                else if (typeof j === "string" && !Wa.test(j) && (k.support.leadingWhitespace || !Ca.test(j)) && !Ia[(Fa.exec(j) || ["", ""])[1].toLowerCase()]) {
                    j = j.replace(Ma, "<$1></$2>");
                    try {
                        for (var l = 0, r = this.length; l < r; l++)
                            if (this[l].nodeType === 1) {
                                k.cleanData(this[l].getElementsByTagName("*"));
                                this[l].innerHTML = j
                            }
                    } catch (u) {
                        this.empty().append(j)
                    }
                } else
                    k.isFunction(j) ? this.each(function (x) {
                        var z = k(this);
                        z.html(j.call(this, x, z.html()))
                    }) : this.empty().append(j);
                return this
            }, replaceWith: function (j) {
                if (this[0] && this[0].parentNode) {
                    if (k.isFunction(j))
                        return this.each(function (l) {
                            var r =
                        k(this), u = r.html();
                            r.replaceWith(j.call(this, l, u))
                        });
                    if (typeof j !== "string")
                        j = k(j).detach();
                    return this.each(function () {
                        var l = this.nextSibling, r = this.parentNode;
                        k(this).remove();
                        l ? k(l).before(j) : k(r).append(j)
                    })
                } else
                    return this.pushStack(k(k.isFunction(j) ? j() : j), "replaceWith", j)
            }, detach: function (j) {
                return this.remove(j, true)
            }, domManip: function (j, l, r) {
                var u, x, z = j[0], C = [], E;
                if (!k.support.checkClone && arguments.length === 3 && typeof z === "string" && Xa.test(z))
                    return this.each(function () {
                        k(this).domManip(j,
                    l, r, true)
                    });
                if (k.isFunction(z))
                    return this.each(function (Y) {
                        var ba = k(this);
                        j[0] = z.call(this, Y, l ? ba.html() : b);
                        ba.domManip(j, l, r)
                    });
                if (this[0]) {
                    u = z && z.parentNode;
                    u = k.support.parentNode && u && u.nodeType === 11 && u.childNodes.length === this.length ? { fragment: u} : k.buildFragment(j, this, C);
                    E = u.fragment;
                    if (x = E.childNodes.length === 1 ? E = E.firstChild : E.firstChild) {
                        l = l && k.nodeName(x, "tr");
                        x = 0;
                        for (var I = this.length; x < I; x++)
                            r.call(l ? k.nodeName(this[x], "table") ? this[x].getElementsByTagName("tbody")[0] || this[x].appendChild(this[x].ownerDocument.createElement("tbody")) :
                        this[x] : this[x], x > 0 || u.cacheable || this.length > 1 ? E.cloneNode(true) : E)
                    }
                    C.length && k.each(C, o)
                }
                return this
            } 
            });
            k.buildFragment = function (j, l, r) {
                var u, x, z;
                l = l && l[0] ? l[0].ownerDocument || l[0] : s;
                if (j.length === 1 && typeof j[0] === "string" && j[0].length < 512 && l === s && !Wa.test(j[0]) && (k.support.checkClone || !Xa.test(j[0]))) {
                    x = true;
                    if (z = k.fragments[j[0]])
                        if (z !== 1)
                            u = z
                    }
                    if (!u) {
                        u = l.createDocumentFragment();
                        k.clean(j, l, u, r)
                    }
                    if (x)
                        k.fragments[j[0]] = z ? u : 1;
                    return { fragment: u, cacheable: x }
                };
                k.fragments = {};
                k.each({ appendTo: "append",
                    prependTo: "prepend", insertBefore: "before", insertAfter: "after", replaceAll: "replaceWith"
                }, function (j, l) {
                    k.fn[j] = function (r) {
                        var u = [];
                        r = k(r);
                        var x = this.length === 1 && this[0].parentNode;
                        if (x && x.nodeType === 11 && x.childNodes.length === 1 && r.length === 1) {
                            r[l](this[0]);
                            return this
                        } else {
                            x = 0;
                            for (var z = r.length; x < z; x++) {
                                var C = (x > 0 ? this.clone(true) : this).get();
                                k(r[x])[l](C);
                                u = u.concat(C)
                            }
                            return this.pushStack(u, j, r.selector)
                        }
                    }
                });
                k.extend({ clean: function (j, l, r, u) {
                    l = l || s;
                    if (typeof l.createElement === "undefined")
                        l = l.ownerDocument ||
                l[0] && l[0].ownerDocument || s;
                    for (var x = [], z = 0, C; (C = j[z]) != null; z++) {
                        if (typeof C === "number")
                            C += "";
                        if (C) {
                            if (typeof C === "string" && !eb.test(C))
                                C = l.createTextNode(C);
                            else if (typeof C === "string") {
                                C = C.replace(Ma, "<$1></$2>");
                                var E = (Fa.exec(C) || ["", ""])[1].toLowerCase(), I = Ia[E] || Ia._default, Y = I[0], ba = l.createElement("div");
                                for (ba.innerHTML = I[1] + C + I[2]; Y--; )
                                    ba = ba.lastChild;
                                if (!k.support.tbody) {
                                    Y = Ta.test(C);
                                    E = E === "table" && !Y ? ba.firstChild && ba.firstChild.childNodes : I[1] === "<table>" && !Y ? ba.childNodes : [];
                                    for (I =
                            E.length - 1; I >= 0; --I)
                                        k.nodeName(E[I], "tbody") && !E[I].childNodes.length && E[I].parentNode.removeChild(E[I])
                                }
                                !k.support.leadingWhitespace && Ca.test(C) && ba.insertBefore(l.createTextNode(Ca.exec(C)[0]), ba.firstChild);
                                C = ba.childNodes
                            }
                            if (C.nodeType)
                                x.push(C);
                            else
                                x = k.merge(x, C)
                        }
                    }
                    if (r)
                        for (z = 0; x[z]; z++)
                            if (u && k.nodeName(x[z], "script") && (!x[z].type || x[z].type.toLowerCase() === "text/javascript"))
                                u.push(x[z].parentNode ? x[z].parentNode.removeChild(x[z]) : x[z]);
                            else {
                                x[z].nodeType === 1 && x.splice.apply(x, [z + 1, 0].concat(k.makeArray(x[z].getElementsByTagName("script"))));
                                r.appendChild(x[z])
                            }
                    return x
                }, cleanData: function (j) {
                    for (var l, r, u = k.cache, x = k.event.special, z = k.support.deleteExpando, C = 0, E; (E = j[C]) != null; C++)
                        if (!(E.nodeName && k.noData[E.nodeName.toLowerCase()]))
                            if (r = E[k.expando]) {
                                if ((l = u[r]) && l.events)
                                    for (var I in l.events)
                                        x[I] ? k.event.remove(E, I) : k.removeEvent(E, I, l.handle);
                                if (z)
                                    delete E[k.expando];
                                else
                                    E.removeAttribute && E.removeAttribute(k.expando);
                                delete u[r]
                            }
                } 
                });
                var Ya = /alpha\([^)]*\)/i, gb = /opacity=([^)]*)/, hb = /-([a-z])/ig, ib = /([A-Z])/g, Za = /^-?\d+(?:px)?$/i,
    jb = /^-?\d/, kb = { position: "absolute", visibility: "hidden", display: "block" }, bb = ["Left", "Right"], cb = ["Top", "Bottom"], Pa, lb = s.defaultView && s.defaultView.getComputedStyle, mb = function (j, l) {
        return l.toUpperCase()
    };
                k.fn.css = function (j, l) {
                    if (arguments.length === 2 && l === b)
                        return this;
                    return k.access(this, j, l, true, function (r, u, x) {
                        return x !== b ? k.style(r, u, x) : k.css(r, u)
                    })
                };
                k.extend({ cssHooks: { opacity: { get: function (j, l) {
                    if (l) {
                        var r = Pa(j, "opacity", "opacity");
                        return r === "" ? "1" : r
                    } else
                        return j.style.opacity
                } 
                }
                }, cssNumber: { zIndex: true,
                    fontWeight: true, opacity: true, zoom: true, lineHeight: true
                }, cssProps: { "float": k.support.cssFloat ? "cssFloat" : "styleFloat" }, style: function (j, l, r, u) {
                    if (!(!j || j.nodeType === 3 || j.nodeType === 8 || !j.style)) {
                        var x, z = k.camelCase(l), C = j.style, E = k.cssHooks[z];
                        l = k.cssProps[z] || z;
                        if (r !== b) {
                            if (!(typeof r === "number" && isNaN(r) || r == null)) {
                                if (typeof r === "number" && !k.cssNumber[z])
                                    r += "px";
                                if (!E || !("set" in E) || (r = E.set(j, r)) !== b)
                                    try {
                                        C[l] = r
                                    } catch (I) {
                                    }
                            }
                        } else {
                            if (E && "get" in E && (x = E.get(j, false, u)) !== b)
                                return x;
                            return C[l]
                        }
                    }
                }, css: function (j,
        l, r) {
                    var u, x = k.camelCase(l), z = k.cssHooks[x];
                    l = k.cssProps[x] || x;
                    if (z && "get" in z && (u = z.get(j, true, r)) !== b)
                        return u;
                    else if (Pa)
                        return Pa(j, l, x)
                }, swap: function (j, l, r) {
                    var u = {}, x;
                    for (x in l) {
                        u[x] = j.style[x];
                        j.style[x] = l[x]
                    }
                    r.call(j);
                    for (x in l)
                        j.style[x] = u[x]
                }, camelCase: function (j) {
                    return j.replace(hb, mb)
                } 
                });
                k.curCSS = k.css;
                k.each(["height", "width"], function (j, l) {
                    k.cssHooks[l] = { get: function (r, u, x) {
                        var z;
                        if (u) {
                            if (r.offsetWidth !== 0)
                                z = p(r, l, x);
                            else
                                k.swap(r, kb, function () {
                                    z = p(r, l, x)
                                });
                            return z + "px"
                        }
                    }, set: function (r,
            u) {
                        if (Za.test(u)) {
                            u = parseFloat(u);
                            if (u >= 0)
                                return u + "px"
                        } else
                            return u
                    } 
                    }
                });
                if (!k.support.opacity)
                    k.cssHooks.opacity = { get: function (j, l) {
                        return gb.test((l && j.currentStyle ? j.currentStyle.filter : j.style.filter) || "") ? parseFloat(RegExp.$1) / 100 + "" : l ? "1" : ""
                    }, set: function (j, l) {
                        var r = j.style;
                        r.zoom = 1;
                        var u = k.isNaN(l) ? "" : "alpha(opacity=" + l * 100 + ")", x = r.filter || "";
                        r.filter = Ya.test(x) ? x.replace(Ya, u) : r.filter + " " + u
                    } 
                    };
                if (lb)
                    Pa = function (j, l, r) {
                        var u;
                        r = r.replace(ib, "-$1").toLowerCase();
                        if (!(l = j.ownerDocument.defaultView))
                            return b;
                        if (l = l.getComputedStyle(j, null)) {
                            u = l.getPropertyValue(r);
                            if (u === "" && !k.contains(j.ownerDocument.documentElement, j))
                                u = k.style(j, r)
                        }
                        return u
                    };
                else if (s.documentElement.currentStyle)
                    Pa = function (j, l) {
                        var r, u, x = j.currentStyle && j.currentStyle[l], z = j.style;
                        if (!Za.test(x) && jb.test(x)) {
                            r = z.left;
                            u = j.runtimeStyle.left;
                            j.runtimeStyle.left = j.currentStyle.left;
                            z.left = l === "fontSize" ? "1em" : x || 0;
                            x = z.pixelLeft + "px";
                            z.left = r;
                            j.runtimeStyle.left = u
                        }
                        return x
                    };
                if (k.expr && k.expr.filters) {
                    k.expr.filters.hidden = function (j) {
                        var l =
            j.offsetHeight;
                        return j.offsetWidth === 0 && l === 0 || !k.support.reliableHiddenOffsets && (j.style.display || k.css(j, "display")) === "none"
                    };
                    k.expr.filters.visible = function (j) {
                        return !k.expr.filters.hidden(j)
                    }
                }
                var nb = k.now(), ob = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, pb = /^(?:select|textarea)/i, qb = /^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i, rb = /^(?:GET|HEAD|DELETE)$/, db = /\[\]$/, Oa = /\=\?(&|$)/, Ua = /\?/, sb = /([?&])_=[^&]*/, tb = /^(\w+:)?\/\/([^\/?#]+)/,
    ub = /%20/g, vb = /#.*$/, $a = k.fn.load;
                k.fn.extend({ load: function (j, l, r) {
                    if (typeof j !== "string" && $a)
                        return $a.apply(this, arguments);
                    else if (!this.length)
                        return this;
                    var u = j.indexOf(" ");
                    if (u >= 0) {
                        var x = j.slice(u, j.length);
                        j = j.slice(0, u)
                    }
                    u = "GET";
                    if (l)
                        if (k.isFunction(l)) {
                            r = l;
                            l = null
                        } else if (typeof l === "object") {
                            l = k.param(l, k.ajaxSettings.traditional);
                            u = "POST"
                        }
                    var z = this;
                    k.ajax({ url: j, type: u, dataType: "html", data: l, complete: function (C, E) {
                        if (E === "success" || E === "notmodified")
                            z.html(x ? k("<div>").append(C.responseText.replace(ob,
                        "")).find(x) : C.responseText);
                        r && z.each(r, [C.responseText, E, C])
                    } 
                    });
                    return this
                }, serialize: function () {
                    return k.param(this.serializeArray())
                }, serializeArray: function () {
                    return this.map(function () {
                        return this.elements ? k.makeArray(this.elements) : this
                    }).filter(function () {
                        return this.name && !this.disabled && (this.checked || pb.test(this.nodeName) || qb.test(this.type))
                    }).map(function (j, l) {
                        var r = k(this).val();
                        return r == null ? null : k.isArray(r) ? k.map(r, function (u) {
                            return { name: l.name, value: u }
                        }) : { name: l.name, value: r }
                    }).get()
                } 
                });
                k.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "), function (j, l) {
                    k.fn[l] = function (r) {
                        return this.bind(l, r)
                    }
                });
                k.extend({ get: function (j, l, r, u) {
                    if (k.isFunction(l)) {
                        u = u || r;
                        r = l;
                        l = null
                    }
                    return k.ajax({ type: "GET", url: j, data: l, success: r, dataType: u })
                }, getScript: function (j, l) {
                    return k.get(j, null, l, "script")
                }, getJSON: function (j, l, r) {
                    return k.get(j, l, r, "json")
                }, post: function (j, l, r, u) {
                    if (k.isFunction(l)) {
                        u = u || r;
                        r = l;
                        l = {}
                    }
                    return k.ajax({ type: "POST", url: j, data: l, success: r, dataType: u })
                },
                    ajaxSetup: function (j) {
                        k.extend(k.ajaxSettings, j)
                    }, ajaxSettings: { url: location.href, global: true, type: "GET", contentType: "application/x-www-form-urlencoded", processData: true, async: true, xhr: function () {
                        return new a.XMLHttpRequest
                    }, accepts: { xml: "application/xml, text/xml", html: "text/html", script: "text/javascript, application/javascript", json: "application/json, text/javascript", text: "text/plain", _default: "*/*"}
                    }, ajax: function (j) {
                        var l = k.extend(true, {}, k.ajaxSettings, j), r, u, x, z = l.type.toUpperCase(), C = rb.test(z);
                        l.url = l.url.replace(vb, "");
                        l.context = j && j.context != null ? j.context : l;
                        if (l.data && l.processData && typeof l.data !== "string")
                            l.data = k.param(l.data, l.traditional);
                        if (l.dataType === "jsonp") {
                            if (z === "GET")
                                Oa.test(l.url) || (l.url += (Ua.test(l.url) ? "&" : "?") + (l.jsonp || "callback") + "=?");
                            else if (!l.data || !Oa.test(l.data))
                                l.data = (l.data ? l.data + "&" : "") + (l.jsonp || "callback") + "=?";
                            l.dataType = "json"
                        }
                        if (l.dataType === "json" && (l.data && Oa.test(l.data) || Oa.test(l.url))) {
                            r = l.jsonpCallback || "jsonp" + nb++;
                            if (l.data)
                                l.data = (l.data +
                    "").replace(Oa, "=" + r + "$1");
                            l.url = l.url.replace(Oa, "=" + r + "$1");
                            l.dataType = "script";
                            var E = a[r];
                            a[r] = function (H) {
                                x = H;
                                k.handleSuccess(l, ia, u, x);
                                k.handleComplete(l, ia, u, x);
                                if (k.isFunction(E))
                                    E(H);
                                else {
                                    a[r] = b;
                                    try {
                                        delete a[r]
                                    } catch (O) {
                                    }
                                }
                                ba && ba.removeChild(oa)
                            }
                        }
                        if (l.dataType === "script" && l.cache === null)
                            l.cache = false;
                        if (l.cache === false && z === "GET") {
                            var I = k.now(), Y = l.url.replace(sb, "$1_=" + I);
                            l.url = Y + (Y === l.url ? (Ua.test(l.url) ? "&" : "?") + "_=" + I : "")
                        }
                        if (l.data && z === "GET")
                            l.url += (Ua.test(l.url) ? "&" : "?") + l.data;
                        l.global &&
            k.active++ === 0 && k.event.trigger("ajaxStart");
                        I = (I = tb.exec(l.url)) && (I[1] && I[1] !== location.protocol || I[2] !== location.host);
                        if (l.dataType === "script" && z === "GET" && I) {
                            var ba = s.getElementsByTagName("head")[0] || s.documentElement, oa = s.createElement("script");
                            if (l.scriptCharset)
                                oa.charset = l.scriptCharset;
                            oa.src = l.url;
                            if (!r) {
                                var ta = false;
                                oa.onload = oa.onreadystatechange = function () {
                                    if (!ta && (!this.readyState || this.readyState === "loaded" || this.readyState === "complete")) {
                                        ta = true;
                                        k.handleSuccess(l, ia, u, x);
                                        k.handleComplete(l,
                            ia, u, x);
                                        oa.onload = oa.onreadystatechange = null;
                                        ba && oa.parentNode && ba.removeChild(oa)
                                    }
                                }
                            }
                            ba.insertBefore(oa, ba.firstChild);
                            return b
                        }
                        var za = false, ia = l.xhr();
                        if (ia) {
                            l.username ? ia.open(z, l.url, l.async, l.username, l.password) : ia.open(z, l.url, l.async);
                            try {
                                if (l.data != null && !C || j && j.contentType)
                                    ia.setRequestHeader("Content-Type", l.contentType);
                                if (l.ifModified) {
                                    k.lastModified[l.url] && ia.setRequestHeader("If-Modified-Since", k.lastModified[l.url]);
                                    k.etag[l.url] && ia.setRequestHeader("If-None-Match", k.etag[l.url])
                                }
                                I ||
                    ia.setRequestHeader("X-Requested-With", "XMLHttpRequest");
                                ia.setRequestHeader("Accept", l.dataType && l.accepts[l.dataType] ? l.accepts[l.dataType] + ", */*; q=0.01" : l.accepts._default)
                            } catch (ya) {
                            }
                            if (l.beforeSend && l.beforeSend.call(l.context, ia, l) === false) {
                                l.global && k.active-- === 1 && k.event.trigger("ajaxStop");
                                ia.abort();
                                return false
                            }
                            l.global && k.triggerGlobal(l, "ajaxSend", [ia, l]);
                            var Ga = ia.onreadystatechange = function (H) {
                                if (!ia || ia.readyState === 0 || H === "abort") {
                                    za || k.handleComplete(l, ia, u, x);
                                    za = true;
                                    if (ia)
                                        ia.onreadystatechange =
                            k.noop
                                } else if (!za && ia && (ia.readyState === 4 || H === "timeout")) {
                                    za = true;
                                    ia.onreadystatechange = k.noop;
                                    u = H === "timeout" ? "timeout" : !k.httpSuccess(ia) ? "error" : l.ifModified && k.httpNotModified(ia, l.url) ? "notmodified" : "success";
                                    var O;
                                    if (u === "success")
                                        try {
                                            x = k.httpData(ia, l.dataType, l)
                                        } catch (Q) {
                                            u = "parsererror";
                                            O = Q
                                        }
                                    if (u === "success" || u === "notmodified")
                                        r || k.handleSuccess(l, ia, u, x);
                                    else
                                        k.handleError(l, ia, u, O);
                                    r || k.handleComplete(l, ia, u, x);
                                    H === "timeout" && ia.abort();
                                    if (l.async)
                                        ia = null
                                }
                            };
                            try {
                                var y = ia.abort;
                                ia.abort =
                    function () {
                        ia && y.call && y.call(ia);
                        Ga("abort")
                    }
                            } catch (B) {
                            }
                            l.async && l.timeout > 0 && setTimeout(function () {
                                ia && !za && Ga("timeout")
                            }, l.timeout);
                            try {
                                ia.send(C || l.data == null ? null : l.data)
                            } catch (L) {
                                k.handleError(l, ia, null, L);
                                k.handleComplete(l, ia, u, x)
                            }
                            l.async || Ga();
                            return ia
                        }
                    }, param: function (j, l) {
                        var r = [], u = function (z, C) {
                            C = k.isFunction(C) ? C() : C;
                            r[r.length] = encodeURIComponent(z) + "=" + encodeURIComponent(C)
                        };
                        if (l === b)
                            l = k.ajaxSettings.traditional;
                        if (k.isArray(j) || j.jquery)
                            k.each(j, function () {
                                u(this.name, this.value)
                            });
                        else
                            for (var x in j)
                                m(x, j[x], l, u);
                        return r.join("&").replace(ub, "+")
                    } 
                });
                k.extend({ active: 0, lastModified: {}, etag: {}, handleError: function (j, l, r, u) {
                    j.error && j.error.call(j.context, l, r, u);
                    j.global && k.triggerGlobal(j, "ajaxError", [l, j, u])
                }, handleSuccess: function (j, l, r, u) {
                    j.success && j.success.call(j.context, u, r, l);
                    j.global && k.triggerGlobal(j, "ajaxSuccess", [l, j])
                }, handleComplete: function (j, l, r) {
                    j.complete && j.complete.call(j.context, l, r);
                    j.global && k.triggerGlobal(j, "ajaxComplete", [l, j]);
                    j.global && k.active-- ===
            1 && k.event.trigger("ajaxStop")
                }, triggerGlobal: function (j, l, r) {
                    (j.context && j.context.url == null ? k(j.context) : k.event).trigger(l, r)
                }, httpSuccess: function (j) {
                    try {
                        return !j.status && location.protocol === "file:" || j.status >= 200 && j.status < 300 || j.status === 304 || j.status === 1223
                    } catch (l) {
                    }
                    return false
                }, httpNotModified: function (j, l) {
                    var r = j.getResponseHeader("Last-Modified"), u = j.getResponseHeader("Etag");
                    if (r)
                        k.lastModified[l] = r;
                    if (u)
                        k.etag[l] = u;
                    return j.status === 304
                }, httpData: function (j, l, r) {
                    var u = j.getResponseHeader("content-type") ||
            "", x = l === "xml" || !l && u.indexOf("xml") >= 0;
                    j = x ? j.responseXML : j.responseText;
                    x && j.documentElement.nodeName === "parsererror" && k.error("parsererror");
                    if (r && r.dataFilter)
                        j = r.dataFilter(j, l);
                    if (typeof j === "string")
                        if (l === "json" || !l && u.indexOf("json") >= 0)
                            j = k.parseJSON(j);
                        else if (l === "script" || !l && u.indexOf("javascript") >= 0)
                            k.globalEval(j);
                    return j
                } 
                });
                if (a.ActiveXObject)
                    k.ajaxSettings.xhr = function () {
                        if (a.location.protocol !== "file:")
                            try {
                                return new a.XMLHttpRequest
                            } catch (j) {
                            }
                        try {
                            return new a.ActiveXObject("Microsoft.XMLHTTP")
                        } catch (l) {
                        }
                    };
                k.support.ajax = !!k.ajaxSettings.xhr();
                var Ra = {}, wb = /^(?:toggle|show|hide)$/, xb = /^([+\-]=)?([\d+.\-]+)(.*)$/, Qa, Va = [["height", "marginTop", "marginBottom", "paddingTop", "paddingBottom"], ["width", "marginLeft", "marginRight", "paddingLeft", "paddingRight"], ["opacity"]];
                k.fn.extend({ show: function (j, l, r) {
                    if (j || j === 0)
                        return this.animate(q("show", 3), j, l, r);
                    else {
                        j = 0;
                        for (l = this.length; j < l; j++) {
                            if (!k.data(this[j], "olddisplay") && this[j].style.display === "none")
                                this[j].style.display = "";
                            this[j].style.display === "" && k.css(this[j],
                    "display") === "none" && k.data(this[j], "olddisplay", v(this[j].nodeName))
                        }
                        for (j = 0; j < l; j++)
                            this[j].style.display = k.data(this[j], "olddisplay") || "";
                        return this
                    }
                }, hide: function (j, l, r) {
                    if (j || j === 0)
                        return this.animate(q("hide", 3), j, l, r);
                    else {
                        j = 0;
                        for (l = this.length; j < l; j++) {
                            r = k.css(this[j], "display");
                            r !== "none" && k.data(this[j], "olddisplay", r)
                        }
                        for (j = 0; j < l; j++)
                            this[j].style.display = "none";
                        return this
                    }
                }, _toggle: k.fn.toggle, toggle: function (j, l, r) {
                    var u = typeof j === "boolean";
                    if (k.isFunction(j) && k.isFunction(l))
                        this._toggle.apply(this,
                arguments);
                    else
                        j == null || u ? this.each(function () {
                            var x = u ? j : k(this).is(":hidden");
                            k(this)[x ? "show" : "hide"]()
                        }) : this.animate(q("toggle", 3), j, l, r);
                    return this
                }, fadeTo: function (j, l, r, u) {
                    return this.filter(":hidden").css("opacity", 0).show().end().animate({ opacity: l }, j, r, u)
                }, animate: function (j, l, r, u) {
                    var x = k.speed(l, r, u);
                    if (k.isEmptyObject(j))
                        return this.each(x.complete);
                    return this[x.queue === false ? "each" : "queue"](function () {
                        var z = k.extend({}, x), C, E = this.nodeType === 1, I = E && k(this).is(":hidden"), Y = this;
                        for (C in j) {
                            var ba =
                    k.camelCase(C);
                            if (C !== ba) {
                                j[ba] = j[C];
                                delete j[C];
                                C = ba
                            }
                            if (j[C] === "hide" && I || j[C] === "show" && !I)
                                return z.complete.call(this);
                            if (E && (C === "height" || C === "width")) {
                                z.overflow = [this.style.overflow, this.style.overflowX, this.style.overflowY];
                                if (k.css(this, "display") === "inline" && k.css(this, "float") === "none")
                                    if (k.support.inlineBlockNeedsLayout)
                                        if (v(this.nodeName) === "inline")
                                            this.style.display = "inline-block";
                                        else {
                                            this.style.display = "inline";
                                            this.style.zoom = 1
                                        }
                                    else
                                        this.style.display = "inline-block"
                                }
                                if (k.isArray(j[C])) {
                                    (z.specialEasing =
                        z.specialEasing || {})[C] = j[C][1];
                                    j[C] = j[C][0]
                                }
                            }
                            if (z.overflow != null)
                                this.style.overflow = "hidden";
                            z.curAnim = k.extend({}, j);
                            k.each(j, function (oa, ta) {
                                var za = new k.fx(Y, z, oa);
                                if (wb.test(ta))
                                    za[ta === "toggle" ? I ? "show" : "hide" : ta](j);
                                else {
                                    var ia = xb.exec(ta), ya = za.cur(true) || 0;
                                    if (ia) {
                                        var Ga = parseFloat(ia[2]), y = ia[3] || "px";
                                        if (y !== "px") {
                                            k.style(Y, oa, (Ga || 1) + y);
                                            ya *= (Ga || 1) / za.cur(true);
                                            k.style(Y, oa, ya + y)
                                        }
                                        if (ia[1])
                                            Ga = (ia[1] === "-=" ? -1 : 1) * Ga + ya;
                                        za.custom(ya, Ga, y)
                                    } else
                                        za.custom(ya, ta, "")
                                }
                            });
                            return true
                        })
                    }, stop: function (j,
        l) {
                        var r = k.timers;
                        j && this.queue([]);
                        this.each(function () {
                            for (var u = r.length - 1; u >= 0; u--)
                                if (r[u].elem === this) {
                                    if (l)
                                        r[u](true);
                                    r.splice(u, 1)
                                }
                        });
                        l || this.dequeue();
                        return this
                    } 
                });
                k.each({ slideDown: q("show", 1), slideUp: q("hide", 1), slideToggle: q("toggle", 1), fadeIn: { opacity: "show" }, fadeOut: { opacity: "hide"} }, function (j, l) {
                    k.fn[j] = function (r, u, x) {
                        return this.animate(l, r, u, x)
                    }
                });
                k.extend({ speed: function (j, l, r) {
                    var u = j && typeof j === "object" ? k.extend({}, j) : { complete: r || !r && l || k.isFunction(j) && j, duration: j, easing: r &&
                l || l && !k.isFunction(l) && l
                    };
                    u.duration = k.fx.off ? 0 : typeof u.duration === "number" ? u.duration : u.duration in k.fx.speeds ? k.fx.speeds[u.duration] : k.fx.speeds._default;
                    u.old = u.complete;
                    u.complete = function () {
                        u.queue !== false && k(this).dequeue();
                        k.isFunction(u.old) && u.old.call(this)
                    };
                    return u
                }, easing: { linear: function (j, l, r, u) {
                    return r + u * j
                }, swing: function (j, l, r, u) {
                    return (-Math.cos(j * Math.PI) / 2 + 0.5) * u + r
                } 
                }, timers: [], fx: function (j, l, r) {
                    this.options = l;
                    this.elem = j;
                    this.prop = r;
                    if (!l.orig)
                        l.orig = {}
                } 
                });
                k.fx.prototype =
    { update: function () {
        this.options.step && this.options.step.call(this.elem, this.now, this);
        (k.fx.step[this.prop] || k.fx.step._default)(this)
    }, cur: function () {
        if (this.elem[this.prop] != null && (!this.elem.style || this.elem.style[this.prop] == null))
            return this.elem[this.prop];
        var j = parseFloat(k.css(this.elem, this.prop));
        return j && j > -1E4 ? j : 0
    }, custom: function (j, l, r) {
        function u(z) {
            return x.step(z)
        }
        this.startTime = k.now();
        this.start = j;
        this.end = l;
        this.unit = r || this.unit || "px";
        this.now = this.start;
        this.pos = this.state = 0;
        var x = this;
        j = k.fx;
        u.elem = this.elem;
        if (u() && k.timers.push(u) && !Qa)
            Qa = setInterval(j.tick, j.interval)
    }, show: function () {
        this.options.orig[this.prop] = k.style(this.elem, this.prop);
        this.options.show = true;
        this.custom(this.prop === "width" || this.prop === "height" ? 1 : 0, this.cur());
        k(this.elem).show()
    }, hide: function () {
        this.options.orig[this.prop] = k.style(this.elem, this.prop);
        this.options.hide = true;
        this.custom(this.cur(), 0)
    }, step: function (j) {
        var l = k.now(), r = true;
        if (j || l >= this.options.duration + this.startTime) {
            this.now =
                this.end;
            this.pos = this.state = 1;
            this.update();
            this.options.curAnim[this.prop] = true;
            for (var u in this.options.curAnim)
                if (this.options.curAnim[u] !== true)
                    r = false;
            if (r) {
                if (this.options.overflow != null && !k.support.shrinkWrapBlocks) {
                    var x = this.elem, z = this.options;
                    k.each(["", "X", "Y"], function (E, I) {
                        x.style["overflow" + I] = z.overflow[E]
                    })
                }
                this.options.hide && k(this.elem).hide();
                if (this.options.hide || this.options.show)
                    for (var C in this.options.curAnim)
                        k.style(this.elem, C, this.options.orig[C]);
                this.options.complete.call(this.elem)
            }
            return false
        } else {
            j =
                l - this.startTime;
            this.state = j / this.options.duration;
            l = this.options.easing || (k.easing.swing ? "swing" : "linear");
            this.pos = k.easing[this.options.specialEasing && this.options.specialEasing[this.prop] || l](this.state, j, 0, 1, this.options.duration);
            this.now = this.start + (this.end - this.start) * this.pos;
            this.update()
        }
        return true
    } 
    };
                k.extend(k.fx, { tick: function () {
                    for (var j = k.timers, l = 0; l < j.length; l++)
                        j[l]() || j.splice(l--, 1);
                    j.length || k.fx.stop()
                }, interval: 13, stop: function () {
                    clearInterval(Qa);
                    Qa = null
                }, speeds: { slow: 600,
                    fast: 200, _default: 400
                }, step: { opacity: function (j) {
                    k.style(j.elem, "opacity", j.now)
                }, _default: function (j) {
                    if (j.elem.style && j.elem.style[j.prop] != null)
                        j.elem.style[j.prop] = (j.prop === "width" || j.prop === "height" ? Math.max(0, j.now) : j.now) + j.unit;
                    else
                        j.elem[j.prop] = j.now
                } 
                }
                });
                if (k.expr && k.expr.filters)
                    k.expr.filters.animated = function (j) {
                        return k.grep(k.timers, function (l) {
                            return j === l.elem
                        }).length
                    };
                var yb = /^t(?:able|d|h)$/i, ab = /^(?:body|html)$/i;
                k.fn.offset = "getBoundingClientRect" in s.documentElement ? function (j) {
                    var l =
        this[0], r;
                    if (j)
                        return this.each(function (C) {
                            k.offset.setOffset(this, j, C)
                        });
                    if (!l || !l.ownerDocument)
                        return null;
                    if (l === l.ownerDocument.body)
                        return k.offset.bodyOffset(l);
                    try {
                        r = l.getBoundingClientRect()
                    } catch (u) {
                    }
                    var x = l.ownerDocument, z = x.documentElement;
                    if (!r || !k.contains(z, l))
                        return r || { top: 0, left: 0 };
                    l = x.body;
                    x = w(x);
                    return { top: r.top + (x.pageYOffset || k.support.boxModel && z.scrollTop || l.scrollTop) - (z.clientTop || l.clientTop || 0), left: r.left + (x.pageXOffset || k.support.boxModel && z.scrollLeft || l.scrollLeft) -
            (z.clientLeft || l.clientLeft || 0)
                    }
                } : function (j) {
                    var l = this[0];
                    if (j)
                        return this.each(function (Y) {
                            k.offset.setOffset(this, j, Y)
                        });
                    if (!l || !l.ownerDocument)
                        return null;
                    if (l === l.ownerDocument.body)
                        return k.offset.bodyOffset(l);
                    k.offset.initialize();
                    var r = l.offsetParent, u = l.ownerDocument, x, z = u.documentElement, C = u.body;
                    x = (u = u.defaultView) ? u.getComputedStyle(l, null) : l.currentStyle;
                    for (var E = l.offsetTop, I = l.offsetLeft; (l = l.parentNode) && l !== C && l !== z; ) {
                        if (k.offset.supportsFixedPosition && x.position === "fixed")
                            break;
                        x = u ? u.getComputedStyle(l, null) : l.currentStyle;
                        E -= l.scrollTop;
                        I -= l.scrollLeft;
                        if (l === r) {
                            E += l.offsetTop;
                            I += l.offsetLeft;
                            if (k.offset.doesNotAddBorder && !(k.offset.doesAddBorderForTableAndCells && yb.test(l.nodeName))) {
                                E += parseFloat(x.borderTopWidth) || 0;
                                I += parseFloat(x.borderLeftWidth) || 0
                            }
                            r = l.offsetParent
                        }
                        if (k.offset.subtractsBorderForOverflowNotVisible && x.overflow !== "visible") {
                            E += parseFloat(x.borderTopWidth) || 0;
                            I += parseFloat(x.borderLeftWidth) || 0
                        }
                    }
                    if (x.position === "relative" || x.position === "static") {
                        E += C.offsetTop;
                        I += C.offsetLeft
                    }
                    if (k.offset.supportsFixedPosition && x.position === "fixed") {
                        E += Math.max(z.scrollTop, C.scrollTop);
                        I += Math.max(z.scrollLeft, C.scrollLeft)
                    }
                    return { top: E, left: I }
                };
                k.offset = { initialize: function () {
                    var j = s.body, l = s.createElement("div"), r, u, x, z = parseFloat(k.css(j, "marginTop")) || 0;
                    k.extend(l.style, { position: "absolute", top: 0, left: 0, margin: 0, border: 0, width: "1px", height: "1px", visibility: "hidden" });
                    l.innerHTML = "<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
                    j.insertBefore(l, j.firstChild);
                    r = l.firstChild;
                    u = r.firstChild;
                    x = r.nextSibling.firstChild.firstChild;
                    this.doesNotAddBorder = u.offsetTop !== 5;
                    this.doesAddBorderForTableAndCells = x.offsetTop === 5;
                    u.style.position = "fixed";
                    u.style.top = "20px";
                    this.supportsFixedPosition = u.offsetTop === 20 || u.offsetTop === 15;
                    u.style.position = u.style.top = "";
                    r.style.overflow = "hidden";
                    r.style.position = "relative";
                    this.subtractsBorderForOverflowNotVisible = u.offsetTop === -5;
                    this.doesNotIncludeMarginInBodyOffset = j.offsetTop !== z;
                    j.removeChild(l);
                    k.offset.initialize = k.noop
                }, bodyOffset: function (j) {
                    var l = j.offsetTop, r = j.offsetLeft;
                    k.offset.initialize();
                    if (k.offset.doesNotIncludeMarginInBodyOffset) {
                        l += parseFloat(k.css(j, "marginTop")) || 0;
                        r += parseFloat(k.css(j, "marginLeft")) || 0
                    }
                    return { top: l, left: r }
                }, setOffset: function (j, l, r) {
                    var u = k.css(j, "position");
                    if (u === "static")
                        j.style.position = "relative";
                    var x = k(j), z = x.offset(), C = k.css(j, "top"), E = k.css(j, "left"), I = u === "absolute" && k.inArray("auto", [C, E]) > -1;
                    u = {};
                    var Y = {};
                    if (I)
                        Y = x.position();
                    C = I ? Y.top : parseInt(C,
            10) || 0;
                    E = I ? Y.left : parseInt(E, 10) || 0;
                    if (k.isFunction(l))
                        l = l.call(j, r, z);
                    if (l.top != null)
                        u.top = l.top - z.top + C;
                    if (l.left != null)
                        u.left = l.left - z.left + E;
                    "using" in l ? l.using.call(j, u) : x.css(u)
                } 
                };
                k.fn.extend({ position: function () {
                    if (!this[0])
                        return null;
                    var j = this[0], l = this.offsetParent(), r = this.offset(), u = ab.test(l[0].nodeName) ? { top: 0, left: 0} : l.offset();
                    r.top -= parseFloat(k.css(j, "marginTop")) || 0;
                    r.left -= parseFloat(k.css(j, "marginLeft")) || 0;
                    u.top += parseFloat(k.css(l[0], "borderTopWidth")) || 0;
                    u.left += parseFloat(k.css(l[0],
            "borderLeftWidth")) || 0;
                    return { top: r.top - u.top, left: r.left - u.left }
                }, offsetParent: function () {
                    return this.map(function () {
                        for (var j = this.offsetParent || s.body; j && !ab.test(j.nodeName) && k.css(j, "position") === "static"; )
                            j = j.offsetParent;
                        return j
                    })
                } 
                });
                k.each(["Left", "Top"], function (j, l) {
                    var r = "scroll" + l;
                    k.fn[r] = function (u) {
                        var x = this[0], z;
                        if (!x)
                            return null;
                        if (u !== b)
                            return this.each(function () {
                                if (z = w(this))
                                    z.scrollTo(!j ? u : k(z).scrollLeft(), j ? u : k(z).scrollTop());
                                else
                                    this[r] = u
                            });
                        else
                            return (z = w(x)) ? "pageXOffset" in
                z ? z[j ? "pageYOffset" : "pageXOffset"] : k.support.boxModel && z.document.documentElement[r] || z.document.body[r] : x[r]
                    }
                });
                k.each(["Height", "Width"], function (j, l) {
                    var r = l.toLowerCase();
                    k.fn["inner" + l] = function () {
                        return this[0] ? parseFloat(k.css(this[0], r, "padding")) : null
                    };
                    k.fn["outer" + l] = function (u) {
                        return this[0] ? parseFloat(k.css(this[0], r, u ? "margin" : "border")) : null
                    };
                    k.fn[r] = function (u) {
                        var x = this[0];
                        if (!x)
                            return u == null ? null : this;
                        if (k.isFunction(u))
                            return this.each(function (z) {
                                var C = k(this);
                                C[r](u.call(this,
                    z, C[r]()))
                            });
                        return k.isWindow(x) ? x.document.compatMode === "CSS1Compat" && x.document.documentElement["client" + l] || x.document.body["client" + l] : x.nodeType === 9 ? Math.max(x.documentElement["client" + l], x.body["scroll" + l], x.documentElement["scroll" + l], x.body["offset" + l], x.documentElement["offset" + l]) : u === b ? parseFloat(k.css(x, r)) : this.css(r, typeof u === "string" ? u : u + "px")
                    }
                })
            })(window);
            var FlashDetect = new function () {
                var a = this;
                a.installed = false;
                a.raw = "";
                a.major = -1;
                a.minor = -1;
                a.revision = -1;
                a.revisionStr = "";
                var b = [{ name: "ShockwaveFlash.ShockwaveFlash.7", version: function (e) {
                    return d(e)
                } 
                }, { name: "ShockwaveFlash.ShockwaveFlash.6", version: function (e) {
                    var f = "6,0,21";
                    try {
                        e.AllowScriptAccess = "always";
                        f = d(e)
                    } catch (c) {
                    }
                    return f
                } 
                }, { name: "ShockwaveFlash.ShockwaveFlash", version: function (e) {
                    return d(e)
                } 
                }], d = function (e) {
                    var f = -1;
                    try {
                        f = e.GetVariable("$version")
                    } catch (c) {
                    }
                    return f
                };
                a.majorAtLeast =
    function (e) {
        return a.major >= e
    };
                a.minorAtLeast = function (e) {
                    return a.minor >= e
                };
                a.revisionAtLeast = function (e) {
                    return a.revision >= e
                };
                a.versionAtLeast = function () {
                    var e = [a.major, a.minor, a.revision], f = Math.min(e.length, arguments.length);
                    for (i = 0; i < f; i++)
                        if (e[i] >= arguments[i]) {
                            if (!(i + 1 < f && e[i] == arguments[i]))
                                return true
                        } else
                            return false
                    };
                    a.FlashDetect = function () {
                        if (navigator.plugins && navigator.plugins.length > 0) {
                            var e = navigator.mimeTypes;
                            if (e && e["application/x-shockwave-flash"] && e["application/x-shockwave-flash"].enabledPlugin &&
            e["application/x-shockwave-flash"].enabledPlugin.description) {
                                e = e["application/x-shockwave-flash"].enabledPlugin.description;
                                var f;
                                f = e.split(/ +/);
                                var c = f[2].split(/\./);
                                f = f[3];
                                f = { raw: e, major: parseInt(c[0], 10), minor: parseInt(c[1], 10), revisionStr: f, revision: parseInt(f.replace(/[a-zA-Z]/g, ""), 10) || a.revision };
                                a.raw = f.raw;
                                a.major = f.major;
                                a.minor = f.minor;
                                a.revisionStr = f.revisionStr;
                                a.revision = f.revision;
                                a.installed = true
                            }
                        } else if (navigator.appVersion.indexOf("Mac") == -1 && window.execScript) {
                            e = -1;
                            for (c = 0; c <
            b.length && e == -1; c++) {
                                f = -1;
                                try {
                                    f = new ActiveXObject(b[c].name)
                                } catch (g) {
                                    f = { activeXError: true }
                                }
                                if (!f.activeXError) {
                                    a.installed = true;
                                    e = b[c].version(f);
                                    if (e != -1) {
                                        f = e;
                                        var h = f.split(",");
                                        f = { raw: f, major: parseInt(h[0].split(" ")[1], 10), minor: parseInt(h[1], 10), revision: parseInt(h[2], 10), revisionStr: h[2] };
                                        a.raw = f.raw;
                                        a.major = f.major;
                                        a.minor = f.minor;
                                        a.revision = f.revision;
                                        a.revisionStr = f.revisionStr
                                    }
                                }
                            }
                        }
                    } ()
                };
                FlashDetect.JS_RELEASE = "1.0.4";
                function getJS(a, b) {
                    var d = document, e = d.getElementsByTagName("head")[0], f = d.createElement("script"), c = 0;
                    f.src = a;
                    f.onload = f.onreadystatechange = function () {
                        if (!c && (!this.readyState || this.readyState == "loaded" || this.readyState == "complete")) {
                            c = 1;
                            typeof b === "function" && b();
                            f.onload = f.onreadystatechange = null;
                            e.removeChild(f)
                        }
                    };
                    e.appendChild(f)
                }
                (function (a) {
                    function b(c, g) {
                        return g.toUpperCase()
                    }
                    function d(c) {
                        var g;
                        g = (g = c.prop.replace(f, b)) ? g.charAt(0).toUpperCase() + g.substr(1) : "";
                        g = { webkit: { style: "-webkit-", js_style: "webkit" + g, trans_evt: "webkitTransitionEnd", anim_evt: "webkitAnimationEnd" }, moz: { style: "-moz-", js_style: "Moz" + g, trans_evt: "transitionend", anim_evt: "animationend" }, o: { style: "-o-", js_style: "O" + g, trans_evt: "OTransitionEnd", anim_evt: "OAnimationEnd" }, ms: { style: "-ms-", js_style: "Ms" + g, trans_evt: "MsTransitionEnd", anim_evt: "MsAnimationEnd"} };
                        var h, n, o, p = null;
                        try {
                            for (var m in g) {
                                n = g[m].style;
                                o = g[m].js_style;
                                h = document.createElement("div");
                                h.setAttribute("style", n + c.prop + ":" + c.val + ";");
                                if (o in h.style) {
                                    p = g[m];
                                    break
                                }
                                h = null
                            }
                        } catch (q) {
                        }
                        return p
                    }
                    function e(c, g) {
                        g = g || "";
                        var h;
                        if (!document.getElementById("app_stylesheet")) {
                            h = document.createElement("style");
                            h.id = "app_stylesheet";
                            h.type = "text/css";
                            document.getElementsByTagName("head")[0].appendChild(h)
                        }
                        (h = document.getElementById("app_stylesheet").sheet) || (h = document.styleSheets[document.styleSheets.length -
        1]);
                        if (c)
                            for (var n in c) {
                                var o = "", p = "", m;
                                if (typeof c[n] === "object") {
                                    m = c[n];
                                    for (var q in m) {
                                        p = m[q];
                                        p = p.replace(/_vendor_/ig, g);
                                        q = q.replace(/_vendor_/ig, g);
                                        o += q + ": " + p + "; "
                                    }
                                } else {
                                    p = c[n];
                                    p = p.replace(/_vendor_/ig, g);
                                    o += p
                                }
                                n = n.replace(/_vendor_/ig, g);
                                try {
                                    if (h.insertRule)
                                        h.insertRule(n + " {" + o + "}", h.cssRules.length);
                                    else
                                        h.addRule && h.addRule(n, o, -1)
                                } catch (v) {
                                }
                            }
                    }
                    a.JSS = { g: {}, test: d, css: e, cssIf: function (c, g, h) {
                        h = c.else_css || h || "css" in c && g;
                        g = c.css || g;
                        if (!c.prop || !c.val || !g)
                            return null;
                        if (c = d(c))
                            e(g, c.style);
                        else
                            h && e(h);
                        return c
                    } 
                    };
                    var f = /-([a-z])/ig
                })(this);
                var hexcase = 0, b64pad = "";
                function hex_md5(a) {
                    return rstr2hex(rstr_md5(str2rstr_utf8(a)))
                }
                function b64_md5(a) {
                    return rstr2b64(rstr_md5(str2rstr_utf8(a)))
                }
                function any_md5(a, b) {
                    return rstr2any(rstr_md5(str2rstr_utf8(a)), b)
                }
                function hex_hmac_md5(a, b) {
                    return rstr2hex(rstr_hmac_md5(str2rstr_utf8(a), str2rstr_utf8(b)))
                }
                function b64_hmac_md5(a, b) {
                    return rstr2b64(rstr_hmac_md5(str2rstr_utf8(a), str2rstr_utf8(b)))
                }
                function any_hmac_md5(a, b, d) {
                    return rstr2any(rstr_hmac_md5(str2rstr_utf8(a), str2rstr_utf8(b)), d)
                }
                function md5_vm_test() {
                    return hex_md5("abc").toLowerCase() == "900150983cd24fb0d6963f7d28e17f72"
                }
                function rstr_md5(a) {
                    return binl2rstr(binl_md5(rstr2binl(a), a.length * 8))
                }
                function rstr_hmac_md5(a, b) {
                    var d = rstr2binl(a);
                    if (d.length > 16)
                        d = binl_md5(d, a.length * 8);
                    for (var e = Array(16), f = Array(16), c = 0; c < 16; c++) {
                        e[c] = d[c] ^ 909522486;
                        f[c] = d[c] ^ 1549556828
                    }
                    d = binl_md5(e.concat(rstr2binl(b)), 512 + b.length * 8);
                    return binl2rstr(binl_md5(f.concat(d), 640))
                }
                function rstr2hex(a) {
                    for (var b = hexcase ? "0123456789ABCDEF" : "0123456789abcdef", d = "", e, f = 0; f < a.length; f++) {
                        e = a.charCodeAt(f);
                        d += b.charAt(e >>> 4 & 15) + b.charAt(e & 15)
                    }
                    return d
                }
                function rstr2b64(a) {
                    for (var b = "", d = a.length, e = 0; e < d; e += 3)
                        for (var f = a.charCodeAt(e) << 16 | (e + 1 < d ? a.charCodeAt(e + 1) << 8 : 0) | (e + 2 < d ? a.charCodeAt(e + 2) : 0), c = 0; c < 4; c++)
                            b += e * 8 + c * 6 > a.length * 8 ? b64pad : "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f >>> 6 * (3 - c) & 63);
                    return b
                }
                function rstr2any(a, b) {
                    var d = b.length, e, f, c, g, h, n = Array(Math.ceil(a.length / 2));
                    for (e = 0; e < n.length; e++)
                        n[e] = a.charCodeAt(e * 2) << 8 | a.charCodeAt(e * 2 + 1);
                    var o = Math.ceil(a.length * 8 / (Math.log(b.length) / Math.log(2))), p = Array(o);
                    for (f = 0; f < o; f++) {
                        h = [];
                        for (e = g = 0; e < n.length; e++) {
                            g = (g << 16) + n[e];
                            c = Math.floor(g / d);
                            g -= c * d;
                            if (h.length > 0 || c > 0)
                                h[h.length] = c
                        }
                        p[f] = g;
                        n = h
                    }
                    d = "";
                    for (e = p.length - 1; e >= 0; e--)
                        d += b.charAt(p[e]);
                    return d
                }
                function str2rstr_utf8(a) {
                    for (var b = "", d = -1, e, f; ++d < a.length; ) {
                        e = a.charCodeAt(d);
                        f = d + 1 < a.length ? a.charCodeAt(d + 1) : 0;
                        if (55296 <= e && e <= 56319 && 56320 <= f && f <= 57343) {
                            e = 65536 + ((e & 1023) << 10) + (f & 1023);
                            d++
                        }
                        if (e <= 127)
                            b += String.fromCharCode(e);
                        else if (e <= 2047)
                            b += String.fromCharCode(192 | e >>> 6 & 31, 128 | e & 63);
                        else if (e <= 65535)
                            b += String.fromCharCode(224 | e >>> 12 & 15, 128 | e >>> 6 & 63, 128 | e & 63);
                        else if (e <= 2097151)
                            b += String.fromCharCode(240 | e >>> 18 & 7, 128 | e >>> 12 & 63, 128 | e >>> 6 & 63, 128 | e & 63)
                    }
                    return b
                }
                function str2rstr_utf16le(a) {
                    for (var b = "", d = 0; d < a.length; d++)
                        b += String.fromCharCode(a.charCodeAt(d) & 255, a.charCodeAt(d) >>> 8 & 255);
                    return b
                }
                function str2rstr_utf16be(a) {
                    for (var b = "", d = 0; d < a.length; d++)
                        b += String.fromCharCode(a.charCodeAt(d) >>> 8 & 255, a.charCodeAt(d) & 255);
                    return b
                }
                function rstr2binl(a) {
                    for (var b = Array(a.length >> 2), d = 0; d < b.length; d++)
                        b[d] = 0;
                    for (d = 0; d < a.length * 8; d += 8)
                        b[d >> 5] |= (a.charCodeAt(d / 8) & 255) << d % 32;
                    return b
                }
                function binl2rstr(a) {
                    for (var b = "", d = 0; d < a.length * 32; d += 8)
                        b += String.fromCharCode(a[d >> 5] >>> d % 32 & 255);
                    return b
                }
                function binl_md5(a, b) {
                    a[b >> 5] |= 128 << b % 32;
                    a[(b + 64 >>> 9 << 4) + 14] = b;
                    for (var d = 1732584193, e = -271733879, f = -1732584194, c = 271733878, g = 0; g < a.length; g += 16) {
                        var h = d, n = e, o = f, p = c;
                        d = md5_ff(d, e, f, c, a[g + 0], 7, -680876936);
                        c = md5_ff(c, d, e, f, a[g + 1], 12, -389564586);
                        f = md5_ff(f, c, d, e, a[g + 2], 17, 606105819);
                        e = md5_ff(e, f, c, d, a[g + 3], 22, -1044525330);
                        d = md5_ff(d, e, f, c, a[g + 4], 7, -176418897);
                        c = md5_ff(c, d, e, f, a[g + 5], 12, 1200080426);
                        f = md5_ff(f, c, d, e, a[g + 6], 17, -1473231341);
                        e = md5_ff(e, f, c, d, a[g + 7], 22, -45705983);
                        d = md5_ff(d, e, f, c, a[g + 8], 7,
        1770035416);
                        c = md5_ff(c, d, e, f, a[g + 9], 12, -1958414417);
                        f = md5_ff(f, c, d, e, a[g + 10], 17, -42063);
                        e = md5_ff(e, f, c, d, a[g + 11], 22, -1990404162);
                        d = md5_ff(d, e, f, c, a[g + 12], 7, 1804603682);
                        c = md5_ff(c, d, e, f, a[g + 13], 12, -40341101);
                        f = md5_ff(f, c, d, e, a[g + 14], 17, -1502002290);
                        e = md5_ff(e, f, c, d, a[g + 15], 22, 1236535329);
                        d = md5_gg(d, e, f, c, a[g + 1], 5, -165796510);
                        c = md5_gg(c, d, e, f, a[g + 6], 9, -1069501632);
                        f = md5_gg(f, c, d, e, a[g + 11], 14, 643717713);
                        e = md5_gg(e, f, c, d, a[g + 0], 20, -373897302);
                        d = md5_gg(d, e, f, c, a[g + 5], 5, -701558691);
                        c = md5_gg(c, d, e, f, a[g +
        10], 9, 38016083);
                        f = md5_gg(f, c, d, e, a[g + 15], 14, -660478335);
                        e = md5_gg(e, f, c, d, a[g + 4], 20, -405537848);
                        d = md5_gg(d, e, f, c, a[g + 9], 5, 568446438);
                        c = md5_gg(c, d, e, f, a[g + 14], 9, -1019803690);
                        f = md5_gg(f, c, d, e, a[g + 3], 14, -187363961);
                        e = md5_gg(e, f, c, d, a[g + 8], 20, 1163531501);
                        d = md5_gg(d, e, f, c, a[g + 13], 5, -1444681467);
                        c = md5_gg(c, d, e, f, a[g + 2], 9, -51403784);
                        f = md5_gg(f, c, d, e, a[g + 7], 14, 1735328473);
                        e = md5_gg(e, f, c, d, a[g + 12], 20, -1926607734);
                        d = md5_hh(d, e, f, c, a[g + 5], 4, -378558);
                        c = md5_hh(c, d, e, f, a[g + 8], 11, -2022574463);
                        f = md5_hh(f, c, d, e, a[g +
        11], 16, 1839030562);
                        e = md5_hh(e, f, c, d, a[g + 14], 23, -35309556);
                        d = md5_hh(d, e, f, c, a[g + 1], 4, -1530992060);
                        c = md5_hh(c, d, e, f, a[g + 4], 11, 1272893353);
                        f = md5_hh(f, c, d, e, a[g + 7], 16, -155497632);
                        e = md5_hh(e, f, c, d, a[g + 10], 23, -1094730640);
                        d = md5_hh(d, e, f, c, a[g + 13], 4, 681279174);
                        c = md5_hh(c, d, e, f, a[g + 0], 11, -358537222);
                        f = md5_hh(f, c, d, e, a[g + 3], 16, -722521979);
                        e = md5_hh(e, f, c, d, a[g + 6], 23, 76029189);
                        d = md5_hh(d, e, f, c, a[g + 9], 4, -640364487);
                        c = md5_hh(c, d, e, f, a[g + 12], 11, -421815835);
                        f = md5_hh(f, c, d, e, a[g + 15], 16, 530742520);
                        e = md5_hh(e, f, c,
        d, a[g + 2], 23, -995338651);
                        d = md5_ii(d, e, f, c, a[g + 0], 6, -198630844);
                        c = md5_ii(c, d, e, f, a[g + 7], 10, 1126891415);
                        f = md5_ii(f, c, d, e, a[g + 14], 15, -1416354905);
                        e = md5_ii(e, f, c, d, a[g + 5], 21, -57434055);
                        d = md5_ii(d, e, f, c, a[g + 12], 6, 1700485571);
                        c = md5_ii(c, d, e, f, a[g + 3], 10, -1894986606);
                        f = md5_ii(f, c, d, e, a[g + 10], 15, -1051523);
                        e = md5_ii(e, f, c, d, a[g + 1], 21, -2054922799);
                        d = md5_ii(d, e, f, c, a[g + 8], 6, 1873313359);
                        c = md5_ii(c, d, e, f, a[g + 15], 10, -30611744);
                        f = md5_ii(f, c, d, e, a[g + 6], 15, -1560198380);
                        e = md5_ii(e, f, c, d, a[g + 13], 21, 1309151649);
                        d = md5_ii(d,
        e, f, c, a[g + 4], 6, -145523070);
                        c = md5_ii(c, d, e, f, a[g + 11], 10, -1120210379);
                        f = md5_ii(f, c, d, e, a[g + 2], 15, 718787259);
                        e = md5_ii(e, f, c, d, a[g + 9], 21, -343485551);
                        d = safe_add(d, h);
                        e = safe_add(e, n);
                        f = safe_add(f, o);
                        c = safe_add(c, p)
                    }
                    return [d, e, f, c]
                }
                function md5_cmn(a, b, d, e, f, c) {
                    return safe_add(bit_rol(safe_add(safe_add(b, a), safe_add(e, c)), f), d)
                }
                function md5_ff(a, b, d, e, f, c, g) {
                    return md5_cmn(b & d | ~b & e, a, b, f, c, g)
                }
                function md5_gg(a, b, d, e, f, c, g) {
                    return md5_cmn(b & e | d & ~e, a, b, f, c, g)
                }
                function md5_hh(a, b, d, e, f, c, g) {
                    return md5_cmn(b ^ d ^ e, a, b, f, c, g)
                }
                function md5_ii(a, b, d, e, f, c, g) {
                    return md5_cmn(d ^ (b | ~e), a, b, f, c, g)
                }
                function safe_add(a, b) {
                    var d = (a & 65535) + (b & 65535);
                    return (a >> 16) + (b >> 16) + (d >> 16) << 16 | d & 65535
                }
                function bit_rol(a, b) {
                    return a << b | a >>> 32 - b
                }
                (function (a) {
                    var b = function (d) {
                        this.init(d || {})
                    };
                    b.prototype = { constructor: b.prototype.constructor, init: function (d) {
                        this.options = d;
                        this.templates = {};
                        this.__createMethods();
                        return this
                    }, save: function (d, e) {
                        var f = d.split("."), c = "global";
                        d = f[0];
                        if (f.length > 1)
                            c = f[1];
                        this.templates.hasOwnProperty(c) || (this.templates[c] = {});
                        this.templates[c][d] = e;
                        return this
                    }, render: function (d, e, f) {
                        var c = d.split("."), g = "global";
                        d = c[0];
                        if (c.length > 1)
                            g = c[1];
                        f = f || {};
                        f.scope = f.scope || null;
                        f.data = e;
                        if (f.preData)
                            f.data = f.preData.call(f.scope,
                f.data);
                        f.pre && f.pre.call(f.scope, f.data);
                        d = this.templates[g][d](f.data);
                        f.el && f.el.appendChild(d);
                        f.post && f.post.call(f.scope, d, f.data);
                        return d
                    }, renderToString: function (d, e, f) {
                        f = f || {};
                        delete f.el;
                        var c = document.createElement("div");
                        c.appendChild(this.render(d, e, f));
                        return c.innerHTML
                    }, eachRender: function (d, e, f) {
                        f = f || {};
                        var c = document.createDocumentFragment();
                        f.el = c;
                        for (var g in d)
                            d.hasOwnProperty(g) && this.render(e, d[g], f);
                        return c
                    }, each: function (d, e) {
                        var f = document.createDocumentFragment(), c, g;
                        for (g in d)
                            if (d.hasOwnProperty(g))
                                (c = e(d[g])) && f.appendChild(c);
                        return f
                    }, __createMethods: function () {
                        var d = "a abbr address area article aside audio b base bdi bdo blockquote body br button canvas caption cite code col colgroup command datalist dd del details device dfn div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link map mark menu meta meter nav noscript object ol optgroup option output p param pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track ul var video wbr".split(" ");
                        d.push("frag");
                        for (var e = this.options.prefix || "", f = this, c = 0, g = d.length; c < g; c++)
                            (function (h) {
                                b.prototype[e + h] = function () {
                                    var n = Array.prototype.slice.call(arguments);
                                    n.unshift(h);
                                    return b.prototype.__createElGeneric.apply(f, n)
                                }
                            })(d[c]);
                        return this
                    }, __createElGeneric: function (d, e, f) {
                        var c = Array.prototype.slice.call(arguments).slice(1), g = d === "frag" ? document.createDocumentFragment() : document.createElement(d);
                        if (c.length)
                            f = c;
                        else
                            return g;
                        if (e = c[0].toString() === "[object Object]" ? f.shift() : null)
                            for (attr in e)
                                switch (attr) {
                                case "clss":
                                    g.className =
                            e[attr];
                                    break;
                                case "style":
                                    g.cssText = g.style.cssText = e[attr];
                                    break;
                                default:
                                    if (attr.charAt(0) === "_") {
                                        c = attr.substring(1);
                                        e[attr] && g.setAttribute(c, c)
                                    } else
                                        g.setAttribute(attr, e[attr])
                            }
                        c = 0;
                        for (var h = f.length; c < h; c++)
                            if (typeof f[c] === "string")
                                if (f[c].match(/\<[^\>]+\>|\&[^ ]+;/))
                                    g.innerHTML += f[c];
                                else
                                    g.appendChild(document.createTextNode(f[c]));
                            else if (typeof f[c] === "number")
                                g.appendChild(document.createTextNode(f[c]));
                            else if (typeof f[c] === "function")
                                g.appendChild(f[c]());
                            else if (typeof f[c] === "undefined" ||
                f[c] === null)
                                return "";
                            else
                                g.appendChild(f[c]);
                        return g
                    }, clone: function () {
                        return new b
                    }, extend: function (d, e, f) {
                        if (!(d in b.prototype) || f) {
                            b.prototype[d] = e;
                            return true
                        }
                        return false
                    } 
                    };
                    window[a || "newT"] = new b
                })();
                (function (a) {
                    function b() {
                        newT.save("info_tweet", function (c) {
                            return newT.li({ clss: "conv tweet" }, newT.img({ src: c.profile_image_url }), newT.p(newT.a({ href: ["http://twitter.com/", c.from_user].join("") }, c.from_user), c.text, newT.a({ href: ["http://twitter.com/", c.from_user, "/status/", c.id_str].join(""), clss: "timeago" }, BITLY.util.timeAgoInWords(c.created_at))))
                        })
                    }
                    function d(c) {
                        c = document.location.protocol + "//search.twitter.com/search.json?_usragnt=Bitly.bookmarklet&_t=" + +new Date + "&callback=?&rpp=100&q=" +
        encodeURIComponent(c.replace(/https?\:\/\/(www\.)?/, ""));
                        $.getJSON(c, function (g) {
                            g = g.results;
                            num_tweets = g.length;
                            $(".conversations .twitter").html([$._("Tweets"), " <strong>", num_tweets, "</strong>;"].join("")).show();
                            if (num_tweets) {
                                $(".conversations .link").show();
                                for (var h = $("#conversations"), n = h.find("ul.twitter"), o = 0, p = g.length; o < p; o++)
                                    n.append(newT.render("info_tweet", g[o]));
                                h.show()
                            }
                        })
                    }
                    function e(c) {
                        c = document.location.protocol + "//api.facebook.com/restserver.php?method=links.getStats&format=json&callback=?&urls=" +
        encodeURIComponent(c);
                        $.getJSON(c, function (g) {
                            for (var h = {}; 0 < g.length; ) {
                                h = g[0];
                                break
                            }
                            g = h.share_count || 0;
                            var n = h.comment_count || 0;
                            h = h.like_count || 0;
                            fb_str = [];
                            fb_str.push([$._("Shares"), " <strong>", g, "</strong>"].join(""));
                            fb_str.push([$._("Likes"), " <strong>", h, "</strong>"].join(""));
                            fb_str.push([$._("Comments"), " <strong>", n, "</strong>"].join(""));
                            $(".conversations .facebook").html(fb_str.join(", ") + ";").show()
                        })
                    }
                    var f = {};
                    a.social_networks = { init: function () {
                    }, init_info_page: function (c, g, h) {
                        f = $.extend(true,
            {}, f, h);
                        b();
                        d(c);
                        e(c)
                    } 
                    }
                })(window);
                (function (a) {
                    function b() {
                        var g = false;
                        try {
                            g = "localStorage" in window && window.localStorage !== null && "btoa" in window && "JSON" in window
                        } catch (h) {
                        }
                        return g
                    }
                    function d(g) {
                        g = g || c;
                        return ["data:", g.mime, ";base64,", g.content].join("")
                    }
                    function e(g) {
                        g = encodeURIComponent(g);
                        return g = (g = localStorage.getItem(g)) ? JSON.parse(g) : null
                    }
                    function f(g, h, n) {
                        n = n || false;
                        BITLY.ajax.GET({ url: g, binary: true, dataType: "image/png", success: function (o, p, m) {
                            p = btoa;
                            for (var q = "", v = 0, w = o.length; v < w; v++)
                                q += String.fromCharCode(o[v].charCodeAt(0) &
                    255);
                            o = { content: p(q), mime: m.getResponseHeader("Content-Type") || "image/png" };
                            m = encodeURIComponent(g);
                            if (!n) {
                                val = JSON.stringify(o);
                                localStorage.setItem(m, val)
                            }
                            h.setAttribute("src", d(o))
                        } 
                        })
                    }
                    var c = { content: "iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADNQTFRFx+H5rNL2vtv40eb64/D87PX9mcf0frjxo8z19vr+kMLzdLPwh73ytdb3a67v2uv7////DFkSyQAAAJ1JREFUeNpMjwmKxTAMQ9023tf7n/YnLQNjYnBekCPBnNK+s/Ud4VylnKNK9APLM25LosvXAcudeCyxxB03sAujjCOK1GQAS4exQ/qh6VJ4bJRnS2Z8n4aMFM5k230lb0B9Rx9JB3Q0QMzUJ6lXgoWzOduzn87SMcHYTowq1vl2Vrm4Wqrf9RobcIm0vIg+6zMoVf/DvfHzL/5PgAEABToLXXm2DMMAAAAASUVORK5CYII=",
                        mime: "image/png"
                    };
                    a.extend("cimg", function (g) {
                        var h = Array.prototype.slice.call(arguments), n = false;
                        if (b()) {
                            g = {};
                            if (h[0].toString() === "[object Object]")
                                g = h.shift();
                            var o = g.src || null, p = o && e(o) || null;
                            n = !p && o;
                            g.src = d(p);
                            h.unshift(g)
                        }
                        var m = this.img.apply(this, h);
                        if (n)
                            if (g.evt) {
                                var q = Math.floor(Math.random() * 1E10).toString();
                                $(document.body).bind(g.evt + "." + q, function () {
                                    $(document.body).unbind(g.evt + "." + q);
                                    f(n, m, g.nocache)
                                })
                            } else
                                f(n, m, g.nocache);
                        return m
                    }, true)
                })(newT);
                var ZeroClipboard = { version: "1.0.7.1", clients: {}, moviePath: "ZeroClipboard.swf", nextId: 1, $: function (a) {
                    if (typeof a == "string")
                        a = document.getElementById(a);
                    if (!a.addClass) {
                        a.hide = function () {
                            this.style.display = "none"
                        };
                        a.show = function () {
                            this.style.display = ""
                        };
                        a.addClass = function (b) {
                            this.removeClass(b);
                            this.className += " " + b
                        };
                        a.removeClass = function (b) {
                            for (var d = this.className.split(/\s+/), e = -1, f = 0; f < d.length; f++)
                                if (d[f] == b) {
                                    e = f;
                                    f = d.length
                                }
                            if (e > -1) {
                                d.splice(e, 1);
                                this.className = d.join(" ")
                            }
                            return this
                        };
                        a.hasClass =
            function (b) {
                return !!this.className.match(RegExp("\\s*" + b + "\\s*"))
            }
                    }
                    return a
                }, setMoviePath: function (a) {
                    this.moviePath = a
                }, dispatch: function (a, b, d) {
                    (a = this.clients[a]) && a.receiveEvent(b, d)
                }, register: function (a, b) {
                    this.clients[a] = b
                }, getDOMObjectPosition: function (a, b) {
                    for (var d = { left: 0, top: 0, width: a.width ? a.width : a.offsetWidth, height: a.height ? a.height : a.offsetHeight }; a && a != b; ) {
                        d.left += a.offsetLeft;
                        d.top += a.offsetTop;
                        a = a.offsetParent
                    }
                    return d
                }, Client: function (a) {
                    this.handlers = {};
                    this.id = ZeroClipboard.nextId++;
                    this.movieId = "ZeroClipboardMovie_" + this.id;
                    ZeroClipboard.register(this.id, this);
                    a && this.glue(a)
                } 
                };
                ZeroClipboard.Client.prototype = { id: 0, ready: false, movie: null, clipText: "", handCursorEnabled: true, cssEffects: true, handlers: null, glue: function (a, b, d, e) {
                    this.domElement = ZeroClipboard.$(a);
                    var f = 99;
                    if (this.domElement.style.zIndex)
                        f = parseInt(this.domElement.style.zIndex, 10) + 1;
                    if (typeof b == "string")
                        b = ZeroClipboard.$(b);
                    else if (typeof b == "undefined")
                        b = document.getElementsByTagName("body")[0];
                    a = ZeroClipboard.getDOMObjectPosition(this.domElement, b);
                    this.div = document.createElement("div");
                    var c = this.div.style;
                    c.position = "absolute";
                    c.left = "" + a.left + "px";
                    c.top = "" + a.top + "px";
                    c.width = "" + a.width + "px";
                    c.height = "" + a.height + "px";
                    c.zIndex = f;
                    if (typeof d == "object")
                        for (addedStyle in d)
                            c[addedStyle] = d[addedStyle];
                    d = a.width;
                    a = a.height;
                    if (typeof e == "object") {
                        d = e.width || d;
                        a = e.height || a
                    }
                    b.appendChild(this.div);
                    this.div.innerHTML = this.getHTML(d, a)
                }, getHTML: function (a, b) {
                    var d = "", e = "id=" + this.id + "&width=" + a + "&height=" + b;
                    if (navigator.userAgent.match(/MSIE/)) {
                        var f = location.href.match(/^https/i) ? "https://" : "http://";
                        d += '<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="' +
            f + 'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="' + a + '" height="' + b + '" id="' + this.movieId + '" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="' + ZeroClipboard.moviePath + '" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="' + e + '"/><param name="wmode" value="transparent"/></object>'
                    } else
                        d +=
            '<embed id="' + this.movieId + '" src="' + ZeroClipboard.moviePath + '" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="' + a + '" height="' + b + '" name="' + this.movieId + '" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="' + e + '" wmode="transparent" />';
                    return d
                }, hide: function () {
                    if (this.div)
                        this.div.style.left = "-2000px"
                }, show: function () {
                    this.reposition()
                }, destroy: function () {
                    if (this.domElement &&
        this.div) {
                        this.hide();
                        this.div.innerHTML = "";
                        var a = document.getElementsByTagName("body")[0];
                        try {
                            a.removeChild(this.div)
                        } catch (b) {
                        }
                        this.div = this.domElement = null
                    }
                }, reposition: function (a) {
                    if (a)
                        (this.domElement = ZeroClipboard.$(a)) || this.hide();
                    if (this.domElement && this.div) {
                        a = ZeroClipboard.getDOMObjectPosition(this.domElement);
                        var b = this.div.style;
                        b.left = "" + a.left + "px";
                        b.top = "" + a.top + "px"
                    }
                }, setText: function (a) {
                    this.clipText = a;
                    this.ready && this.movie.setText(a)
                }, addEventListener: function (a, b) {
                    a = a.toString().toLowerCase().replace(/^on/,
        "");
                    this.handlers[a] || (this.handlers[a] = []);
                    this.handlers[a].push(b)
                }, setHandCursor: function (a) {
                    this.handCursorEnabled = a;
                    this.ready && this.movie.setHandCursor(a)
                }, setCSSEffects: function (a) {
                    this.cssEffects = !!a
                }, receiveEvent: function (a, b) {
                    a = a.toString().toLowerCase().replace(/^on/, "");
                    switch (a) {
                        case "load":
                            this.movie = document.getElementById(this.movieId);
                            if (!this.movie) {
                                var d = this;
                                setTimeout(function () {
                                    d.receiveEvent("load", null)
                                }, 1);
                                return
                            }
                            if (!this.ready && navigator.userAgent.match(/Firefox/) && navigator.userAgent.match(/Windows/)) {
                                d =
                    this;
                                setTimeout(function () {
                                    d.receiveEvent("load", null)
                                }, 100);
                                this.ready = true;
                                return
                            }
                            this.ready = true;
                            this.movie.setText(this.clipText);
                            this.movie.setHandCursor(this.handCursorEnabled);
                            break;
                        case "mouseover":
                            if (this.domElement && this.cssEffects) {
                                this.domElement.addClass("hover");
                                this.recoverActive && this.domElement.addClass("active")
                            }
                            break;
                        case "mouseout":
                            if (this.domElement && this.cssEffects) {
                                this.recoverActive = false;
                                if (this.domElement.hasClass("active")) {
                                    this.domElement.removeClass("active");
                                    this.recoverActive =
                        true
                                }
                                this.domElement.removeClass("hover")
                            }
                            break;
                        case "mousedown":
                            this.domElement && this.cssEffects && this.domElement.addClass("active");
                            break;
                        case "mouseup":
                            if (this.domElement && this.cssEffects) {
                                this.domElement.removeClass("active");
                                this.recoverActive = false
                            }
                    }
                    if (this.handlers[a])
                        for (var e = 0, f = this.handlers[a].length; e < f; e++) {
                            var c = this.handlers[a][e];
                            if (typeof c == "function")
                                c(this, b);
                            else if (typeof c == "object" && c.length == 2)
                                c[0][c[1]](this, b);
                            else if (typeof c == "string")
                                window[c](this, b)
                        }
                } 
                };
                var BITLY = { util: {}, data: {}, els: {}, state: {}, lib: jQuery };
                BITLY.util.log = function (a, b) {
                    b || (b = "INFO");
                    try {
                        return console ? console.log(b + ": " + a) : false
                    } catch (d) {
                        return false
                    }
                };
                BITLY.util.inherit = function (a, b) {
                    var d = function () {
                    };
                    d.prototype = b.prototype;
                    a.prototype = new d;
                    a.prototype.constructor = a;
                    a.superclass = b.prototype;
                    if (b.prototype.constructor == Object.prototype.constructor)
                        b.prototype.constructor = b
                };
                BITLY.util.argsAsArray = function (a) {
                    return Array.prototype.slice.call(a)
                };
                BITLY.util.hashToQueryString = function (a, b, d) {
                    var e = [];
                    for (key in a)
                        for (var f = $.isArray(a[key]) ? a[key] : [a[key]], c = 0, g = f.length; c < g; c++)
                            f[c] === "?" && d ? e.push(encodeURIComponent(key) + "=" + f[c]) : e.push(encodeURIComponent(key) + "=" + encodeURIComponent(f[c]));
                    a = e.length ? "?" + e.join("&") : "";
                    return (b || "") + a
                };
                BITLY.util.queryStringToHash = function (a) {
                    a = a || location.href;
                    if (a.indexOf("?") > -1)
                        a = a.substring(a.indexOf("?") + 1);
                    else
                        return {};
                    a = a.split("&");
                    for (var b = {}, d = a.length; d; ) {
                        var e = a[--d].split("=");
                        b[decodeURIComponent(e[0].replace(/\+/g, " "))] = decodeURIComponent(e[1].replace(/\+/g, " "))
                    }
                    return b
                };
                BITLY.util.stripQueryString = function (a) {
                    if (a.indexOf("?") > -1)
                        a = a.substring(0, a.indexOf("?"));
                    return a
                };
                BITLY.util.modifyQueryParams = function (a, b) {
                    b = b || location.href;
                    var d = BITLY.util.stripQueryString(b), e = BITLY.util.queryStringToHash(b), f;
                    for (f in a)
                        if (a[f] === null)
                            delete e[f];
                        else
                            e[f] = a[f];
                    return BITLY.util.hashToQueryString(e, d)
                };
                BITLY.ajax = { GET: function (a) {
                    return BITLY.ajax.makeRequest("GET", a)
                }, POST: function (a) {
                    return BITLY.ajax.makeRequest("POST", a)
                }, PUT: function (a) {
                    return BITLY.ajax.makeRequest("PUT", a)
                }, DELETE: function (a) {
                    return BITLY.ajax.makeRequest("DELETE", a)
                }, makeRequest: function (a, b) {
                    var d = new BITLY.ajax.request(b);
                    d.setMethod(a);
                    d.url && d.execute();
                    return d
                }, requestor: null
                };
                BITLY.ajax.request = function (a) {
                    this.init(a)
                };
                BITLY.ajax.request.prototype = { init: function (a) {
                    a || (a = {});
                    if (BITLY.util.isFunction(a))
                        this._setSuccess(a);
                    else {
                        BITLY.util.simpleExtend(this, a);
                        if (this.url)
                            this.url = this.api_base + this.url;
                        if (!a.scope)
                            this.scope = this;
                        if (this.send_json)
                            this.contentType = "application/json";
                        a.error ? this._setError(a.error, this.scope) : this._setError(this.error, this.scope);
                        a.success ? this._setSuccess(a.success, this.scope) : this._setSuccess(this.success, this.scope)
                    }
                }, api_base: "", _setSuccess: function (a, b) {
                    if (!b)
                        b = this.scope;
                    var d =
        this;
                    this.success = function () {
                        var e = BITLY.util.argsAsArray(arguments);
                        BITLY.util.checkResponseForError(e[0], d.error, b, e) || a.apply(b, e)
                    }
                }, _setError: function (a, b) {
                    if (typeof a !== "undefined") {
                        b || (b = this);
                        this.error = function () {
                            var d = BITLY.util.argsAsArray(arguments);
                            a.apply(b, d)
                        }
                    } else
                        this.error = BITLY.ajax.request.prototype.error
                }, setMethod: function (a) {
                    switch (a.toLowerCase()) {
                        case "delete":
                        case "put":
                        case "post":
                            this.method = a.toUpperCase();
                            break;
                        default:
                            this.method = "GET"
                    }
                }, execute: function (a, b) {
                    var d = this;
                    if (a)
                        this.url = a;
                    if (b)
                        this.data = b;
                    if (this.url) {
                        var e = { type: this.method, url: this.url, data: this.data, success: this.success, dataType: this.dataType, contentType: this.contentType, error: this.error, async: this.async, timeout: this.timeout, binary: false, beforeSend: function (f) {
                            d.binary && f.overrideMimeType("text/plain; charset=x-user-defined");
                            f.setRequestHeader("X-XSRFToken", $.cookie.get("_xsrf"))
                        } 
                        };
                        this.singleThreaded && this.xhr && this.xhr.abort();
                        this.xhr = BITLY.ajax.requestor(e);
                        return this
                    } else
                        throw "Must have a url set to execute";
                }, abort: function () {
                    this.xhr && this.xhr.abort()
                }, data: {}, timeout: 2E4, singleThreaded: false, dataType: "json", contentType: "application/x-www-form-urlencoded", scope: this, async: true, method: "GET", form: false, success: function () {
                    BITLY.util.log("default success")
                }, error: function () {
                    BITLY.util.log("error making a " + this.type + " request to " + this.url, "ERROR")
                } 
                };
                BITLY.util.destroyClass = function (a) {
                    a = a || {};
                    if (this.hasOwnProperty("els")) {
                        for (var b in this.els) {
                            a.remove_els && this.els[b].remove();
                            this.els[b] = null;
                            delete this.els[b]
                        }
                        delete this.els
                    }
                    if (this.hasOwnProperty("obj")) {
                        for (var d in this.obj) {
                            this.obj[d].destroy && this.obj[d].destroy();
                            this.obj[d] = null;
                            delete this.obj[d]
                        }
                        delete this.obj
                    }
                    if (this.hasOwnProperty("data")) {
                        for (var e in this.data) {
                            this.data[e] = null;
                            delete this.data[e]
                        }
                        delete this.data
                    }
                    if (this.hasOwnProperty("state")) {
                        for (var f in this.state) {
                            this.state[f] =
            null;
                            delete this.state[f]
                        }
                        delete this.state
                    }
                    if (this.hasOwnProperty("util")) {
                        for (var c in this.util) {
                            this.util[c] = null;
                            delete this.util[c]
                        }
                        delete this.util
                    }
                    this.hasOwnProperty("parents") && delete this.parents;
                    if (this.hasOwnProperty("el")) {
                        this.el.remove();
                        this.el = null;
                        delete this.el
                    }
                    return this
                };
                BITLY.util.initClass = function (a) {
                    if (a)
                        this.el = $(a);
                    this.data = {};
                    this.state = {};
                    this.els = {};
                    this.obj = {};
                    this.parents = {};
                    return this
                };
                BITLY.util.isFunction = BITLY.lib.isFunction;
                BITLY.util.simpleExtend = BITLY.lib.extend;
                BITLY.ajax.requestor = BITLY.lib.ajax;
                BITLY.Eventer = { evt: {}, delegate: function (a) {
                    if (!a)
                        return false;
                    var b = a.del ? $(a.del) : $("body"), d = a.el ? $(a.el) : $("body"), e = a.evt, f = a.cb, c = a.scope;
                    a = a.ns || "_default";
                    var g = b.data("bitly_evt_id");
                    if (!g) {
                        g = this.createEvtId();
                        b.data("bitly_evt_id", g)
                    }
                    if (d && e && f) {
                        var h = d.data("bitly_evt_id");
                        if (!h) {
                            h = this.createEvtId();
                            d.data("bitly_evt_id", h)
                        }
                        this.evt.hasOwnProperty(g) || (this.evt[g] = {});
                        if (!this.evt[g].hasOwnProperty(e)) {
                            this.evt[g][e] = {};
                            this._bind(b, e)
                        }
                        b = this.evt[g][e];
                        b.hasOwnProperty(h) || (b[h] = []);
                        b[h].push({ ns: a,
                            cb: function (n, o) {
                                return f.call(c, n, o)
                            } 
                        })
                    }
                }, undelegate: function (a) {
                    var b = a.del ? $(a.del) : $("body"), d = a.el ? $(a.el) : $("body"), e = a.evt;
                    a = a.ns || "*";
                    b = b.data("bitly_evt_id");
                    d = d.data("bitly_evt_id");
                    if (b && d && this.evt[b] && this.evt[b][e] && this.evt[b][e][d]) {
                        var f = this.evt[b][e][d];
                        if (a === "*")
                            delete this.evt[b][e][d];
                        else {
                            for (var c = [], g = 0, h = f.length; g < h; g++)
                                f[g].ns !== a && c.push(f[g]);
                            if (c.length)
                                this.evt[b][e][d] = c;
                            else
                                delete this.evt[b][e][d]
                        }
                    }
                }, _bind: function (a, b) {
                    var d = a.data("bitly_evt_id");
                    a.bind(b, function (e,
        f) {
                        if (!d)
                            return true;
                        for (var c = $(e.target), g = c.data("bitly_evt_id"); c.length; ) {
                            if (g && BITLY.Eventer.evt[d] && BITLY.Eventer.evt[d][b] && BITLY.Eventer.evt[d][b][g] && BITLY.Eventer.evt[d][b][g].length) {
                                g = BITLY.Eventer.evt[d][b][g];
                                for (var h = false, n = 0, o = g.length; n < o; n++) {
                                    h = g[n].cb(e, f);
                                    if (typeof h !== "undefined" && !h)
                                        return h;
                                    if (e.isImmediatePropagationStopped())
                                        return false
                                }
                                if (e.isPropagationStopped() || e.isDefaultPrevented())
                                    return false
                            }
                            c = c.parent();
                            g = c.data("bitly_evt_id")
                        }
                    })
                }, bind: function (a) {
                    a.del = a.el;
                    this.delegate(a);
                    return this
                }, unbind: function (a) {
                    a.del = a.el;
                    this.undelegate(a);
                    return this
                }, trigger: function (a, b, d) {
                    b = b || {};
                    d = d ? $(d) : $("body");
                    d.trigger(a, [b]);
                    return this
                }, createEvtId: function () {
                    return "evt_" + Math.random().toString().replace("0.", "")
                } 
                };
                BITLY.util.checkResponseForError = function (a, b, d, e) {
                    if (a && a.status_code && a.status_code != 200) {
                        b.apply(d || null, e);
                        return true
                    }
                    return false
                };
                BITLY.util.timeStamp = function (a) {
                    if (!a)
                        return "A long time ago.";
                    return (new Date(a * 1E3)).toDateString()
                };
                BITLY.util.loadSidebar = function (a, b) {
                    var d = "/bookmarklet/load.js";
                    if (a)
                        d = BITLY.util.hashToQueryString({ ls: 1, u: a, s: b || "" }, d);
                    $(document.body).append(newT.script({ type: "text/javascript", src: d }))
                };
                BITLY.util.preserveNewline = function (a) {
                    return a.replace(/\n/g, "<br/>")
                };
                BITLY.util.savePreference = function (a, b, d) {
                    BITLY.ajax.POST({ url: "/data/preferences", data: { key: a, value: b }, success: d || function () {
                    } 
                    })
                };
                BITLY.util.timeAgoInWords = function (a) {
                    if (typeof a == "string")
                        a = Date.parse(a);
                    else if (typeof a === "undefined")
                        a = +new Date;
                    if (!a)
                        return "some time ago";
                    a = +new Date - a;
                    var b = Math.floor(a / 6E4), d = Math.floor(a / 36E5), e = Math.floor(a / 864E5), f = "ago";
                    return f = Math.floor(a / 31536E6) ? "over a year ago" : e ? e + " day" + (e > 1 ? "s " : " ") + f : d ? "about " + d + " hour" + (d > 1 ? "s " : " ") + f : b ? b + " minute" + (b > 1 ? "s " : " ") + f : "just now"
                };
                BITLY.util.scrollToTop = function (a, b) {
                    BITLY.util.scrollTo({ dur: a, interval: b })
                };
                BITLY.util.scrollTo = function (a) {
                    function b(o) {
                        o = o || +new Date;
                        var p = o - n, m = true;
                        if (p) {
                            n = o;
                            o = p / d * c;
                            g -= o;
                            if (o >= 0 && g <= e || o <= 0 && g >= e) {
                                g = e;
                                m = false
                            }
                            window.scrollTo(0, g)
                        }
                        if (m)
                            window.reqAnimFrame(b);
                        else
                            f && f.call(window)
                    }
                    a = a || {};
                    var d = a.dur || 150, e = a.end || 0, f = a.onfinish, c, g, h;
                    if (document.body.scrollTop) {
                        g = document.body.scrollTop;
                        a = document.body.clientHeight;
                        h = document.body.scrollHeight
                    } else {
                        g = document.documentElement.scrollTop;
                        a = document.documentElement.clientHeight;
                        h = document.documentElement.scrollHeight
                    }
                    e =
    e >= g ? Math.min(e, h - a) : Math.max(e, 0);
                    c = g - e;
                    var n = +new Date;
                    window.reqAnimFrame(b)
                };
                BITLY.util.mixPanelTrack = function (a, b) {
                    if (!("mpq" in window))
                        return false;
                    if (typeof a != "number") {
                        b = a;
                        a = 0
                    }
                    a <= (window.mpq_level || 0) && mpq.push(b)
                };
                BITLY.util.mixPanelTrackLink = function (a, b, d, e) {
                    if (!("mpq" in window))
                        return false;
                    if (typeof a != "number") {
                        e = d;
                        d = b;
                        b = a;
                        a = 0
                    }
                    if (a <= (window.mpq_level || 0)) {
                        var f = d, c = a, g = e || 500;
                        BITLY.Eventer.delegate({ evt: "click", el: b, cb: function (h) {
                            h.preventDefault();
                            var n = $(h.target).attr("href");
                            BITLY.util.mixPanelTrack(c, f);
                            setTimeout(function () {
                                location.href = n
                            }, g)
                        } 
                        })
                    }
                };
                BITLY.util.displayDomain = function (a, b) {
                    if (a && a.domain)
                        return a.domain;
                    return !b && BITLY.data.domain_preference || BITLY.data.default_short_domain || "bit.ly"
                };
                if (!window.reqAnimFrame)
                    window.reqAnimFrame = function () {
                        return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (a) {
                            return window.setTimeout(function () {
                                a((new Date).getTime())
                            }, 1E3 / 60)
                        }
                    } ();
                newT.save("open_login", function (a) {
                    return newT.ul({ clss: "open_login clearfix" }, newT.li({ clss: "login_twitter" }, newT.a({ href: "/a/add_twitter_account", title: $._("Sign in With Twitter"), clss: "ex" }, a ? $._("Twitter") : $._("Sign in With Twitter"))), newT.li({ clss: "login_facebook" }, newT.a({ href: "/a/add_facebook_account", title: $._("Sign in With Facebook"), clss: "ex" }, a ? $._("Facebook") : $._("Sign in With Facebook"))))
                });
                BITLY.DefaultTextbox = function (a, b) {
                    this.init(a, b)
                };
                BITLY.DefaultTextbox.prototype = { constructor: BITLY.DefaultTextbox.prototype.constructor, init: function (a, b) {
                    this.el = $(a);
                    this.state = {};
                    this.els = {};
                    if (b) {
                        this.el.val() === "" && this.el.val(b);
                        this.defaultText = b
                    } else
                        this.defaultText = this.el.val();
                    this.cacheEls().bindEvents();
                    this.isDefault() && this.el.addClass("default");
                    return this
                }, destroy: function () {
                    this.el.unbind("focus");
                    this.el.unbind("blur");
                    BITLY.util.destroyClass.call(this);
                    return this
                }, cacheEls: function () {
                    this.els.form = this.el.closest("form");
                    return this
                }, bindEvents: function () {
                    var a = this;
                    this.el.bind("focus", function () {
                        if (a.el.val() == a.defaultText) {
                            a.el.val("");
                            a.el.removeClass("default")
                        }
                        BITLY.Eventer.trigger("default_textbox_focus", a)
                    });
                    this.el.bind("blur", function () {
                        if ($.trim(a.el.val()) === "") {
                            a.el.addClass("default");
                            a.el.val(a.defaultText)
                        }
                    });
                    return this
                }, isDefault: function () {
                    return this.el.val() === this.defaultText
                }, reset: function () {
                    this.el.val(this.defaultText);
                    return this
                }, isEmpty: function () {
                    return $.trim(this.val()) === ""
                }, val: function () {
                    return this.el.val()
                },
                    nonDefaultVal: function () {
                        if (this.isDefault())
                            return "";
                        return this.val()
                    } 
                };
                BITLY.EditInPlace = function (a, b, d) {
                    this.init(a, b, d)
                };
                BITLY.EditInPlace.prototype = { constructor: BITLY.EditInPlace.prototype.constructor, init: function (a, b, d) {
                    this.els = {};
                    this.data = {};
                    this.state = { editing: false };
                    this.obj = {};
                    this.el = $(a);
                    this.els.form = $(b);
                    this.setOpts(d || {}).cacheEls().bindEvents().setKeyboardShortcuts()
                }, destroy: function () {
                    BITLY.Eventer.undelegate({ el: this.els.trigger, evt: "click" });
                    BITLY.Eventer.undelegate({ el: this.els.cancel, evt: "click" });
                    BITLY.Eventer.undelegate({ el: this.els.form, evt: "submit" });
                    BITLY.util.destroyClass.call(this);
                    return this
                },
                    setOpts: function (a) {
                        this.opts = { eip: ".eip", cancel: "input.cancel", submit: "input.submit", editing_class: "editing", tab_save: true, default_text: "", value_obj: { value: "" }, value_field: "value", preserve_newlines: true };
                        $.extend(this.opts, a);
                        return this
                    }, cacheEls: function () {
                        this.els.field = this.els.form.find(this.opts.eip);
                        this.els.cancel = this.els.form.find(this.opts.cancel);
                        this.els.submit = this.els.form.find(this.opts.submit);
                        this.els.text_el = this.opts.text_el ? $(this.opts.text_el) : this.el;
                        this.els.trigger = this.opts.trigger ?
        $(this.opts.trigger) : this.el;
                        this.state.is_textarea = this.els.field.is("textarea");
                        return this
                    }, bindEvents: function () {
                        BITLY.Eventer.delegate({ evt: "click", el: this.els.trigger, cb: function (d) {
                            d.preventDefault();
                            this.startEdit()
                        }, scope: this
                        });
                        BITLY.Eventer.bind({ evt: "submit", el: this.els.form, cb: function (d) {
                            d.preventDefault();
                            this.doSave()
                        }, scope: this
                        });
                        BITLY.Eventer.delegate({ evt: "click", el: this.els.cancel, cb: function (d) {
                            d.preventDefault();
                            this.endEdit()
                        }, scope: this
                        });
                        if (this.els.form.hasClass("expandorama") ||
        this.els.form.find(".expandorama").length) {
                            var a = this.els.form.find("pre span"), b = this.els.form.find("textarea");
                            BITLY.Eventer.delegate({ evt: "oninput" in window ? "input" : "propertychange", el: b, del: b, cb: function () {
                                a.text(b.val() || " ")
                            }, scope: this
                            })
                        }
                        return this
                    }, setKeyboardShortcuts: function () {
                        this.obj.kb_shortcuts = new BITLY.KeyboardShortcuts(this.els.field, { scope: this });
                        return this
                    }, startEdit: function () {
                        if (this.opts.edit_check && this.opts.edit_check.func && !this.opts.edit_check.func.call(this.opts.edit_check.scope ||
        null))
                            return this;
                        "parent_el" in this.opts && this.opts.parent_el.addClass(this.opts.editing_class);
                        this.els.field.val(this.opts.value_obj[this.opts.value_field]);
                        this.state.initial_val = this.opts.value_obj[this.opts.value_field];
                        this.el.hide();
                        this.els.form.show();
                        this.state.editing = true;
                        this.els.field.focus();
                        this.obj.kb_shortcuts.addShortcut(27, BITLY.EditInPlace.prototype.endEdit);
                        this.obj.kb_shortcuts.addShortcut(9, this.opts.tab_save ? BITLY.EditInPlace.prototype.tabSave : BITLY.EditInPlace.prototype.endEdit);
                        this.els.form.find("pre span").text(this.els.form.find("textarea").val() || " ");
                        BITLY.Eventer.trigger("bundle_link_start_field_edit", this);
                        return this
                    }, endEdit: function (a) {
                        "parent_el" in this.opts && this.opts.parent_el.removeClass(this.opts.editing_class);
                        this.obj.kb_shortcuts.removeShortcut(27);
                        this.obj.kb_shortcuts.removeShortcut(9);
                        this.el.show();
                        this.els.form.hide();
                        this.state.editing = false;
                        this.els.field.blur();
                        if (a) {
                            this.opts.value_obj[this.opts.value_field] = $.trim(this.els.field.val()) != "" ? this.els.field.val() :
            "";
                            this.els.text_el.html(this._preserveNewLines($.escapeHTML(this.opts.value_obj[this.opts.value_field] != "" ? this.opts.value_obj[this.opts.value_field] : this.opts.default_text)));
                            this.opts.on_save_event && BITLY.Eventer.trigger(this.opts.on_save_event, this);
                            delete this.state.initial_val
                        } else {
                            this.els.field.val("");
                            this.opts.on_cancel_event && BITLY.Eventer.trigger(this.opts.on_cancel_event, this)
                        }
                        this.els.form.find("pre span").html("");
                        return this
                    }, setAndSave: function (a) {
                        this.els.field.val(a);
                        this.doSave()
                    },
                    onEditSave: function () {
                        this.els.show();
                        this.els.form.hide();
                        return this
                    }, tabSave: function () {
                        this.opts.value_obj[this.opts.value_field] !== $.trim(this.els.field.val()) ? this.doSave() : this.endEdit();
                        return this
                    }, doSave: function () {
                        if (!this.state.saving) {
                            if (this.opts.on_before_save)
                                if (!this.opts.on_before_save.func.call(this.opts.on_before_save.scope || null))
                                    return this;
                            if (this.state.initial_val != this.opts.value_obj[this.opts.value_field]) {
                                $(document.body).trigger("errorMessage", { text: "This field has been updated by another collaborator. Press cancel to see the updated version." });
                                return this
                            }
                            this.state.saving = true;
                            var a = this;
                            this.createLoadingIndicator();
                            this.els.form.ajaxSubmit({ dataType: "json", success: function (b) {
                                if (b && b.status_code && b.status_code == 200) {
                                    a.endEdit(true);
                                    a.removeLoadingIndicator();
                                    a.state.saving = false;
                                    BITLY.Eventer.trigger("eip_saved", b.data || {})
                                } else if (b && b.status_txt) {
                                    a.endEdit();
                                    a.removeLoadingIndicator();
                                    var d = "Oops... an error occurred trying to move edit this field";
                                    switch (b.status_txt) {
                                        case "PERMISSION_DENIED":
                                            d = "You do not have permission to edit this field"
                                    }
                                    $(document.body).trigger("errorMessage",
                        { text: d })
                                } else
                                    $(document.body).trigger("errorMessage", { text: "Oops... an error occurred trying to move edit this field" })
                            }, error: function () {
                                a.state.saving = false;
                                $(document.body).trigger("errorMessage", { text: "Oops... an error occurred trying to move edit this field" })
                            } 
                            })
                        }
                        return this
                    }, createLoadingIndicator: function () {
                        this.removeLoadingIndicator();
                        this.els.field.addClass("saving");
                        this.els.loading_indicator = $(document.createElement("div")).addClass("loader").html("Saving...");
                        var a = this.els.field.offset();
                        this.els.loading_indicator.css({ position: "absolute", top: a.top + "px", left: a.left - 75 + "px" });
                        $("body").append(this.els.loading_indicator);
                        return this
                    }, removeLoadingIndicator: function () {
                        this.els.field.removeClass("saving");
                        if (this.els.loading_indicator) {
                            this.els.loading_indicator.remove();
                            this.els.loading_indicator = null;
                            delete this.els.loading_indicator
                        }
                        return this
                    }, _preserveNewLines: function (a) {
                        if (!this.opts.preserve_newlines)
                            return a;
                        return BITLY.util.preserveNewline(a)
                    }, flashUpdateColor: function () {
                        var a =
        this, b = this.el.css("backgroundColor");
                        this.el.stop(true);
                        this.el.addClass("colorfade");
                        this.el.css("background-color", "#FCFAD9");
                        setTimeout(function () {
                            a.el.animate({ backgroundColor: b }, 3E3, function () {
                                $(this).css("background-color", "");
                                $(this).removeClass("colorfade")
                            })
                        }, 2E3)
                    } 
                };
                BITLY.KeyboardShortcuts = function (a, b) {
                    this.init(a, b)
                };
                BITLY.KeyboardShortcuts.prototype = { constructor: BITLY.KeyboardShortcuts.prototype.constructor, init: function (a, b) {
                    this.container = $(a);
                    this.state = { keydown_timer: false };
                    this.config = $.extend(true, { scope: window, keys: {}, ns: null, skipped_els: this.skipped_els }, b);
                    this.setNamespace(this.config.ns).convertConfigKeyFunctions();
                    this.bindEvents();
                    return this
                }, setNamespace: function (a) {
                    a || (a = Math.random().toString().replace("0.", ""));
                    this.config.ns = "keyboardshortcuts_" + a;
                    return this
                }, convertConfigKeyFunctions: function () {
                    for (var a in this.config.keys)
                        if (typeof this.config.keys[a] ===
            "function")
                            this.config.keys[a] = { action: this.config.keys[a] };
                    return this
                }, bindEvents: function () {
                    var a = this;
                    this.container.unbind("keyup." + this.config.ns);
                    this.container.bind("keyup." + this.config.ns, function (b) {
                        b = b.keyCode;
                        if (a.state.hasOwnProperty("key_up") && b === a.state.key_up) {
                            delete a.state.key_up;
                            delete a.state.config_key_in_action
                        }
                        return true
                    });
                    this.container.unbind("keydown." + this.config.ns);
                    this.container.bind("keydown." + this.config.ns, function (b) {
                        a.handleShortcuts(b);
                        clearTimeout(a.state.keydown_timer);
                        if (!a.state.config_key_in_action)
                            a.state.keydown_timer = setTimeout(function () {
                                clearTimeout(a.state.keydown_timer);
                                delete a.state.key_up
                            }, 2500);
                        return true
                    });
                    return this
                }, handleShortcuts: function (a) {
                    var b = a.keyCode;
                    if (!this.state.hasOwnProperty("key_up") || this.config.keys.hasOwnProperty(b) && this.config.keys[b].hasOwnProperty("require_config_key") && this.config.keys[b].require_config_key === this.state.key_up) {
                        if (!this.state.hasOwnProperty("key_up"))
                            this.state.key_up = b;
                        if (b === 27 || !this.config.skipped_els ||
            !$(a.target).is(this.config.skipped_els))
                            if (this.config.keys.hasOwnProperty(b)) {
                                var d = this.config.keys[b].hasOwnProperty("require_config_key") && this.config.keys[b].require_config_key === this.state.key_up;
                                if (!this.config.keys[b].hasOwnProperty("require_config_key") || d)
                                    this.config.keys[b].action.call(this.config.keys[b].scope || this.config.scope, a);
                                if (d) {
                                    this.state.config_key_in_action = true;
                                    clearTimeout(this.state.keydown_timer)
                                }
                            }
                    }
                    return this
                }, addShortcut: function (a, b, d, e) {
                    this.config.keys[a] = { action: b };
                    if (d)
                        this.config.keys[a].scope = d;
                    if (e)
                        this.config.keys[a].require_config_key = e;
                    return this
                }, removeShortcut: function (a) {
                    this.config.keys.hasOwnProperty(a) && delete this.config.keys[a]
                }, deactivate: function () {
                    this.container.unbind("keydown." + this.config.ns);
                    this.container.unbind("keyup." + this.config.ns);
                    return this
                }, activate: function () {
                    return this.bindEvents()
                }, skipped_els: "textarea input"
                };
                (function (a) {
                    BITLY.util[a] = function (b, d) {
                        var e = d || [38, 38, 40, 40, 37, 39, 37, 39, 66, 65], f = 0, c = function (g, h, n) {
                            var o = n;
                            n = function (p) {
                                o.call(g, p)
                            };
                            return g.attachEvent ? g.attachEvent("on" + h, n) : g.addEventListener(h, n, false)
                        };
                        (function () {
                            c(window.document, "keyup", function (g) {
                                g = g || window.event;
                                if (f < e.length)
                                    if (g.keyCode == e[f]) {
                                        f++;
                                        f == e.length && b()
                                    } else
                                        f = 0
                                })
                            })()
                        }
                    })("KC");
                    BITLY.Poller = function (a) {
                        this.init(a ? true : false)
                    };
                    BITLY.Poller.prototype = { constructor: BITLY.Poller.prototype.constructor, default_poll_interval: 2E4, init: function (a) {
                        BITLY.util.initClass.call(this);
                        this.state = { is_polling: false, poll_timer: null, poll_interval: this.default_poll_interval };
                        a && this.startPolling();
                        return this
                    }, startPolling: function (a) {
                        a = a || this.default_poll_interval;
                        this.state.poll_interval = a;
                        this.state.is_polling = true;
                        this.setPoll();
                        return this
                    }, stopPolling: function () {
                        clearTimeout(this.state.poll_timer);
                        this.state.is_polling = false;
                        return this
                    },
                        changeInterval: function (a) {
                            a = a || this.default_poll_interval;
                            this.state.poll_interval = a;
                            return this
                        }, setPoll: function () {
                            clearTimeout(this.state.poll_timer);
                            if (this.state.is_polling) {
                                var a = this;
                                this.state.poll_timer = setTimeout(function () {
                                    a.poll()
                                }, this.state.poll_interval)
                            }
                            return this
                        }, poll: function () {
                            alert("this method needs to be overwritten with one in the subclass...this contains the actual ajax call specific to the subclass.");
                            return this
                        } 
                    };
                    (function () {
                        var a;
                        BITLY.TrendLine = function (b, d, e) {
                            this.init(b, d, e)
                        };
                        BITLY.TrendLine.prototype = { constructor: BITLY.TrendLine.prototype.constructor, init: function (b, d, e) {
                            BITLY.util.initClass.call(this, b);
                            this.data = d;
                            this.state.options = $.extend({ val: "val", buffer: 2, stroke_color: "#000", fill_color: "#DCDCDC", line_width: 1, fill: false, draw_points: false, radius: 1 }, e);
                            this.state.options.w = this.state.options.w || this.el.width();
                            this.state.options.h = this.state.options.h || this.el.height();
                            this.createCanvas();
                            this.state.options.h -=
            this.state.options.buffer;
                            this.state.options.top_max = this.state.options.h - this.state.options.buffer;
                            this.state.options.animate ? this.animate() : this.draw()
                        }, setupData: function () {
                            this.state.max = 0;
                            this.state.data_points = this.data.length;
                            this.state.x_diff = Math.floor((this.state.options.w - 2 * this.state.options.buffer) / this.state.data_points);
                            for (var b = 0, d = this.data.length; b < d; b++)
                                this.state.max = Math.max(this.state.max, this.data[b][this.state.options.val]);
                            return this
                        }, createCanvas: function () {
                            this.el.empty();
                            var b = this.state.options;
                            this.els.canvas = newT.canvas({ width: b.w, height: b.h });
                            if (!("getContext" in this.els.canvas) && "G_vmlCanvasManager" in window) {
                                window.G_vmlCanvasManager.init_(document);
                                this.els.canvas = window.G_vmlCanvasManager.initElement(this.els.canvas)
                            }
                            this.el.append(this.els.canvas);
                            return this
                        }, draw: function (b) {
                            b = b || 1;
                            if (b > 1)
                                b = 1;
                            var d;
                            if (d = this.els.canvas.getContext("2d")) {
                                this.setupData();
                                var e = this.state.options, f = this.data, c = e.val, g = this.state.max, h = this.state.x_diff, n, o, p = Math.floor(f.length *
                b);
                                d.clearRect(0, 0, e.w, e.h);
                                d.beginPath();
                                d.strokeStyle = e.stroke_color;
                                d.fillStyle = e.fill_color;
                                d.lineWidth = e.line_width;
                                for (var m = 0; m < p; m++) {
                                    n = f[m][c] === g ? e.top_max : Math.max(1, Math.floor(e.top_max * (f[m][c] / g)));
                                    o = m ? "lineTo" : "moveTo";
                                    d[o](m * h + e.buffer, e.h - n)
                                }
                                d.stroke();
                                if (p === f.length && e.fill) {
                                    d.lineTo((f.length - 1) * h + e.buffer, e.h);
                                    d.lineTo(e.buffer, e.h);
                                    d.fill()
                                }
                                d.closePath();
                                e.draw_points && this.drawPoints(b)
                            }
                            return this
                        }, drawPoints: function (b) {
                            b = b || 1;
                            var d;
                            if (d = this.els.canvas.getContext("2d")) {
                                var e =
                this.state.options, f = this.data, c = this.state.x_diff, g = e.val, h = this.state.max, n;
                                b = Math.floor(f.length * b);
                                d.fillStyle = e.stroke_color || "#000";
                                var o = e.buffer;
                                for (var p = n = 0; p < b; p++) {
                                    d.beginPath();
                                    n = f[p][g] === h ? e.top_max : Math.max(1, Math.floor(e.top_max * (f[p][g] / h)));
                                    n = e.h - n;
                                    d.arc(o, n, e.radius, 0, Math.PI * 2, false);
                                    d.fill();
                                    d.closePath();
                                    o += c
                                }
                            }
                            return this
                        }, animate: function () {
                            function b(c) {
                                c = c || Date.now();
                                f += c - e;
                                var g = f / 600;
                                d.draw(g);
                                e = c;
                                g < 1 && a(b)
                            }
                            var d = this, e = window.mozAnimationStartTime || +new Date, f = 0;
                            a(b)
                        } 
                        };
                        (function () {
                            a = function () {
                                return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (b) {
                                    setTimeout(function () {
                                        b((new Date).getTime())
                                    }, 1E3 / 60)
                                }
                            } ()
                        })()
                    })();
                    if (!BITLY || BITLY === undefined)
                        BITLY = {};
                    window.$_xSCr = [window];
                    BITLY.unauth_shorten = { inputs: null, signature_key: "NWA$$adf$gh$==" };
                    (function () {
                        function a(n) {
                            n.preventDefault();
                            BITLY.data.unauth_shorten_box.el.val().indexOf(BITLY.data.unauth_shorten_box.defaultText) === 0 && BITLY.data.unauth_shorten_box.el.val($.trim(BITLY.data.unauth_shorten_box.el.val().replace(BITLY.data.unauth_shorten_box.defaultText, "")));
                            n = { url: "/data/shorten", type: "POST", dataType: "json", traditional: "true", success: b, error: function () {
                                var o = $._("An error occurred shortening that link");
                                $(document.body).trigger("errorMessage", { text: o })
                            } 
                            };
                            $(g.target_form).ajaxSubmit(n)
                        }
                        function b(n) {
                            if (n && n.data)
                                if (n.status_code == 200) {
                                    $("#middleLevelContainer1").trigger("shortenComplete", n.data);
                                    $(".last_shorten").show();
                                    BITLY.data.shortened_hashes = BITLY.data.shortened_hashes || {};
                                    BITLY.data.short_url = n.data.url;
                                    BITLY.data.shortened_hashes[BITLY.data.short_url.split("/")[3]] = 1;
                                    $(g.short_box).val(BITLY.data.short_url).focus().select()
                                } else {
                                    var o = $._("An error occurred shortening that link");
                                    switch (n.status_txt) {
                                        case "INVALID_URI":
                                            o = $._("Unable to shorten that link. It is not a valid url.");
                                            break;
                                        case "ALREADY_A_BITLY_LINK":
                                            o = $._("That is already a bit.ly link")
                                    }
                                    $(document.body).trigger("errorMessage", { text: o })
                                }
                        }
                        function d(n) {
                            if (n && n.data) {
                                $(".last_shorten").show();
                                $(g.el_inner).trigger("shortenComplete", n.data);
                                $(g.target_form).get(0).reset()
                            }
                        }
                        function e(n, o) {
                            for (var p = atob(h.sig_salt), m = ["", ""], q = n.find("input").filter("[type=hidden],[type=text]"), v = 0; v < q.length; v++) {
                                var w = $(q[v]), s = w.attr("name");
                                w = w.attr("value");
                                if ($.inArray(s, h.lst1) > -1)
                                    w = "";
                                o[s] = w
                            }
                            for (v = 0; v < h.lst1.length; v++)
                                o[h.lst1[v]] =
            m.pop() || "";
                            o[h.key] = p;
                            o.key = f(p, o);
                            delete o[h.key];
                            return o
                        }
                        function f(n, o) {
                            var p;
                            p = c(o);
                            var m, q = [], v = [];
                            for (m = 0; m < p.length; m++) {
                                q = p[m];
                                v.push(q[0] + "=" + q[1])
                            }
                            p = v.join("&");
                            return hex_md5(p + n)
                        }
                        function c(n) {
                            var o = [], p;
                            for (p in n)
                                n.hasOwnProperty(p) && o.push([p, n[p]]);
                            o.sort(function (m, q) {
                                return m[0] > q[0] ? 1 : -1
                            });
                            return o
                        }
                        var g = { target_form: "#unAuthShortenForm", short_box: "#shortenUnAuthContainer", el_inner: "#sidebar_container_inner" }, h = { sig_salt: "", key: "", lst1: [], lst2: [], lst3: [] };
                        BITLY.unauth_shorten.validate_form =
    function (n, o, p, m) {
        var q, v, w;
        n = $(n.target);
        q = ["input", "name", "value", "key"];
        var s, k = {}, D = ["", ""], M = q[1], J = q[2];
        m = atob(m.pop());
        v = n.find(q[0]);
        for (w = 0; w < v.length; w++) {
            s = $(v[w]);
            s.attr("name") === "key" && s.remove()
        }
        s = n.find(q[0]).filter("[type=hidden],[type=text]");
        for (var G = 0; G < s.length; G++) {
            q = $(s[G]);
            v = q.attr(M);
            w = q.attr(J);
            if ($.inArray(v, p) > -1) {
                w = "";
                q.attr(J, "")
            }
            k[v] = w
        }
        for (G = 0; G < p.length; G++)
            k[p[G]] = D.pop() || "";
        k[o] = m;
        o = $.extend(true, {}, k);
        (key = f(m, o)) && n.append('<input type="hidden" ' + M + "='key' " +
        J + "='" + key + "' />")
    };
                        BITLY.unauth_shorten.init = function (n, o) {
                            g = $.extend(true, {}, void 0, o);
                            $(function (p) {
                                new BITLY.SignInDropdown("#sign_in", "#mainSearchContainer");
                                new BITLY.SignUpPanel("#sign_up", "#middle_inner", "#middleLevelContainer1");
                                var m = { host_name: n, showToggle: false, rows: "one_row", params: { perpage: 10 }, use_link_capsules: true };
                                p("#results").history("", 1, m).totalClicks().pagination();
                                p(g.target_form).bind("submit", a);
                                p("#middleLevelContainer1").linkCapsule(".shortened_results_list", { capsule_container: ".shortenedBitlyListListBox",
                                    block_customization: true
                                });
                                BITLY.data.unauth_shorten_box = new BITLY.DefaultTextbox(g.short_box, "Shorten Links Here");
                                BITLY.data.unauth_shorten_box.el.focus()
                            })
                        };
                        BITLY.unauth_shorten.sidebar_start = function (n, o) {
                            g = $.extend(true, {}, void 0, o);
                            $(function (p) {
                                p("#sidebar_metrics").sidebarClicks();
                                p(g.el_inner).linkCapsule(".shortened_results_list", { capsule_container: ".shortenedBitlyListListBox", block_customization: true });
                                n && p(g.el_inner).trigger("shortenComplete", n);
                                p(g.target_form).bind("submit", function (m) {
                                    m.preventDefault();
                                    var q = { url: "/data/shorten", type: "POST", dataType: "json", traditional: "true", success: d, error: function () {
                                    } 
                                    };
                                    p(m.target).ajaxSubmit(q)
                                });
                                p(g.el_inner).bind("shortenComplete", function (m) {
                                    m.stopPropagation()
                                })
                            })
                        };
                        BITLY.unauth_shorten.mobile_start = function (n, o, p, m, q, v) {
                            h.sig_salt = q.pop();
                            h.key = m;
                            n[o] = e;
                            m_names = p;
                            h.lst1 = p;
                            h.lst2 = q;
                            h.lst3 = v
                        }
                    })();
                    var Base64 = { _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", encode: function (a) {
                        var b = "", d, e, f, c, g, h, n = 0;
                        for (a = Base64._utf8_encode(a); n < a.length; ) {
                            d = a.charCodeAt(n++);
                            e = a.charCodeAt(n++);
                            f = a.charCodeAt(n++);
                            c = d >> 2;
                            d = (d & 3) << 4 | e >> 4;
                            g = (e & 15) << 2 | f >> 6;
                            h = f & 63;
                            if (isNaN(e))
                                g = h = 64;
                            else if (isNaN(f))
                                h = 64;
                            b = b + Base64._keyStr.charAt(c) + Base64._keyStr.charAt(d) + Base64._keyStr.charAt(g) + Base64._keyStr.charAt(h)
                        }
                        return b
                    }, decode: function (a) {
                        var b = "", d, e, f, c, g, h = 0;
                        for (a = a.replace(/[^A-Za-z0-9\+\/\=]/g,
        ""); h < a.length; ) {
                            d = Base64._keyStr.indexOf(a.charAt(h++));
                            e = Base64._keyStr.indexOf(a.charAt(h++));
                            c = Base64._keyStr.indexOf(a.charAt(h++));
                            g = Base64._keyStr.indexOf(a.charAt(h++));
                            d = d << 2 | e >> 4;
                            e = (e & 15) << 4 | c >> 2;
                            f = (c & 3) << 6 | g;
                            b += String.fromCharCode(d);
                            if (c != 64)
                                b += String.fromCharCode(e);
                            if (g != 64)
                                b += String.fromCharCode(f)
                        }
                        return b = Base64._utf8_decode(b)
                    }, _utf8_encode: function (a) {
                        a = a.replace(/\r\n/g, "\n");
                        for (var b = "", d = 0; d < a.length; d++) {
                            var e = a.charCodeAt(d);
                            if (e < 128)
                                b += String.fromCharCode(e);
                            else {
                                if (e > 127 &&
                e < 2048)
                                    b += String.fromCharCode(e >> 6 | 192);
                                else {
                                    b += String.fromCharCode(e >> 12 | 224);
                                    b += String.fromCharCode(e >> 6 & 63 | 128)
                                }
                                b += String.fromCharCode(e & 63 | 128)
                            }
                        }
                        return b
                    }, _utf8_decode: function (a) {
                        for (var b = "", d = 0, e = c1 = c2 = 0; d < a.length; ) {
                            e = a.charCodeAt(d);
                            if (e < 128) {
                                b += String.fromCharCode(e);
                                d++
                            } else if (e > 191 && e < 224) {
                                c2 = a.charCodeAt(d + 1);
                                b += String.fromCharCode((e & 31) << 6 | c2 & 63);
                                d += 2
                            } else {
                                c2 = a.charCodeAt(d + 1);
                                c3 = a.charCodeAt(d + 2);
                                b += String.fromCharCode((e & 15) << 12 | (c2 & 63) << 6 | c3 & 63);
                                d += 3
                            }
                        }
                        return b
                    } 
                    };
                    if (!window.btoa)
                        window.btoa = Base64.encode;
                    if (!window.atob)
                        window.atob = Base64.decode;
                    BITLY.Bundle = function (a, b, d) {
                        this.init(a, b, d)
                    };
                    BITLY.Bundle.prototype = { constructor: BITLY.Bundle.prototype.constructor, init: function (a, b, d) {
                        BITLY.util.initClass.call(this, a);
                        this.state = { bundle_clicks: 0, total_clicks: 0, sorting: false, is_bundle_owner: d || false };
                        this.obj = { bundle_links: {} };
                        this.importData(b, false, true).cacheEls().bindEvents().initObj().getTotalClicks();
                        this.state.is_bundle_owner && this.enableSorting();
                        this.trackPageView().addCopyButton();
                        BITLY.util.queryStringToHash().sorting && this.toggleSortMode();
                        this.obj.image_selector && this.obj.image_selector.showTrigger();
                        this.obj.preview_machine.loadPending();
                        return this
                    }, destroy: function () {
                        BITLY.Eventer.undelegate({ el: this.els.sort_toggle, evt: "click" });
                        BITLY.Eventer.undelegate({ el: this.els.add_to_bundle_form, evt: "submit" });
                        BITLY.Eventer.undelegate({ evt: "bundle_description_updated" });
                        for (var a in this.obj.bundle_links)
                            this.obj.bundle_links[a].destroy();
                        BITLY.util.destroyClass.call(this);
                        return this
                    }, cacheEls: function () {
                        this.els.bundle_clicks = $("#bundleClicks");
                        this.els.bundle_clicks_parent = this.els.bundle_clicks.parent();
                        this.els.total_clicks = $("#totalClicks");
                        this.els.total_clicks_parent = this.els.total_clicks.parent();
                        this.els.add_to_bundle_form = $("#add_to_bundle");
                        this.els.add_to_bundle_textbox = this.els.add_to_bundle_form.find("#add_link_to_bundle");
                        this.els.bundle_title_form = $("#bundle_title_form");
                        this.els.bundle_description_form = $("#bundle_description_form");
                        this.els.sort_toggle = $("#organize");
                        this.els.toggle_preview = $("#toggle_preview");
                        this.els.bundle_links = $("#bundle_links");
                        this.els.providers = $("#link_providers");
                        this.els.title = $("#bundle_title");
                        this.els.description = $("#bundle_description");
                        this.els.share_button = $("#share_bundle");
                        this.els.bundle_message = $("#bundle_message");
                        this.els.rearrange_message = $(".rearrange_message");
                        this.els.bundle_short_url = $(".bundle_shorturl");
                        this.els.privacy_toggle = $("#bundle_privacy_toggle");
                        this.els.collab_list = $(".bundle_stats ul.bundle_collab");
                        this.data.short_url = "http://" + this.els.bundle_short_url.find("a").html();
                        return this
                    }, bindEvents: function () {
                        BITLY.Eventer.delegate({ evt: "submit",
                            el: this.els.add_to_bundle_form, del: this.els.add_to_bundle_form, cb: function () {
                                this.saveAddLink();
                                return false
                            }, scope: this
                        });
                        BITLY.Eventer.delegate({ evt: "click", el: this.els.sort_toggle, cb: function () {
                            this.toggleSortMode();
                            return false
                        }, scope: this
                        });
                        BITLY.Eventer.delegate({ evt: "click", el: this.els.toggle_preview, cb: function () {
                            this.toggleSortMode();
                            return false
                        }, scope: this
                        });
                        BITLY.Eventer.delegate({ evt: "bundle_update", cb: BITLY.Bundle.prototype.handleUpdate, scope: this });
                        BITLY.Eventer.delegate({ evt: "eip_saved",
                            cb: BITLY.Bundle.prototype.handleUpdate, scope: this
                        });
                        BITLY.Eventer.delegate({ evt: "bundle_title_updated", cb: function () {
                            this.obj.eip_title.flashUpdateColor()
                        }, scope: this
                        });
                        BITLY.Eventer.delegate({ evt: "bundle_description_updated", cb: function (a, b) {
                            if (b && b.els)
                                this.data.description = b.els.field.val();
                            $.trim(this.data.description) != "" ? this.els.description.addClass("set") : this.els.description.removeClass("set");
                            this.obj.eip_description.flashUpdateColor()
                        }, scope: this
                        });
                        BITLY.Eventer.delegate({ evt: "click", el: this.els.share_button,
                            cb: function (a) {
                                a.preventDefault();
                                BITLY.util.loadSidebar()
                            }, scope: this
                        });
                        this.els.bundle_message.length && BITLY.Eventer.delegate({ evt: "click", el: this.els.bundle_message.find("a.close"), cb: function (a) {
                            a.preventDefault();
                            this.removeMessage()
                        }, scope: this
                        });
                        this.els.rearrange_message.length && BITLY.Eventer.delegate({ evt: "click", el: this.els.rearrange_message.find("a.close"), cb: function (a) {
                            a.preventDefault();
                            this.removeRearrangeMessage()
                        }, scope: this
                        });
                        BITLY.Eventer.delegate({ evt: "click", el: this.els.privacy_toggle,
                            cb: function (a) {
                                var b = $(a.target);
                                if (b && b.is("a.tgl_privacy")) {
                                    a.preventDefault();
                                    this.togglePrivacy(b.attr("id").replace("tgl_", "").toUpperCase())
                                }
                            }, scope: this
                        });
                        BITLY.Eventer.delegate({ evt: "bundle_collab_added", cb: function (a, b) {
                            this.els.collab_list.append($(newT.render("bundle_collaborator_stats", b.collab)).fadeIn())
                        }, scope: this
                        });
                        BITLY.Eventer.delegate({ evt: "bundle_collab_removed", cb: function (a, b) {
                            this.els.collab_list.find("li._" + b.collab).fadeOut(function () {
                                $(this).remove()
                            })
                        }, scope: this
                        });
                        return this
                    },
                        initObj: function () {
                            this.obj.owner = new BITLY.BundleOwner({ user: this.data.user, bundle_hash: this.data.hash });
                            if (this.els.add_to_bundle_form.length)
                                this.obj.add_link_to_bundle = new BITLY.DefaultTextbox(this.els.add_to_bundle_textbox);
                            if (this.state.is_bundle_owner) {
                                this.obj.eip_title = new BITLY.EditInPlace(this.els.title, this.els.bundle_title_form, { on_save_event: "bundle_title_updated", edit_check: { func: function () {
                                    if (this.state.sorting)
                                        return false;
                                    if (this.obj.updater.state.has_updates) {
                                        var a = this;
                                        this.obj.updater.getAll(function () {
                                            a.obj.eip_title.startEdit()
                                        });
                                        return false
                                    }
                                    return true
                                }, scope: this
                                }, value_obj: this.data, value_field: "title", on_before_save: { func: function () {
                                    if (this.obj.updater)
                                        if (this.obj.updater.state.has_updates) {
                                            var a = this;
                                            this.obj.updater.getAll(function () {
                                                a.obj.eip_title.doSave()
                                            });
                                            return false
                                        }
                                    return true
                                }, scope: this
                                }
                                });
                                this.obj.eip_description = new BITLY.EditInPlace(this.els.description, this.els.bundle_description_form, { on_save_event: "bundle_description_updated", edit_check: { func: function () {
                                    if (this.state.sorting)
                                        return false;
                                    if (this.obj.updater.state.has_updates) {
                                        var a =
                            this;
                                        this.obj.updater.getAll(function () {
                                            a.obj.eip_description.startEdit()
                                        });
                                        return false
                                    }
                                    return true
                                }, scope: this
                                }, value_obj: this.data, value_field: "description", on_before_save: { func: function () {
                                    if (this.obj.updater)
                                        if (this.obj.updater.state.has_updates) {
                                            var a = this;
                                            this.obj.updater.getAll(function () {
                                                a.obj.eip_description.doSave()
                                            });
                                            return false
                                        }
                                    return true
                                }, scope: this
                                }
                                });
                                this.els.title.bind("click", function () {
                                });
                                this.els.description.bind("click", function () {
                                });
                                this.obj.providers = new BITLY.BundleLinkProviders(this.els.providers,
            this);
                                this.obj.tab_order = new BITLY.BundleTabOrder(this);
                                this.obj.updater = new BITLY.BundleUpdater(this);
                                this.obj.collab = new BITLY.BundleCollaboration(this);
                                this.obj.collab.checkPollState();
                                this.obj.image_selector = new BITLY.BundleImageSelector(this)
                            }
                            return this
                        }, enableSorting: function () {
                            var a = this;
                            this.els.bundle_links.sortable({ placeholder: "ui-state-highlight", disabled: true, update: function () {
                                a.reSortBundle()
                            } 
                            });
                            return this
                        }, importData: function (a, b, d) {
                            this.obj.preview_machine = new BITLY.LinkPreviewMachine(null,
        { chunk_size: 10 });
                            a = a || { hash: null };
                            this.data = b ? $.extend(this.data, a) : a;
                            this.data.collab = this.data.collab || [];
                            this.data.inv_collab = this.data.inv_collab || [];
                            this.loadLinks(d || false);
                            return this
                        }, loadLinks: function (a) {
                            a = a || false;
                            if (!this.data || !this.data.links)
                                return this;
                            this.obj.bundle_links = {};
                            this.data.global_to_user = {};
                            for (var b = 0, d = this.data.links.length; b < d; b++) {
                                var e = this.data.links[b];
                                this.obj.bundle_links[e.hash] = new BITLY.BundleLink(e, this, { check_embedly: a, preview_machine: this.obj.preview_machine });
                                this.data.global_to_user[e.global_hash] = e.hash
                            }
                            return this
                        }, getTotalClicks: function () {
                            this.els.total_clicks.html(this.state.total_clicks = 0);
                            for (var a = this.data.hash_set.length; a; )
                                this.getClicks(this.data.hash_set[--a], "total");
                            return this
                        }, getClicks: function (a, b) {
                            var d;
                            if (typeof a === "string")
                                a = [a];
                            d = $.trim("?hash=" + a.join("&hash="));
                            if (d === "?hash=")
                                return this;
                            BITLY.ajax.POST({ url: "/data/bundle_clicks" + d, data: {}, success: function (e) {
                                this.updateClicks(e, b);
                                b = null;
                                return false
                            }, scope: this
                            });
                            return this
                        },
                        updateClicks: function (a, b) {
                            b = b || "total";
                            if (a && a.data && a.data.clicks) {
                                for (var d = a.data.clicks, e = 0, f = d.length; e < f; e++) {
                                    this.state[b + "_clicks"] += d[e].user_clicks;
                                    this.obj.bundle_links[d[e].user_hash] && this.obj.bundle_links[d[e].user_hash].updateClicks(d[e].user_clicks)
                                }
                                this.els[b + "_clicks"].html(this.state[b + "_clicks"]);
                                this.state[b + "_clicks"] === 1 ? this.els[b + "_clicks_parent"].addClass("singular") : this.els[b + "_clicks_parent"].removeClass("singular")
                            }
                            return this
                        }, toggleSortMode: function () {
                            if (this.state.sorting) {
                                this.el.removeClass("sorting");
                                this.state.is_bundle_owner && this.els.bundle_links.sortable({ disabled: true });
                                this.els.toggle_preview.html("Hide Previews");
                                this.els.sort_toggle.html("Hide Previews");
                                for (var a in this.obj.bundle_links)
                                    this.obj.bundle_links[a].toggleSortMode()
                            } else {
                                this.el.addClass("sorting");
                                this.state.is_bundle_owner && this.els.bundle_links.sortable({ disabled: false });
                                this.els.sort_toggle.html("Show Previews");
                                this.els.toggle_preview.html("Show Previews");
                                this.cancelEdits();
                                for (a in this.obj.bundle_links) {
                                    this.obj.bundle_links[a].cancelEdits();
                                    this.obj.bundle_links[a].toggleSortMode()
                                }
                            }
                            this.state.sorting = !this.state.sorting;
                            return this
                        }, cancelEdits: function () {
                            this.obj.eip_title && this.obj.eip_title.endEdit();
                            this.obj.eip_description && this.obj.eip_description.endEdit();
                            return this
                        }, reSortBundle: function () {
                            var a = this, b = { bundle_hash: this.data.hash, bundle_owner: this.data.user };
                            this.els.bundle_links.children().each(function (d, e) {
                                var f = $(e).data("hash");
                                b[f] = d;
                                a.obj.bundle_links[f].data.display_order = d
                            });
                            BITLY.ajax.POST({ url: "/data/resort_bundle",
                                data: b, success: function (d) {
                                    this.handleUpdate(null, d.data || {})
                                }, error: function (d) {
                                    if (d && d.status_txt) {
                                        var e = $._("Oops... an error occurred trying to re-order the links in this bundle");
                                        switch (d.status_txt) {
                                            case "PERMISSION_DENIED":
                                                e = $._("You do not have permission to re-order links in this bundle")
                                        }
                                        $(document.body).trigger("errorMessage", { text: e })
                                    }
                                }, scope: this
                            });
                            this.obj.tab_order.setOrder();
                            return this
                        }, saveAddLink: function () {
                            if (!this.state.saving_new_link && $.trim(this.els.add_to_bundle_textbox.val()) !==
        "") {
                                this.state.saving_new_link = true;
                                var a = this;
                                this.els.add_to_bundle_form.ajaxSubmit({ success: function (b) {
                                    if (!BITLY.util.checkResponseForError(b, BITLY.Bundle.prototype.addLinkError, a, [b]))
                                        if (b && b.data) {
                                            a.addLink(b.data);
                                            a.addLinkCleanup();
                                            a.handleUpdate(null, b.data)
                                        }
                                }, error: function () {
                                    a.addLinkError()
                                } 
                                });
                                this.els.add_to_bundle_textbox.val("Saving...")
                            }
                            return this
                        }, addLinkError: function (a) {
                            var b = $._("Oops, an error occurred adding that link to your bundle.");
                            if (a && a.hasOwnProperty("status_txt"))
                                switch (a.status_txt) {
                                case "LINK_ALREADY_IN_BUNDLE":
                                    b =
                    $._("That link aready exists in your bundle.");
                                    break;
                                case "MISSING_ARG_LINK":
                                    b = $._("You can not add an empty link");
                                    break;
                                case "LINK_LIMIT_REACHED":
                                    b = $._("You currently may not have more than 100 links per bundle");
                                    break;
                                case "PERMISSION_DENIED":
                                    b = $._("You do not have permission to add a link to this bundle.");
                                    break;
                                default:
                                    b = $._("Oops, an error occurred adding that link to your bundle.")
                            }
                            $(document.body).trigger("errorMessage", { text: b });
                            this.addLinkCleanup()
                        }, addLinkCleanup: function () {
                            this.state.saving_new_link =
        false;
                            this.els.add_to_bundle_form.get(0).reset();
                            this.els.add_to_bundle_textbox.blur().focus();
                            return this
                        }, addLink: function (a, b) {
                            if (a.hash && a.global_hash && (a.longUrl || a.long_url)) {
                                var d = this;
                                if (a.long_url)
                                    a.longUrl = a.long_url;
                                this.obj.bundle_links[a.hash] = new BITLY.BundleLink(a, this, { create: true, check_embedly: true });
                                if (!b) {
                                    this.els.bundle_links.prepend(this.obj.bundle_links[a.hash].el);
                                    this.obj.bundle_links[a.hash].el.hide().fadeIn("slow", function () {
                                        d.state.sorting && d.obj.bundle_links[a.hash].toggleSortMode(true)
                                    })
                                }
                            }
                            return this
                        },
                        removeLink: function (a) {
                            if (a in this.obj.bundle_links) {
                                this.obj.bundle_links[a].destroy();
                                delete this.obj.bundle_links[a];
                                this.reSortBundle()
                            }
                            return this
                        }, moveLinkToTop: function (a) {
                            var b = a.el.offset(), d = this.els.bundle_links.offset();
                            b = b.top - d.top;
                            this.els.bundle_links.addClass("moving_to_top");
                            a.el.css({ position: "absolute", top: b + "px" });
                            var e = this;
                            a.el.animate({ top: 0 }, 500, function () {
                                a.el.detach();
                                e.els.bundle_links.prepend(a.el);
                                e.els.bundle_links.removeClass("moving_to_top");
                                a.el.css({ position: "",
                                    top: ""
                                })
                            });
                            return this
                        }, removeMessage: function () {
                            BITLY.ajax.POST({ url: "/data/preferences", data: { key: "hide_bundle_message", value: "true" }, success: function () {
                                this.els.bundle_message.fadeOut()
                            }, scope: this
                            })
                        }, removeRearrangeMessage: function () {
                            BITLY.ajax.POST({ url: "/data/preferences", data: { key: "hide_bundle_rearrange_message", value: "true" }, success: function () {
                                this.els.rearrange_message.fadeOut()
                            }, scope: this
                            })
                        }, trackPageView: function () {
                            BITLY.ajax.POST({ url: "/data/bundle_view_tracker", data: { hash: this.data.hash,
                                id: this.data.bundle_id, user: this.data.user
                            }
                            });
                            return this
                        }, addCopyButton: function () {
                            var a = null;
                            if (!FlashDetect.installed)
                                return this;
                            url = this.data.short_url;
                            var b = $(newT.span({ clss: "clippy" }, newT.a({ href: "#", clss: "copy_button", style: "text-indent: -9999px;" }, "copy")));
                            b.find("a").bind("click.short_curcuit", function (d) {
                                d.preventDefault()
                            });
                            this.els.bundle_short_url.append(b);
                            ZeroClipboard.setMoviePath("/s/v404/flash/zeroclipboard/ZeroClipboard.swf");
                            a = new ZeroClipboard.Client;
                            a.getHTML(37, 20);
                            a.addEventListener("load",
        function () {
            b.find("a").css("text-indent", "0")
        });
                            a.addEventListener("onComplete", function () {
                                $(document.body).trigger("successMessage", { text: $._("Successfully copied %(url)s to clipboard").replace("%(url)s", url) })
                            });
                            a.setHandCursor(true);
                            a.setText(url);
                            a.setCSSEffects(false);
                            a.glue(b.get(0), b.find(".copy_button")[0]);
                            return this
                        }, __appendScript: function (a) {
                            return this.obj.bundle_links[a].cleanupHTML(this.obj.bundle_links[a].data.html)
                        }, handleUpdate: function (a, b) {
                            if (b)
                                if (b.lm)
                                    this.data.lm = Math.floor(b.lm);
                            return this
                        }, togglePrivacy: function (a) {
                            BITLY.ajax.POST({ url: "/data/set_bundle_privacy", data: { bundle_owner: this.data.user, bundle_hash: this.data.hash, privacy: a || "default" }, success: function (b) {
                                if (b.status_code && b.status_code == 200 && b.data && b.data.privacy) {
                                    this.els.privacy_toggle.find("a").removeClass("inactive");
                                    this.els.privacy_toggle.find("#tgl_" + b.data.privacy.toLowerCase()).addClass("inactive");
                                    $(document.body).trigger("successMessage", { text: "Bundle privacy setting updated" })
                                } else
                                    $(document.body).trigger("errorMessage",
                    { text: "Error updating privacy settings." })
                            }, error: function () {
                                $(document.body).trigger("errorMessage", { text: "Error updating privacy settings." })
                            }, scope: this
                            })
                        }, default_title: "Untitled Bundle", default_description: "Want to give everyone an overview of what this bundle is all about? Click here to add a description of whats inside.", default_og_image: function () {
                            return "http://" + BITLY.data.host + "/s/v404/graphics/bag_o_fish.png"
                        } 
                    };
                    newT.save("bundle_collaborator_stats", function (a) {
                        return newT.li({ clss: "collaborator _" + a.login }, newT.img({ src: "/u/" + a.login + ".png", alt: a.display_name }), " ", newT.a({ href: "/bundles/" + a.login }, a.display_name), newT.span(" - Editor"))
                    });
                    BITLY.BundleUpdater = function (a, b) {
                        this.init(a, b ? true : false)
                    };
                    BITLY.util.inherit(BITLY.BundleUpdater, BITLY.Poller);
                    BITLY.BundleUpdater.prototype.init = function (a, b) {
                        BITLY.BundleUpdater.superclass.init.call(this, b);
                        this.parents.bundle = a
                    };
                    BITLY.BundleUpdater.prototype.poll = function () {
                        BITLY.ajax.POST({ url: "/data/bundle_info", data: { bundle_owner: this.parents.bundle.data.user, bundle_id: this.parents.bundle.data.bundle_id, last_modified: this.parents.bundle.data.lm }, success: BITLY.BundleUpdater.prototype.checkIfUpdated, error: BITLY.BundleUpdater.prototype.checkIfUpdated, scope: this });
                        return this
                    };
                    BITLY.BundleUpdater.prototype.checkIfUpdated = function (a) {
                        if (a)
                            if (a.status_code && a.status_code == 200 && a.data) {
                                a = Math.floor(a.data.lm);
                                if (a > (this.parents.bundle.data.lm || 0)) {
                                    this.stopPolling();
                                    this.parents.bundle.data.lm = a;
                                    this.reportUpdate()
                                }
                            }
                        this.setPoll();
                        return this
                    };
                    BITLY.BundleUpdater.prototype.getAll = function (a) {
                        if (!this.state.is_loading_content) {
                            this.els.show_update.addClass("loading");
                            this.state.is_loading_content = true;
                            var b = BITLY.BundleUpdater.prototype.processUpdate;
                            if (a)
                                b = function (d) {
                                    this.processUpdate(d);
                                    a(d)
                                };
                            BITLY.ajax.POST({ url: "/data/bundle_info", data: { bundle_owner: this.parents.bundle.data.user, bundle_id: this.parents.bundle.data.bundle_id, last_modified: -1 }, success: b, error: BITLY.BundleUpdater.prototype.processUpdateError, scope: this })
                        }
                        return this
                    };
                    BITLY.BundleUpdater.prototype.reportUpdate = function () {
                        if (!this.els.show_update) {
                            this.els.show_update = $(newT.render("bundle_show_update"));
                            this.bindShowUpdate();
                            this.els.show_update.hide().insertBefore(this.parents.bundle.els.bundle_links)
                        }
                        if (!this.state.has_updates) {
                            this.els.show_update.slideDown();
                            this.state.has_updates = true;
                            this.titleUpdateIndicator(true)
                        }
                        return this
                    };
                    BITLY.BundleUpdater.prototype.finishUpdating = function (a) {
                        this.els.show_update.slideUp();
                        this.state.has_updates = false;
                        this.titleUpdateIndicator(false);
                        this.state.is_loading_content = false;
                        this.els.show_update.removeClass("loading");
                        BITLY.Eventer.trigger("bundle_collab_update_applied", a);
                        this.startPolling()
                    };
                    BITLY.BundleUpdater.prototype.title_update_indicator = "(updated) ";
                    BITLY.BundleUpdater.prototype.titleUpdateIndicator = function (a) {
                        a = typeof a != "undefined" ? a : this.state.has_updates;
                        var b = document.title;
                        if (a) {
                            if (document.title.indexOf(this.title_update_indicator) !== 0)
                                b = this.title_update_indicator + document.title
                        } else if (document.title.indexOf(this.title_update_indicator) === 0)
                            b = document.title.substr(this.title_update_indicator.length);
                        document.title = b;
                        return this
                    };
                    BITLY.BundleUpdater.prototype.bindShowUpdate = function () {
                        BITLY.Eventer.delegate({ el: this.els.show_update.find("a"), evt: "click", cb: function (a) {
                            a.preventDefault();
                            this.getAll()
                        }, scope: this
                        })
                    };
                    BITLY.BundleUpdater.prototype.processUpdate = function (a) {
                        if ((a = a || this.data.update_data) && a.data) {
                            this.parents.bundle.handleUpdate(null, a.data);
                            this.checkTitle(a.data.title);
                            this.checkDescription(a.data.description);
                            this.checkLinks(a.data.links, Math.floor(a.data.lm));
                            this.checkInvitedCollabs(a.data);
                            this.checkCollabs(a.data);
                            this.checkOGImage(a.data)
                        }
                        this.finishUpdating(a);
                        return this
                    };
                    BITLY.BundleUpdater.prototype.processUpdateError = function () {
                        this.els.show_update.removeClass("loading");
                        this.state.is_loading_content = false;
                        return this
                    };
                    BITLY.BundleUpdater.prototype.checkTitle = function (a) {
                        if (a !== this.parents.bundle.data.title) {
                            this.parents.bundle.data.title = a;
                            this.parents.bundle.els.title.html(BITLY.util.preserveNewline($.escapeHTML(a)) || this.parents.bundle.default_title);
                            BITLY.Eventer.trigger("bundle_title_updated", null)
                        }
                        return this
                    };
                    BITLY.BundleUpdater.prototype.checkDescription = function (a) {
                        if (a !== this.parents.bundle.data.description) {
                            this.parents.bundle.data.description = a;
                            this.parents.bundle.els.description.html(BITLY.util.preserveNewline($.escapeHTML(a)) || this.parents.bundle.default_description);
                            BITLY.Eventer.trigger("bundle_description_updated", null)
                        }
                        return this
                    };
                    BITLY.BundleUpdater.prototype.checkLinks = function (a, b) {
                        for (var d = this.parents.bundle, e = 0, f = a.length; e < f; e++) {
                            var c = a[e].hash, g = d.obj.bundle_links[c];
                            if (g) {
                                g.data.display_order = a[e].display_order;
                                g.data.last_checked = b;
                                if (a[e].title !== g.data.title) {
                                    g.data.title = a[e].title;
                                    g.els.title.html(BITLY.util.preserveNewline($.escapeHTML(a[e].title)) || g.default_title);
                                    BITLY.Eventer.trigger("bundle_link_title_change_" + c, null)
                                }
                                if (a[e].description !== g.data.description) {
                                    g.data.description = a[e].description;
                                    g.els.description.html(BITLY.util.preserveNewline($.escapeHTML(a[e].description)) ||
                g.default_description);
                                    BITLY.Eventer.trigger("bundle_link_description_change_" + c, null)
                                }
                                g.el.detach()
                            } else {
                                d.addLink(a[e]);
                                d.obj.bundle_links[c].data.display_order = a[e].display_order;
                                d.obj.bundle_links[c].data.last_checked = b;
                                d.obj.bundle_links[c].el.detach()
                            }
                        }
                        for (c in d.obj.bundle_links)
                            if (!d.obj.bundle_links[c].data.hasOwnProperty("last_checked") || d.obj.bundle_links[c].data.last_checked != b)
                                d.obj.bundle_links[c].deleteSelf();
                        e = 0;
                        for (f = a.length; e < f; e++) {
                            c = a[e].hash;
                            (g = d.obj.bundle_links[c]) && d.els.bundle_links.append(g.el)
                        }
                        return this
                    };
                    BITLY.BundleUpdater.prototype.checkInvitedCollabs = function (a) {
                        var b = this.parents.bundle, d = a.inv_collab || [], e = b.data.inv_collab || [], f = {};
                        if (e.length > d.length) {
                            for (var c = 0, g = e.length; c < g; c++)
                                f[e[c]] = true;
                            c = 0;
                            for (g = d.length; c < g; c++)
                                f.hasOwnProperty(d[c]) && delete f[d[c]];
                            b.obj.collab.removeInvitedCollaborator(a, f)
                        }
                        return this
                    };
                    BITLY.BundleUpdater.prototype.checkCollabs = function (a) {
                        for (var b = this.parents.bundle, d = a.collab || [], e = b.data.collab || [], f = {}, c = 0, g = e.length; c < g; c++)
                            f[e[c].login] = true;
                        c = 0;
                        for (g = d.length; c < g; c++) {
                            if (typeof d[c] === "string")
                                d[c] = { login: d[c], display_name: d[c] };
                            if (f.hasOwnProperty(d[c].login))
                                delete f[d[c].login];
                            else
                                b.obj.collab.addCollaborator(d[c])
                        }
                        b.obj.collab.removeCollaborator(a, f);
                        return this
                    };
                    BITLY.BundleUpdater.prototype.checkOGImage = function (a) {
                        var b = this.parents.bundle;
                        if (a.hasOwnProperty("og_image") && a.og_image !== (b.data.og_image || "")) {
                            b.data.og_image = a.og_image;
                            b.obj.image_selector.replaceOGImage()
                        }
                        return this
                    };
                    newT.save("bundle_show_update", function () {
                        return newT.p({ clss: "bundle_has_updates site_message rounded" }, "This bundle has been updated by a fellow collaborator", newT.a({ href: location.href }, "Click here to refresh the bundle"))
                    });
                    BITLY.BundleCollaboration = function (a) {
                        this.init(a)
                    };
                    BITLY.BundleCollaboration.prototype = { constructor: BITLY.BundleCollaboration.prototype.constructor, init: function (a) {
                        BITLY.util.initClass.call(this);
                        this.parents.bundle = a;
                        this.cacheEls().bindEvents();
                        return this
                    }, cacheEls: function () {
                        this.els.add_collab_link = $("#add_collab_link");
                        this.createCollaboratorList();
                        this.els.cancel_button = this.els.collab_list.find("input.close");
                        return this
                    }, bindEvents: function () {
                        var a = this;
                        if (this.els.add_collab_link.length && this.els.collab_list) {
                            this.els.add_collab_link.overlay({ mask: "#333",
                                closeOnClick: true, target: this.els.collab_list, onLoad: function () {
                                    a.els.collab_list.find(".text").focus();
                                    a.checkCollabListHeight()
                                }, onClose: function () {
                                    a.cancelEditingState()
                                } 
                            });
                            this.els.collab_list.find("ul.collab").bind("click", function (b) {
                                b.preventDefault();
                                b = $(b.target);
                                if (b.is("a.remove")) {
                                    b = $(b.closest("li"));
                                    b.length && a.saveRemoveCollaborator(b.data("collab"))
                                }
                            });
                            this.els.collab_list.find("ul.inv_collab").bind("click", function (b) {
                                b.preventDefault();
                                b = $(b.target);
                                if (b.is("a.remove")) {
                                    b = $(b.closest("li"));
                                    b.length && a.saveRemoveInvitedCollaborator(b.data("collab"))
                                }
                            });
                            BITLY.Eventer.delegate({ evt: "submit", el: this.els.collab_list.find("form"), del: this.els.collab_list.find("form"), cb: function (b) {
                                b.preventDefault();
                                this.saveCollaborator()
                            }, scope: this
                            });
                            BITLY.Eventer.delegate({ evt: "click", el: this.els.cancel_button, cb: function (b) {
                                b.preventDefault();
                                this.hideCollaboratorList()
                            }, scope: this
                            });
                            this.bindKeypressEvent()
                        }
                        return this
                    }, createCollaboratorList: function () {
                        if (!this.parents.bundle.state.is_bundle_owner)
                            return this;
                        if (!this.els.collab_list) {
                            this.els.collab_list = $(newT.render("bundle_collaborators", { hash: this.parents.bundle.data.hash, owner: this.parents.bundle.data.user, collab: this.parents.bundle.data.collab || [], inv_collab: this.parents.bundle.data.inv_collab || [] }));
                            $("body").append(this.els.collab_list)
                        }
                        return this
                    }, bindKeypressEvent: function () {
                        BITLY.Eventer.bind({ evt: "keypress", el: this.els.collab_list.find("#new_collab"), cb: function () {
                            this.els.collab_list.find("#new_collab").val() && this.enterEditingState()
                        },
                            scope: this
                        });
                        BITLY.Eventer.bind({ evt: "paste", el: this.els.collab_list.find("#new_collab"), cb: function () {
                            var a = this;
                            setTimeout(function () {
                                a.els.collab_list.find("#new_collab").val() && a.enterEditingState()
                            }, 15)
                        }, scope: this
                        })
                    }, enterEditingState: function () {
                        this.els.collab_list.addClass("editing");
                        this.els.cancel_button.val("Cancel");
                        BITLY.Eventer.unbind({ evt: "keypress", el: this.els.collab_list.find("#new_collab") });
                        BITLY.Eventer.unbind({ evt: "paste", el: this.els.collab_list.find("#new_collab") })
                    }, cancelEditingState: function () {
                        this.els.collab_list.find("#add_bundle_collab").get(0).reset();
                        this.els.cancel_button.val($._("Close"));
                        this.els.collab_list.removeClass("editing");
                        this.bindKeypressEvent()
                    }, hideCollaboratorList: function () {
                        this.els.add_collab_link.overlay().close()
                    }, saveCollaborator: function () {
                        var a = this;
                        this.els.collab_list.find("form").ajaxSubmit({ success: function (b) {
                            if (b && b.data) {
                                var d = b.data.collab, e = b.data.inv_collab;
                                d.length > a.parents.bundle.data.collab.length && a.addCollaborator(d[d.length - 1], b.data);
                                e.length > a.parents.bundle.data.inv_collab.length && a.addInvitedCollaborator(e[e.length -
                    1], b.data);
                                a.els.collab_list.find("#new_collab").val("")
                            } else
                                a.handleCollabError(b)
                        }, error: function () {
                            $(document.body).trigger("errorMessage", { text: "An error occurred trying to add " + a.els.collab_list.find("#new_collab").val() + " as a collaborator" })
                        } 
                        });
                        return this
                    }, addCollaborator: function (a, b) {
                        this.parents.bundle.data.collab.push(a);
                        var d = $(newT.render("bundle_collaborator", a));
                        this.els.collab_list.find("ul.collab").append(d.hide());
                        d.fadeIn();
                        this.checkPollState();
                        BITLY.Eventer.trigger("bundle_collab_added",
        { collab: a });
                        b && BITLY.Eventer.trigger("bundle_update", b);
                        this.cancelEditingState();
                        this.checkCollabListHeight();
                        return this
                    }, addInvitedCollaborator: function (a, b) {
                        this.parents.bundle.data.inv_collab.push(a);
                        var d = $(newT.render("bundle_inv_collaborator", a));
                        this.els.collab_list.find("ul.inv_collab").append(d.hide());
                        d.fadeIn();
                        this.checkPollState();
                        BITLY.Eventer.trigger("bundle_collab_invited", { collab: a });
                        b && BITLY.Eventer.trigger("bundle_update", b);
                        this.cancelEditingState();
                        this.checkCollabListHeight();
                        return this
                    }, saveRemoveCollaborator: function (a) {
                        BITLY.ajax.POST({ url: "/data/remove_bundle_collaborator", data: { bundle_hash: this.parents.bundle.data.hash, bundle_owner: this.parents.bundle.data.user, collaborator: a }, success: function (b) {
                            b && b.data && this.removeCollaborator(b.data, a)
                        }, error: function (b) {
                            var d = "An error occurred trying to remove " + a + " as a collaborator";
                            b && b.hasOwnProperty("status_txt");
                            $(document.body).trigger("errorMessage", { text: d })
                        }, scope: this
                        });
                        return this
                    }, removeCollaborator: function (a,
    b) {
                        this.parents.bundle.data.collab = a.collab;
                        this.checkPollState();
                        if (typeof b === "string") {
                            var d = b;
                            b = {};
                            b[d] = true
                        }
                        this.els.collab_list.find("ul.collab li").each(function (e, f) {
                            b.hasOwnProperty($(f).data("collab")) && $(f).fadeOut(function () {
                                $(this).remove()
                            })
                        });
                        BITLY.Eventer.trigger("bundle_update", a);
                        for (collab_id in b)
                            BITLY.Eventer.trigger("bundle_collab_removed", { collab: collab_id });
                        this.checkCollabListHeight();
                        return this
                    }, saveRemoveInvitedCollaborator: function (a) {
                        BITLY.ajax.POST({ url: "/data/remove_invited_bundle_collaborator",
                            data: { bundle_hash: this.parents.bundle.data.hash, bundle_owner: this.parents.bundle.data.user, collaborator: a }, success: function (b) {
                                b && b.data && this.removeInvitedCollaborator(b.data, a)
                            }, error: function (b) {
                                var d = "An error occurred trying to remove " + a + "'s invite";
                                b && b.hasOwnProperty("status_txt");
                                $(document.body).trigger("errorMessage", { text: d })
                            }, scope: this
                        });
                        return this
                    }, removeInvitedCollaborator: function (a, b) {
                        this.parents.bundle.data.inv_collab = a.inv_collab;
                        if (typeof b === "string") {
                            var d = b;
                            b = {};
                            b[d] = true
                        }
                        this.els.collab_list.find("ul.inv_collab li").each(function (e,
        f) {
                            b.hasOwnProperty($(f).data("collab")) && $(f).fadeOut(function () {
                                $(this).remove()
                            })
                        });
                        this.checkPollState();
                        BITLY.Eventer.trigger("bundle_update", a);
                        this.checkCollabListHeight();
                        return this
                    }, handleCollabError: function (a) {
                        var b = "An error occurred trying to add " + this.els.collab_list.find("#new_collab").val() + " as a collaborator";
                        if (a && a.hasOwnProperty("status_txt"))
                            switch (a.status_txt) {
                            case "USER_IS_ALREADY_OWNER":
                                b = this.els.collab_list.find("#new_collab").val() + " is the owner of this bundle";
                                break;
                            case "USER_IS_ALREADY_COLLABORATOR":
                                b = this.els.collab_list.find("#new_collab").val() + " is already a collaborator on this bundle";
                                break;
                            case "USER_DOES_NOT_EXIST":
                                b = this.els.collab_list.find("#new_collab").val() + " is not a bitly user";
                                break;
                            case "COLLAB_LIMIT_EXCEEDED":
                                b = "You may not add more than 20 collaborators to a bundle."
                        }
                        $(document.body).trigger("errorMessage", { text: b })
                    }, checkPollState: function () {
                        var a = this.parents.bundle, b = a.data.inv_collab && a.data.inv_collab.length;
                        if ((a.data.collab && a.data.collab.length ||
        b) != a.obj.updater.state.is_polling)
                            a.obj.updater.state.is_polling ? a.obj.updater.stopPolling() : a.obj.updater.startPolling()
                    }, checkCollabListHeight: function () {
                        var a = $(window).height(), b = this.els.collab_list.height();
                        a - b < 150 ? this.els.collab_list.css("position", "absolute") : this.els.collab_list.css("position", "fixed")
                    } 
                    };
                    newT.save("bundle_collaborators", function (a) {
                        return newT.div({ id: "bundle_collab", clss: "overlay" }, newT.h2("Collaborate"), newT.ul({ clss: "collab" }, newT.li({ style: "background-image: url(/u/" + a.owner + ".png);", clss: "_" + a.owner }, a.owner, BITLY.data.current_user && a.owner == BITLY.data.current_user ? " (" + $._("you") + ")" : "", newT.span({ clss: "role" }, $._("Owner"))), newT.eachRender(a.collab, "bundle_collaborator")), newT.ul({ clss: "inv_collab" }, newT.eachRender(a.inv_collab, "bundle_inv_collaborator")), newT.form({ id: "add_bundle_collab",
                            action: "/data/add_bundle_collaborator", method: "POST"
                        }, newT.fieldset({ clss: "clearfix" }, newT.label({ "for": "new_collab" }, $._("Add Editors")), newT.input({ type: "text", id: "new_collab", name: "collaborator", autocomplete: "off", clss: "text", value: "" }), newT.input({ type: "hidden", name: "bundle_hash", value: a.hash }), newT.input({ type: "hidden", name: "bundle_owner", value: a.owner }), BITLY.data.xsrf), newT.fieldset({ clss: "clearfix" }, newT.input({ type: "button", clss: "close white_button", value: $._("Close") }), newT.input({ type: "submit",
                            clss: "submit white_button", value: $._("Add as Editor")
                        }))))
                    });
                    newT.save("bundle_collaborator", function (a) {
                        return newT.li({ style: "background-image: url(/u/" + a.login + ".png);", "data-collab": a.login }, a.display_name, BITLY.data.current_user && a.login == BITLY.data.current_user ? " (" + $._("you") + ")" : "", newT.span({ clss: "role" }, $._("Editor")), newT.a({ clss: "remove", href: "#" }, "x"))
                    });
                    newT.save("bundle_inv_collaborator", function (a) {
                        return newT.li({ "data-collab": a }, a, newT.span({ clss: "role" }, $._("Editor")), newT.a({ clss: "remove", href: "#" }, "x"))
                    });
                    BITLY.BundleImageSelector = function (a) {
                        this.init(a)
                    };
                    BITLY.BundleImageSelector.prototype = { constructor: BITLY.BundleImageSelector.prototype.constructor, init: function (a) {
                        BITLY.util.initClass.call(this);
                        this.parents.bundle = a
                    }, showTrigger: function () {
                        this.els.trigger = $("#og_image_trigger");
                        BITLY.Eventer.delegate({ evt: "click", el: this.els.trigger, cb: function (a) {
                            a.preventDefault();
                            this.loadPreviewData()
                        }, scope: this
                        })
                    }, saveOGImage: function (a) {
                        var b = this.parents.bundle;
                        if (a == b.default_og_image())
                            a = "";
                        BITLY.ajax.POST({ url: "/data/edit_bundle_og_image", data: { bundle_hash: b.data.hash,
                            bundle_owner: b.data.user, og_image: a
                        }, success: function (d) {
                            var e = this.parents.bundle;
                            e.handleUpdate({}, d.data);
                            e.data.og_image = d.data.og_image;
                            this.clearTempOGImage().replaceOGImage();
                            $(document.body).trigger("successMessage", { text: $._("Bundle image updated!") })
                        }, error: function () {
                            $(document.body).trigger("errorMessage", { text: $._("An error occurred trying to update the image for this bundle") })
                        }, scope: this
                        });
                        return this
                    }, loadPreviewData: function () {
                        var a, b = this.parents.bundle;
                        this.state.dimensions = {};
                        this.state.dimensions[this.parents.bundle.default_og_image()] = { height: 100, width: 79.3 };
                        for (var d in b.obj.bundle_links) {
                            a = b.obj.bundle_links[d];
                            a.findThumbnail();
                            this.state.dimensions[a.data.thumbnail] = a.data.thumbnail_dimensions
                        }
                        this.el = $(newT.render("bundle_og_image_selector", this, { el: document.body }));
                        var e = this;
                        this.highlightActiveImage();
                        BITLY.Eventer.delegate({ evt: "click", el: this.el.find("ul"), cb: function (f) {
                            f = $(f.target).closest("li.og_image");
                            if (f.length) {
                                this.setTempOGImage(f.find("img").attr("src")).highlightActiveImage();
                                return false
                            }
                        }, scope: this
                        });
                        BITLY.Eventer.delegate({ evt: "click", el: this.el.find(".save_image_selection"), cb: function (f) {
                            $(f.target);
                            if (this.state.temp_og_image) {
                                f.preventDefault();
                                this.saveOGImage(this.state.temp_og_image)
                            }
                        }, scope: this
                        });
                        e = this;
                        this.el.overlay({ mask: "#333", closeOnClick: false, target: this.el, load: true, fixed: false, close: "a.cancel_image_selection", onClose: function () {
                            BITLY.Eventer.undelegate({ evt: "click", el: e.el.find("ul") });
                            BITLY.Eventer.undelegate({ evt: "click", el: e.el.find(".save_image_selection") });
                            e.clearTempOGImage();
                            e.el.remove()
                        } 
                        });
                        this.el.find("ul").pagedList({ scroll: "horizontal", page_nums: true, num_items: 8, nav_el: "#og_image_selector .nav" });
                        return this
                    }, setTempOGImage: function (a) {
                        this.state.temp_og_image = a;
                        var b = this.state.dimensions[a];
                        this.el.find(".bundle_og_image").attr("src", a).attr("style", "height: " + 2 * b.height + "px; width: " + 2 * b.width + "px; margin-top: " + -1 * b.height + "px;");
                        this.el.find(".cancel_image_selection").html($._("Cancel"));
                        return this
                    }, clearTempOGImage: function () {
                        delete this.state.temp_og_image;
                        this.el.find(".cancel_image_selection").html($._("Close"));
                        return this
                    }, replaceOGImage: function () {
                        $(".bundle_og_image").attr("src", this.parents.bundle.data.og_image || this.parents.bundle.default_og_image())
                    }, highlightActiveImage: function () {
                        var a = this.el.find(".images li"), b = this.parents.bundle, d = this.state.temp_og_image || b.data.og_image;
                        a.removeClass("sel");
                        a.each(function (e, f) {
                            $val = $(f);
                            $val.find("img").attr("src") == d && $val.addClass("sel")
                        });
                        return this
                    } 
                    };
                    newT.save("bundle_og_image_selector", function (a) {
                        var b = a.parents.bundle.data.og_image || a.parents.bundle.default_og_image(), d = a.state.dimensions[b] || { height: 100, width: 100 };
                        return newT.div({ id: "og_image_selector", clss: "overlay" }, newT.h2($._("Select an image for the bundle")), newT.div({ clss: "olay_sect cur_image clearfix" }, newT.div(newT.img({ clss: "bundle_og_image", src: b, style: "height: " + 2 * d.height + "px; width: " + 2 * d.width + "px; margin-top: " + -1 * d.height + "px;" })), newT.p($._("This image will represent this bundle when you share it on facebook")),
    newT.p($._("You can change your selection anytime by clicking the image next to the bundle title"))), newT.div({ clss: "olay_sect" }, newT.ul({ clss: "clearfix images" }, newT.render("bundle_og_image", { data: { thumbnail: a.parents.bundle.default_og_image(), thumbnail_dimensions: { height: 100, width: 79.3}} }), newT.eachRender(a.parents.bundle.obj.bundle_links, "bundle_og_image"))), newT.div({ clss: "olay_sect controls clearfix" }, newT.a({ clss: "white_button cancel_image_selection" }, $._("Close")), newT.a({ clss: "white_button save_image_selection" },
    $._("Save")), newT.div({ clss: "nav" })))
                    });
                    newT.save("bundle_og_image", function (a) {
                        return newT.frag(a.data && a.data.thumbnail ? newT.li({ clss: "og_image" }, newT.img({ src: a.data.thumbnail, style: "height: " + a.data.thumbnail_dimensions.height + "px; width: " + a.data.thumbnail_dimensions.width + "px; margin-top: " + -1 * a.data.thumbnail_dimensions.height / 2 + "px;" })) : "")
                    });
                    BITLY.BundleLink = function (a, b, d) {
                        this.init(a, b, d)
                    };
                    BITLY.BundleLink.prototype = { constructor: BITLY.BundleLink.prototype.constructor, init: function (a, b, d) {
                        d = d || {};
                        this.data = { hash: null, bundle_hash: null, bundle_id: null };
                        this.state = { add_title_if_found: d.create };
                        this.els = {};
                        this.obj = {};
                        this.parents = {};
                        if (a)
                            this.data = a;
                        if (d.preview_machine) {
                            this.parents.preview_machine = d.preview_machine;
                            delete d.preview_machine
                        }
                        if (b) {
                            this.parents.bundle = b;
                            this.data.bundle_hash = b.data.hash;
                            this.data.bundle_id = b.data.bundle_id;
                            this.data.bundle_owner = b.data.user
                        }
                        this.el = $("#" +
        this.data.hash);
                        !this.el.length && d.create && this.createEl();
                        this.cacheEls().bindEvents().initObj();
                        this.el.data("hash", this.data.hash);
                        if (d.check_embedly) {
                            var e = this;
                            this.obj.preview = new BITLY.LinkPreview(this.els.preview, { hash: this.data.hash, global_hash: this.data.global_hash, longUrl: this.data.longUrl }, { max_item_width: this.max_item_width, preview_machine: this.parents.preview_machine, onload: function (f) {
                                e.findThumbnail(f)
                            } 
                            });
                            this.findThumbnail()
                        }
                        return this
                    }, findThumbnail: function () {
                        if (!this.data.thumbnail) {
                            this.data.thumbnail =
            null;
                            if (this.els.preview.find("img")) {
                                var a = this.els.preview.find("img").first();
                                this.data.thumbnail = a.attr("src");
                                var b = a.innerHeight();
                                a = a.innerWidth();
                                this.data.thumbnail_dimensions = { height: 100, width: 100 };
                                if (b > 100 || a > 100) {
                                    b = parseFloat(a / b) || 1;
                                    this.data.thumbnail_dimensions = b > 1 ? { height: 100 / b, width: 100} : { height: 100, width: 100 * b }
                                }
                            }
                        }
                        return this
                    }, max_item_width: 700, destroy: function () {
                        BITLY.Eventer.trigger("bundle_link_removed", this.data);
                        BITLY.Eventer.undelegate({ el: this.els.delete_form, evt: "submit" });
                        BITLY.util.destroyClass.call(this);
                        return this
                    }, cacheEls: function () {
                        this.els.non_sortable = this.el.find(".non_sortable");
                        this.els.title = this.el.find(".item_title");
                        this.els.description = this.el.find(".item_description");
                        this.els.title_form = this.el.find("form.edit_title");
                        this.els.description_form = this.el.find("form.edit_description");
                        this.els.preview = this.el.find(".link_preview");
                        this.els.delete_form = this.el.find("form.remove_link");
                        this.els.move_to_top_form = this.el.find("form.move_link_to_top");
                        this.els.link_clicks =
        this.el.find(".link_clicks");
                        return this
                    }, bindEvents: function () {
                        BITLY.Eventer.delegate({ evt: "submit", el: this.els.delete_form, del: this.els.delete_form, cb: function () {
                            var a = this;
                            this.els.delete_form.ajaxSubmit({ success: function (b) {
                                if (b && b.status_code && b.status_code == 200)
                                    a.deleteSelf();
                                else if (b && b.status_txt) {
                                    var d = "Oops... an error occurred trying to remove this link from your bundle";
                                    switch (b.status_txt) {
                                        case "PERMISSION_DENIED":
                                            d = "You do not have permission to delete links from this bundle"
                                    }
                                    $(document.body).trigger("errorMessage",
                            { text: d })
                                } else
                                    $(document.body).trigger("errorMessage", { text: "Oops... an error occurred trying to remove this link from your bundle" })
                            }, error: function () {
                                $(document.body).trigger("errorMessage", { text: "Oops... an error occurred trying to remove this link from your bundle" })
                            } 
                            });
                            return false
                        }, scope: this
                        });
                        BITLY.Eventer.delegate({ evt: "submit", el: this.els.move_to_top_form, del: this.els.move_to_top_form, cb: function (a) {
                            a.preventDefault();
                            this.moveToTop();
                            return false
                        }, scope: this
                        });
                        BITLY.Eventer.delegate({ evt: "bundle_link_title_change_" +
            this.data.hash, cb: function (a, b) {
                if (b && b.els)
                    this.data.title = b.els.field.val();
                this.obj.eip_title.flashUpdateColor();
                return this
            }, scope: this
                        });
                        BITLY.Eventer.delegate({ evt: "bundle_link_description_change_" + this.data.hash, cb: function (a, b) {
                            if (b && b.els)
                                this.data.description = b.els.field.val();
                            $.trim(this.data.description) != "" ? this.els.description.addClass("set") : this.els.description.removeClass("set");
                            this.obj.eip_description.flashUpdateColor();
                            return this
                        }, scope: this
                        });
                        return this
                    }, initObj: function () {
                        if (this.els.title_form.length)
                            this.obj.eip_title =
            new BITLY.EditInPlace(this.els.title, this.els.title_form, { default_text: this.default_title, on_save_event: "bundle_link_title_change_" + this.data.hash, parent_el: this.el, editing_class: "titleedit", edit_check: { func: function () {
                if (this.parents.bundle.state.sorting)
                    return false;
                if (this.parents.bundle.obj.updater.state.has_updates) {
                    var a = this;
                    this.parents.bundle.obj.updater.getAll(function () {
                        a.obj.eip_title.startEdit()
                    });
                    return false
                }
                return true
            }, scope: this
            }, value_obj: this.data, value_field: "title", on_before_save: { func: function () {
                if (this.parents.bundle.obj.updater)
                    if (this.parents.bundle.obj.updater.state.has_updates) {
                        var a =
                                this;
                        this.parents.bundle.obj.updater.getAll(function () {
                            a.obj.eip_title.doSave()
                        });
                        return false
                    }
                return true
            }, scope: this
            }
            });
                        if (this.els.description_form.length)
                            this.obj.eip_description = new BITLY.EditInPlace(this.els.description, this.els.description_form, { default_text: this.default_description, on_save_event: "bundle_link_description_change_" + this.data.hash, edit_check: { func: function () {
                                if (this.parents.bundle.state.sorting)
                                    return false;
                                if (this.parents.bundle.obj.updater.state.has_updates) {
                                    var a = this;
                                    this.parents.bundle.obj.updater.getAll(function () {
                                        a.obj.eip_description.startEdit()
                                    });
                                    return false
                                }
                                return true
                            }, scope: this
                            }, value_obj: this.data, value_field: "description", on_before_save: { func: function () {
                                if (this.parents.bundle.obj.updater)
                                    if (this.parents.bundle.obj.updater.state.has_updates) {
                                        var a = this;
                                        this.parents.bundle.obj.updater.getAll(function () {
                                            a.obj.eip_description.doSave()
                                        });
                                        return false
                                    }
                                return true
                            }, scope: this
                            }
                            });
                        return this
                    }, updateClicks: function (a) {
                        if (a) {
                            this.els.link_clicks.html(a);
                            parseInt(a, 10) === 1 ? this.els.link_clicks.addClass("singular") : this.els.link_clicks.removeClass("singular")
                        }
                        return this
                    },
                        embedlyDescription: function (a) {
                            if (a.description && (!this.data.description || $.trim(this.data.description) == "")) {
                                BITLY.util.log("no saved description, so...");
                                this.setDescription(BITLY.util.preserveNewline(a.description));
                                this.alertDefaultDescription(a.description)
                            }
                            return this
                        }, alertDefaultDescription: function (a) {
                            BITLY.util.log("default description!");
                            this.els.default_description_alert = $(newT.render("bundle_link_alert_desc"));
                            this.els.default_description_alert.insertBefore(this.els.description);
                            BITLY.Eventer.delegate({ evt: "click",
                                el: this.els.default_description_alert, cb: function (b) {
                                    b.preventDefault();
                                    this.obj.eip_description.setAndSave(a);
                                    BITLY.Eventer.undelegate({ el: this.els.default_description_alert, evt: "click" });
                                    this.els.default_description_alert.fadeOut("fast", function () {
                                        $(this).remove()
                                    });
                                    return false
                                }, scope: this
                            });
                            return this
                        }, checkAddTitle: function (a) {
                            if (this.state.add_title_if_found && !this.data.title && a) {
                                var b = null;
                                if (a["element.og:title"])
                                    b = a["element.og:title"];
                                else if (a.title)
                                    b = a.title;
                                b && this.obj.eip_title.setAndSave(b)
                            }
                            return this
                        },
                        moveToTop: function () {
                            var a = this;
                            this.els.move_to_top_form.ajaxSubmit({ success: function (b) {
                                if (b && b.status_code && b.status_code == 200) {
                                    a.parents.bundle.moveLinkToTop(a);
                                    BITLY.Eventer.trigger("bundle_update", b.data)
                                } else if (b && b.status_txt) {
                                    var d = "Oops... an error occurred trying to move this link to the top";
                                    switch (b.status_txt) {
                                        case "PERMISSION_DENIED":
                                            d = "You do not have permission to reorder links in this bundle"
                                    }
                                    $(document.body).trigger("errorMessage", { text: d })
                                } else
                                    $(document.body).trigger("errorMessage",
                    { text: "Oops... an error occurred trying to move this link to the top" })
                            }, error: function () {
                                $(document.body).trigger("errorMessage", { text: "Oops... an error occurred trying to move this link to the top" })
                            } 
                            });
                            return this
                        }, toggleSortMode: function (a) {
                            if (this.parents.bundle.state.sorting && !a) {
                                if (this.state.prev_title_text) {
                                    this.els.title.html(this.state.prev_title_text);
                                    delete this.state.prev_title_text
                                }
                                this.els.non_sortable.stop(true).slideDown()
                            } else {
                                if (this.parents.bundle.state.is_bundle_owner) {
                                    if (!this.data.title ||
                !$.trim(this.data.title)) {
                                        this.state.prev_title_text = this.els.title.html();
                                        this.els.title.html(this.data.longUrl)
                                    }
                                } else {
                                    this.state.prev_title_text = this.els.title.html();
                                    this.els.title.html(newT.a({ href: "http://" + (this.data.short_domain ? this.data.short_domain : BITLY.data.host) + "/" + this.data.hash }, this.data.title || this.data.longUrl))
                                }
                                this.els.non_sortable.stop(true).slideUp()
                            }
                            return this
                        }, setDescription: function (a) {
                            BITLY.util.log("use embedly description!");
                            this.els.description.html(a);
                            return this
                        },
                        cancelEdits: function () {
                            this.obj.eip_title && this.obj.eip_title.endEdit();
                            this.obj.eip_description && this.obj.eip_description.endEdit();
                            return this
                        }, deleteSelf: function () {
                            var a = this;
                            this.el.fadeOut("slow", function () {
                                "bundle" in a.parents && a.parents.bundle.removeLink(a.data.hash)
                            });
                            return this
                        }, createEl: function () {
                            this.el = $(newT.render("bundle_link", this));
                            BITLY.Eventer.trigger("bundle_link_added", this.data);
                            return this
                        }, default_title: "This link has no title. Why dont you click here and give it one.",
                        default_description: "Want to make this link more interesting? Click here to add your own description"
                    };
                    newT.save("bundle_link_alert_desc", function () {
                        return newT.a({ clss: "desc_alert rounded", href: "#" }, $._("This is the default description for this item. Click here to save it to the bundle"))
                    });
                    newT.save("bundle_link_remove_link_form", function (a) {
                        return newT.form({ method: "post", action: "/data/remove_link_from_bundle", clss: "remove_link" }, newT.fieldset(newT.input({ type: "hidden", name: "bundle_id", value: a.data.bundle_id }), newT.input({ type: "hidden", name: "bundle_owner", value: a.data.bundle_owner }), newT.input({ type: "hidden", name: "link_hash", value: a.data.hash }), newT.input({ type: "submit", clss: "button submit", value: $._("Remove") }), BITLY.data.xsrf))
                    });
                    newT.save("bundle_link_move_to_top_form", function (a) {
                        return newT.form({ method: "post", action: "/data/move_bundle_item_to_top", clss: "move_link_to_top" }, newT.fieldset(newT.input({ type: "hidden", name: "bundle_id", value: a.data.bundle_id }), newT.input({ type: "hidden", name: "bundle_owner", value: a.data.bundle_owner }), newT.input({ type: "hidden", name: "link_hash", value: a.data.hash }), newT.input({ type: "submit", clss: "button submit", value: "\u25b2" }), BITLY.data.xsrf))
                    });
                    newT.save("bundle_link_edit_title_form", function (a) {
                        return newT.form({ method: "post", action: "/data/edit_bundle_item_title", clss: "edit_title edit_in_place" }, newT.fieldset(newT.input({ type: "hidden", name: "bundle_id", value: a.data.bundle_id }), newT.input({ type: "hidden", name: "bundle_owner", value: a.data.bundle_owner }), newT.input({ type: "hidden", name: "link_hash", value: a.data.hash }), newT.input({ type: "text", name: "title", value: a.data.title || "", clss: "text eip" }), newT.input({ type: "submit", clss: "button submit", value: $._("Save") }),
    newT.input({ type: "button", clss: "button cancel", value: $._("Cancel") }), BITLY.data.xsrf))
                    });
                    newT.save("bundle_link_edit_description_form", function (a) {
                        return newT.form({ method: "post", action: "/data/edit_bundle_item_description", clss: "edit_description edit_in_place rounded" }, newT.fieldset(newT.input({ type: "hidden", name: "bundle_id", value: a.data.bundle_id }), newT.input({ type: "hidden", name: "bundle_owner", value: a.data.bundle_owner }), newT.input({ type: "hidden", name: "link_hash", value: a.data.hash }), newT.textarea({ name: "description", clss: "eip" }, a.data.description || ""), newT.input({ type: "submit", clss: "button submit",
                            value: $._("Save")
                        }), newT.input({ type: "button", clss: "button cancel", value: $._("Cancel") }), BITLY.data.xsrf))
                    });
                    newT.save("bundle_link_title", function (a) {
                        return newT.h3({ clss: "item_title editable", style: "background-image: url(/favicon/" + a.data.global_hash + ".png);" }, $.escapeHTML(a.data.title || BITLY.BundleLink.prototype.default_title))
                    });
                    newT.save("bundle_link", function (a) {
                        return newT.li({ id: a.data.hash, clss: "bundle" }, newT.render("bundle_link_move_to_top_form", a), newT.render("bundle_link_remove_link_form", a), newT.render("bundle_link_title", a), newT.div({ clss: "non_sortable" }, newT.render("bundle_link_edit_title_form", a), newT.div({ clss: "link_preview clearfix" }), newT.h4({ clss: "item_link", style: "background-image: url(/favicon/" + a.data.global_hash + ".png);" }, newT.a({ href: "http://" + (a.data.short_domain ? a.data.short_domain : BITLY.data.host) +
        "/" + a.data.hash + "?r=bb", clss: "item_longUrl"
                        }, a.data.longUrl.substr(0, 65), a.data.longUrl.length > 65 ? "..." : "")), newT.span({ clss: "bitly_links" }, newT.a({ href: "http://" + (a.data.short_domain ? a.data.short_domain : BITLY.data.host) + "/" + a.data.hash + "?r=bb", clss: "bitly_link hash" }, (a.data.short_domain ? a.data.short_domain : BITLY.data.host) + "/" + a.data.hash), " - ", newT.a({ href: "http://" + (a.data.short_domain ? a.data.short_domain : BITLY.data.host) + "/" + a.data.hash + "+", clss: "bitly_info" }, $._("Info Page+"))), newT.p({ clss: "item_description editable rounded" +
        (a.data.description ? " set" : "")
                        }, $.escapeHTML(a.data.description || BITLY.BundleLink.prototype.default_description)), newT.render("bundle_link_edit_description_form", a)), newT.strong({ clss: "link_clicks" }, 0))
                    });
                    BITLY.BundleLinkProviders = function (a, b) {
                        this.init(a, b)
                    };
                    BITLY.BundleLinkProviders.prototype = { constructor: BITLY.BundleLinkProviders.prototype.constructor, init: function (a, b) {
                        BITLY.util.initClass.call(this, a);
                        this.data.counts = {};
                        this.parents.bundle = b;
                        this.loadProviders().bindEvents();
                        this.el.pagedList({ view_all: true });
                        return this
                    }, destroy: function () {
                        BITLY.util.destroyClass.call(this);
                        return this
                    }, bindEvents: function () {
                        BITLY.Eventer.delegate({ evt: "bundle_link_added", cb: function (a, b) {
                            this.handleLinkAdded(b)
                        }, scope: this
                        });
                        BITLY.Eventer.delegate({ evt: "bundle_link_removed",
                            cb: function (a, b) {
                                this.handleLinkRemoved(b)
                            }, scope: this
                        });
                        return this
                    }, loadProviders: function () {
                        this.data.provider_count = 0;
                        var a = this;
                        this.el.find("li").each(function (b, d) {
                            var e = $(d), f = e.find(".domain"), c = e.find(".domain_count");
                            f = $.trim(f.html());
                            a.els[f] = e;
                            a.data.counts[f] = parseInt($.trim(c.html()), 10);
                            a.data.provider_count++
                        });
                        return this
                    }, handleLinkAdded: function (a) {
                        if (a = this._getDomain(a)) {
                            this.updateDomainCount(a, 1);
                            a in this.els || this.createDomain(a)
                        }
                        return this
                    }, handleLinkRemoved: function (a) {
                        a =
        this._getDomain(a);
                        this.updateDomainCount(a, -1);
                        this.data.counts[a] <= 0 && this.removeDomain(a);
                        return this
                    }, updateDomainCount: function (a, b) {
                        var d = (this.data.counts[a] || 0) + b;
                        this.data.counts[a] = d;
                        a in this.els && this.els[a].find(".domain_count").html(d);
                        return this
                    }, createDomain: function (a) {
                        this.els[a] = $(newT.render("bundle_new_domain", { domain: a, domain_count: 1 }));
                        this.el.prepend(this.els[a]);
                        this.data.provider_count++;
                        return this
                    }, removeDomain: function (a) {
                        var b = this;
                        a in this.els && this.els[a].fadeOut("slow",
        function () {
            if (b && b.els && b.els[a]) {
                b.els[a] = null;
                delete b.els[a]
            }
            b && b.data && b.data.counts && b.data.counts[a] && delete b.data.counts[a];
            b.data.provider_count--
        });
                        return this
                    }, _getDomain: function (a) {
                        var b = null;
                        if (a.longUrl)
                            b = $.trim(a.longUrl.split("/").slice(2, 3).join("/"));
                        return b
                    } 
                    };
                    newT.save("bundle_new_domain", function (a) {
                        return newT.li(newT.a({ href: a.domain, clss: "domain" }, a.domain), "(", newT.span({ clss: "domain_count" }, a.domain_count.toString()), ")")
                    });
                    BITLY.BundleOwner = function (a) {
                        this.init(a)
                    };
                    BITLY.BundleOwner.prototype = { constructor: BITLY.BundleOwner.prototype.constructor, init: function (a) {
                        this.data = { user: null };
                        this.state = {};
                        this.els = {};
                        if (a)
                            this.data = a;
                        this.cacheEls().bindEvents().initOtherBundles();
                        return this
                    }, destroy: function () {
                        BITLY.util.destroyClass.call(this);
                        return this
                    }, cacheEls: function () {
                        this.els.other_bundles = $("#otherbundles");
                        return this
                    }, bindEvents: function () {
                        BITLY.Eventer.delegate({ evt: "bundle_link_added", cb: function (a, b) {
                            this.handleLinkAdded(b);
                            return this
                        }, scope: this
                        });
                        BITLY.Eventer.delegate({ evt: "bundle_link_removed", cb: function (a, b) {
                            this.handleLinkRemoved(b);
                            return this
                        }, scope: this
                        });
                        BITLY.Eventer.delegate({ evt: "bundle_title_updated", cb: function (a, b) {
                            this.handleTitleChange(b);
                            return this
                        }, scope: this
                        });
                        return this
                    }, initOtherBundles: function () {
                        this.els.cur_bundle = this.els.other_bundles.find("#otherbundle_" + this.data.bundle_hash);
                        this.els.cur_bundle_count = this.els.cur_bundle.find(".count");
                        this.data.link_count = parseInt($.trim(this.els.cur_bundle_count.html()), 10);
                        this.els.other_bundles.pagedList({ view_all: true, view_all_link: "/bundles/" + this.data.user });
                        return this
                    }, handleLinkAdded: function () {
                        this.els.cur_bundle_count.html(++this.data.link_count);
                        this.setClass();
                        return this
                    }, handleLinkRemoved: function () {
                        this.els.cur_bundle_count.html(--this.data.link_count);
                        this.setClass();
                        return this
                    }, setClass: function () {
                        this.data.link_count == 1 ? this.els.cur_bundle.addClass("singular") : this.els.cur_bundle.removeClass("singular");
                        return this
                    }, handleTitleChange: function (a) {
                        a &&
        a.els && this.els.cur_bundle.find("a").html($.escapeHTML(a.els.field.val()));
                        return this
                    } 
                    };
                    newT.save("userbundles", function (a) {
                        return newT.eachRender(a, "userbundle")
                    });
                    newT.save("userbundle", function (a) {
                        return newT.li({ clss: ["otherbundle", a.links.length == 1 ? "singular" : ""].join(" "), id: "otherbundle_" + a.hash }, newT.render("bundlelink", a), " (", newT.span({ clss: "count" }, a.links.length), " link", newT.span({ clss: "plural" }, "s"), ")")
                    });
                    newT.save("bundlelink", function (a) {
                        return newT.a({ href: "/bundles/" + a.user + "/" + a.bundle_id }, a.title != "" ? $.escapeHTML(a.title) : "Created: " + BITLY.util.timeStamp(a.ts))
                    });
                    BITLY.BundleTabOrder = function (a) {
                        this.init(a)
                    };
                    BITLY.BundleTabOrder.prototype = { constructor: BITLY.BundleTabOrder.prototype.constructor, init: function (a) {
                        BITLY.util.initClass.call(this);
                        this.parents.bundle = a;
                        this.setOrder().initObj().bindEvents();
                        return this
                    }, initObj: function () {
                        this.obj.kb_shortcuts = new BITLY.KeyboardShortcuts(window.document, { scope: this, skipped_els: null });
                        return this
                    }, bindEvents: function () {
                        this.obj.kb_shortcuts.addShortcut(9, BITLY.BundleTabOrder.prototype.nextFocus);
                        BITLY.Eventer.delegate({ evt: "default_textbox_focus", cb: function (a,
            b) {
                            this.setCurrentOrder(b)
                        }, scope: this
                        });
                        BITLY.Eventer.delegate({ evt: "bundle_link_start_field_edit", cb: function (a, b) {
                            this.setCurrentOrder(b)
                        }, scope: this
                        });
                        return this
                    }, setCurrentOrder: function (a) {
                        if (a && a.state && a.state.hasOwnProperty("bundle_tab_order"))
                            this.state.cur_focus = a.state.bundle_tab_order;
                        return this
                    }, setOrder: function () {
                        var a = this.parents.bundle;
                        this.state.cur_focus = -1;
                        this.state.order = [];
                        a.obj.add_link_to_bundle.state.bundle_tab_order = this.state.order.push(a.obj.add_link_to_bundle) - 1;
                        a.obj.eip_title.state.bundle_tab_order = this.state.order.push(a.obj.eip_title) - 1;
                        a.obj.eip_description.state.bundle_tab_order = this.state.order.push(a.obj.eip_description) - 1;
                        var b = this;
                        a.els.bundle_links.children().each(function (d, e) {
                            var f = $(e).data("hash");
                            f = a.obj.bundle_links[f];
                            f.obj.eip_title.state.bundle_tab_order = b.state.order.push(f.obj.eip_title) - 1;
                            f.obj.eip_description.state.bundle_tab_order = b.state.order.push(f.obj.eip_description) - 1
                        });
                        return this
                    }, nextFocus: function (a) {
                        a.preventDefault();
                        a = this.state;
                        a.cur_focus++;
                        if (a.cur_focus >= a.order.length)
                            a.cur_focus = 0;
                        a = a.order[a.cur_focus];
                        if (a.hasOwnProperty && a instanceof BITLY.EditInPlace)
                            a.startEdit();
                        else
                            a.hasOwnProperty && a instanceof BITLY.DefaultTextbox ? a.el.focus() : a.focus();
                        return this
                    } 
                    };
                    BITLY.DomainPreference = function (a) {
                        a = a || {};
                        this.init(a)
                    };
                    BITLY.DomainPreference.prototype = { constructor: BITLY.DomainPreference.prototype.constructor, init: function (a) {
                        var b = a.sel || $(this.createEl(a)).find("select");
                        BITLY.util.initClass.call(this, b);
                        this.state.options = a;
                        this.cacheEls().bindEvents().combobox()
                    }, combobox: function () {
                        this.el.combobox();
                        return this
                    }, cacheEls: function () {
                        return this
                    }, bindEvents: function () {
                        var a = this;
                        this.el.bind("change.domain_preference", function (b) {
                            if ($(b.target).val() === "custom")
                                location.href = "/a/custom_domain_settings";
                            else
                                BITLY.ajax.POST({ url: "/data/account/set_domain_preference",
                                    data: { domain_preference: $(b.target).val() }, success: function (d) {
                                        BITLY.data.domain_preference = d.data;
                                        this.el.trigger("successMessage", { text: $._("Your default short domain has been set to: %(domain)s").replace("%(domain)s", d.data) })
                                    }, error: function () {
                                        this.el.trigger("errorMessage", { text: "Oops, an error occurred trying to set your default short domain." })
                                    }, scope: a
                                })
                        });
                        return this
                    }, createEl: function (a) {
                        this.registerTemplate();
                        el = newT.render("domain_preference", { opts: this.defaultOpts(a), label: a.label ||
            null
                        });
                        a.addTo && $(a.addTo).append(el);
                        return el
                    }, registerTemplate: function () {
                        newT.save("domain_preference", function (a) {
                            return newT[a.form ? "form" : "div"]({ id: "domain_pref_container" }, newT.fieldset({ clss: "clearfix" }, a.label ? newT.label({ "for": "domain_preference" }, a.label) : "", newT.select({ name: "domain_preference", id: "domain_preference" }, newT.each(a.opts, function (b) {
                                var d = { value: b.val };
                                if (b.clss)
                                    d.clss = b.clss;
                                if (b.sel)
                                    d.selected = "selected";
                                return newT.option(d, b.text || b.val)
                            }))))
                        });
                        return this
                    }, defaultOpts: function (a) {
                        var b,
        d = a.custom || null;
                        opts = [];
                        for (var e = 0, f = a.domain_options.length; e < f; e++)
                            opts.push({ val: a.domain_options[e] });
                        b = a.preference || a.custom || opts[0].val;
                        !d && !a.no_add && opts.push({ val: "custom", text: "Set up your own custom domain...", clss: "create_custom" });
                        e = 0;
                        for (f = opts.length; e < f; e++)
                            if (opts[e].val === b)
                                opts[e].sel = true;
                        return opts
                    } 
                    };
                    BITLY.FBLinkPreviewer = function (a, b) {
                        this.init(a, b)
                    };
                    BITLY.FBLinkPreviewer.prototype = { constructor: BITLY.FBLinkPreviewer.prototype.constructor, init: function (a, b) {
                        BITLY.util.initClass.call(this);
                        if (a && typeof a === "object") {
                            b = a;
                            a = null
                        }
                        this.state.accounts = b;
                        this.state.cur_choice = 0;
                        this.state.display_start = 0;
                        this.registerTemplate().bindEvents();
                        a && this.getPreviewData(a)
                    }, bindEvents: function () {
                        var a = this;
                        $(document.body).bind("shareAccounts.fb_prev", function (b, d) {
                            a.updateAccounts(d.accounts)
                        })
                    }, updateAccounts: function (a) {
                        this.state.accounts = a;
                        return this
                    },
                        getPreviewData: function (a) {
                            if (a)
                                this.setUrl(a);
                            else
                                a = this.state.url;
                            for (var b = null, d = this.state.accounts, e = 0, f = d.length; e < f; e++)
                                if (d[e].account_type === "facebook" && d[e].primary) {
                                    b = d[e];
                                    break
                                }
                            if (b)
                                if (a in this.data)
                                    this.displayPreview(this.data[a]);
                                else if (!this.state.loading_data) {
                                    this.showLoading();
                                    BITLY.ajax.POST({ url: "/data/fb_link_preview", data: { account_type: "facebook", account_login: b.account_login, url: a }, success: function (c) {
                                        this.hideLoading();
                                        this.data[a] = c.data;
                                        this.displayPreview(c.data)
                                    },
                                        error: function () {
                                            this.hideLoading();
                                            $(document.body).trigger("error_message", { text: $._("An error occurred loading the preview from facebook") })
                                        }, scope: this
                                    })
                                }
                            return this
                        }, setUrl: function (a) {
                            this.state.url = a;
                            return this
                        }, displayPreview: function (a) {
                            if (a) {
                                for (var b = a.media || [], d = b.length, e = [], f = 0; f < d; f++)
                                    (type = b[f].type) && type === "image" && e.push(b[f]);
                                a.images = e;
                                this.state.cur_data = a
                            } else
                                a = this.state.cur_data;
                            a.selected = this.state.cur_choice;
                            this.els.preview = $(newT.render("facebook_preview", a));
                            this.container.append(this.els.preview);
                            this.previewEvents();
                            a = Math.floor(this.state.display_start / 2);
                            this.els.preview.find("#fb_preview_images").pagedList({ scroll: "horizontal", num_items: 2, next: "#fb_preview_controls .next", prev: "#fb_preview_controls .prev", start_page: a });
                            this.setImageDisplay(this.state.display_start);
                            this.alignImages();
                            return this
                        }, showLoading: function () {
                            this.loading_data = true;
                            this.container.append(newT.div({ clss: "loading" }, $._("Loading...")));
                            return this
                        }, hideLoading: function () {
                            this.loading_data = false;
                            this.container.find(".loading").remove();
                            return this
                        }, alignImages: function () {
                            this.els.preview.find("#fb_preview_images a img").each(function (a, b) {
                                if (b.complete) {
                                    var d = $(b), e = d.height();
                                    d.css({ "margin-top": 0.5 * (140 - e) })
                                } else
                                    $(b).bind("load.prev", function () {
                                        var f = $(b), c = f.height();
                                        f.css({ "margin-top": 0.5 * (140 - c) });
                                        $(b).unbind("load.prev")
                                    })
                            });
                            return this
                        }, destroy: function () {
                            this.previewEvents(true);
                            BITLY.util.destroyClass.call(this)
                        }, hide: function () {
                            this.previewEvents(true)
                        }, previewEvents: function (a) {
                            if (a) {
                                $(document.body).unbind("shareAccounts.fb_prev");
                                BITLY.Eventer.undelegate({ el: this.els.preview.find("#fb_preview_next"), del: this.els.preview, evt: "click" });
                                BITLY.Eventer.undelegate({ el: this.els.preview.find("#fb_preview_prev"), del: this.els.preview, evt: "click" });
                                BITLY.Eventer.unbind({ el: this.els.preview.find("#fb_preview_no_thumb"), evt: "change" })
                            } else {
                                var b = this;
                                this.els.preview.find("#fb_preview_images").bind("click", function (d) {
                                    d = $(d.target).closest("a");
                                    d.is("a") && d.data("sel") && b.setImage(parseInt(d.data("sel"), 10))
                                });
                                BITLY.Eventer.delegate({ el: this.els.preview.find("#fb_preview_next"),
                                    del: this.els.preview, evt: "click", cb: function (d) {
                                        d.preventDefault();
                                        this.nextImage()
                                    }, scope: this
                                });
                                BITLY.Eventer.delegate({ el: this.els.preview.find("#fb_preview_prev"), del: this.els.preview, evt: "click", cb: function (d) {
                                    d.preventDefault();
                                    this.prevImage()
                                }, scope: this
                                });
                                BITLY.Eventer.bind({ el: this.els.preview.find("#fb_preview_no_thumb"), evt: "change", cb: function (d) {
                                    d.preventDefault();
                                    var e = this;
                                    setTimeout(function () {
                                        e.toggleHasImage()
                                    })
                                }, scope: this
                                })
                            }
                        }, registerTemplate: function () {
                            var a = this;
                            newT.save("facebook_preview",
        function (b) {
            var d = b.images || [], e = d.length, f = b.selected === -1, c = !f && b.selected || 0, g = [], h = "", n = 0;
            if (c % 2 === 0 && c < e) {
                a.state.display_start = c;
                g.push({ src: d[c].src, selected: true });
                if (c < e - 2)
                    g.push({ src: d[c + 1].src, selected: false });
                else {
                    h = " one";
                    g.push({ src: "/s/v404/graphics/bag_o_fish.png", selected: false })
                }
            } else if (c % 2 === 1 && c < e) {
                a.state.display_start = c - 1;
                g.push({ src: d[c - 1].src, selected: false });
                g.push({ src: d[c].src, selected: true })
            }
            return newT.div({ id: "fb_preview", clss: !e ? "no_images" : "" }, newT.strong({ clss: "title" },
            $.escapeHTML(b.name)), newT.a({ clss: "preview_url", href: $.escapeHTML(b.href) }, $.escapeHTML(b.href)), newT.p({ clss: "desc" }, $.escapeHTML(b.description)), e ? newT.frag(newT.strong({ clss: "choose" }, $._("Choose a Thumbnail")), newT.label(newT.input({ type: "checkbox", id: "fb_preview_no_thumb", _checked: f }), $._("No Thumbnail")), newT.ul({ id: "fb_preview_images", clss: "clearfix" + h }, newT.each(d, function (o) {
                return newT.li({ clss: n % 2 ? "right" : "left" }, newT.a({ id: "fb_preview_img_" + n, clss: "fb_preview_img" + (n == c ? " selected " :
                    ""), "data-sel": n++
                }, newT.img({ src: o.src })))
            })), newT.div({ id: "fb_preview_controls", clss: "clearfix" }, newT.a({ id: "fb_preview_prev", clss: "prev", href: "#prev" }, "&#9664;"), newT.span({ id: "fb_preview_cur" }, a.state.display_start + 1, a.state.display_start < e - 2 ? $._(" and ") + (a.state.display_start + 2) : ""), " ", $._("of"), " ", e, newT.a({ id: "fb_preview_next", clss: "next", href: "#next" }, "&#9654;"))) : "No Thumbnails Available")
        });
                            this.container = $("#fb_preview_container");
                            return this
                        }, prevImage: function () {
                            this.state.cur_data.images.length &&
        this.state.display_start > 1 && this.setImageDisplay(this.state.display_start - 2);
                            return this
                        }, nextImage: function () {
                            this.state.cur_data.images.length && this.state.display_start < this.state.cur_data.images.length - 2 && this.setImageDisplay(this.state.display_start + 2);
                            return this
                        }, setImageDisplay: function (a) {
                            var b = this.els.preview;
                            if (a >= 0 && a < this.state.cur_data.images.length) {
                                var d = b.find("#fb_preview_images");
                                b = b.find("#fb_preview_cur");
                                this.state.display_start = a;
                                a == this.state.cur_choice && d.find("a.first").addClass("selected");
                                b.html(a + 1);
                                if (a < this.state.cur_data.images.length - 1) {
                                    d.removeClass("one");
                                    a + 1 == this.state.cur_choice && d.find("a.first").addClass("selected");
                                    b.html(a + 1 + $._(" and ") + (a + 2))
                                } else
                                    d.addClass("one")
                            } else if (a == -1) {
                                this.state.display_start = this.state.cur_choice = a;
                                b.addClass("no_thumb")
                            }
                            return this
                        }, setImage: function (a) {
                            if (a < this.state.cur_data.images.length) {
                                this.state.cur_choice = a;
                                this.els.preview.find("a.selected").removeClass("selected");
                                this.els.preview.find("#fb_preview_img_" + a).addClass("selected")
                            }
                            return this
                        },
                        toggleHasImage: function () {
                            if (this.container.find("#fb_preview_no_thumb")[0].checked)
                                this.setImageDisplay(-1);
                            else {
                                this.setImageDisplay(0).setImage(0, true);
                                $("#fb_preview_images").trigger("gotoPage", 0);
                                this.els.preview.removeClass("no_thumb")
                            }
                            return this
                        }, getThumbnail: function () {
                            return this.state.cur_choice > -1 && this.state.cur_data && this.state.cur_data.images && this.state.cur_choice < this.state.cur_data.images.length ? this.state.cur_data.images[this.state.cur_choice].src : null
                        } 
                    };
                    BITLY.LinkPreview = function (a, b, d) {
                        this.init(a, b, d)
                    };
                    BITLY.LinkPreview.prototype = { constructor: BITLY.LinkPreview.prototype.constructor, init: function (a, b, d) {
                        BITLY.util.initClass.call(this, a);
                        d = d || {};
                        this.data = $.extend({ hash: null, global_hash: null }, b);
                        this.state = { preloaded_content: false, video_loading: false, video_loaded: false, video_play_on_load: false };
                        this.opts = $.extend({ max_item_width: 700, use_video_preview: true, auto_play_video: true, do_delay_click: false }, d);
                        if (!this.opts.use_video_preview) {
                            this.state.video_play_on_load = true;
                            this.state.video_loaded = true
                        }
                        if (this.opts.preview_machine) {
                            this.parents.preview_machine =
            this.opts.preview_machine;
                            delete this.opts.preview_machine
                        }
                        this.state.preloaded_content = this.el.children().not(".no_preview").length ? true : false;
                        this.state.preloaded_content && this.processPreloadedContent();
                        this.state.preloaded_content || this.load()
                    }, load: function () {
                        if (this.parents.preview_machine) {
                            result = this.parents.preview_machine.queueItem({ url: this.data.longUrl, global_hash: this.data.global_hash });
                            this.state.preloaded_content || (result ? this.previewSuccess(result) : BITLY.Eventer.delegate({ evt: "previews_loaded",
                                ns: this.data.global_hash, cb: function (a, b) {
                                    if (b.hasOwnProperty(this.data.global_hash)) {
                                        BITLY.Eventer.undelegate({ evt: "previews_loaded", ns: this.data.global_hash });
                                        this.previewSuccess(b[this.data.global_hash]);
                                        this.opts.onload && typeof this.opts.onload === "function" && this.opts.onload.call(this, b[this.data.global_hash]);
                                        this.state.preloaded_content = true
                                    }
                                }, scope: this
                            }))
                        } else
                            this.checkEmbedly()
                    }, processPreloadedContent: function () {
                        if (this.el.hasClass("video")) {
                            var a = this;
                            this.el.bind("mouseover.preload_video",
            function () {
                a.el.unbind("mouseover.preload_video");
                a.state.video_loading = true;
                a.checkEmbedly()
            });
                            BITLY.Eventer.delegate({ evt: "click", el: this.el, cb: function () {
                                this.state.video_play_on_load = true;
                                if (this.state.video_loaded && this.data.html) {
                                    this.data.is_script_loader && this.loadIFrameContent(true);
                                    this.convertPreviewToVideo()
                                } else
                                    this.state.video_loading || this.checkEmbedly();
                                return false
                            }, scope: this
                            })
                        }
                        return this
                    }, cleanup: function () {
                        if (this.el.hasClass("video")) {
                            this.state.preloaded_content = false;
                            this.el.empty();
                            this.load()
                        }
                        return this
                    }, checkEmbedly: function () {
                        BITLY.ajax.POST({ url: "/data/bundle_embedly", data: { url: this.data.longUrl, global_hash: this.data.global_hash }, success: BITLY.LinkPreview.prototype.embedlySuccess, scope: this });
                        return this
                    }, checkDennisly: function () {
                        BITLY.ajax.POST({ url: "/data/bundle_dennisly", data: { url: this.data.longUrl, global_hash: this.data.global_hash }, success: BITLY.LinkPreview.prototype.previewSuccess, scope: this });
                        return this
                    }, previewSuccess: function (a) {
                        if (a)
                            if (a.type && a.type == "video" &&
            a.thumbnail_url && a.html)
                                this.createEmbedlyVideo(a);
                            else if (a.type && a.type == "photo" && a.url)
                                this.createEmbedlyImage(a);
                            else if (a.html)
                                this.createEmbedlyHTML(a);
                            else if (a.type && a.type == "link" && a.description)
                                this.createEmbedlyLink(a);
                            else if (a["element.og:description"] || a["element.description"])
                                this.el.html(newT.render("bundle_link_og", a));
                            else
                                a["maincontent.text"] && this.el.html(newT.p(a["maincontent.text"] + "..."));
                        return this
                    }, embedlySuccess: function (a) {
                        a && a.data && a.data != "" && a.data.hasOwnProperty(this.data.global_hash) &&
        this.previewSuccess(a.data[this.data.global_hash]);
                        return this
                    }, videoAutoPlayMagic: function () {
                        if (this.data.html && this.opts.auto_play_video) {
                            var a = this.data.html.is("embed") ? this.data.html : this.data.html.find("embed");
                            a.attr("src", BITLY.util.modifyQueryParams({ autoplay: 1, autostart: 1 }, a.attr("src")));
                            a.attr("autostart", "true");
                            a.attr("autoplay", "true");
                            a.attr("flashvars", (a.attr("flashvars") || "") + "&autoplay=1&autostart=1&autoplay=true&autostart=true");
                            var b = this.data.html.is("iframe") ? this.data.html :
            this.data.html.find("iframe");
                            b.attr("src", BITLY.util.modifyQueryParams({ autoplay: 1, autostart: 1 }, b.attr("src")));
                            b = this.data.html.is("object") ? this.data.html : this.data.html.find("object");
                            b.attr("data") && b.attr("data", BITLY.util.modifyQueryParams({ autoplay: [true, 1], autostart: [true, 1] }, b.attr("data")));
                            var d = b.find("param[name='autoplay']").attr("value", "true"), e = b.find("param[name='autostart']").attr("value", "true"), f = b.find("param[name='wmode']").attr("value", "transparent");
                            b.find("param[name='movie']").attr("value",
            a.attr("src"));
                            if (!d.length) {
                                d = $(newT.param({ value: "true", name: "autoplay" }));
                                b.prepend(d)
                            }
                            if (!e.length) {
                                e = $(newT.param({ value: "true", name: "autostart" }));
                                b.prepend(e)
                            }
                            if (!f.length) {
                                f = $(newT.param({ value: "transparent", name: "wmode" }));
                                b.prepend(f)
                            }
                        }
                        return this
                    }, youtubeConversion: function (a) {
                        if (a.provider_url && a.provider_url.toLowerCase().indexOf("youtube") > -1)
                            if (a.html.indexOf("<object") > -1) {
                                var b = $(a.html).find('param[name="movie"]').val(), d = b.indexOf("/p/") > -1 ? "p" : "embed";
                                b = b.split("/").pop().split("?").shift();
                                a.html = '<iframe title="YouTube video player" class="youtube-player" type="text/html" width="' + (a.width || 425) + '" height="' + (a.height || 390) + '" src="http://www.youtube.com/' + d + "/" + b + '?rel=0" frameborder="0" allowFullScreen></iframe>'
                            }
                        return a
                    }, createEmbedlyVideo: function (a) {
                        a = this.youtubeConversion(a);
                        var b = a.html;
                        this.data.is_script_loader = /^\<script src\=[^\>]+\>\<\/script\>$/.exec(b);
                        this.data.html = $(newT.div()).html(b).children().first();
                        this.data.resp = a;
                        if (!this.state.preloaded_content && this.opts.use_video_preview) {
                            this.el.addClass("has_play_button video");
                            if (b = a.thumbnail_url && a.thumbnail_width && a.thumbnail_width > 175 ? a.thumbnail_url : false)
                                this.el.html(newT.frag(newT.img({ src: b }), newT.a({ clss: "play_button rounded", href: "#" }, "\u25ba")));
                            else {
                                this.el.html(newT.a({ clss: "play_button rounded", href: "#" }, "\u25ba"));
                                this.el.addClass("no_vid")
                            }
                            a.height && a.width && this.el.css(this._sizeElForVideo(a, true));
                            BITLY.Eventer.delegate({ evt: "click", el: this.el, cb: function () {
                                this.data.is_script_loader && this.loadIFrameContent(true);
                                this.convertPreviewToVideo();
                                return false
                            },
                                scope: this
                            })
                        } else {
                            this.el.addClass("video");
                            if (this.state.video_loading) {
                                this.state.video_loading = false;
                                this.state.video_loaded = true
                            }
                            if (this.state.video_loaded && this.state.video_play_on_load) {
                                this.data.is_script_loader && this.loadIFrameContent(true);
                                this.convertPreviewToVideo()
                            }
                        }
                        return this
                    }, convertPreviewToVideo: function () {
                        if (this.data.html) {
                            if (!this.data.is_script_loader) {
                                this.videoAutoPlayMagic();
                                var a = this.data.html;
                                if (this.data.html.attr("altHtml"))
                                    a = this.data.resp.html;
                                this.el.empty().append(a)
                            }
                            delete this.data.html
                        }
                        this.el.removeClass("has_play_button").removeClass("no_vid");
                        this.el.css({ "background-image": "" });
                        this.data.is_script_loader || this.el.children().first().css(this._sizeElForVideo(this.data.resp, true));
                        BITLY.Eventer.undelegate({ el: this.el, evt: "click" })
                    }, createEmbedlyImage: function (a) {
                        a = $(document.createElement("img")).attr("src", a.url);
                        this.el.addClass("image");
                        this.data.html = a;
                        this.el.html(a);
                        return this
                    }, createEmbedlyLink: function (a) {
                        this.data.html = $(newT.render("embedly_link", a));
                        this.el.html(this.data.html);
                        var b = this;
                        setTimeout(function () {
                            b.el.addClass("link");
                            b = null
                        }, 15);
                        return this
                    }, createEmbedlyHTML: function (a) {
                        this.data.html = a.html;
                        this.el.addClass("html");
                        this.data.html.match(/\<(script|link)/gi) ? this.loadIFrameContent() : this.el.html(this.data.html);
                        return this
                    }, loadIFrameContent: function (a) {
                        var b = "/data/view_bundle_iframe_html?global_hash=" + encodeURIComponent(this.data.global_hash) + "&url=" + encodeURIComponent(this.data.longUrl), d = { id: "iframe_" + this.data.hash, name: "iframe_" + this.data.hash, frameborder: "no" };
                        if (a) {
                            d.height = "100%";
                            d.width = "100%";
                            d.scrolling =
            "no"
                        } else
                            b += "&link_hash=" + encodeURIComponent(this.data.hash);
                        d.src = b;
                        a = newT.iframe(d);
                        this.el.empty().append(a);
                        return this
                    }, _sizeElForVideo: function (a, b) {
                        a = a || {};
                        var d = a.width || 500, e = a.height || 400;
                        if (b && this.opts.max_item_width) {
                            var f = this.opts.max_item_width / d;
                            d = this.opts.max_item_width;
                            e *= f
                        }
                        return { height: e, width: d }
                    } 
                    };
                    newT.save("embedly_link", function (a) {
                        return newT.frag(a.thumbnail_url && a.thumbnail_url != "" ? newT.div({ clss: "img" }, newT.span(newT.img({ src: a.thumbnail_url }))) : "", newT.div({ clss: "td" }, a.description))
                    });
                    newT.save("bundle_link_og", function (a) {
                        return newT.div({ clss: "link_preview link clearfix" }, a["element.og:image"] ? newT.div({ clss: "img" }, newT.span(newT.img({ src: a["element.og:image"] }))) : "", newT.p({ clss: "td" }, a["element.og:description"] ? a["element.og:description"] : a["element.description"] ? a["element.description"] : ""))
                    });
                    BITLY.LinkPreviewMachine = function (a, b, d) {
                        d = d || {};
                        this.init(a, b, d)
                    };
                    BITLY.LinkPreviewMachine.prototype = { constructor: BITLY.LinkPreviewMachine.prototype.constructor, init: function (a, b, d) {
                        BITLY.util.initClass.call(this);
                        this.opts = $.extend({ retry_count: 3 }, b);
                        this.data = d;
                        this.state.pending = a || [];
                        this.state.requests = [];
                        this.opts.no_loading_indicator || this.createLoadingEl()
                    }, createLoadingEl: function () {
                        this.els.loading = $(newT.p({ clss: "previews_loading" }, "Loading..."));
                        $(document.body).append(this.els.loading);
                        return this
                    }, showLoadingEl: function () {
                        this.els.loading && this.els.loading.show();
                        return this
                    }, hideLoadingEl: function () {
                        this.els.loading && this.els.loading.hide();
                        return this
                    }, queueItem: function (a) {
                        if (this.data.hasOwnProperty(a.global_hash))
                            return this.data[a.global_hash];
                        this.state.pending.push(a);
                        return false
                    }, loadPending: function (a) {
                        if (this.state.pending.length) {
                            a = a || this.opts.chunk_size || this.state.pending.length;
                            for (var b = [], d, e = Math.ceil(this.state.pending.length / a), f = {}, c = 0, g = 0; g < e; g++) {
                                f = { url: [], global_hash: [] };
                                c = Math.min(a, this.state.pending.length);
                                for (var h = 0; h < c; h++) {
                                    d =
                    this.state.pending.shift();
                                    f.url.push(d.url);
                                    f.global_hash.push(d.global_hash);
                                    f.retry_count = 0
                                }
                                b.push(f)
                            }
                            id = this.state.requests.push({ chunks: b, returned_chunks: 0 }) - 1;
                            e = b.length;
                            for (g = 0; g < e; g++)
                                this.requestChunk(b[g], id)
                        } else
                            this.success();
                        return this
                    }, requestChunk: function (a, b) {
                        this.showLoadingEl();
                        BITLY.ajax.POST({ url: "/data/bundle_embedly", data: $.param(a, true), success: function (d) {
                            this.success(a, b, d)
                        }, error: function (d) {
                            this.error(a, b, d)
                        }, scope: this
                        })
                    }, success: function (a, b, d) {
                        typeof b != "undefined" &&
        this.returnChunk(b);
                        d = d || {};
                        for (var e in d.data)
                            this.data[e] = d.data[e];
                        BITLY.Eventer.trigger("previews_loaded", this.data)
                    }, error: function (a, b) {
                        if (a.retry_count < this.opts.retry_count) {
                            a.retry_count++;
                            this.requestChunk(a, b)
                        } else
                            this.returnChunk(b)
                    }, returnChunk: function (a) {
                        a = this.state.requests[a];
                        if (++a.returned_chunks >= a.chunks.length) {
                            a.chunks.length = 0;
                            a.returned_chunks = 0;
                            this.hideLoadingEl()
                        }
                        this.checkClearChunks()
                    }, checkClearChunks: function () {
                        for (var a = true, b = 0, d = this.state.requests.length; b < d; b++)
                            if (this.state.requests[b] !==
            null)
                                a = false;
                        if (a)
                            this.state.requests.length = 0
                    } 
                    };
                    BITLY.SharePreviewer = function (a, b) {
                        b = b || {};
                        this.init(a, b)
                    };
                    BITLY.SharePreviewer.prototype = { constructor: BITLY.SharePreviewer.prototype.constructor, init: function (a, b) {
                        BITLY.util.initClass.call(this, a);
                        this.state.accounts = b.accounts || [];
                        delete b.accounts;
                        b.evt = b.evt || "bento_box_value_change";
                        b.container = b.container || "#mainShortenContainer";
                        b.el = a;
                        this.state.opts = b;
                        this.state.has_links = 0;
                        this.bindEvents().createTemplate().createAccountHash().bindFBEvent();
                        var d = this;
                        setTimeout(function () {
                            d.detectSupport()
                        }, 10)
                    }, detectSupport: function () {
                        this.state.css_transition =
        null;
                        try {
                            for (var a = ["webkit", "moz", "o", ""], b, d, e, f = 0, c = a.length; f < c; f++) {
                                if (e = d = a[f])
                                    e = "-" + e + "-";
                                b = newT.div({ style: e + "transition:color 1s linear;" });
                                if (b.style.hasOwnProperty(d + "Transition")) {
                                    this.state.css_transition = d;
                                    break
                                }
                            }
                        } catch (g) {
                        }
                        return this
                    }, bindEvents: function () {
                        var a = this;
                        $(document.body).bind(this.state.opts.evt, function (b, d) {
                            a.update(b, d)
                        });
                        $(document.body).bind("bento_box_counter_color", function (b, d) {
                            a.setTwitterColor(d)
                        });
                        $(document.body).bind("shareAccounts", function (b, d) {
                            a.updateAccounts(d.accounts)
                        });
                        return this
                    }, bindFBEvent: function () {
                        BITLY.Eventer.delegate({ el: this.el.find("a.choose_thumbs"), evt: "click", cb: function (a) {
                            a.preventDefault();
                            if (!this.obj.fb_preview) {
                                this.obj.fb_preview = new BITLY.FBLinkPreviewer(this.data.links[0], this.state.accounts);
                                this.el.find("a.choose_thumbs").hide()
                            }
                        }, scope: this
                        });
                        return this
                    }, update: function (a, b) {
                        var d = false;
                        this.state.has_links = 0;
                        this.state.template_created || this.createTemplate();
                        if (typeof b != "undefined")
                            d = true;
                        else
                            b = this.state.text || "";
                        var e = b.length;
                        if (e)
                            this.show();
                        else
                            e || this.hide();
                        e = $.validateUrl(b) || [];
                        this.data.links = e;
                        if (d) {
                            b = $.escapeHTML(b);
                            this.state.text = b
                        }
                        d = this.state.has_links = e.length;
                        for (var f; d; ) {
                            f = e[--d];
                            b = b.replace(f, '<a target="_blank" href="' + $.escapeHTML(f) + '">' + $.escapeHTML(f) + "</a>")
                        }
                        this.state.has_links === 1 ? this.showPreviewLink() : this.hidePreviewLink();
                        this.el.find("p.share_preview").html(b);
                        return this
                    }, showPreviewLink: function () {
                        this.el.find("#fb_link_prev").removeClass("off");
                        return this
                    }, hidePreviewLink: function () {
                        this.el.find("#fb_link_prev").addClass("off");
                        if (this.obj.fb_preview) {
                            this.obj.fb_preview.destroy();
                            this.obj.fb_preview.container.empty();
                            delete this.obj.fb_preview;
                            this.el.find("a.choose_thumbs").html($._("Post With Thumbnail")).show()
                        }
                        return this
                    }, createAccountHash: function () {
                        this.state.account_hash = {};
                        for (var a = 0, b = this.state.accounts.length; a < b; a++) {
                            var d = this.state.accounts[a];
                            this.state.account_hash[d.account_login] = d
                        }
                        return this
                    }, updateAccounts: function (a) {
                        for (var b = 0, d = a.length; b < d; b++) {
                            var e = a[b];
                            if (this.state.account_hash.hasOwnProperty(e.account_login)) {
                                e.primary ?
                this.el.find("#share_" + e.account_login).removeClass("off") : this.el.find("#share_" + e.account_login).addClass("off");
                                delete this.state.account_hash[e.account_login]
                            }
                        }
                        for (e in this.state.account_hash)
                            this.el.find("#share_" + e).remove();
                        this.setActive();
                        this.state.accounts = a;
                        this.createAccountHash();
                        this.state.has_shareable_accounts = false;
                        d = this.state.accounts.length;
                        for (b = 0; b < d; b++)
                            if (a[b].primary) {
                                this.state.has_shareable_accounts = true;
                                break
                            }
                        this.state.has_shareable_accounts || this.hide();
                        this.update();
                        return this
                    }, setActive: function () {
                        var a = {}, b, d, e, f = false;
                        this.el.find(".header li a").each(function (c, g) {
                            a[$(g).data("service")] = $(g).data("service")
                        });
                        for (service in a) {
                            b = this.el.find(".share_service." + service);
                            d = this.el.find(".header li." + service);
                            e = d.find("a");
                            if (b.find(".share_account").not(".off").length) {
                                b.removeClass("off");
                                d.removeClass("off");
                                e.removeClass("off")
                            } else {
                                b.addClass("off");
                                d.addClass("off");
                                e.addClass("off")
                            }
                        }
                        b = this.el.find(".share_service.active");
                        if (b.length) {
                            if (b.is(".off")) {
                                f =
                true;
                                this.el.find(".header a.active").removeClass("active");
                                this.el.find(".share_service.active").removeClass("active")
                            }
                        } else
                            f = true;
                        if (f) {
                            d = this.el.find(".header li a").not(".off").first();
                            d.addClass("active");
                            this.el.find(".share_service." + d.data("service")).addClass("active")
                        }
                        return this
                    }, createTemplate: function () {
                        this.el = $(newT.render("share_previewer", this.state.accounts));
                        var a = this;
                        this.el.find(".header").bind("click", function (e) {
                            $tgt = $(e.target);
                            if ($tgt.is("a") && $tgt.data("service")) {
                                e.preventDefault();
                                a.el.find(".header a").removeClass("active");
                                a.el.find(".share_service").removeClass("active");
                                $tgt.addClass("active");
                                a.el.find(".share_service." + $tgt.data("service")).addClass("active")
                            }
                        });
                        var b = $(this.state.opts.el);
                        b.append(this.el);
                        var d = b.offset().top;
                        b = parseInt(b.css("margin-top"), 10) + parseInt(b.css("padding-top"), 10);
                        this.el.css("margin-top", -1 * (this.el.offset().top - d) + b);
                        this.state.template_created = true;
                        this.state.showing = false;
                        this.els.container = $(this.state.opts.container);
                        return this
                    },
                        show: function () {
                            if (this.state.showing || !this.state.has_shareable_accounts)
                                return this;
                            this.el.addClass("show");
                            this.els.container.addClass("share_preview");
                            this.state.showing = true;
                            var a = this;
                            this.state.arrow_timer = setTimeout(function () {
                                a.state.showing && a.els.container.addClass("arrow");
                                clearTimeout(a.state.arrow_timer)
                            }, this.state.css_transition == null ? 15 : 500);
                            return this
                        }, hide: function () {
                            if (!this.state.showing)
                                return this;
                            clearTimeout(this.state.arrow_timer);
                            this.el.removeClass("show");
                            this.els.container.removeClass("arrow");
                            this.els.container.removeClass("share_preview");
                            this.state.showing = false;
                            return this
                        }, setTwitterColor: function (a) {
                            if (a == "#777777")
                                a = "#555";
                            if (this.state.twitter_color != a) {
                                this.state.twitter_color = a;
                                this.el.find(".twitter p").css("color", a)
                            }
                        } 
                    };
                    newT.save("share_previewer", function (a) {
                        for (var b = {}, d = 0, e = a.length; d < e; d++) {
                            a[d].account_type in b || (b[a[d].account_type] = { service: a[d].account_type, accounts: [], pos: d });
                            b[a[d].account_type].accounts.push(a[d])
                        }
                        return newT.div({ id: "share_previewer" }, newT.ul({ clss: "header clearfix" }, newT.each(b, function (f) {
                            return newT.li({ clss: f.service }, newT.a({ href: "#" + f.service, "data-service": f.service }, f.service))
                        })), newT.eachRender(b, "share_previewer_service"))
                    });
                    newT.save("share_previewer_service", function (a) {
                        return newT.div({ clss: "share_service " + a.service, id: "share_service_" + a.service }, newT.eachRender(a.accounts, "share_previewer_account"), a.service === "facebook" ? newT.div({ id: "fb_link_prev", clss: "off" }, newT.a({ href: "#", clss: "choose_thumbs" }, $._("Post With Thumbnail")), newT.div({ id: "fb_preview_container" })) : "")
                    });
                    newT.save("share_previewer_account", function (a) {
                        return newT.div({ clss: "clearfix share_account " + a.account_type + (a.primary ? "" : " off"), id: "share_" + a.account_login }, newT.img({ src: "/data/avatar/" + a.account_type + "/" + a.account_login + ".png" }), newT.div(newT.strong(a.account_name || a.account_login), newT.p({ clss: "share_preview" })))
                    });
                    newT.save("share_settings", function () {
                        return newT.a({ href: "#", clss: "share_settings" }, $._("Share Settings"))
                    });
                    BITLY.SignInDropdown = function (a, b) {
                        this.init(a, b)
                    };
                    BITLY.SignInDropdown.prototype = { constructor: BITLY.SignInDropdown.prototype.constructor, init: function (a, b) {
                        BITLY.util.initClass.call(this);
                        this.els.container = $(b);
                        this.els.link = $(a);
                        this.cacheElements().bindEvents()
                    }, destroy: function () {
                        BITLY.Eventer.delegate({ el: this.els.link, evt: "click" });
                        BITLY.util.destroyClass.call(this);
                        return this
                    }, createEl: function () {
                        this.els.form = $(newT.render("sign_in_dropdown"));
                        this.els.container.append(this.els.form);
                        return this
                    }, cacheElements: function () {
                        this.createEl();
                        this.els.username = this.els.form.find("#signin_username");
                        this.els.password = this.els.form.find("#signin_password");
                        this.els.login_error = this.els.form.find(".error");
                        return this
                    }, bindEvents: function () {
                        BITLY.Eventer.delegate({ el: this.els.link, evt: "click", cb: BITLY.SignInDropdown.prototype.toggleDropdown, scope: this });
                        BITLY.Eventer.delegate({ evt: "show_sign_in", cb: BITLY.SignInDropdown.prototype.toggleDropdown, scope: this });
                        BITLY.Eventer.delegate({ el: this.els.form, del: this.els.form, evt: "submit", cb: BITLY.SignInDropdown.prototype.login,
                            scope: this
                        });
                        BITLY.util.mixPanelTrackLink(0, "#sign_in_form li.login_twitter a", ["track", "twitter_login", { source: "homepage_signin_dropdown"}]);
                        BITLY.util.mixPanelTrackLink(0, "#sign_in_form li.login_facebook a", ["track", "facebook_login", { source: "homepage_signin_dropdown"}]);
                        return this
                    }, login: function (a) {
                        a.preventDefault();
                        this.els.login_error.html("");
                        var b = this;
                        BITLY.ajax.POST({ url: this.els.form.attr("action"), data: { username: this.els.username.val(), password: this.els.password.val() }, success: function (d) {
                            d =
                d.data && d.data.redirect || "/";
                            this.els.form.trigger("login_success");
                            location.href = d
                        }, error: function (d) {
                            var e = $._("An error occurred while signing in.");
                            if (d.status_txt && d.status_txt == "VALIDATION_ERROR")
                                e = d.data;
                            b.els.login_error.html(e).hide().fadeIn();
                            this.els.form.trigger("login_error")
                        }, scope: this
                        });
                        this.els.form.trigger("login_attempt");
                        return this
                    }, toggleDropdown: function (a) {
                        a.preventDefault();
                        if (this.state.form_showing) {
                            this.els.form.hide();
                            this.els.link.removeClass("active");
                            this.state.form_showing =
            false;
                            this.els.form.trigger("signin_dropdown_close")
                        } else {
                            this.els.link.addClass("active");
                            this.els.form.show();
                            this.els.username.focus();
                            this.state.form_showing = true;
                            this.els.form.trigger("signin_dropdown_open")
                        }
                        return this
                    } 
                    };
                    newT.save("sign_in_dropdown", function () {
                        return newT.form({ method: "POST", action: "/a/sign_in", id: "sign_in_form" }, newT.fieldset(newT.label($._("Username or email"), newT.input({ type: "text", value: "", name: "username", id: "signin_username", clss: "text" })), newT.label($._("Password"), newT.input({ type: "password", name: "password", value: "", id: "signin_password", clss: "text" })), newT.input({ type: "submit", value: $._("Sign In"), clss: "white_button submit" }), BITLY.data.xsrf, newT.a({ href: "/a/reset_password" }, $._("Forgot password?"))),
    newT.p({ clss: "error" }), newT.div({ clss: "open_login_container clearfix" }, $._("Sign in with:"), newT.render("open_login", true)))
                    });
                    BITLY.SignUpPanel = function (a, b, d) {
                        this.init(a, b, d)
                    };
                    BITLY.SignUpPanel.prototype = { constructor: BITLY.SignUpPanel.prototype.constructor, init: function (a, b, d) {
                        BITLY.util.initClass.call(this);
                        this.els.link = $(a);
                        this.els.container = $(b);
                        this.els.el_replace = $(d);
                        this.cacheElements().bindEvents()
                    }, destroy: function () {
                        BITLY.util.destroyClass.call(this);
                        return this
                    }, createEl: function () {
                        this.els.sign_up_panel = $(newT.render("sign_up_panel"));
                        this.els.form = this.els.sign_up_panel.find("form");
                        this.els.container.append(this.els.sign_up_panel);
                        return this
                    }, cacheElements: function () {
                        this.createEl();
                        this.els.username = this.els.form.find("#sign_up_username input");
                        this.els.username_error = this.els.form.find("#sign_up_username .error");
                        this.els.email = this.els.form.find("#sign_up_email input");
                        this.els.email_error = this.els.form.find("#sign_up_email .error");
                        this.els.password = this.els.form.find("#sign_up_password input");
                        this.els.password_error = this.els.form.find("#sign_up_password .error");
                        this.els.sign_in_link = this.els.form.find(".sign_in_link");
                        this.els.signup_error = this.els.form.find("#signup_error");
                        this.els.close = this.els.form.find("a.close");
                        return this
                    }, bindEvents: function () {
                        BITLY.Eventer.delegate({ el: this.els.link, evt: "click", cb: BITLY.SignUpPanel.prototype.togglePanel, scope: this });
                        BITLY.Eventer.delegate({ el: this.els.sign_in_link, evt: "click", cb: BITLY.SignUpPanel.prototype.swapToSignIn, scope: this });
                        BITLY.Eventer.delegate({ el: this.els.close, evt: "click", cb: BITLY.SignUpPanel.prototype.togglePanel, scope: this });
                        BITLY.Eventer.delegate({ el: this.els.form, del: this.els.form, evt: "submit", cb: BITLY.SignUpPanel.prototype.signup,
                            scope: this
                        });
                        BITLY.util.mixPanelTrackLink(0, "#sign_up_form li.login_twitter a", ["track", "twitter_login", { source: "homepage_signup_panel"}]);
                        BITLY.util.mixPanelTrackLink(0, "#sign_up_form li.login_facebook a", ["track", "facebook_login", { source: "homepage_signup_panel"}]);
                        return this
                    }, signup: function (a) {
                        a.preventDefault();
                        this.clearErrors();
                        BITLY.ajax.POST({ url: this.els.form.attr("action"), data: { username: this.els.username.val(), password: this.els.password.val(), email: this.els.email.val() }, success: function (b) {
                            this.els.sign_up_panel.trigger("signup_success");
                            location.href = b.data && b.data.redirect || "/"
                        }, error: function (b) {
                            if (b.status_txt && b.status_txt == "VALIDATION_ERROR") {
                                b = b.data;
                                b.email && this.els.email_error.html(b.email);
                                b.username && this.els.username_error.html(b.username);
                                b.password && this.els.password_error.html(b.password)
                            } else
                                this.els.signup_error.html("An Error Occurred... Please try again").hide().fadeIn();
                            this.els.sign_up_panel.trigger("signup_error")
                        }, scope: this
                        });
                        this.els.sign_up_panel.trigger("signup_attempt");
                        return this
                    }, clearErrors: function () {
                        for (el in this.els)
                            el.indexOf("_error") >
            -1 && this.els[el].html("");
                        this.els.signup_error.html("").hide()
                    }, swapToSignIn: function (a) {
                        a.preventDefault();
                        this.togglePanel(a, function () {
                            BITLY.Eventer.trigger("show_sign_in")
                        })
                    }, togglePanel: function (a, b) {
                        a.preventDefault();
                        if (this.state.form_showing) {
                            this.els.sign_up_panel.hide();
                            this.state.form_showing = false;
                            this.els.el_replace.show();
                            window.scrollTo(0, 0);
                            b && b.call(this);
                            this.els.sign_up_panel.trigger("signup_panel_close")
                        } else {
                            this.els.el_replace.hide();
                            this.els.sign_up_panel.show();
                            this.state.form_showing =
            true;
                            window.scrollTo(0, 0);
                            this.els.sign_up_panel.trigger("signup_panel_open")
                        }
                        return this
                    } 
                    };
                    newT.save("sign_up_panel", function () {
                        return newT.div({ id: "sign_up_panel" }, newT.form({ method: "POST", action: "/a/sign_up", id: "sign_up_form" }, newT.h1($._("Sign Up for bitly")), newT.p($._("Get searchable link history, access to the bitly API and much more")), newT.fieldset(newT.label({ id: "sign_up_username", clss: "clearfix" }, newT.span($._("Username") + ":"), newT.input({ type: "text", value: "", name: "username", clss: "text" }), newT.strong({ clss: "error" })), newT.label({ id: "sign_up_email", clss: "clearfix" }, newT.span($._("Email Address") +
    ":"), newT.input({ type: "text", value: "", name: "email", clss: "text" }), newT.strong({ clss: "error" })), newT.label({ id: "sign_up_password", clss: "clearfix" }, newT.span($._("Password") + ":"), newT.input({ type: "password", name: "password", value: "", clss: "text" }), newT.strong({ clss: "error" })), newT.p({ id: "sign_in_sign_up" }, $._("Already have a bitly account?"), newT.a({ href: "/a/sign_in", clss: "sign_in_link" }, $._("Sign In")), newT.input({ type: "submit", value: $._("Sign Up"), clss: "blue_button submit" })), BITLY.data.xsrf), newT.p({ id: "signup_error",
        clss: "error"
    }), newT.p({ clss: "desc" }, $._("Or you can sign in to bitly using your existing account from Twitter or Facebook, and get started right away!")), newT.render("open_login"), newT.a({ clss: "close", href: "#" }, "x")))
                    });
                    (function (a, b) {
                        function d(K) {
                            return typeof K === "string"
                        }
                        function e(K) {
                            var N = n.call(arguments, 1);
                            return function () {
                                return K.apply(this, N.concat(n.call(arguments)))
                            }
                        }
                        function f(K, N, T, ea, ma) {
                            var ua;
                            if (ea !== h) {
                                N = T.match(K ? /^([^#]*)\#?(.*)$/ : /^([^#?]*)\??([^#]*)(#?.*)/);
                                T = N[3] || "";
                                if (ma === 2 && d(ea))
                                    ea = ea.replace(K ? ga : fa, "");
                                else {
                                    ua = q(N[2]);
                                    ea = d(ea) ? q[K ? G : J](ea) : ea;
                                    ea = ma === 2 ? ea : ma === 1 ? a.extend({}, ea, ua) : a.extend({}, ua, ea);
                                    ea = p(ea);
                                    if (K)
                                        ea = ea.replace(qa, o)
                                }
                                K = N[1] + (K ? "#" : ea || !N[1] ? "?" : "") + ea + T
                            } else
                                K = N(T !==
            h ? T : b[P][U]);
                            return K
                        }
                        function c(K, N, T) {
                            if (N === h || typeof N === "boolean") {
                                T = N;
                                N = p[K ? G : J]()
                            } else
                                N = d(N) ? N.replace(K ? ga : fa, "") : N;
                            return q(N, T)
                        }
                        function g(K, N, T, ea) {
                            if (!d(T) && typeof T !== "object") {
                                ea = T;
                                T = N;
                                N = h
                            }
                            return this.each(function () {
                                var ma = a(this), ua = N || D()[(this.nodeName || "").toLowerCase()] || "", ka = ua && ma.attr(ua) || "";
                                ma.attr(ua, p[K](ka, T, ea))
                            })
                        }
                        var h, n = Array.prototype.slice, o = decodeURIComponent, p = a.param, m, q, v, w = a.bbq = a.bbq || {}, s, k, D, M = a.event.special, J = "querystring", G = "fragment", P = "location", U = "href",
    fa = /^.*\?|#.*$/g, ga = /^.*\#/, qa, S = {};
                        p[J] = e(f, 0, function (K) {
                            return K.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/, "$1")
                        });
                        p[G] = m = e(f, 1, function (K) {
                            return K.replace(/^[^#]*#?(.*)$/, "$1")
                        });
                        m.noEscape = function (K) {
                            K = a.map((K || "").split(""), encodeURIComponent);
                            qa = RegExp(K.join("|"), "g")
                        };
                        m.noEscape(",/");
                        a.deparam = q = function (K, N) {
                            var T = {}, ea = { "true": true, "false": false, "null": null };
                            a.each(K.replace(/\+/g, " ").split("&"), function (ma, ua) {
                                var ka = ua.split("="), sa = o(ka[0]), F = T, V = 0, da = sa.split("]["), W = da.length - 1;
                                if (/\[/.test(da[0]) &&
            /\]$/.test(da[W])) {
                                    da[W] = da[W].replace(/\]$/, "");
                                    da = da.shift().split("[").concat(da);
                                    W = da.length - 1
                                } else
                                    W = 0;
                                if (ka.length === 2) {
                                    ka = o(ka[1]);
                                    if (N)
                                        ka = ka && !isNaN(ka) ? +ka : ka === "undefined" ? h : ea[ka] !== h ? ea[ka] : ka;
                                    if (W)
                                        for (; V <= W; V++) {
                                            sa = da[V] === "" ? F.length : da[V];
                                            F = F[sa] = V < W ? F[sa] || (da[V + 1] && isNaN(da[V + 1]) ? {} : []) : ka
                                        }
                                    else if (a.isArray(T[sa]))
                                        T[sa].push(ka);
                                    else
                                        T[sa] = T[sa] !== h ? [T[sa], ka] : ka
                                } else if (sa)
                                    T[sa] = N ? h : ""
                            });
                            return T
                        };
                        q[J] = e(c, 0);
                        q[G] = v = e(c, 1);
                        a.elemUrlAttr || (a.elemUrlAttr = function (K) {
                            return a.extend(S,
        K)
                        })({ a: U, base: U, iframe: "src", img: "src", input: "src", form: "action", link: U, script: "src" });
                        D = a.elemUrlAttr;
                        a.fn[J] = e(g, J);
                        a.fn[G] = e(g, G);
                        w.pushState = s = function (K, N) {
                            if (d(K) && /^#/.test(K) && N === h)
                                N = 2;
                            var T = K !== h;
                            T = m(b[P][U], T ? K : {}, T ? N : 2);
                            b[P][U] = T + (/#/.test(T) ? "" : "#")
                        };
                        w.getState = k = function (K, N) {
                            return K === h || typeof K === "boolean" ? v(K) : v(N)[K]
                        };
                        w.removeState = function (K) {
                            var N = {};
                            if (K !== h) {
                                N = k();
                                a.each(a.isArray(K) ? K : arguments, function (T, ea) {
                                    delete N[ea]
                                })
                            }
                            s(N, 2)
                        };
                        M.hashchange = a.extend(M.hashchange, { add: function (K) {
                            function N(ea) {
                                var ma =
                ea[G] = m();
                                ea.getState = function (ua, ka) {
                                    return ua === h || typeof ua === "boolean" ? q(ma, ua) : q(ma, ka)[ua]
                                };
                                T.apply(this, arguments)
                            }
                            var T;
                            if (a.isFunction(K)) {
                                T = K;
                                return N
                            } else {
                                T = K.handler;
                                K.handler = N
                            }
                        } 
                        })
                    })(jQuery, this);
                    (function (a, b, d) {
                        function e(m) {
                            m = m || b[g][h];
                            return m.replace(/^[^#]*#?(.*)$/, "$1")
                        }
                        var f, c = a.event.special, g = "location", h = "href", n = document.documentMode, o = a.browser.msie && (n === d || n < 8), p = "onhashchange" in b && !o;
                        a.hashchangeDelay = 100;
                        c.hashchange = a.extend(c.hashchange, { setup: function () {
                            if (p)
                                return false;
                            a(f.start)
                        }, teardown: function () {
                            if (p)
                                return false;
                            a(f.stop)
                        } 
                        });
                        f = function () {
                            function m() {
                                s = k = function (D) {
                                    return D
                                };
                                if (o) {
                                    w = a('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow;
                                    k = function () {
                                        return e(w.document[g][h])
                                    };
                                    s = function (D, M) {
                                        if (D !== M) {
                                            var J = w.document;
                                            J.open().close();
                                            J[g].hash = "#" + D
                                        }
                                    };
                                    s(e())
                                }
                            }
                            var q = {}, v, w, s, k;
                            q.start = function () {
                                if (!v) {
                                    var D = e();
                                    s || m();
                                    (function M() {
                                        var J = e(), G = k(D);
                                        if (J !== D) {
                                            s(D = J, G);
                                            a(b).trigger("hashchange")
                                        } else if (G !== D)
                                            b[g][h] = b[g][h].replace(/#.*/, "") + "#" + G;
                                        v = setTimeout(M, a.hashchangeDelay)
                                    })()
                                }
                            };
                            q.stop = function () {
                                if (!w) {
                                    v && clearTimeout(v);
                                    v = 0
                                }
                            };
                            return q
                        } ()
                    })(jQuery, this);
                    (function (a) {
                        function b(e, f, c, g) {
                            f = a.param(f);
                            a.ajax({ type: "POST", dataType: "json", data: f, traditional: true, jsonp: "callback", url: e, success: c, error: g })
                        }
                        a.fn.bentoBox = function (e, f, c) {
                            function g(R, ha) {
                                da.push(ha.url);
                                Ja[ha.global_hash] = ha;
                                var aa = [], ca;
                                for (ca in Ja)
                                    aa.push(Ja[ca].hash);
                                S.find("#bento_box_bundle_hashes").val(aa.join(","));
                                ua += 1;
                                fa();
                                S.trigger("track", { "plugin:bentoBox": "Shorten Complete. Shortens this session:" + ua })
                            }
                            function h(R, ha) {
                                if (ha.accounts.length <= 0) {
                                    a(".shareButtonContainer").replaceWith('<div id="shareOnSocialNetworkSignInButton" class="basicShareButtonContainer white_button"><a title="' +
                a._("Sign In to share on Twitter") + '" href="#">' + a._("Sign In") + "</a></div>").css("display", "block");
                                    a("#shareOnSocialNetworkSignInButton").find("a").bind("click", function (Ca) {
                                        Ca.preventDefault();
                                        a(this).trigger("track", { "plugin:bentoBox": a._("Add First Social Account") });
                                        a(this).trigger("addTwitterViaOAuth", { share_text: N.val() })
                                    })
                                } else {
                                    var aa = S.find("#shareOnSocialNetworkSignInButton");
                                    aa.length > 0 && aa.replaceWith(G(ha.accounts));
                                    a("#shareOnSocialNetworksButton").css("display", "block")
                                }
                                aa = 0;
                                var ca =
            "";
                                for (var pa = ca = ""; aa < ha.accounts.length; aa++)
                                    if (ha.accounts[aa].account_type === "twitter")
                                        ca += '<span class="activeAccount twitter' + (ha.accounts[aa].primary ? "" : " off") + '"><img alt="" src="/data/avatar/twitter/' + a.escapeHTML(ha.accounts[aa].account_login) + '.png" title="Twitter Account: ' + a.escapeHTML(ha.accounts[aa].account_login) + '" /></span>';
                                    else if (ha.accounts[aa].account_type === "facebook")
                                        pa += '<span class="activeAccount facebook' + (ha.accounts[aa].primary ? "" : " off") + '"><img alt="" src="/data/avatar/facebook/' +
                    a.escapeHTML(ha.accounts[aa].account_login) + '.png" title="Facebook Account: ' + a.escapeHTML(ha.accounts[aa].account_name) + '" /></span>';
                                ca += pa;
                                a("#activeServicesTopLevel").html(ca ? a._("Active:") + ca : ca)
                            }
                            function n(R) {
                                R.preventDefault();
                                delete K.share_params.link;
                                delete K.share_params.picture;
                                R = a(this);
                                var ha = N.val();
                                if (a.trim(ha) === "")
                                    S.trigger("errorMessage", { text: a._("You don't have anything to share yet, shorten a link to get started") });
                                else {
                                    K.share_params.status_update = a.trim(ha);
                                    answer = true;
                                    var aa =
                0, ca = 0;
                                    if (K.auto_warn) {
                                        for (var pa = a.trim(ha).split(/[\s]/), Ca, Ma, Fa = 0; Fa < pa.length; Fa++) {
                                            Ma = a.trim(pa[Fa]);
                                            if (Ca = a.validateUrl(Ma))
                                                ca += 1;
                                            else if (Ma)
                                                aa += 1
                                        }
                                        if (aa > 0 && ca === 0)
                                            answer = confirm(a._("This message doesn't contain any links, share anyway?"));
                                        else if (ca > 0 && aa === 0)
                                            answer = confirm(a._("This message contains only links, share anyway? You can turn this message off in Options."))
                                    }
                                    if (answer) {
                                        ca = a.validateUrl(ha) || [];
                                        pa = [];
                                        aa = a.extend({}, K.share_params);
                                        if (BITLY.data.title_matches) {
                                            Ca = a.extend({}, BITLY.data.title_matches);
                                            Fa = 0;
                                            for (Ma = ca.length; Fa < Ma; Fa++)
                                                if (ca[Fa] in Ca)
                                                    delete Ca[ca[Fa]];
                                                else
                                                    pa.push(ca[Fa])
                                        } else
                                            pa = ca;
                                        if (pa.length > 0) {
                                            aa.link = pa[0];
                                            if ((Fa = BITLY.data.share_previewer && BITLY.data.share_previewer.obj.fb_preview || BITLY.data.fb_preview) && Fa.getThumbnail())
                                                aa.picture = Fa.getThumbnail()
                                        }
                                        b(K.share_url, aa, function (Ta) {
                                            s(Ta, ha)
                                        }, k);
                                        R.parent().next().fadeIn();
                                        R.parent().fadeOut()
                                    }
                                }
                            }
                            function o(R) {
                                fa();
                                a(document.body).trigger("bento_box_value_change", N.val());
                                if (K.auto_shorten)
                                    if (R.keyCode === 32 || R.keyCode === 13)
                                        ga()
                            }
                            function p() {
                                if (ea) {
                                    ea.remove();
                                    ea = null
                                }
                            }
                            function m() {
                                a(document.body).trigger("bento_box_value_change", N.val());
                                K.auto_shorten && setTimeout(function () {
                                    fa();
                                    ga()
                                }, 10)
                            }
                            function q(R, ha) {
                                if (ha.url) {
                                    F.push(ha.url);
                                    var aa = { keyword: ha.keyword, hash: ha.hash, url: ha.url };
                                    b(K.keyword_url, aa, function (ca) {
                                        v(ca, aa)
                                    }, w);
                                    xa.push({ eventType: "customNameComplete", data: ha })
                                }
                            }
                            function v(R, ha) {
                                var aa;
                                if (!R || !R.data || !R.data.url) {
                                    aa = a.inArray(ha.url, F);
                                    aa > -1 && F.splice(aa, 1);
                                    V.push(ha.url);
                                    S.trigger("hideProgressGraphic");
                                    aa = "";
                                    switch (R.status_txt) {
                                        case "INVALID_URI":
                                            aa = a._("We're not sure that is a valid URL.");
                                            break;
                                        case "TEMPORARILY_UNAVAILABLE":
                                            aa = a._("Sorry, we can't shorten URLs for the next few minutes");
                                            break;
                                        case "INVALID_KEYWORD":
                                            aa = a._("Sorry, that isn't a valid keyword.");
                                            break;
                                        case "Keyword Unavailable":
                                            aa = a._("Sorry, that keyword is taken.");
                                            break;
                                        case "ALREADY_A_BITLY_LINK":
                                            aa = a._("Sorry, that's already a bitly link");
                                            break;
                                        default:
                                            aa = a._("We've experienced an error trying to shorten that link: ") + R.status_txt
                                    }
                                    S.trigger("errorMessage",
                { text: aa })
                                } else {
                                    a: 
                                    {
                                        aa = R.data.long_url;
                                        for (var ca = R.data.url, pa = 0; pa < F.length; pa++)
                                            if (aa.indexOf(F[pa]) > -1 || ca.indexOf(F[pa])) {
                                                aa = pa;
                                                break a
                                            }
                                        aa = -1
                                    }
                                    aa > -1 && F.splice(aa, 1);
                                    F.length <= 0 && ea && S.trigger("hideProgressGraphic");
                                    var Ca = ha.url;
                                    aa = R.data.url;
                                    ca = R.data;
                                    pa = N.val();
                                    var Ma = -1;
                                    Ca = Ca.replace(T, "\\$&");
                                    pa = pa.replace(RegExp(Ca, "i"), aa + " ");
                                    if (ca.keyword)
                                        pa = pa.replace(ca.hash, ca.keyword + " ");
                                    Ma = a.inArray(ca.keyword, wa);
                                    if (ca.hash && ca.keyword)
                                        pa = pa.replace(ca.hash, ca.keyword + " ");
                                    wa.splice(Ma, 1);
                                    N.val(pa);
                                    try {
                                        R.data._append = K.append_new_links
                                    } catch (Fa) {
                                    }
                                    if (xa.length <= 0)
                                        S.trigger("shortenComplete", R.data);
                                    else {
                                        R.data.keyword && wa.push(R.data.keyword);
                                        aa = R.data;
                                        for (ca = 0; ca < xa.length; ca++)
                                            if (xa[ca].data.long_url === aa.long_url) {
                                                pa = a.extend(true, {}, xa[ca].data, aa);
                                                S.trigger(xa[ca].eventType, pa);
                                                xa.splice(ca, 1);
                                                da.push(aa.url);
                                                Ja[aa.global_hash] = aa
                                            }
                                    }
                                    F.length <= 0 && setTimeout(M, 3E3);
                                    a(document.body).trigger("bento_box_value_change", N.val())
                                }
                            }
                            function w() {
                                F.length <= 1 && S.trigger("hideProgressGraphic");
                                S.trigger("errorMessage",
            { text: a._("We've experienced an error trying to shorten that link, try again in a bit") })
                            }
                            function s(R, ha) {
                                D();
                                if (R.status_code !== 200)
                                    S.trigger("errorMessage", { text: a._("Not able to share message: ") + R.status_txt });
                                else {
                                    if (R.status_code === 200) {
                                        for (var aa = 0, ca = 0; ca < R.data.length; ca++)
                                            if (R.data[ca].error) {
                                                aa += 1;
                                                var pa;
                                                switch (R.data[ca].error) {
                                                    case "TWITTER_PASSWORD_CHANGED":
                                                        pa = "Your password has changed on account: " + R.data[ca].account_login;
                                                        break;
                                                    case "TWITTER_UPDATE_STATUS_FAILED":
                                                        pa = a._("Status is a duplicate");
                                                        break;
                                                    default:
                                                        pa = a._("Error with your share: ") + R.data[ca].error
                                                }
                                                S.trigger("errorMessage", { text: pa })
                                            }
                                        if (R.data.length === aa)
                                            return
                                    }
                                    S.trigger("successMessage", { text: a._("Successfully shared your message") });
                                    words = a.validateUrl(ha) || [];
                                    aa = [];
                                    for (ca = 0; ca < R.data.length; ca++)
                                        R.data[ca].error || aa.push(R.data[ca]);
                                    if (aa.length > 0) {
                                        S.trigger("socialShareSuccess", { shares: aa, links: words, text: ha });
                                        S.trigger("track", { "plugin:bentoBox": "Social Share Success" })
                                    }
                                    K.auto_clear_share && setTimeout(function () {
                                        N.val("");
                                        N.focus();
                                        fa();
                                        BITLY.data.title_matches && delete BITLY.data.title_matches;
                                        W = [];
                                        a(document.body).trigger("bento_box_value_change", N.val())
                                    }, 1E3)
                                }
                            }
                            function k() {
                                S.trigger("errorMessage", { text: a._("Currently unable to share your message") });
                                D()
                            }
                            function D() {
                                a("#shareOnSocialNetworksButton").parent().fadeIn().next().fadeOut()
                            }
                            function M() {
                                S.trigger("refreshHistory")
                            }
                            function J(R, ha, aa) {
                                var ca = R = "", pa = "";
                                try {
                                    ca = decodeURIComponent(aa)
                                } catch (Ca) {
                                    ca = aa
                                }
                                pa = a.trim(ca + " " + ha);
                                R += '<div class="shortenBentoBox">';
                                R += '<div class="shareContainer">';
                                R += '<form method="get">';
                                R += '<div class="shareTextBoxContainer">';
                                R += '<div id="shareTextCounterBox">140</div>';
                                R += '<textarea id="bentoBoxMainShareBoxTextArea" tabindex="1" name="u" class="shareMessage">' + pa + "</textarea>";
                                R += "</div>";
                                R += '<div class="inputButton clearfix">';
                                R += G();
                                ha = R;
                                aa = "";
                                aa += '<div class="shortenButtonBox">';
                                aa += '<div class="shortenButtonBoxInputContainer">';
                                aa += '<input title="' + a._("Shorten your link") + '" type="submit" class="white_button" tabindex="2"  id="manuallyShortenButton" name="" value="' +
            a._("Shorten") + '" />';
                                aa += "</div>";
                                aa += "</div>";
                                R = ha + aa;
                                R += "</div>";
                                R += "</form>";
                                R += '<div class="shortenedBitlyListListBox">';
                                R += '<div class="linkCapsule_link clearfix">';
                                R += '<strong class="shortened_url">Shortened links</strong>';
                                R += '<strong class="realtime_stats">Real-time stats</strong>';
                                R += '<strong class="long_link">Long link</strong>';
                                R += "</div>";
                                R += '<ul class="shortened_results_list">';
                                R += "</ul>";
                                R += '<form class="bento_box_bundle clearfix" action="/data/create_bundle" method="POST">';
                                R += '<input type="hidden" name="hashes" id="bento_box_bundle_hashes" value="" />';
                                R += BITLY.data.xsrf;
                                R += '<input type="submit" class="white_button" value="Bundle" />';
                                R += "</form>";
                                R += "</div>";
                                R += '<div class="hr"><hr /></div>';
                                R += "</div>";
                                R += "</div>";
                                R += '<div class="hr"><hr /></div>';
                                return a(R)
                            }
                            function G() {
                                var R = '<div class="shareButtonContainer basicShareButtonContainer">';
                                R += '<div class="buttonActionContainer socialNetworkShareButtonBox">';
                                R += '<input title="' + a._("Share your message") + '"  tabindex="3" style="display:none;" type="submit" class="submitButtonBackground shareButton_auth blue_button" id="shareOnSocialNetworksButton" name="" value="' +
            a._("Share") + '" />';
                                R += "</div>";
                                R += '<div class="buttonActionContainer sharePreloader"></div><div class="hr"><hr /></div></div>';
                                return R
                            }
                            function P() {
                                return a('<div style="display:none;" class="shortenAndSharePromo">' + a._("Shorten your links and share from here") + "</div>")
                            }
                            function U() {
                                ma && ma.fadeOut("fast", function () {
                                })
                            }
                            function fa() {
                                var R = N.val().length;
                                if (R > 140 && sa !== "#d40d12") {
                                    sa = "#d40d12";
                                    ka.css({ color: sa })
                                } else if (R > 130 && R <= 140 && sa !== "#5c0002") {
                                    sa = "#5c0002";
                                    ka.css({ color: sa })
                                } else if (R < 120 &&
            sa !== "#777777") {
                                    sa = "#777777";
                                    ka.css({ color: sa })
                                }
                                ka[0].innerHTML = 140 - R;
                                ka.trigger("bento_box_counter_color", sa)
                            }
                            function ga() {
                                var R;
                                R = N.val();
                                if (R = a.validateUrl(R)) {
                                    if (R) {
                                        for (var ha = false, aa = [], ca = 0, pa = 0; ca < R.length; ca++) {
                                            ha = false;
                                            if (!(a.inArray(R[ca], F) > -1))
                                                if (!(a.inArray(R[ca], da) > -1))
                                                    if (!(a.inArray(R[ca], V) > -1))
                                                        if (!(a.inArray(R[ca], W) > -1)) {
                                                            for (; pa < K.blacklist.length; pa++)
                                                                if (R[ca] === K.blacklist[pa])
                                                                    ha = true;
                                                            ha || aa.push(R[ca])
                                                        }
                                        }
                                        safe_matches = aa
                                    } else
                                        safe_matches = void 0;
                                    safe_matches && safe_matches.length <=
                0 || qa(safe_matches)
                                } else {
                                    W = [];
                                    BITLY.data.title_matches && delete BITLY.data.title_matches
                                }
                            }
                            function qa(R) {
                                F = F.concat(safe_matches);
                                ea || (ea = a('<div class="shorteningInActionMessage">Shortening..</div>').appendTo(S.find(".shareContainer")));
                                if (R)
                                    for (var ha = 0; ha < R.length; ha++)
                                        (function (aa) {
                                            K.shorten_params.url = a.trim(R[aa]);
                                            var ca = a.extend(true, {}, K.shorten_params);
                                            b(K.shorten_url, ca, function (pa) {
                                                v(pa, ca)
                                            }, w)
                                        })(ha)
                            }
                            var S = this, K = a.extend(true, d, c), N, T = RegExp("[.$*+?|^()\\[\\]{}\\\\]", "g");
                            e = e || "";
                            f = f ||
        "";
                            var ea, ma, ua = 0, ka, sa = "#777777", F = [], V = [], da = [], W = [], xa = [], wa = [], Ja = {};
                            (function () {
                                var R = K.shareTitle || "";
                                $display_html = J(e, f, R);
                                W = a.validateUrl(R) || [];
                                if (W.length) {
                                    BITLY.data.title_matches = {};
                                    R = 0;
                                    for (var ha = W.length; R < ha; R++)
                                        BITLY.data.title_matches[W[R]] = W[R]
                                }
                                S.find(".replaceWithBentoBoxInsidePlugin").empty().append($display_html);
                                ka = a("#shareTextCounterBox");
                                a("#manuallyShortenButton").live("click", function (aa) {
                                    aa.preventDefault();
                                    N.val() === "" ? S.trigger("errorMessage", { text: a._("Enter a link first") }) :
                ga()
                                });
                                N = S.find("textarea").bind("paste", m).bind("keyup", o).bind("focus", U).bind("blur", function () {
                                    if (N.val() === "") {
                                        ma || (ma = P().appendTo(S));
                                        ma.fadeIn()
                                    }
                                });
                                ma = P().appendTo(S);
                                ma.bind("click", function () {
                                    ma && ma.fadeOut();
                                    N.trigger("focus")
                                });
                                if (e !== "" && f === "") {
                                    value = N.val();
                                    value += e;
                                    N.val(value);
                                    S.trigger("errorMessage", { text: a._("Unable to shorten link: ") + e })
                                } else
                                    e === "" && f === "" && K.shareTitle === "" && N.val("");
                                a.trim(N.val()) === "" && ma.fadeIn();
                                S.fadeIn();
                                a("#shareOnSocialNetworksButton").live("click",
            n);
                                setTimeout(function () {
                                    a(document.body).trigger("bento_box_value_change", N.val())
                                }, 50);
                                S.bind("shareAccounts", function (aa, ca) {
                                    ca = ca.accounts || [];
                                    for (var pa = 0, Ca = ca.length; pa < Ca; pa++) {
                                        if (ca[pa].account_type && ca[pa].account_type === "twitter" && ca[pa].primary) {
                                            a(".shortenBentoBox").addClass("show_count");
                                            break
                                        }
                                        a(".shortenBentoBox").removeClass("show_count")
                                    }
                                })
                            })();
                            (function () {
                                a(document.body).bind("shortenComplete", g);
                                S.bind("bentoBoxOptionsPreferences", function (R, ha) {
                                    K[ha.key] = ha.value;
                                    ha.key === "auto_shorten" &&
                S.trigger("autoShortenSetting")
                                });
                                S.bind("addTwitterViaOAuth", function (R, ha) {
                                    ha || (ha = {});
                                    ha.share_text = N.val();
                                    R.data = ha
                                });
                                S.bind("addFacebookViaConnect", function (R, ha) {
                                    ha || (ha = {});
                                    ha.share_text = N.val();
                                    R.data = ha
                                });
                                S.bind("saveCustomName", q);
                                S.bind("shareAccounts", h);
                                S.bind("hideProgressGraphic", p)
                            })();
                            return this
                        };
                        var d = { shorten_url: "/data/shorten/", keyword_url: "/data/keyword/", share_url: "/data/share/", shareTitle: "", shorten_params: { url: "" }, share_params: { status_update: "" }, debug: false, url: "", params: {},
                            blacklist: ["tinyurl.com", "is.gd", "tweetphoto.com", "ow.ly", "j.mp", "su.pr", "nyti.ms", "on.cnn.com", "tcrn.ch", "bit.ly"], twitterEnabled: false, shareButtonAnimationEnabled: true, auto_shorten: true, auto_warn: false, auto_clear_share: false, hide_bundle_message: true, append_new_links: false
                        }
                    })(jQuery);
                    (function (a) {
                        function b(e, f, c, g) {
                            f._xsrf = a.cookie.get("_xsrf");
                            f = a.param(f);
                            a.ajax({ dataType: "json", url: e, data: f, type: "POST", success: c, error: g })
                        }
                        a.fn.bentoBoxOptions = function (e) {
                            function f() {
                                if (n.use_lightbox) {
                                    a("<h2>" + a._("Share Settings") + "</h2>").appendTo(".bentoBoxOptions");
                                    a('<a href="#" class="close">' + a._("close") + "</a>").appendTo(".bentoBoxOptions")
                                }
                                var m = n.use_lightbox ? "appendTo" : "insertBefore";
                                a('<div class="bentoBoxOptionsItem" style="display:none;"></div>')[m](".bentoBoxOptions").socialLinkedAccounts(n.accounts);
                                if (!(n.accounts.length <= 0)) {
                                    m = "";
                                    m += '<div class="bento_box_settings_controls">';
                                    m += "<ul>";
                                    var q = n.auto_warn ? "checked" : "";
                                    m += '<li><label for="autoWarnEmptyShareMessage">';
                                    m += '<input type="checkbox" name="autoWarnEmptyShareMessage" value="auto_warn" id="autoWarnEmptyShareMessage" ' + q + " />" + a._("Warn me if I try to share a message without a link or with only links.") + "</label></li>";
                                    m += "</ul>";
                                    m += "</div>";
                                    c(m)
                                }
                                if (!(n.accounts.length <= 0)) {
                                    m = "";
                                    m += '<div class="bento_box_settings_controls">';
                                    m += "<ul>";
                                    q = n.auto_clear_share ? "checked" : "";
                                    m += '<li><label for="autoClearShareMessage">';
                                    m += '<input type="checkbox" name="autoClearShareMessage" value="auto_clear_share" id="autoClearShareMessage" ' + q + " />" + a._("Clear my old message after I share it.") + "</label></li>";
                                    m += "</ul>";
                                    m += "</div>";
                                    c(m)
                                }
                                if (!(h.find(".shortenSettingsBox").length > 0)) {
                                    m = "";
                                    q = "checked";
                                    m += '<div class="shortenSettingsBox bento_box_settings_controls">';
                                    m += '<form action="#" method="get">';
                                    m += "<ul>";
                                    if (!n.basicShortener) {
                                        q = n.auto_shorten ?
                    "checked" : "";
                                        m += '<li><label for="autoShortenCheckBoxField">';
                                        m += '<input type="checkbox" name="autoShortenCheckBox" value="auto_shorten" id="autoShortenCheckBoxField" ' + q + " />" + a._("Auto-shorten my long links (uncheck to manually shorten links).") + "</label></li>"
                                    }
                                    m += "</ul>";
                                    m += "</form>";
                                    m += "</div>";
                                    c(m)
                                }
                            }
                            function c(m) {
                                var q = n.use_lightbox ? "appendTo" : "insertBefore";
                                a('<div class="bentoBoxOptionsItem" style="display:none;"></div>').html(m)[q](".bentoBoxOptions").slideDown("normal")
                            }
                            function g() {
                                var m =
            "";
                                m += '<div class="shortenOptionsTopLevel' + (n.use_lightbox ? "" : " bentoOptionsClosed") + '">';
                                m += '<div id="activeServicesTopLevel"></div>';
                                m += '<a class="shortenOptionsAction" title="' + a._("Manage Shorten Box and Social Sharing") + '" href="#">' + a._("Share settings") + "</a>";
                                m += "</div>";
                                return m
                            }
                            var h = this, n = a.extend(true, {}, d, e);
                            setTimeout(function () {
                                h.trigger("shareAccounts", { accounts: n.accounts || [] })
                            }, 50);
                            var o = a('<div class="bentoBoxOptions"></div>').appendTo(h);
                            if (n.use_lightbox) {
                                a(g()).appendTo(h);
                                p = h.find(".shortenOptionsTopLevel");
                                f();
                                p.overlay({ target: o, onBeforeLoad: function () {
                                    o.trigger("track", { "plugin:bentoBoxOptions": "shortenPageOption: open bento box options button" })
                                }, onBeforeClose: function () {
                                    o.trigger("track", { "plugin:bentoBoxOptions": "shortenPageOption: close bento box options button" })
                                }, close: "a.close", closeOnClick: false, fixed: false, mask: "#999"
                                });
                                o.addClass("overlay");
                                o.find("a.close").bind("click", function (m) {
                                    m.preventDefault()
                                })
                            } else {
                                o.html(g());
                                var p = h.find(".shortenOptionsTopLevel");
                                p.toggle(function (m) {
                                    m.preventDefault();
                                    a(this).removeClass("bentoOptionsClosed").addClass("bentoOptionsOpen");
                                    f();
                                    h.trigger("track", { "plugin:bentoBoxOptions": "shortenPageOption: open bento box options button" })
                                }, function (m) {
                                    m.preventDefault();
                                    m = h.find(".bentoBoxOptionsItem");
                                    a(this).addClass("bentoOptionsClosed").removeClass("bentoOptionsOpen");
                                    m.slideUp("fast", function () {
                                        a(this).remove()
                                    });
                                    h.trigger("track", { "plugin:bentoBoxOptions": "shortenPageOption: close bento box options button" })
                                })
                            }
                            h.bind("refreshLinkedAccountsView",
        function () {
            f()
        });
                            h.bind("openOptions", function (m) {
                                m.preventDefault();
                                p.click()
                            });
                            h.bind("shareAccounts", function (m, q) {
                                n.accounts = q.accounts
                            });
                            e = n.use_lightbox ? "click" : "live";
                            (n.use_lightbox ? o : h).find(".bento_box_settings_controls input[type=checkbox]")[e]("change", function () {
                                var m = a(this), q = m.attr("checked");
                                m = m.val();
                                n[m] = q;
                                var v = { key: m, value: q };
                                b(n.url, v, function () {
                                }, function () {
                                });
                                h.trigger("bentoBoxOptionsPreferences", v);
                                h.trigger("track", { "plugin:bentoBoxOptions": m + " : " + q })
                            });
                            return this
                        };
                        var d =
    { url: "/data/preferences", params: {}, accounts: [], auto_shorten: true, auto_warn: false, basicShortener: false, auto_clear_share: false, use_lightbox: false }
                    })(jQuery);
                    (function (a) {
                        function b(e) {
                            return (e = document.cookie.match("\\b" + e + "=([^;]*)\\b")) ? e[1] : undefined
                        }
                        function d(e, f, c) {
                            if (c) {
                                var g = new Date;
                                g.setTime(g.getTime() + c * 864E5);
                                c = "; expires=" + g.toGMTString()
                            } else
                                c = "";
                            document.cookie = e + "=" + f + c + "; path=/"
                        }
                        a.chromo = function (e, f) {
                            var c = { id: "banner_promo", className: "promo", parent_el: null, prepend: true, cookie: null, onhide: null, oncreate: null };
                            if (f)
                                c = a.extend(c, f);
                            if (!c.cookie || !b(c.cookie)) {
                                var g = a('<div id="' + c.id + '" class="' + c.className + '"></div>');
                                g.html("<p>" +
            e + '</p><a class="close" href="#">x</a>');
                                g.find("a.close").bind("click", function (h) {
                                    h.preventDefault();
                                    c.cookie && d(c.cookie, 1, 365);
                                    g.slideUp(function () {
                                        jQuery(this).remove()
                                    });
                                    c.onhide && typeof c.onhide == "function" && c.onhide.call(g)
                                });
                                a(c.parent_el || document.body)[c.prepend ? "prepend" : "append"](g);
                                g.slideDown();
                                c.oncreate && typeof c.oncreate == "function" && c.oncreate.call(null)
                            }
                            return this
                        }
                    })(jQuery);
                    (function (a) {
                        function b(e, f) {
                            this.orig = a(e);
                            this.config = f;
                            this.options = [];
                            this.selectedIndex = null;
                            this.createElements().bindEvents().init()
                        }
                        function d(e) {
                            this.text = e.text;
                            this.value = typeof e.value !== "undefined" ? e.value : e.text;
                            this.className = e.className
                        }
                        b.prototype = { createElements: function () {
                            var e = this.orig.outerWidth() + 30, f = a(document.createElement("div")).addClass(this.config.cb_class).addClass("_jqcb");
                            this.config.size_el && f.css({ width: e });
                            this.orig.attr("id") && f.attr("id", this.orig.attr("id") +
            "_cb");
                            var c = a(document.createElement("div")).addClass(this.config.selected_class).css({ width: e }), g = a(document.createElement("span")).addClass(this.config.title_class).html(this.orig[0].options[this.orig[0].selectedIndex].innerHTML || this.orig.val()), h = a(document.createElement("span")).addClass(this.config.handle_class);
                            c.append(g);
                            c.append(h);
                            c.append(a(document.createElement("div")).css("clear", "both"));
                            f.append(c);
                            var n = a(document.createElement("ul")).addClass(this.config.options_class).css({ width: e });
                            this.config.size_options && n.css({ width: e });
                            e = 0;
                            for (var o = this.orig.get(0).options.length; e < o; e++) {
                                var p = new d(this.orig.get(0).options[e]), m = this.options.push(p) - 1;
                                p = a(document.createElement("li")).html(p.text).data("opt_id", m).addClass(p.className).addClass("_jqcbo");
                                n.append(p)
                            }
                            f.append(n);
                            this.selectedIndex = this.orig.get(0).selectedIndex;
                            this.cb = f;
                            this.cb_sel = c;
                            this.cb_sel_title = g;
                            this.cb_handle = h;
                            this.cb_options = n;
                            this.orig[0].disabled && this.disable();
                            return this
                        }, bindEvents: function () {
                            var e =
            this;
                            this.cb.hover(function (c) {
                                e.config.hover && e.show();
                                e.orig.trigger("mouseover", c)
                            }, function (c) {
                                e.config.hover && e.hide();
                                e.orig.trigger("mouseout", c)
                            });
                            this.cb.mousemove(function (c) {
                                e.hover_active(c);
                                e.orig.trigger("mousemove", c)
                            });
                            this.cb.click(function (c) {
                                e.config.hover || (e.cb.hasClass("open") ? e.hide() : e.show());
                                e.activate(c);
                                e.orig.trigger("click", c)
                            });
                            var f;
                            f = "blur,dblclick,focus,mousedown,mouseup,keydown,keypress,keyup".split(",");
                            a.each(f, function (c, g) {
                                e.cb.bind(g, function (h) {
                                    e.no_recursion =
                    true;
                                    e.orig.trigger(g, h);
                                    setTimeout(function () {
                                        delete e.no_recursion
                                    })
                                })
                            });
                            this.orig.bind("focus", function () {
                                !e.no_recursion && !e.cb.hasClass("open") && e.show()
                            });
                            return this
                        }, init: function () {
                            this.orig.before(this.cb);
                            this.orig.css({ position: "absolute", left: -99999, height: 1, width: 1, overflow: "hidden" });
                            this.hide(true);
                            return this
                        }, show: function () {
                            if (this.orig[0].disabled)
                                return this;
                            this.cb.addClass("open");
                            this.config.animate ? this.cb.find("ul." + this.config.options_class).slideDown("fast") : this.cb.find("ul." +
            this.config.options_class).show();
                            if (!this.config.hover) {
                                this.evt_id = this.evt_id || +new Date;
                                var e = this;
                                setTimeout(function () {
                                    a(document.body).bind("click.jqcb_" + e.evt_id, function (f) {
                                        a(f.target).closest("." + e.config.options_class).length || e.hide()
                                    })
                                })
                            }
                            return this
                        }, hide: function (e) {
                            if (e || !this.config.animate) {
                                this.cb.find("ul." + this.config.options_class).hide();
                                this.cb.removeClass("open")
                            } else {
                                var f = this;
                                this.cb.find("ul." + this.config.options_class).slideUp("fast", function () {
                                    f.cb.removeClass("open")
                                })
                            }
                            !this.config.hover &&
            this.evt_id && a(document.body).unbind("click.jqcb_" + this.evt_id);
                            return this
                        }, hover_active: function (e) {
                            this.cb.find("li").removeClass(this.config.active_class);
                            a(e.target).closest("li").addClass(this.config.active_class);
                            return this
                        }, activate: function (e) {
                            var f = a(e.target).closest("li._jqcbo");
                            if (f.length) {
                                if (f.data("opt_id") !== this.selectedIndex) {
                                    this.cb.find("." + this.config.title_class).html(f.html());
                                    this.cb.find("li").removeClass(this.config.active_class);
                                    this.selectedIndex = f.data("opt_id");
                                    this.orig.get(0).options[this.selectedIndex].selected =
                    "selected";
                                    this.orig.trigger("change", e)
                                }
                                this.hide()
                            }
                            return this
                        }, val: function (e) {
                            var f = this;
                            this.cb.find("li").each(function (c, g) {
                                var h = a(g);
                                _val = f.options[h.data("opt_id")].value;
                                _val === e && f.activate({ target: g })
                            })
                        }, resize: function () {
                            this.orig.css({ height: "auto", width: "auto" });
                            var e = this.orig.outerWidth() + 30;
                            this.orig.css({ height: 1, width: 1 });
                            this.cb_sel.css({ width: e });
                            this.cb_options.css({ width: e })
                        }, disable: function () {
                            this.orig[0].disabled = true;
                            this.cb.addClass("disabled");
                            return this
                        }, enable: function () {
                            this.orig[0].disabled =
            false;
                            this.cb.removeClass("disabled");
                            return this
                        } 
                        };
                        a.fn.combobox = function (e, f) {
                            var c = { cb_class: "cb_select", selected_class: "cb_selected", title_class: "cb_title", handle_class: "cb_handle", options_class: "cb_select_options", active_class: "cb_active", size_el: false, size_options: true, hover: false, animate: true };
                            e && a.extend(c, e);
                            this.each(function (g, h) {
                                var n = a(h);
                                n.data("cb") || n.data("cb", new b(h, c));
                                if (c.method && typeof f != "undefined") {
                                    n = n.data("cb");
                                    if (typeof f === "string")
                                        f = [f];
                                    c.method in n && n[c.method].apply(n,
                f)
                                }
                            });
                            return this
                        }
                    })(jQuery);
                    (function (a) {
                        a.extend({ commifyNumber: function (b) {
                            if (b === null)
                                return "";
                            var d = (b + "").split("").reverse();
                            for (b = 3; b < d.length; b += 4)
                                d.splice(b, 0, ",");
                            return d.reverse().join("")
                        } 
                        })
                    })(jQuery);
                    (function (a) {
                        a.extend({ cookie: { get: function (b) {
                            return (b = document.cookie.match("\\b" + b + "=([^;]*)\\b")) ? b[1] : undefined
                        }, write: function (b, d, e) {
                            if (e) {
                                var f = new Date;
                                f.setTime(f.getTime() + e * 864E5);
                                e = "; expires=" + f.toGMTString()
                            } else
                                e = "";
                            document.cookie = b + "=" + d + e + "; path=/"
                        }, debug: function () {
                            console.log(document.cookie)
                        } 
                        }
                        })
                    })(jQuery);
                    (function (a) {
                        a.fn.errorMessenger = function (d) {
                            function e(q, v) {
                                f(a.escapeHTML(v.text), "topErrorMessage");
                                h.trigger("track", { "plugin:errorMessenger": v.text })
                            }
                            function f(q, v) {
                                var w = "";
                                w += '<div class="' + v + ' basicOverlayMessageContainer" style="display:none;">';
                                w += '<div class="basicOverlayMessageContainerInner">';
                                w += '<span class="messageIconContainer"></span>';
                                w += '<div class="basicMessageTextContainer">' + q + "</div>";
                                w += '<div class="hr"><hr /></div>';
                                w += "</div>";
                                w += "</div>";
                                w = a(w).appendTo(h);
                                p.push(w);
                                if (!m) {
                                    w.slideDown();
                                    m = true;
                                    c()
                                }
                            }
                            function c() {
                                o && clearTimeout(o);
                                o = setTimeout(g, n.messageClearInterval)
                            }
                            function g() {
                                var q = p.shift();
                                if (q) {
                                    q.slideUp("normal", function () {
                                        q.remove()
                                    });
                                    if (p.length > 0) {
                                        p[0].slideDown();
                                        c()
                                    } else
                                        m = false
                                }
                            }
                            var h = this, n = a.extend(true, b, d), o, p = [], m = false;
                            h.bind("errorMessage", e);
                            h.bind("statusMessage", e);
                            h.bind("successMessage", function (q, v) {
                                f(a.escapeHTML(v.text), "successMessage")
                            });
                            return this
                        };
                        var b = { messageClearInterval: 3E3 }
                    })(jQuery);
                    (function (a) {
                        a.escapeHTML = function (b) {
                            return b && b.replace(/&/mg, "&amp;").replace(/"/mg, "&quot;").replace(/'/mg, "&#39;").replace(/>/mg, "&gt;").replace(/</mg, "&lt;") || ""
                        }
                    })(jQuery);
                    (function () {
                        $.fn.eventTracker = function (b) {
                            function d(f) {
                                for (var c in f)
                                    try {
                                        pageTracker._trackEvent(c, f[c])
                                    } catch (g) {
                                        return false
                                    }
                                return true
                            }
                            $.extend(true, a, b);
                            var e = [];
                            this.bind("track", function (f, c) {
                                if (pageTracker) {
                                    d(c);
                                    for (var g = 0; g < e.length; g++)
                                        d(e[g]);
                                    e = []
                                } else
                                    e.push(c)
                            });
                            return this
                        };
                        var a = { messageClearInterval: 5E3 }
                    })(jQuery);
                    (function (a) {
                        function b() {
                            if (a.fn.ajaxSubmit.debug) {
                                var d = "[jquery.form] " + Array.prototype.join.call(arguments, "");
                                if (window.console && window.console.log)
                                    window.console.log(d);
                                else
                                    window.opera && window.opera.postError && window.opera.postError(d)
                            }
                        }
                        a.fn.ajaxSubmit = function (d) {
                            function e() {
                                function q() {
                                    var ea = o.attr("target"), ma = o.attr("action");
                                    s.setAttribute("target", D);
                                    s.getAttribute("method") != "POST" && s.setAttribute("method", "POST");
                                    s.getAttribute("action") != k.url && s.setAttribute("action", k.url);
                                    k.skipEncodingOverride ||
                o.attr({ encoding: "multipart/form-data", enctype: "multipart/form-data" });
                                    k.timeout && setTimeout(function () {
                                        ga = true;
                                        v()
                                    }, k.timeout);
                                    var ua = [];
                                    try {
                                        if (k.extraData)
                                            for (var ka in k.extraData)
                                                ua.push(a('<input type="hidden" name="' + ka + '" value="' + k.extraData[ka] + '" />').appendTo(s)[0]);
                                        J.appendTo("body");
                                        J.data("form-plugin-onload", v);
                                        s.submit()
                                    } finally {
                                        s.setAttribute("action", ma);
                                        ea ? s.setAttribute("target", ea) : o.removeAttr("target");
                                        a(ua).remove()
                                    }
                                }
                                function v() {
                                    if (!fa) {
                                        J.removeData("form-plugin-onload");
                                        var ea = true;
                                        try {
                                            if (ga)
                                                throw "timeout";
                                            N = G.contentWindow ? G.contentWindow.document : G.contentDocument ? G.contentDocument : G.document;
                                            var ma = k.dataType == "xml" || N.XMLDocument || a.isXMLDoc(N);
                                            b("isXml=" + ma);
                                            if (!ma && window.opera && (N.body == null || N.body.innerHTML == ""))
                                                if (--T) {
                                                    b("requeing onLoad callback, DOM not available");
                                                    setTimeout(v, 250);
                                                    return
                                                }
                                            fa = true;
                                            P.responseText = N.documentElement ? N.documentElement.innerHTML : null;
                                            P.responseXML = N.XMLDocument ? N.XMLDocument : N;
                                            P.getResponseHeader = function (V) {
                                                return { "content-type": k.dataType}[V]
                                            };
                                            var ua = /(json|script)/.test(k.dataType);
                                            if (ua || k.textarea) {
                                                var ka = N.getElementsByTagName("textarea")[0];
                                                if (ka)
                                                    P.responseText = ka.value;
                                                else if (ua) {
                                                    var sa = N.getElementsByTagName("pre")[0];
                                                    if (sa)
                                                        P.responseText = sa.innerHTML
                                                }
                                            } else if (k.dataType == "xml" && !P.responseXML && P.responseText != null)
                                                P.responseXML = w(P.responseText);
                                            K = a.httpData(P, k.dataType)
                                        } catch (F) {
                                            b("error caught:", F);
                                            ea = false;
                                            P.error = F;
                                            a.handleError(k, P, "error", F)
                                        }
                                        if (ea) {
                                            k.success.call(k.context, K, "success", P);
                                            U && a.event.trigger("ajaxSuccess",
                        [P, k])
                                        }
                                        U && a.event.trigger("ajaxComplete", [P, k]);
                                        U && ! --a.active && a.event.trigger("ajaxStop");
                                        if (k.complete)
                                            k.complete.call(k.context, P, ea ? "success" : "error");
                                        setTimeout(function () {
                                            J.removeData("form-plugin-onload");
                                            J.remove();
                                            P.responseXML = null
                                        }, 100)
                                    }
                                }
                                function w(ea, ma) {
                                    if (window.ActiveXObject) {
                                        ma = new ActiveXObject("Microsoft.XMLDOM");
                                        ma.async = "false";
                                        ma.loadXML(ea)
                                    } else
                                        ma = (new DOMParser).parseFromString(ea, "text/xml");
                                    return ma && ma.documentElement && ma.documentElement.tagName != "parsererror" ? ma : null
                                }
                                var s = o[0];
                                if (a(":input[name=submit],:input[id=submit]", s).length)
                                    alert('Error: Form elements must not have name or id of "submit".');
                                else {
                                    var k = a.extend(true, {}, a.ajaxSettings, d);
                                    k.context = k.context || k;
                                    var D = "jqFormIO" + (new Date).getTime(), M = "_" + D;
                                    window[M] = function () {
                                        var ea = J.data("form-plugin-onload");
                                        if (ea) {
                                            ea();
                                            window[M] = undefined;
                                            try {
                                                delete window[M]
                                            } catch (ma) {
                                            }
                                        }
                                    };
                                    var J = a('<iframe id="' + D + '" name="' + D + '" src="' + k.iframeSrc + '" onload="window[\'_\'+this.id]()" />'), G = J[0];
                                    J.css({ position: "absolute",
                                        top: "-1000px", left: "-1000px"
                                    });
                                    var P = { aborted: 0, responseText: null, responseXML: null, status: 0, statusText: "n/a", getAllResponseHeaders: function () {
                                    }, getResponseHeader: function () {
                                    }, setRequestHeader: function () {
                                    }, abort: function () {
                                        this.aborted = 1;
                                        J.attr("src", k.iframeSrc)
                                    } 
                                    }, U = k.global;
                                    U && !a.active++ && a.event.trigger("ajaxStart");
                                    U && a.event.trigger("ajaxSend", [P, k]);
                                    if (k.beforeSend && k.beforeSend.call(k.context, P, k) === false)
                                        k.global && a.active--;
                                    else if (!P.aborted) {
                                        var fa = false, ga = 0, qa = s.clk;
                                        if (qa) {
                                            var S = qa.name;
                                            if (S && !qa.disabled) {
                                                k.extraData = k.extraData || {};
                                                k.extraData[S] = qa.value;
                                                if (qa.type == "image") {
                                                    k.extraData[S + ".x"] = s.clk_x;
                                                    k.extraData[S + ".y"] = s.clk_y
                                                }
                                            }
                                        }
                                        k.forceSync ? q() : setTimeout(q, 10);
                                        var K, N, T = 50
                                    }
                                }
                            }
                            if (!this.length) {
                                b("ajaxSubmit: skipping submit process - no element selected");
                                return this
                            }
                            if (typeof d == "function")
                                d = { success: d };
                            var f = a.trim(this.attr("action"));
                            if (f)
                                f = (f.match(/^([^#]+)/) || [])[1];
                            f = f || window.location.href || "";
                            d = a.extend(true, { url: f, type: this.attr("method") || "GET", iframeSrc: /^https/i.test(window.location.href ||
            "") ? "javascript:false" : "about:blank"
                            }, d);
                            f = {};
                            this.trigger("form-pre-serialize", [this, d, f]);
                            if (f.veto) {
                                b("ajaxSubmit: submit vetoed via form-pre-serialize trigger");
                                return this
                            }
                            if (d.beforeSerialize && d.beforeSerialize(this, d) === false) {
                                b("ajaxSubmit: submit aborted via beforeSerialize callback");
                                return this
                            }
                            var c, g, h = this.formToArray(d.semantic);
                            if (d.data) {
                                d.extraData = d.data;
                                for (c in d.data)
                                    if (d.data[c] instanceof Array)
                                        for (var n in d.data[c])
                                            h.push({ name: c, value: d.data[c][n] });
                                    else {
                                        g = d.data[c];
                                        g = a.isFunction(g) ?
                    g() : g;
                                        h.push({ name: c, value: g })
                                    }
                            }
                            if (d.beforeSubmit && d.beforeSubmit(h, this, d) === false) {
                                b("ajaxSubmit: submit aborted via beforeSubmit callback");
                                return this
                            }
                            this.trigger("form-submit-validate", [h, this, d, f]);
                            if (f.veto) {
                                b("ajaxSubmit: submit vetoed via form-submit-validate trigger");
                                return this
                            }
                            c = a.param(h);
                            if (d.type.toUpperCase() == "GET") {
                                d.url += (d.url.indexOf("?") >= 0 ? "&" : "?") + c;
                                d.data = null
                            } else
                                d.data = c;
                            var o = this, p = [];
                            d.resetForm && p.push(function () {
                                o.resetForm()
                            });
                            d.clearForm && p.push(function () {
                                o.clearForm()
                            });
                            if (!d.dataType && d.target) {
                                var m = d.success || function () {
                                };
                                p.push(function (q) {
                                    var v = d.replaceTarget ? "replaceWith" : "html";
                                    a(d.target)[v](q).each(m, arguments)
                                })
                            } else
                                d.success && p.push(d.success);
                            d.success = function (q, v, w) {
                                for (var s = d.context || d, k = 0, D = p.length; k < D; k++)
                                    p[k].apply(s, [q, v, w || o, o])
                            };
                            c = a("input:file", this).length > 0;
                            n = o.attr("enctype") == "multipart/form-data" || o.attr("encoding") == "multipart/form-data";
                            if (d.iframe !== false && (c || d.iframe || n))
                                d.closeKeepAlive ? a.get(d.closeKeepAlive, e) : e();
                            else
                                a.ajax(d);
                            this.trigger("form-submit-notify", [this, d]);
                            return this
                        };
                        a.fn.ajaxForm = function (d) {
                            if (this.length === 0) {
                                var e = { s: this.selector, c: this.context };
                                if (!a.isReady && e.s) {
                                    b("DOM not ready, queuing ajaxForm");
                                    a(function () {
                                        a(e.s, e.c).ajaxForm(d)
                                    });
                                    return this
                                }
                                b("terminating; zero elements found by selector" + (a.isReady ? "" : " (DOM not ready)"));
                                return this
                            }
                            return this.ajaxFormUnbind().bind("submit.form-plugin", function (f) {
                                if (!f.isDefaultPrevented()) {
                                    f.preventDefault();
                                    a(this).ajaxSubmit(d)
                                }
                            }).bind("click.form-plugin",
        function (f) {
            var c = f.target, g = a(c);
            if (!g.is(":submit,input:image")) {
                c = g.closest(":submit");
                if (c.length == 0)
                    return;
                c = c[0]
            }
            var h = this;
            h.clk = c;
            if (c.type == "image")
                if (f.offsetX != undefined) {
                    h.clk_x = f.offsetX;
                    h.clk_y = f.offsetY
                } else if (typeof a.fn.offset == "function") {
                    g = g.offset();
                    h.clk_x = f.pageX - g.left;
                    h.clk_y = f.pageY - g.top
                } else {
                    h.clk_x = f.pageX - c.offsetLeft;
                    h.clk_y = f.pageY - c.offsetTop
                }
            setTimeout(function () {
                h.clk = h.clk_x = h.clk_y = null
            }, 100)
        })
                        };
                        a.fn.ajaxFormUnbind = function () {
                            return this.unbind("submit.form-plugin click.form-plugin")
                        };
                        a.fn.formToArray = function (d) {
                            var e = [];
                            if (this.length === 0)
                                return e;
                            var f = this[0], c = d ? f.getElementsByTagName("*") : f.elements;
                            if (!c)
                                return e;
                            var g, h, n, o;
                            g = 0;
                            for (max = c.length; g < max; g++) {
                                h = c[g];
                                if (n = h.name)
                                    if (d && f.clk && h.type == "image") {
                                        if (!h.disabled && f.clk == h) {
                                            e.push({ name: n, value: a(h).val() });
                                            e.push({ name: n + ".x", value: f.clk_x }, { name: n + ".y", value: f.clk_y })
                                        }
                                    } else if ((o = a.fieldValue(h, true)) && o.constructor == Array) {
                                        h = 0;
                                        for (jmax = o.length; h < jmax; h++)
                                            e.push({ name: n, value: o[h] })
                                    } else
                                        o !== null && typeof o != "undefined" &&
                    e.push({ name: n, value: o })
                            }
                            if (!d && f.clk) {
                                d = a(f.clk);
                                c = d[0];
                                if ((n = c.name) && !c.disabled && c.type == "image") {
                                    e.push({ name: n, value: d.val() });
                                    e.push({ name: n + ".x", value: f.clk_x }, { name: n + ".y", value: f.clk_y })
                                }
                            }
                            return e
                        };
                        a.fn.formSerialize = function (d) {
                            return a.param(this.formToArray(d))
                        };
                        a.fn.fieldSerialize = function (d) {
                            var e = [];
                            this.each(function () {
                                var f = this.name;
                                if (f) {
                                    var c = a.fieldValue(this, d);
                                    if (c && c.constructor == Array)
                                        for (var g = 0, h = c.length; g < h; g++)
                                            e.push({ name: f, value: c[g] });
                                    else
                                        c !== null && typeof c != "undefined" &&
                    e.push({ name: this.name, value: c })
                                }
                            });
                            return a.param(e)
                        };
                        a.fn.fieldValue = function (d) {
                            for (var e = [], f = 0, c = this.length; f < c; f++) {
                                var g = a.fieldValue(this[f], d);
                                g === null || typeof g == "undefined" || g.constructor == Array && !g.length || (g.constructor == Array ? a.merge(e, g) : e.push(g))
                            }
                            return e
                        };
                        a.fieldValue = function (d, e) {
                            var f = d.name, c = d.type, g = d.tagName.toLowerCase();
                            if (e === undefined)
                                e = true;
                            if (e && (!f || d.disabled || c == "reset" || c == "button" || (c == "checkbox" || c == "radio") && !d.checked || (c == "submit" || c == "image") && d.form && d.form.clk !=
        d || g == "select" && d.selectedIndex == -1))
                                return null;
                            if (g == "select") {
                                var h = d.selectedIndex;
                                if (h < 0)
                                    return null;
                                f = [];
                                g = d.options;
                                var n = (c = c == "select-one") ? h + 1 : g.length;
                                for (h = c ? h : 0; h < n; h++) {
                                    var o = g[h];
                                    if (o.selected) {
                                        var p = o.value;
                                        p || (p = o.attributes && o.attributes.value && !o.attributes.value.specified ? o.text : o.value);
                                        if (c)
                                            return p;
                                        f.push(p)
                                    }
                                }
                                return f
                            }
                            return a(d).val()
                        };
                        a.fn.clearForm = function () {
                            return this.each(function () {
                                a("input,select,textarea", this).clearFields()
                            })
                        };
                        a.fn.clearFields = a.fn.clearInputs = function () {
                            return this.each(function () {
                                var d =
            this.type, e = this.tagName.toLowerCase();
                                if (d == "text" || d == "password" || e == "textarea")
                                    this.value = "";
                                else if (d == "checkbox" || d == "radio")
                                    this.checked = false;
                                else if (e == "select")
                                    this.selectedIndex = -1
                            })
                        };
                        a.fn.resetForm = function () {
                            return this.each(function () {
                                if (typeof this.reset == "function" || typeof this.reset == "object" && !this.reset.nodeType)
                                    this.reset()
                            })
                        };
                        a.fn.enable = function (d) {
                            if (d === undefined)
                                d = true;
                            return this.each(function () {
                                this.disabled = !d
                            })
                        };
                        a.fn.selected = function (d) {
                            if (d === undefined)
                                d = true;
                            return this.each(function () {
                                var e =
            this.type;
                                if (e == "checkbox" || e == "radio")
                                    this.checked = d;
                                else if (this.tagName.toLowerCase() == "option") {
                                    e = a(this).parent("select");
                                    d && e[0] && e[0].type == "select-one" && e.find("option").selected(false);
                                    this.selected = d
                                }
                            })
                        }
                    })(jQuery);
                    (function (a) {
                        a.fn.historyHeadline = function (d, e, f) {
                            function c(n, o, p) {
                                o *= n;
                                current = Math.min(o, p);
                                html = "";
                                set_start = o - n || 1;
                                if (h.title)
                                    html += "<h3>" + a.escapeHTML(h.title) + "</h3>";
                                else if (h.show_search_term)
                                    html += "<h3>" + (d ? a._("Search results for") + " " + a.escapeHTML(d) : a.escapeHTML(a._("Link & Bundle History"))) + ": " + set_start + " - " + current + "</h3>";
                                if (!h.hide_ical) {
                                    html += '<div class="resultsHeaderContainer">';
                                    if (d !== "")
                                        html += '<div class="icalImportLink"><a href="/u/' + encodeURIComponent(e) + "/" + encodeURIComponent(d) +
                    '.ics">' + a._("Import into iCal") + "</a></div>";
                                    html += "</div>"
                                }
                                return html
                            }
                            var g = this, h = a.extend(true, b, f);
                            a(document.body).bind("hashList", function (n, o) {
                                if (o.search_term)
                                    d = o.search_term;
                                g.html(c(o.perpage, o.page, o.total))
                            });
                            return this
                        };
                        var b = { show_search_term: true, title: null, hide_ical: false }
                    })(jQuery);
                    (function (a) {
                        function b(e, f, c, g) {
                            f._xsrf = a.cookie.get("_xsrf");
                            f = a.param(f);
                            a.ajax({ dataType: "json", url: e, type: "POST", data: f, success: c, error: g })
                        }
                        a.fn.history = function (e, f, c) {
                            function g(F) {
                                if (!F || !F.data || !F.data.results)
                                    N.html("<div class='history_errorMessage'>" + T.api_error_text + "</div>");
                                else if (e === "" && F.data.results.length <= 0 && F.data.page === 1)
                                    o();
                                else if (e === "" && F.data.results.length <= 0 && F.data.page !== 1) {
                                    var V = p(F.data.results);
                                    N.html("<div class='history_errorMessage'>Sorry, no more history results to display. Click <a href='" +
                T.baseURL + "'>here</a> to go back</div>");
                                    N.trigger("hashList", { hashes: V.all, userHashes: V.user, perpage: F.data.perpage, total: F.data.result_count, page: F.data.page, results: F.data.results })
                                } else if (F.data.results.length <= 0)
                                    N.html("<div class='history_errorMessage'>" + T.term_not_empty_no_results + "</div>");
                                else {
                                    if (T.use_link_capsules) {
                                        da = U(F.data.results);
                                        ea = V = p(F.data.results);
                                        a(".last_shorten").show();
                                        N.html(K(da));
                                        ZeroClipboard.setMoviePath("/s/v404/flash/zeroclipboard/ZeroClipboard.swf");
                                        N.show();
                                        N.find("li.linkCapsule_link").each(function (W,
                    xa) {
                                            var wa = a(xa), Ja = wa.find(".copy_button").attr("data-href");
                                            wa.find(".copy_button").bind("click.short_circuit", function (R) {
                                                R.preventDefault()
                                            });
                                            wa.linkCapsule_Copy(Ja)
                                        });
                                        N.unbind("click.customize");
                                        N.bind("click.customize", function (W) {
                                            if (a(W.target).is("a.customize_button")) {
                                                W.preventDefault();
                                                a(document.body).trigger("errorMessage", { text: a._("Please sign in or sign up to customize a url") })
                                            }
                                        })
                                    } else {
                                        var da = P(F.data.results);
                                        ea = V = p(F.data.results);
                                        N.html(m() + q() + v() + da);
                                        s();
                                        w();
                                        k();
                                        D();
                                        G();
                                        M();
                                        N.find(".copy_customize").each(function (W,
                    xa) {
                                            $val = a(xa);
                                            BITLY.Eventer.delegate({ evt: "click", el: $val.find("a"), cb: function (wa) {
                                                wa.preventDefault()
                                            } 
                                            });
                                            $val.linkCapsule_Copy($val.find("a").data("href"))
                                        })
                                    }
                                    N.bind("deleteHistoryItem", S);
                                    N.find(".resultsItemContainer:last").addClass("lastResultsItemContainer");
                                    N.trigger("hashList", { hashes: V.all, userHashes: V.user, perpage: F.data.perpage, total: F.data.result_count, page: F.data.page, results: F.data.results, search_term: e });
                                    ua = false;
                                    ka && !ua && h(F.data.results);
                                    N.find(".showMoreInfo").click(function (W) {
                                        W.preventDefault();
                                        ka = true;
                                        T.rows != "two_row" && BITLY.util.savePreference("show_history_previews", "true");
                                        T.rows = "two_row";
                                        a(this).parents("ul").removeClass().addClass("twoRowSelected");
                                        N.find(".row2").slideDown("normal");
                                        ma || N.trigger("socialSearch", ea);
                                        ma = true;
                                        ua || h(F.data.results)
                                    });
                                    N.find(".hideMoreInfo").click(function (W) {
                                        W.preventDefault();
                                        T.rows = "one_row";
                                        ka = false;
                                        a(this).parents("ul").removeClass().addClass("oneRowSelected");
                                        N.find(".row2").slideUp("normal");
                                        BITLY.util.savePreference("show_history_previews", "false")
                                    });
                                    if (T.rows === "two_row") {
                                        N.find(".showMoreInfo").trigger("click");
                                        N.trigger("displayTwoRows", { userHashes: V.user });
                                        ma = true
                                    }
                                }
                            }
                            function h(F) {
                                ua = true;
                                for (var V = 0, da = F.length; V < da; V++) {
                                    var W = F[V];
                                    W.longUrl = W.url;
                                    new BITLY.LinkPreview(a("#history_preview_" + W.global_hash), W, { preview_machine: sa })
                                }
                                sa.loadPending()
                            }
                            function n() {
                                N.html("<div class='history_errorMessage errorMessage'>" + T.api_error_text + "</div>")
                            }
                            function o() {
                                var F = T.type === "bundles" ? T.zeroBundleLinks : T.zeroHistoryLinks;
                                N.html(q(T.show_bundle_link_toggle,
            1, 1) + "<div class='history_errorMessage'>" + F + "</div>");
                                M()
                            }
                            function p(F) {
                                for (var V = [], da = 0, W = [], xa = []; da < F.length; da++) {
                                    W.push(F[da]._id);
                                    V.push(F[da]._id);
                                    V.push(F[da].global_hash);
                                    xa.push(F[da].url)
                                }
                                return { all: V, user: W, longUrls: xa }
                            }
                            function m() {
                                var F = "", V = "";
                                T.showToggle || (V = 'style="display:none;"');
                                if (!T.hide_history_preview_message) {
                                    F += '<p class="bundle_message preview_message" ' + V + ">";
                                    F += '<a href="#" class="close">x</a>';
                                    F += "<strong>" + a._("New!") + "</strong>";
                                    F += a._("Preview the contents of your links by toggling here");
                                    F += "</p>"
                                }
                                F += '<ul id="multiline_toggle" class="oneRowSelected" ' + V + ">";
                                F += '<li><a class="showMoreInfo" type="two_row" href="#">Two Rows</a></li><li><a class="hideMoreInfo" type="one_row" href="#">One Row</a></li>';
                                F += "</ul>";
                                return F
                            }
                            function q(F, V) {
                                if (typeof F === "undefined")
                                    F = T.show_bundle_link_toggle;
                                if (typeof V === "undefined")
                                    V = T.hide_bundle_button;
                                var da = "";
                                if (T.current_user) {
                                    da += '<div class="detailsControlBox clearfix">';
                                    if (F) {
                                        da += '<ul id="history_view_toggle" class="clearfix">';
                                        da += "<li>" + a._("View") +
                    ": </li>";
                                        da += '<li><a href="#" class="all' + (!T.current_filter || T.current_filter == "all" ? " inactive" : "") + '">' + a._("All") + "</a></li>";
                                        da += '<li><a href="#" class="bundles' + (T.current_filter && T.current_filter == "bundles" ? " inactive" : "") + '">' + a._("Bundles") + "</a></li>";
                                        da += "</ul>"
                                    }
                                    if (!V) {
                                        da += '<form id="create_bundle" action="/data/create_bundle" method="POST">';
                                        da += "<fieldset>";
                                        da += '<input type="hidden" id="create_bundle_hashes" name="hashes" value="" />';
                                        da += '<input type="submit" class="white_button" value="' +
                    a._("Bundle") + '" />';
                                        if (BITLY && BITLY.data && BITLY.data.xsrf)
                                            da += BITLY.data.xsrf;
                                        da += "</fieldset>";
                                        da += "</form>"
                                    }
                                    da += "</div>"
                                }
                                return da
                            }
                            function v() {
                                var F = "";
                                F += '<div class="resultsBarContainer">';
                                F += '<b class="resultsBar1">';
                                if (T.current_user)
                                    F += '<input type="checkbox" id="toggle_all" /> ';
                                F += a._("Clicks") + " </b>";
                                F += '<b class="resultsBar2"> ' + a._("Links") + " </b>";
                                F += '<b class="resultsBar3"> ' + a._("Info Plus") + " </b>";
                                F += '<b class="resultsBar4"> ' + a._("Date") + " </b>";
                                F += '<b class="resultsBar5"> ' +
            a._("Options") + " </b>";
                                F += "</div>";
                                return F
                            }
                            function w() {
                                a("#toggle_all").bind("change", function () {
                                    var F = false;
                                    if (this.checked)
                                        F = true;
                                    a("input.item_cb").each(function (V, da) {
                                        da.checked = F;
                                        var W = a(da).closest("form");
                                        F ? W.addClass("checked") : W.removeClass("checked")
                                    })
                                })
                            }
                            function s() {
                                a(".item_cb").bind("change", function () {
                                    var F = a(this).closest("form");
                                    this.checked ? F.addClass("checked") : F.removeClass("checked")
                                })
                            }
                            function k() {
                                a("#create_bundle").bind("submit", function () {
                                    if (T.hide_bundle_message) {
                                        a(this).find("#create_bundle_hashes").val("");
                                        var F = [];
                                        a("input.item_cb:checked").each(function (V, da) {
                                            F.push(a(da).val())
                                        });
                                        a(this).find("#create_bundle_hashes").val(F.join(","))
                                    } else {
                                        hideBundleMessage(function () {
                                            a("#create_bundle").submit()
                                        });
                                        return false
                                    }
                                })
                            }
                            function D() {
                                a(".bundle_message .close").live("click", function () {
                                    J(function () {
                                        a(".bundle_message").fadeOut()
                                    }, "hide_bundle_message");
                                    return false
                                })
                            }
                            function M() {
                                a("#history_view_toggle").bind("click", function (F) {
                                    F.preventDefault();
                                    F = a(F.target);
                                    if (F.is("a") && F.not(".inactive")) {
                                        a("#history_view_toggle a.inactive").removeClass("inactive");
                                        F.addClass("inactive");
                                        if (F.hasClass("all")) {
                                            a(document.body).trigger("refreshHistory", { page: 1, search_term: "", type: "links" });
                                            T.current_filter = "all"
                                        } else if (F.hasClass("bundles")) {
                                            a(document.body).trigger("refreshHistory", { page: 1, url: "/data/public_bundle_filter/" + T.current_user, type: "bundles" });
                                            T.current_filter = "bundles"
                                        }
                                    }
                                })
                            }
                            function J(F, V) {
                                V = V || "hide_bundle_message";
                                T[V] = true;
                                F = F || function () {
                                };
                                a.post(T.preferences_url, { key: V, value: "true" }, F, F);
                                return false
                            }
                            function G() {
                                a(".preview_message .close").bind("click",
            function () {
                J(function () {
                    a(".preview_message").fadeOut()
                }, "hide_history_preview_message");
                return false
            })
                            }
                            function P(F) {
                                for (var V = "", da = 0; da < F.length; da++) {
                                    var W = F[da], xa = a.escapeHTML(W.title) || a.escapeHTML(W.url), wa = a.escapeHTML(W.url);
                                    display_long_url = ga(wa);
                                    kword = a.escapeHTML(W.keyword || W._id);
                                    info_page = "/" + kword + "+";
                                    host = W.domain || T.host_name;
                                    info_page_display = "Real-time stats for " + host + "/" + kword + "+";
                                    hashURL = "http://" + (W.domain || T.host_name) + "/" + kword;
                                    displayHashURL = (W.domain || T.host_name) + "/" +
                kword;
                                    truncated_title = fa(xa);
                                    user_hash = W._id;
                                    global_hash = W.global_hash;
                                    user_kword_hash = qa(W.keyword) || "Info Page";
                                    ts = a.timeFormat(W.ts);
                                    html = '<div class="resultsItemContainer">';
                                    html += '<div class="resultsColumn2 resultsColumn">';
                                    if (T.current_user) {
                                        html += '<form class="bundle_cb_form">';
                                        html += "<fieldset>";
                                        html += '<input type="checkbox" class="item_cb" value="' + user_hash + '" />';
                                        html += "</fieldset>";
                                        html += "</form>"
                                    }
                                    html += '<div class="statsList">';
                                    html += '<div class="userStats"><h4><a title="' + a._("Get Real-time Metrics for this link") +
                '" type="' + user_hash + '" href="' + info_page + '">0</a></h4></div>';
                                    html += '<div class="statsSeparator">' + a._("out of") + "</div>";
                                    html += '<div class="globalStats"><a type="' + global_hash + '" href="/' + global_hash + '+">0</a></div>';
                                    html += "</div>";
                                    html += '<div class="hr"><hr /></div>';
                                    html += "</div> ";
                                    html += '<div class="resultsColumn4 resultsColumn">';
                                    html += '<div class="linkTitleContainer">';
                                    html += "";
                                    html += '<h4 class="linkTitle">';
                                    html += '<img class="historyFavicon" src="/favicon/' + global_hash + '.png" width="16" height="16" alt="favicon" border="0" />';
                                    html += '<a title="' + wa + '" href="' + hashURL + '">' + truncated_title + "</a>";
                                    html += "</h4>";
                                    html += "</div>";
                                    html += '<div class="long_url_display_more"><a href="' + wa + '" title="' + wa + '">' + display_long_url + "</a></div>";
                                    html += '<div class="short_url_display_more"><a href="' + hashURL + '" title="' + hashURL + '" class="hash">' + displayHashURL + '</a><span class="copy_customize"><a style="text-indent: -9999px; display: none;" class="copy_button" href="#" data-href="' + hashURL + '"> - Copy<span class="clippy"></span></a></span></div>';
                                    html += "</div>";
                                    html += '<div class="resultsColumn5 resultsColumn">';
                                    html += '<a href="' + info_page + '" title="' + info_page_display + '">' + user_kword_hash + "+</a>";
                                    html += "</div>";
                                    html += '<div class="resultsColumn6 resultsColumn">';
                                    html += '<div class="dateAndTimeBox">' + ts + "</div>";
                                    html += "</div>";
                                    html += '<div class="resultsColumn7 resultsColumn">';
                                    html += '<div class="optionsDropDownContainer" type="' + user_hash + '" alt="' + hashURL + '"></div>';
                                    html += "</div>";
                                    html += '<div class="moreInfo row2">';
                                    html += '<div id="history_preview_' +
                global_hash + '" class="link_preview"></div>';
                                    html += "</div>";
                                    html += '<div class="hr"><hr /></div>';
                                    html += "</div> <\!-- end .resultsItemContainer --\>";
                                    V += html
                                }
                                return V
                            }
                            function U(F) {
                                for (var V = "", da = 0; da < F.length; da++)
                                    if (!BITLY.data.short_url || !BITLY.data.shortened_hashes || !BITLY.data.shortened_hashes.hasOwnProperty(F[da].keyword || F[da]._id)) {
                                        var W = F[da], xa = a.escapeHTML(W.title) || a.escapeHTML(W.url), wa = a.escapeHTML(W.url);
                                        display_long_url = ga(wa);
                                        kword = W.keyword || W._id;
                                        info_page = "/" + kword + "+";
                                        host = W.domain ||
                    T.host_name;
                                        info_page_display = "Real-time stats for " + host + "/" + kword + "+";
                                        hashURL = "http://" + (W.domain || T.host_name) + "/" + kword;
                                        truncated_title = fa(xa);
                                        user_hash = W._id;
                                        global_hash = W.global_hash;
                                        user_kword_hash = qa(W.keyword) || "Info Page";
                                        ts = a.timeFormat(W.ts);
                                        W = "";
                                        W += '<li hash="' + kword + '" class="linkCapsule_link clearfix">';
                                        W += '<div class="shortened_url clearfix">';
                                        W += '<a class="short_url" href="' + hashURL + '">' + hashURL + "</a>";
                                        W += '<span class="copy_customize">';
                                        W += '<a class="customize_button" href="/a/sign_in">Customize</a>';
                                        W += '<span class="copy_separator"> | </span>';
                                        W += '<a style="display: none; text-indent:-9999px;" class="copy_button" href="#" data-href="' + hashURL + '">Copy';
                                        W += '<span class="clippy"></span>';
                                        W += "</a>";
                                        W += "</span>";
                                        W += "</div>";
                                        W += '<a target="_blank" href="' + info_page + '" class="realtime_stats">Info Page+</a>';
                                        W += '<a target="_blank" href="' + wa + '" class="long_link" title="' + wa + '">' + display_long_url + "</a>";
                                        W += "</li>";
                                        V += W
                                    }
                                return V
                            }
                            function fa(F) {
                                return F = F.length > 62 ? F.substr(0, 59) + "..." : F
                            }
                            function ga(F) {
                                return F =
            F.length > 110 ? F.substr(0, 107) + "..." : F
                            }
                            function qa(F) {
                                if (!F)
                                    return null;
                                return F = F.length > 11 ? F.substr(0, 9) + ".." : F
                            }
                            function S(F) {
                                $e = a(F.target);
                                $parent = $e.parents(".resultsItemContainer");
                                $parent.slideUp("normal", function () {
                                    $parent.remove()
                                })
                            }
                            function K(F) {
                                var V = "";
                                V += '<div class="shortenedBitlyListListBox">';
                                V += '<ul class="shortened_results_list">';
                                V += F || "";
                                V += "</ul>";
                                V += "</div>";
                                return V
                            }
                            var N = this, T = a.extend(true, {}, d, c), ea = {}, ma = false, ua = false, ka = false, sa = new BITLY.LinkPreviewMachine(null, { chunk_size: 5 });
                            a(window).bind("hashchange", function () {
                                if (BITLY.data.new_history_hash && BITLY.data.new_history_hash == location.hash.substr(1))
                                    BITLY.data.new_history_hash = null;
                                else {
                                    var F = location.hash.substr(1);
                                    da = "";
                                    W = 1;
                                    if (F) {
                                        var V = /\/page\/([0-9]*)/i, da = F ? F.replace(V, "") : "", W = 1;
                                        if (F = V.exec(F))
                                            W = F[1]
                                    }
                                    a(document.body).trigger("refreshHistory", { search_term: da, page: W })
                                }
                            });
                            a(document.body).bind("refreshHistory", function (F, V) {
                                var da = T.url;
                                if (V) {
                                    var W = "";
                                    if (V.hasOwnProperty("search_term"))
                                        if (e = BITLY.data.cur_search = T.params.search_terms =
                    V.search_term)
                                            W = e;
                                    if (V.hasOwnProperty("page")) {
                                        T.params.page = V.page;
                                        W += "/page/" + V.page
                                    }
                                    if (V.hasOwnProperty("url"))
                                        da = V.url;
                                    T.type = V.hasOwnProperty("type") ? V.type : "links";
                                    if (W) {
                                        BITLY.data.new_history_hash = W;
                                        if (W.indexOf("/page/1") == -1 || V.force_hash)
                                            location.hash = W
                                    }
                                }
                                b(da, T.params, g, n)
                            });
                            if (N.length <= 0)
                                return this;
                            T.params.search_terms = e || "";
                            T.params.page = f || 1;
                            T.data === null && location.hash.substr(1) === "" ? b(T.url, T.params, g, n) : a(window).trigger("hashchange");
                            T.current_user = BITLY.data.current_user;
                            return this
                        };
                        var d = { url: "/data/search", params: { search_terms: "", page: 1, perpage: 10 }, hash_order: [], host_name: "bit.ly", baseURL: "/a/search", data: null, showToggle: true, hide_bundle_message: true, hide_history_preview_message: true, hide_bundle_button: false, use_link_capsules: false, show_bundle_link_toggle: false, preferences_url: "/data/preferences", type: "links", rows: "one_row", term_not_empty_no_results: "Sorry, we aren't able to find any results for that query.", api_error_text: "We're sorry, the history system is currently unavailable.  Your links are still functional and your data is safe",
                            zeroHistoryLinks: "It looks like you haven't shortened any links yet!  Put a long link in the shorten box above, and it will show up here.", zeroBundleLinks: 'It looks like you haven\'t created any bundles yet!  Put a long link in the shorten box, or select some links from your history, and click "Bundle" to get started.', months: ["Jan", "Feb", "March", "April", "May", "June", "July", "Aug", "Sept", "Oct", "Nov", "Dec"]
                        }
                    })(jQuery);
                    (function (a) {
                        function b(e, f, c, g) {
                            f._xsrf = a.cookie.get("_xsrf");
                            f = a.param(f);
                            a.ajax({ dataType: "json", type: "POST", url: e, data: f, success: c, error: g })
                        }
                        a.fn.historyOptions = function (e) {
                            function f() {
                            }
                            function c(s) {
                                s.preventDefault();
                                q.find(".openOptionsMenu").trigger("click");
                                a(this).addClass("openOptionsMenu")
                            }
                            function g(s) {
                                s.preventDefault();
                                s.stopPropagation();
                                s = a(this);
                                var k = s.parents(".optionsDropDownContainer").data("result");
                                s.trigger("openSharePanel", k)
                            }
                            function h() {
                                function s() {
                                    if (G && U) {
                                        G.css("display",
                    "block");
                                        U.remove()
                                    }
                                }
                                w++;
                                var k = a(this), D = k.parents(".optionsDropDownContainer").data("result"), M = k.parents(".resultsItemContainer"), J = M.find(".linkTitleContainer"), G = J.find(".linkTitle"), P = J.find(".histOptions_editTitleContainer");
                                if (P.length > 0) {
                                    G.css("display", "block");
                                    P.remove()
                                } else {
                                    k.trigger("track", { "plugin:historyOptions": "Edit Title, this session:" + w });
                                    G.css("display", "none");
                                    var U = p(D).prependTo(J), fa = U.find(".edit_title_input").focus();
                                    U.find("form").bind("submit", function (ga) {
                                        ga.preventDefault();
                                        var qa = a.trim(fa.val());
                                        if (qa !== "")
                                            qa === D.title ? s() : b(v.update_url, { user_hash: D._id, title: qa }, function (S) {
                                                if (!S || S.status_code !== 200)
                                                    k.trigger("errorMessage", { text: a._("Unable to save that title.") });
                                                else {
                                                    G.find("a").html(a.escapeHTML(qa));
                                                    D.title = qa;
                                                    M.find(".optionsDropDownContainer").data("result", D);
                                                    k.trigger("successMessage", { text: a._("Success, title updated") });
                                                    s()
                                                }
                                            }, function () {
                                                k.trigger("errorMessage", { text: a._("Unable to save that title.") });
                                                s()
                                            })
                                    })
                                }
                            }
                            function n() {
                                var s = a(this), k = s.parents(".optionsDropDownContainer").data("result");
                                v.params.user_hash = k._id;
                                b(v.url, v.params, function () {
                                    s.trigger("deleteHistoryItem")
                                }, f)
                            }
                            function o(s) {
                                s.preventDefault();
                                a(this).hasClass("openOptionsMenu") && a(this).removeClass("openOptionsMenu")
                            }
                            function p(s) {
                                var k = a.escapeHTML(s.title || s.url), D = '<div class="histOptions_editTitleContainer">';
                                D += '<img alt="" border="0" class="editable_title_favicon" width="16" height="16" src="/favicon/' + s.global_hash + '.png" />';
                                D += '<div class="histOptions_editTitleFormBx">';
                                D += '<form action="#" method="get" accept-charset="utf-8">';
                                D += '<div class="edit_title_input_box">';
                                D += '<input type="text" class="edit_title_input" name="edit_title_input" value="' + k + '" id="some_name">';
                                D += '</div><div class="edit_title_save_box">';
                                D += '<input class="edit_title_save saveEditableTitle" type="submit" name="" value="' + a._("Save") + '" />';
                                D += "</div>";
                                D += '<div class="hr"><hr /></div>';
                                D += "</form>";
                                D += "</div>";
                                D += "</div>";
                                return a(D)
                            }
                            function m() {
                                var s = "";
                                s += '<ul class="toolsDropList">';
                                s += '<li class="topLevel">';
                                s += '<div class="optionsToolPanel">';
                                s += '<b class="topLeft"></b>';
                                s += '<b class="topRight"></b>';
                                s += "<span>" + a._("Options") + "</span>";
                                s += "</div>";
                                s += '<ul class="toolsList">';
                                s += '<li class="toolsListShare"><a class="optionsShareButton" href="#">' + a._("Share") + "</a></li>";
                                s += '<li class="optionsCopyButtonContainer">';
                                s += '<a class="optionsCopyButton" href="#">' + a._("Copy") + "</a>";
                                s += "</li>";
                                if (v.showDelete)
                                    s += '<li class="toolsListDelete"><a class="optionsDeleteButton" href="#">' + a._("Archive") + "</a></li>";
                                s += '<li class="editableTitleListItem"><a class="editableTitleButton" href="#">' +
            a._("Edit") + "</a></li>";
                                s += "</ul>";
                                s += "</li>";
                                s += "</ul>";
                                return a(s)
                            }
                            var q = this, v = a.extend(true, {}, d, e), w = 0;
                            if (q.length <= 0)
                                return this;
                            q.bind("hashList", function (s, k) {
                                var D;
                                e = q.find(".optionsDropDownContainer");
                                q.bind("openSharePanel", function (M, J) {
                                    url = v.sharePanelUrl + "u=" + encodeURIComponent(J.url) + "&s=" + encodeURIComponent(J.title || "");
                                    getJS(url)
                                });
                                e.each(function (M, J) {
                                    var G = "http://" + (k.results[M].domain || v.host_name) + "/" + k.results[M]._id, P = new ZeroClipboard.Client;
                                    D = a(J).append(m());
                                    D.data("result",
                k.results[M]);
                                    D.find(".optionsCopyButtonContainer");
                                    P.setText(G);
                                    P.glue(D.find(".optionsCopyButton")[0], D.find(".optionsCopyButtonContainer")[0], { width: "65px", height: "20px" }, { width: 60, height: 20 });
                                    P.addEventListener("complete", function () {
                                        q.find(".openOptionsMenu").trigger("click");
                                        q.trigger("successMessage", { text: a._("Successfully copied %(url)s to clipboard").replace("%(url)s", G) })
                                    })
                                });
                                q.find(".optionsShareButton").bind("click", g);
                                q.find(".optionsDeleteButton").bind("click", n);
                                q.find(".editableTitleButton").bind("click",
            h);
                                a(document).bind("click", function () {
                                    q.find(".openOptionsMenu").trigger("click")
                                });
                                q.find(".topLevel").toggle(c, o)
                            });
                            ZeroClipboard.setMoviePath("/s/v404/flash/zeroclipboard/ZeroClipboard.swf");
                            return this
                        };
                        var d = { url: "/data/archive_history_item", update_url: "/data/update_title", params: { user_hash: "" }, host_name: "bit.ly", showDelete: true, sharePanelUrl: "/bookmarklet/load.js?ls=1&" }
                    })(jQuery);
                    (function (a) {
                        function b(e, f, c, g) {
                            f = a.param(f);
                            a.ajax({ dataType: "json", data: f, traditional: true, jsonp: "callback", url: e, success: c, error: g })
                        }
                        a.fn.historyRecoverOptions = function (e) {
                            function f() {
                            }
                            var c = this, g = a.extend(true, d, e);
                            c.bind("hashList", function () {
                                e = c.find(".optionsDropDownContainer");
                                e.each(function (h, n) {
                                    $el = a(n);
                                    $el.html('<div class="unDeleteButtonBox"><a class="unDeleteButton" href="">' + a._("Unarchive") + "</a></div>")
                                });
                                c.find(".unDeleteButton").click(function (h) {
                                    h.preventDefault();
                                    var n = a(this),
                o = n.parents(".optionsDropDownContainer");
                                    h = o.attr("type");
                                    g.params.user_hash = h;
                                    b(g.url, g.params, function () {
                                        n.trigger("recoverHistoryItem");
                                        o.find(".unDeleteButtonBox a").replaceWith(a("<span/>").html(a._("Recovered")))
                                    }, f)
                                })
                            });
                            return this
                        };
                        var d = { url: "/data/restore_history_item", params: { user_hash: ""} }
                    })(jQuery);
                    (function (a) {
                        a.fn.historySuggest = function (f) {
                            function c(S) {
                                var K = J, N;
                                if (!K)
                                    return -1;
                                K.removeClass("selected");
                                if (S >= 0 && S < K.length)
                                    BITLY.data.instant_activated = true;
                                else {
                                    delete BITLY.data.instant_activated;
                                    if (S >= K.length)
                                        S = -1;
                                    if (S < 0)
                                        S = -1;
                                    M = false;
                                    s.val(D);
                                    return S
                                }
                                m(1);
                                N = K.eq(S).addClass("selected");
                                K = G[S].title && G[S].title !== "" && !w.link_instead_of_title ? G[S].title : G[S].url;
                                N = N.find(".hashURL").html();
                                s.val(K);
                                if (w.allow_direct_to_url)
                                    M = N;
                                return S
                            }
                            function g() {
                                var S = U.find("li").removeClass("selected"),
            K = jQuery.inArray(this, S);
                                S = S.eq(K).addClass("selected");
                                var N = G[K].title && G[K].title !== "" && !w.link_instead_of_title ? G[K].title : G[K].url;
                                hashLink = S.find(".hashURL").html();
                                if (w.allow_direct_to_url)
                                    M = hashLink;
                                s.val(N);
                                fa = K
                            }
                            function h() {
                            }
                            function n() {
                            }
                            function o(S) {
                                ga || (fa = -1);
                                m(S.data.results.length);
                                var K = 0, N = {}, T = 0, ea = "<strong>Suggestions:</strong><ul>", ma = "", ua = s.val();
                                ua = RegExp(ua, "gi");
                                for (G = S = S.data.results; K < S.length && T < w.maxItems; K++)
                                    if (!N[S[K]._id]) {
                                        if (S[K].labels)
                                            for (ma = 0; ma < S[K].labels.length; ma++)
                                                if (S[K].labels[ma].name ===
                            "note")
                                                    S[K].note = S[K].labels[ma].text;
                                        ma = v(a.escapeHTML(S[K].title), 45).replace(ua, p);
                                        ea += '<li position="' + K + '"><div>';
                                        ea += ma;
                                        ea += "</div><div>";
                                        ea += w.allow_direct_to_url ? '<a href="/' + S[K]._id + '+">' + q(ua, a.escapeHTML(S[K].url), 45) + "</a>" : "<span>" + q(ua, a.escapeHTML(S[K].url), 45) + "</span>";
                                        ea += "</div>";
                                        if (S[K].note)
                                            ea += "<p>" + S[K].note.substring(0, 75) + (S[K].note > 75 ? "..." : "") + "</p>";
                                        ea += '<div class="suggestTimeItem">';
                                        ea += a.timeFormat(S[K].ts);
                                        ea += '</div><div style="display:none;" class="hashURL">';
                                        ea +=
                    "/" + S[K]._id + "+";
                                        ea += "</div></li>";
                                        N[S[K]._id] = true;
                                        T += 1
                                    }
                                ea += "</ul>";
                                U.html(ea);
                                J = U.find("li");
                                J.hover(g, h).filter(":last").addClass("lastHistorySuggestItem");
                                k.css("display", "none")
                            }
                            function p(S) {
                                return "<b>" + S + "</b>"
                            }
                            function m(S) {
                                if (S > 0) {
                                    U.css("display", "block");
                                    ga = true
                                } else {
                                    U.css("display", "none");
                                    ga = false;
                                    k.css("display", "none")
                                }
                            }
                            function q(S, K, N) {
                                var T = "";
                                T = v(K, N);
                                return T.replace(S, p)
                            }
                            function v(S, K) {
                                if (!S)
                                    return "";
                                return S.length > K ? S.substr(0, K - 3) + "..." : S
                            }
                            var w = a.extend(true, b, f), s, k, D = "",
        M = false, J, G = [], P, U, fa = -1, ga = false, qa = RegExp("\\.", "gi");
                            if (this.length <= 0)
                                return this;
                            d = a(document.body);
                            d.bind("blur", function () {
                            }).click(function () {
                                m(0)
                            });
                            U = a('<div class="hintBox rounded" ' + (w.suggest_id ? 'id="' + w.suggest_id + '" ' : "") + 'style="display:none;"></div>').insertAfter(this);
                            this.bind("submit", function () {
                                try {
                                    if (M)
                                        document.location.href = M
                                } catch (S) {
                                    alert(S.message)
                                }
                                return false
                            });
                            s = typeof w.searchBox == "string" ? this.find(w.searchBox) : w.searchBox;
                            s.attr("autocomplete", "off");
                            s.bind("focus",
        function () {
        }).bind("blur", function () {
        }).bind("keyup", function (S) {
            var K;
            clearTimeout(P);
            if (S.keyCode === 40) {
                fa++;
                fa = c(fa)
            } else if (S.keyCode === 38) {
                S.preventDefault();
                S.stopPropagation();
                fa--;
                fa = c(fa);
                return false
            } else if (S.keyCode === 13) {
                clearTimeout(P);
                D = "";
                c(-1);
                m(0)
            } else if (S.keyCode === 27) {
                c(-1);
                m(0)
            } else {
                D = K = s.val();
                if (K === "") {
                    U.html("");
                    m(0)
                } else
                    P = setTimeout(function () {
                        k.css("display", "block");
                        var N = w.params, T = K;
                        T = a.trim(T).replace(qa, " ");
                        N.regex = T;
                        N = w.url;
                        T = w.params;
                        T._xsrf = a.cookie.get("_xsrf");
                        T = a.param(T);
                        e && e.abort();
                        e = a.ajax({ dataType: "json", data: T, type: "POST", url: N, success: o, error: n })
                    }, w.search_delay)
            }
        });
                            a(w.searchContainer);
                            k = a('<div class="historySuggestLoaderIconClass"></div>').appendTo(this);
                            return this
                        };
                        var b = { url: "/data/suggest", params: { regex: "" }, maxItems: 5, searchBox: "#historySearchInputTextField", searchContainer: "#mainSearchInputBox", searchButton: "#historySearchButton", suggest_id: null, search_delay: 150, link_instead_of_title: false, allow_direct_to_url: true, txt: { search: ""} }, d, e
                    })(jQuery);
                    (function (a) {
                        (function (n) {
                            function o(w, s) {
                                return s.toUpperCase()
                            }
                            function p(w) {
                                var s = w.prop.replace(q, o), k;
                                k = s ? s.charAt(0).toUpperCase() + s.substr(1) : "";
                                s = { webkit: { style: "-webkit-", js_style: "webkit" + k, trans_evt: "webkitTransitionEnd", anim_evt: "webkitAnimationEnd" }, moz: { style: "-moz-", js_style: "Moz" + k, trans_evt: "transitionend", anim_evt: "animationend" }, o: { style: "-o-", js_style: "O" + k, trans_evt: "OTransitionEnd", anim_evt: "OAnimationEnd" }, ms: { style: "-ms-", js_style: "Ms" + k, trans_evt: "MsTransitionEnd", anim_evt: "MsAnimationEnd" },
                                    w3c: { style: "", js_style: s, trans_evt: "transitionend", anim_evt: "animationend"}
                                };
                                var D, M, J;
                                k = null;
                                try {
                                    for (var G in s) {
                                        M = s[G].style;
                                        J = s[G].js_style;
                                        D = document.createElement("div");
                                        D.setAttribute("style", M + w.prop + ":" + w.val + ";");
                                        if (J in D.style) {
                                            if (v && (w.prop.toLowerCase() === "transition" || w.prop.toLowerCase() === "transform"))
                                                continue;
                                            k = s[G];
                                            break
                                        }
                                        D = null
                                    }
                                } catch (P) {
                                }
                                return k
                            }
                            function m(w, s) {
                                s = s || "";
                                var k;
                                if (!document.getElementById("app_stylesheet")) {
                                    k = document.createElement("style");
                                    k.id = "app_stylesheet";
                                    k.type = "text/css";
                                    document.getElementsByTagName("head")[0].appendChild(k)
                                }
                                (k = document.getElementById("app_stylesheet").sheet) || (k = document.styleSheets[document.styleSheets.length - 1]);
                                if (w)
                                    for (var D in w) {
                                        var M = "", J = "", G;
                                        if (typeof w[D] === "object") {
                                            G = w[D];
                                            for (var P in G) {
                                                J = G[P];
                                                J = J.replace(/_vendor_/ig, s);
                                                P = P.replace(/_vendor_/ig, s);
                                                M += P + ": " + J + "; "
                                            }
                                        } else {
                                            J = w[D];
                                            J = J.replace(/_vendor_/ig, s);
                                            M += J
                                        }
                                        D = D.replace(/_vendor_/ig, s);
                                        try {
                                            k.insertRule ? k.insertRule(D + " {" + M + "}", k.cssRules.length) : k.addRule && k.addRule(D,
                        M, -1)
                                        } catch (U) {
                                        }
                                    }
                            }
                            n.JSS = { g: {}, test: p, css: m, cssIf: function (w, s, k) {
                                k = w.else_css || k || "css" in w && s;
                                s = w.css || s;
                                if (!w.prop || !w.val || !s)
                                    return null;
                                (w = p(w)) ? m(s, w.style) : k && m(k);
                                return w
                            } 
                            };
                            var q = /-([a-z])/ig, v = !!(navigator.userAgent.indexOf("MSIE 8") > -1)
                        })(this);
                        var b = { content: '"[]"', "text-indent": "-9999px", display: "block", top: "0", left: "0px", width: "40%", height: "100%", position: "absolute", background: "#DCDCDC repeat-x scroll 0 0", "background-image": "url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAbCAYAAAC9WOV0AAAAbElEQVR42gXBywaAQABA0fv/u1Z9VUUjkUhEYlRjpMfmdg5FUch5nlJVldR1LU3TSNu2EkKQruuk73sZhkHGcZRpmmSeZ1mWRdZ1lW3bJMYo+77LcRySUpKcs1zXJfd9y/M88r6vfN8nZVn6Ax68YWmk5yF8AAAAAElFTkSuQmCC)" },
    d = { content: '"ON"', "text-indent": "0", "text-align": "center", display: "block", position: "absolute", top: "0", left: "-60%", width: "60%", "padding-right": "40%", height: "100%", background: "#5292F1 repeat-x scroll 0 0", color: "#FFF", "background-image": "url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAaCAYAAAB2BDbRAAAAiklEQVR42mPQit78n8Eg7eh/BuP8K/8ZzIruAImSu/8ZLMruAYnyB/8ZrCofAYmap/8ZbOqeAYmGF/8Z7Jpe/2dwaH3zn8G3//1/hqBJH/8zhE37/J8hauaX/wxxc77+Z0ic//0/Q9qiH/8Zspb+/M+Qu/zXf4aiVb//MxSv+fOfoXQtkAjqvP4fACJWR0qqiNxRAAAAAElFTkSuQmCC)" },
    e = { "text-indent": "0", "text-align": "center", display: "block", position: "absolute", top: "0px", left: "60%", width: "60%", "padding-left": "40%", height: "100%", color: "#7F7F7F" };
                        JSS.css({ ".i_cb_orig": { position: "absolute !important", top: "-99999px !important", left: "-99999px !important", height: "0px !important", width: "0px !important" }, ".i_cb": { width: "100px", height: "25px", "line-height": "25px", display: "inline-block", overflow: "hidden", "background-color": "transparent", "text-indent": "-9999px", position: "relative", "text-decoration": "none",
                            border: "1px solid #BFBFBF", "font-family": "Arial, Helvetica, Verdana", "font-weight": "bolder", "font-size": "16px", "letter-spacing": "1px", "vertical-align": "middle", "z-index": "100"
                        }, ".i_cb .slider:after": b, ".i_cb .slider:before": d, ".i_cb .slider": e, ".i_cb.unchecked .slider": { background: "#F1F1F1 repeat-x scroll 0 -1px", "background-image": "url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAaCAYAAAB2BDbRAAAAUklEQVR42i3Hyw3AIAwE0W3cbdEGJXAEGSPOfDeJ4jk8aSAiRAiBiDESKSUi50yUUhxVJWqtjpkRrTWi9+6MMYg5J7HWIvbezjnHufc6fPv59gHbaGGcmzcb7AAAAABJRU5ErkJggg==)"}
                        });
                        JSS.cssIf({ prop: "border-radius", val: "5px" }, { ".i_cb": { "_vendor_border-radius": "5px" }, ".i_cb .slider:after": { "_vendor_border-radius": "4px" }, ".i_cb .slider": { "_vendor_border-radius": "5px", background: "transparent" }, ".i_cb .slider:before": { "_vendor_border-radius": "4px" }, ".i_cb.unchecked .slider:before": { "padding-right": "0px"} });
                        JSS.cssIf({ prop: "text-shadow", val: "rgba(0,0,0,.5)" }, { ".i_cb": { "_vendor_text-shadow": "1px 1px 2px rgba(0, 0, 0, 0.3)"} });
                        JSS.cssIf({ prop: "box-shadow", val: "rgba(0,0,0,.5)" }, { ".i_cb .slider:after": { "_vendor_box-shadow": "0px 0px 3px rgba(0, 0, 0, 0.5)"} });
                        JSS.cssIf({ prop: "background-size", val: "1px 100%" }, { ".i_cb .slider:after": { "_vendor_background-size": "1px 100% !important" }, ".i_cb .slider:before": { "_vendor_background-size": "1px 100% !important" }, ".i_cb .slider": { "_vendor_background-size": "1px 100% !important"} });
                        var f = JSS.cssIf({ prop: "transition", val: "translateX(0px)" }, { ".i_cb .slider": { _vendor_transition: "all 150ms linear", "_vendor_backface-visibility": "hidden", _vendor_transform: "translateX(0)" }, ".i_cb.unchecked .slider": { _vendor_transform: "translateX(-60%)"} }),
    c = !(navigator.userAgent.indexOf("MSIE 7") > -1);
                        if (!c) {
                            e.left = "0";
                            JSS.css({ ".i_cb .off": e, ".i_cb .on": d, ".i_cb .handle": b })
                        }
                        var g = {}, h = 0;
                        a.fn.iCheckbox = function (n) {
                            var o = { link_class: "", height: null, width: null, font_size: null, on: null, off: null };
                            if (n)
                                o = a.extend(o, n);
                            this.each(function () {
                                var p = a(this), m = p[0].checked, q = m ? "removeClass" : "addClass", v = o.off || "OFF", w = o.on || "ON", s = "";
                                if (w != "ON" && c)
                                    if (g.hasOwnProperty(w))
                                        s = g[w];
                                    else {
                                        s = g[w] = "i_cb_" + h++;
                                        var k = {};
                                        k[".i_cb." + s + " .slider:before"] = { content: '"' + w + '"' };
                                        JSS.css(k)
                                    }
                                p.addClass("i_cb_orig");
                                var D = a(c ? '<a class="i_cb ' + o.link_class + " " + s + '" href="#"><span class="slider">' + v + "</span></a>" : '<a class="i_cb ' + o.link_class + '" href="#"><span class="slider no_ps"><span class="on">' + w + '</span><span class="handle">[]</span><span class="off">' + v + "</span></span></a>")[q]("unchecked").bind("click", function (J, G) {
                                    J.preventDefault();
                                    var P = p[0].checked = G ? p[0].checked : !p[0].checked;
                                    P ? a(this).removeClass("unchecked") : a(this).addClass("unchecked");
                                    f || (P ? a(this).find(".slider").animate({ "margin-left": 0 },
                150) : a(this).find(".slider").animate({ "margin-left": "-60%" }, 150));
                                    G || p.trigger("change", true)
                                }), M;
                                v = {};
                                if (o.font_size)
                                    M = o.font_size;
                                if (o.height) {
                                    q = parseInt(o.height, 10);
                                    M || (M = q > 24 ? "16px" : q > 18 ? "13px" : "10px");
                                    v.height = o.height;
                                    v["line-height"] = parseInt(o.height, 10) + "px"
                                }
                                v["font-size"] = M;
                                if (o.width)
                                    v.width = o.width;
                                D.css(v);
                                f || (m ? D.find(".slider").css({ "margin-left": 0 }) : D.find(".slider").css({ "margin-left": "-60%" }));
                                p.bind("change", function (J, G) {
                                    G || D.trigger("click", true)
                                });
                                D.insertAfter(p)
                            });
                            return this
                        }
                    })(jQuery);
                    (function (a) {
                        a.fn.linkCapsule = function (d, e) {
                            function f(G) {
                                G && G.preventDefault();
                                p.find(".customNameCreationForm").unbind("submit");
                                p.find(".cancel_customize").unbind("click");
                                p.find(".customNameCreationForm").remove()
                            }
                            function c(G, P) {
                                var U = P.find(".keywordInputField").val(), fa = P.data("meta");
                                fa = a.extend({}, fa, { keyword: U });
                                if (a.trim(U) !== "") {
                                    P.addClass(fa.hash);
                                    G.trigger("saveCustomName", fa)
                                }
                            }
                            function g(G) {
                                FlashDetect.installed && setTimeout(function () {
                                    G.animate({ right: 0 }, 300, function () {
                                        setTimeout(function () {
                                            G.animate({ right: "-85" },
                        400)
                                        }, 1500)
                                    })
                                }, 400)
                            }
                            function h() {
                                var G;
                                G = '<div class="render_State_NoLinks linkCapsule_topLevelContainer">';
                                var P = k, U = "", fa = a._("Customize"), ga = "initializeCustomNameField", qa = "";
                                switch (P) {
                                    case k:
                                        ga = "initializeCustomNameField";
                                        qa = a._("Create a bitly link with a custom name");
                                        break;
                                    case D:
                                        ga = "intializeCustomFieldWithNoLink";
                                        fa = a._("Cancel");
                                        qa = a._("Cancel custom keyword edit");
                                        break;
                                    case M:
                                        ga = "enableCustomNameField";
                                        qa = a._("Give your bitly link a custom name");
                                        break;
                                    case J:
                                        ga = "saveCustomNameField";
                                        fa = a._("Save");
                                        qa = a._("Save your custom name")
                                }
                                U += '<div class="linkCapsule_buttonContainer ' + ga + '">';
                                U += '<a title="' + qa + '" type="customize_button" class="" href="#">' + fa + "</a>";
                                U += '<div class="hr"><hr /></div>';
                                U += "</div>";
                                G += U;
                                G += '<div class="hr"><hr /></div>';
                                G += "</div>";
                                return G
                            }
                            function n(G, P, U) {
                                U = U ? U : G.keyword || G.hash;
                                a.escapeHTML(G.long_url);
                                P = G.url.replace("http://", "").replace(U, "");
                                p.data("domain", P || "bit.ly/");
                                U = '<li class="linkCapsule_link clearfix" hash="' + U + '">';
                                U += '<div class="shortened_url clearfix">';
                                U += '<a class="short_url" href="' + G.url + '">';
                                U += '<span class="hash">' + G.url.replace("http://", "") + "</span>";
                                U += "</a>";
                                U += '<span class="copy_customize">';
                                U += '<a href="#" class="customize_button">' + a._("Customize") + "</a>";
                                U += '<span class="copy_separator"> | </span>';
                                U += '<a href="#" data-href="' + G.url + '" class="copy_button" style="display: none; text-indent:-9999px;">' + a._("Copy");
                                U += '<span class="clippy"></span>';
                                U += "</a>";
                                U += "</span>";
                                U += "</div>";
                                U += '<a class="realtime_stats" href="' + G.url + '+" target="_blank">';
                                U += a._("Info Page+");
                                U += "</a>";
                                U += '<a class="long_link" href="' + a.escapeHTML(G.long_url) + '" target="_blank" title="' + a.escapeHTML(G.long_url) + '">';
                                U += a.escapeHTML(G.long_url);
                                U += "</a>";
                                U += "</li>";
                                U = a(U);
                                U.find(".copy_button").bind("click", function (fa) {
                                    fa.preventDefault()
                                });
                                G.domain = P;
                                U.data("meta", G);
                                return U
                            }
                            function o(G, P) {
                                var U = "";
                                U += '<form class="customNameCreationForm">';
                                U += "<span>" + G + "</span>";
                                U += '<input class="keywordInputField" type="text" value="' + P + '" />';
                                U += '<input class="white_button" type="submit" value="' +
            a._("Customize") + '" />';
                                U += '<input class="white_button cancel_customize" type="button" value="' + a._("Cancel") + '" />';
                                U += "</form>";
                                return U
                            }
                            var p = this, m = d || ".shortenedBitlyListListBox", q = a.extend(true, b, e), v = p.find(m), w = [], s = {}, k = 1, D = 2, M = 3, J = 4;
                            if (v) {
                                v.children().length == 0 && v.html(h());
                                ZeroClipboard.setMoviePath("/s/v404/flash/zeroclipboard/ZeroClipboard.swf");
                                p.bind("customNameComplete", function (G, P) {
                                    var U;
                                    U = p.find(".linkCapsule_link." + P.hash);
                                    var fa = P.position === 0 ? "Your Link" : null, ga = U.data("meta");
                                    fa =
                n(P, 3, null, fa);
                                    U.replaceWith(fa);
                                    ga.keyword = P.keyword;
                                    ga.url = P.url;
                                    fa.data("meta", ga);
                                    fa.linkCapsule_Copy(P.url);
                                    U = fa.find(".copyButtonAnimation");
                                    g(U);
                                    w.unshift(s)
                                });
                                p.bind("shortenComplete", function (G, P) {
                                    if (P) {
                                        s = P;
                                        if (w.length <= 0) {
                                            q.capsule_container && a(q.capsule_container).show();
                                            var U = p.find(".render_State_NoLinks"), fa = U.data("meta"), ga;
                                            if (fa && fa.customNameState) {
                                                var qa = M, S = U.find(".customNameCreationForm input").val();
                                                if (S !== "")
                                                    qa = fa.customNameState;
                                                ga = n(P, qa, S, a._("Your Link"))
                                            } else {
                                                qa = M;
                                                ga =
                            n(P, M, null, a._("Your Link"))
                                            }
                                            U.replaceWith(ga);
                                            qa == M ? ga.linkCapsule_Copy(P.url) : ga.find(".customNameCreationForm").bind("submit", function (K) {
                                                K.preventDefault();
                                                K = a(this);
                                                c(K, ga);
                                                f()
                                            });
                                            ga.hide().css({ backgroundColor: "#FFFFB7" }).slideDown("slow", function () {
                                                var K = this;
                                                setTimeout(function () {
                                                    a(K).animate({ backgroundColor: "#FFFFFF" }, 2E3)
                                                }, 5E3)
                                            })
                                        } else {
                                            U = P._append ? "appendTo" : "prependTo";
                                            ga = n(P, M, null, a._("Your Link"))[U](v);
                                            ga.data("meta", P);
                                            ga.linkCapsule_Copy(P.url);
                                            ga.hide().css({ backgroundColor: "#FFFFB7" }).slideDown("slow",
                        function () {
                            var K = this;
                            setTimeout(function () {
                                a(K).animate({ backgroundColor: "#FFFFFF" }, 2E3)
                            }, 5E3)
                        })
                                        }
                                        w.unshift(s);
                                        p.find(".shortenedLinkOptionsDropDownSecondLevel_open").removeClass("shortenedLinkOptionsDropDownSecondLevel_open").css("display", "none");
                                        p.find(".linkCapsule_whiteContainer").eq(1).find(".linkCapsule_explainerText").html("")
                                    }
                                });
                                p.find(".customize_button").live("click", function (G) {
                                    G.preventDefault();
                                    if (q.block_customization)
                                        a(document.body).trigger("errorMessage", { text: a._("Please sign in or sign up to customize a url") });
                                    else {
                                        var P = a(this).parents(".linkCapsule_link");
                                        G = p.data("domain");
                                        var U = "";
                                        if (P.find(".customNameCreationForm").length)
                                            return true;
                                        U += o(G, "");
                                        a(U).appendTo(P).find(".keywordInputField").focus();
                                        P.find(".customNameCreationForm").bind("submit", function (fa) {
                                            fa.preventDefault();
                                            fa = a(this);
                                            c(fa, P);
                                            f()
                                        });
                                        P.find(".cancel_customize").bind("click", f);
                                        P.find(".keywordInputField").css("padding-left", P.find(".customNameCreationForm span").outerWidth() + 7);
                                        p.trigger("track", { "plugin:linkCapsule": "Customize Button Clicked Before Link Shortened : State 1" })
                                    }
                                });
                                return this
                            }
                        };
                        a.fn.linkCapsule_Animation = function (d) {
                            a.extend({}, b, d);
                            var e, f = this.parent().find(".copyButtonAnimation");
                            e = this.find(".keywordInputField");
                            e.length > 0 && e.hover(function () {
                                f.animate({ right: 0 }, 300)
                            }, function () {
                                f.animate({ right: "-85" }, 200)
                            });
                            e.focus();
                            e.bind("keypress", function () {
                                e.unbind();
                                f.animate({ right: "-85" }, 200)
                            });
                            return this
                        };
                        a.fn.linkCapsule_Copy = function (d) {
                            var e = this, f = null;
                            if (FlashDetect.installed) {
                                if (d !== "") {
                                    e.find(".copy_button").show();
                                    f = new ZeroClipboard.Client;
                                    f.getHTML(37,
                28);
                                    f.addEventListener("load", function () {
                                        a(f.domElement).closest(".copy_button").css("text-indent", 0).closest(".copy_customize").addClass("flash")
                                    });
                                    f.setHandCursor(true);
                                    f.addEventListener("complete", function (c, g) {
                                        g == d ? e.trigger("successMessage", { text: a._("Successfully copied %(url)s to clipboard").replace("%(url)s", g) }) : e.trigger("errorMessage", { text: a._("An error occurred copying %(url)s to the clipboard. Please try again.").replace("%(url)s", d) })
                                    });
                                    f.setText(d);
                                    f.setCSSEffects(false);
                                    f.glue(e.find(".clippy")[0],
                e.find(".copy_button")[0])
                                }
                            } else
                                e.find(".copy_button").hide()
                        };
                        var b = { linkLimit: 3, debug: true, url: "", params: {}, block_customization: false, maxPromoLength: 72, txt: { infopromo: null, longpromo: null }, capsule_container: null }
                    })(jQuery);
                    (function (a) {
                        a.linkify = function () {
                            var b = RegExp("(?:\\b[a-z\\d.-]+://[^<>\\s]+|\\b(?:(?:(?:[^\\s!@#$%^&*()_=+[\\]{}\\\\|;:'\",.<>/?]+)\\.)+(?:ac|ad|aero|ae|af|ag|ai|al|am|an|ao|aq|arpa|ar|asia|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|biz|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|cat|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|coop|com|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|info|int|in|io|iq|ir|is|it|je|jm|jobs|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mil|mk|ml|mm|mn|mobi|mo|mp|mq|mr|ms|mt|museum|mu|mv|mw|mx|my|mz|name|na|nc|net|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pro|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tel|tf|tg|th|tj|tk|tl|tm|tn|to|tp|travel|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|xn--0zwm56d|xn--11b5bs3a9aj6g|xn--80akhbyknj4f|xn--9t4b11yi5a|xn--deba0ad|xn--g6w251d|xn--hgbk6aj7f53bba|xn--hlcj6aya9esc7a|xn--jxalpdlp|xn--kgbechtv|xn--zckzah|ye|yt|yu|za|zm|zw)|(?:(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.){3}(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))(?:[;/][^#?<>\\s]*)?(?:\\?[^#<>\\s]*)?(?:#[^<>\\s]*)?(?!\\w)|(?:mailto:)?[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:(?:(?:[^\\s!@#$%^&*()_=+[\\]{}\\\\|;:'\",.<>/?]+)\\.)+(?:ac|ad|aero|ae|af|ag|ai|al|am|an|ao|aq|arpa|ar|asia|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|biz|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|cat|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|coop|com|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|info|int|in|io|iq|ir|is|it|je|jm|jobs|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mil|mk|ml|mm|mn|mobi|mo|mp|mq|mr|ms|mt|museum|mu|mv|mw|mx|my|mz|name|na|nc|net|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pro|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tel|tf|tg|th|tj|tk|tl|tm|tn|to|tp|travel|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|xn--0zwm56d|xn--11b5bs3a9aj6g|xn--80akhbyknj4f|xn--9t4b11yi5a|xn--deba0ad|xn--g6w251d|xn--hgbk6aj7f53bba|xn--hlcj6aya9esc7a|xn--jxalpdlp|xn--kgbechtv|xn--zckzah|ye|yt|yu|za|zm|zw)|(?:(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.){3}(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))(?:\\?[^#<>\\s]*)?(?:#[^<>\\s]*)?(?!\\w))", "ig"),
        d = /^[a-z\d.-]+:\/\//i, e = { "'": "`", ">": "<", ")": "(", "]": "[", "}": "{", "\u00c2\u00bb": "\u00c2\u00ab", "\u00e2\u20ac\u00ba": "\u00e2\u20ac\u00b9" }, f = { callback: function (c, g) {
            return g ? '<a href="' + g + '">' + c + "</a>" : c
        }, punct_regexp: /(?:[!?.,:;'"]|(?:&|&amp;)(?:lt|gt|quot|apos|raquo|laquo|rsaquo|lsaquo);)$/
        };
                            return function (c, g) {
                                g = g || {};
                                var h, n, o = "", p = [], m, q, v, w, s;
                                for (h in f)
                                    if (g[h] === undefined)
                                        g[h] = f[h];
                                for (; h = b.exec(c); ) {
                                    h = h[0];
                                    q = b.lastIndex;
                                    v = q - h.length;
                                    if (!/[\/:]/.test(c.charAt(v - 1))) {
                                        do {
                                            n = h;
                                            s = h.substr(-1);
                                            if (w =
                        e[s]) {
                                                w = h.match(RegExp("\\" + w + "(?!$)", "g"));
                                                s = h.match(RegExp("\\" + s, "g"));
                                                if ((w ? w.length : 0) < (s ? s.length : 0)) {
                                                    h = h.substr(0, h.length - 1);
                                                    q--
                                                }
                                            }
                                            if (g.punct_regexp)
                                                h = h.replace(g.punct_regexp, function (k) {
                                                    q -= k.length;
                                                    return ""
                                                })
                                        } while (h.length && h !== n);
                                        n = h;
                                        d.test(n) || (n = (n.indexOf("@") !== -1 ? !n.indexOf("mailto:") ? "" : "mailto:" : !n.indexOf("irc.") ? "irc://" : !n.indexOf("ftp.") ? "ftp://" : "http://") + n);
                                        if (m != v) {
                                            p.push([c.slice(m, v)]);
                                            m = q
                                        }
                                        p.push([h, n])
                                    }
                                }
                                p.push([c.substr(m)]);
                                for (h = 0; h < p.length; h++)
                                    o += g.callback.apply(window,
                p[h]);
                                return o || c
                            }
                        } ()
                    })(jQuery);
                    (function (a) {
                        a.fn.pagedList = function (b) {
                            function d(q) {
                                q = a(q);
                                h = 0;
                                q.children().each(function (D, M) {
                                    o.push(M)
                                });
                                if (g.view_all)
                                    n = 2;
                                else {
                                    n = Math.ceil(o.length / g.num_items);
                                    if (g.scroll != "horizontal" && g.scroll != "vertical")
                                        g.scroll = null;
                                    if (g.scroll) {
                                        var v = q.innerWidth();
                                        q.addClass("pagedList");
                                        m = a('<div class="pagedListWin"></div>');
                                        g.scroll == "horizontal" && m.css({ width: "20000px", position: "relative" });
                                        for (var w = 0; w < n; w++)
                                            (function (D) {
                                                var M = a('<div class="pagedListPage"></div>').data("page_num", D);
                                                g.scroll ===
                            "horizontal" && M.css({ width: v, display: "inline-block", position: "relative", top: 0, verticalAlign: "top" });
                                                p.push(M);
                                                var J = D * g.num_items;
                                                for (D = Math.min(o.length, (D + 1) * g.num_items); J < D; J++)
                                                    a(o[J]).detach().appendTo(M);
                                                m.append(M)
                                            })(w);
                                        q.append(m);
                                        var s = 0;
                                        for (w = 0; w < n; w++) {
                                            var k = p[w].innerHeight();
                                            s = Math.max(s, k)
                                        }
                                        m.data("max_height", s);
                                        m.data("page_width", v);
                                        g.scroll == "vertical" && q.css("height", s);
                                        q.css({ overflow: "hidden", display: "block" })
                                    }
                                }
                            }
                            function e(q, v, w) {
                                a(q);
                                if (g.view_all)
                                    if (v) {
                                        q = 0;
                                        for (s = o.length; q < s; q++)
                                            a(o[q]).css("display",
                        "")
                                    } else {
                                        q = 0;
                                        for (var s = o.length; q < s; q++)
                                            q >= v * g.num_items && q < (v + 1) * g.num_items ? a(o[q]).css("display", "") : a(o[q]).css("display", "none")
                                    }
                                else if (g.scroll) {
                                    q = v * m.data("max_height");
                                    v *= m.data("page_width");
                                    if (g.scroll == "vertical")
                                        m.animate({ marginTop: -1 * q });
                                    else
                                        g.scroll == "horizontal" && m.animate({ marginLeft: -1 * v })
                                } else {
                                    q = 0;
                                    for (s = o.length; q < s; q++)
                                        q >= v * g.num_items && q < (v + 1) * g.num_items ? a(o[q]).css("display", "") : a(o[q]).css("display", "none")
                                }
                                w || c()
                            }
                            function f(q) {
                                q = a(q);
                                if (!(!g.has_nav || n == 1)) {
                                    if (g.nav_el)
                                        g.nav_el =
                    a(g.nav_el);
                                    else {
                                        g.nav_el = a(document.createElement("div")).addClass("pagedListNav");
                                        g.nav_el.insertAfter(q)
                                    }
                                    if (g.view_all) {
                                        if (!(g.num_items >= o.length)) {
                                            var v;
                                            if (g.toggle_all)
                                                v = a(g.toggle_all);
                                            else {
                                                v = a('<a class="pagedListToggleAll" href="' + (g.view_all_link ? g.view_all_link : "#") + '">Show All <span class="count">' + o.length + "</span></a>");
                                                g.nav_el.append(v)
                                            }
                                            g.view_all_link || v.bind("click", function (k) {
                                                k.preventDefault();
                                                e(q, h = Math.abs(h - 1));
                                                v.html(h ? "Collapse" : "Show All")
                                            })
                                        }
                                    } else if (g.scroll) {
                                        if (g.prev)
                                            g.prev_el =
                        a(g.prev);
                                        else {
                                            g.prev_el = a('<a class="pagedListPrev" href="#">Prev</a>');
                                            g.nav_el.append(g.prev_el)
                                        }
                                        if (g.page_nums) {
                                            g.page_nums_el = a('<ul class="pagedListNums"></ul>');
                                            for (var w = 0, s = n; w < s; w++) {
                                                num = a('<li><a href="#" class="paged_list_num" id="page_num_' + w + '">' + (w + 1) + "</a></li>");
                                                w || num.find("a").addClass("disabled");
                                                g.page_nums_el.append(num)
                                            }
                                            g.page_nums_el.bind("click", function (k) {
                                                k.preventDefault();
                                                k = a(k.target);
                                                if (k.is("a.paged_list_num")) {
                                                    k = parseInt(k.attr("id").replace("page_num_", ""), 10);
                                                    var D =
                                q;
                                                    a(this);
                                                    h = k;
                                                    e(D, h)
                                                }
                                            });
                                            g.nav_el.append(g.page_nums_el)
                                        }
                                        if (g.next)
                                            g.next_el = a(g.next);
                                        else {
                                            g.next_el = a('<a class="pagedListNext" href="#">Next</a>');
                                            g.nav_el.append(g.next_el)
                                        }
                                        g.next_el.bind("click", function (k) {
                                            k.preventDefault();
                                            h < n - 1 && e(q, ++h)
                                        });
                                        g.prev_el.bind("click", function (k) {
                                            k.preventDefault();
                                            h > 0 && e(q, --h)
                                        })
                                    }
                                }
                            }
                            function c() {
                                if (g.prev_el) {
                                    g.prev_el.removeClass("disabled");
                                    h || g.prev_el.addClass("disabled")
                                }
                                if (g.next_el) {
                                    g.next_el.removeClass("disabled");
                                    h == n - 1 && g.next_el.addClass("disabled")
                                }
                                if (g.page_nums_el) {
                                    g.page_nums_el.find(".paged_list_num").removeClass("disabled");
                                    g.page_nums_el.find("#page_num_" + h).addClass("disabled")
                                }
                            }
                            var g = a.extend(true, {}, { num_items: 5, next: null, prev: null, has_nav: true, nav_stats: true, nav_el: null, scroll: null, view_all: null, toggle_all: null, view_all_link: null, page_nums: null }, b), h, n, o = [], p = [], m;
                            return this.each(function (q, v) {
                                d(v);
                                e(v, h, true);
                                f(v);
                                c();
                                a(v).bind("gotoPage", function (w, s) {
                                    h = s;
                                    e(v, h)
                                })
                            })
                        }
                    })(jQuery);
                    (function (a) {
                        a.fn.pagination = function (d) {
                            function e() {
                                var q;
                                q = '<div class="paginationLinks">';
                                var v = o, w = "";
                                w = v <= 1 ? "<span class='inactivePagination previousPagination'>" + a._("Previous") + "</span>" : '<span class="activePagination previousPagination"><a href="' + h.baseURL + "page/" + (v - 1) + c(v - 1) + '" class="previousLinkActive">' + a._("Previous") + "</a></span>";
                                q += w;
                                v = Math.ceil(p / m);
                                w = "";
                                if (v > 6) {
                                    var s = w = "", k = Math.min(o + 2, v);
                                    s = Math.max(1, o - 2);
                                    if (o <= 2)
                                        k += 2;
                                    else if (o > 4) {
                                        w += '<span><a href="' + h.baseURL + c() + '">1</a></span>';
                                        w += " ... "
                                    }
                                    if (o >= v - 2)
                                        s -= 1;
                                    for (var D = s; D <= k; D++) {
                                        s = o === D ? "activePaginationLink" : "";
                                        w += '<span><a class="' + s + '" href="' + h.baseURL + "page/" + D + c(D) + '">' + D + "</a></span>"
                                    }
                                    if (o < v - 3) {
                                        w += " ... ";
                                        w += '<span><a href="' + h.baseURL + "page/" + v + '">' + v + "</a></span>"
                                    }
                                    w += '<span style="display:none;">' + o + " of " + v + "</span>"
                                } else {
                                    k = w = "";
                                    for (D = 1; D <= v; D++) {
                                        k = o === D ? "activePaginationLink" : "";
                                        s = h.baseURL;
                                        s += "page/" + D + c(D);
                                        w += '<span><a class="' + k + '" href="' + s + '">' + D + "</a></span>"
                                    }
                                }
                                v = w;
                                q += v;
                                v = o;
                                w = "";
                                w = v > Math.floor(p / m) ? '<span class="inactivePagination nextPagination">' +
            a._("Next") + "</span>" : '<span class="activePagination nextPagination"><a href="' + h.baseURL + "page/" + (v + 1) + c(v + 1) + '" class="previousLinkActive">' + a._("Next") + "</a></span>";
                                q += w;
                                q += '<div class="hr"><hr /></div>';
                                q += "</div>";
                                return q
                            }
                            function f(q) {
                                var v = a.urlParamGet("q");
                                if (v)
                                    this.href += "?q=" + v;
                                q.preventDefault();
                                var w = a(q.target).attr("href").split("#");
                                q = false;
                                var s = /\/page\/([0-9]*)/i;
                                v = w.length > 1 ? w[1].replace(s, "") : "";
                                var k = 1;
                                if (w = s.exec(w[0])) {
                                    k = w[1];
                                    q = true
                                }
                                a(document.body).trigger("refreshHistory",
            { search_term: v, page: k, force_hash: q })
                            }
                            function c(q) {
                                if (!BITLY.data.cur_search)
                                    return "";
                                return "#" + BITLY.data.cur_search + "/page/" + (q || 1)
                            }
                            var g = this, h = a.extend(true, b, d), n, o, p, m;
                            if (g.length <= 0)
                                return this;
                            g.bind("hashList", function (q, v) {
                                p = v.total;
                                m = v.perpage;
                                o = v.page;
                                n = a('<div id="pagination"></div>');
                                n.appendTo(g);
                                p >= m && n.html(e());
                                n.find("a").bind("click", f)
                            });
                            return this
                        };
                        var b = { url: "", baseURL: "/a/search/" }
                    })(jQuery);
                    (function (a) {
                        a.fn.recentSearches = function (f, c) {
                            a.extend(true, {}, e, c);
                            if (d = function (g) {
                                return (g = document.cookie.match("\\b" + g + "=([^;]*)\\b")) ? g[1] : undefined
                            } ("terms"))
                                b = d.split(",").reverse();
                            (function (g) {
                                if (a.trim(g).length <= 0)
                                    b = b.reverse();
                                else {
                                    var h = jQuery.inArray(g, b);
                                    h > -1 && b.splice(h, 1);
                                    if (b.length > 3)
                                        b = b.slice(b.length - 4);
                                    b.push(g);
                                    g = b.reverse().join(",");
                                    h = new Date;
                                    h.setTime(h.getTime() + 5184E6);
                                    h = "; expires=" + h.toGMTString();
                                    document.cookie = "terms=" + g + h + "; path=/"
                                }
                            })(f);
                            this.html(function () {
                                if (b.length <=
            0)
                                    return "";
                                var g = [], h = '<div class="searchTermsListBox"> <h6>' + a._("Previous") + ":</h6> ";
                                h += '<ul class="searchTermsList">';
                                for (var n = 0; n < b.length; n++)
                                    g.push('<li><a href="/a/search/?q=' + a.escapeHTML(b[n]) + '">' + a.escapeHTML(b[n]) + "</a></li>");
                                h += g.join(", ");
                                h += "</ul>";
                                h += '<div class="hr"><hr /></div>';
                                h += "</div>";
                                return h
                            } ());
                            return this
                        };
                        var b = [], d, e = { url: "", params: {} }
                    })(jQuery);
                    (function () {
                        $.fn.shareMessages = function (b) {
                            var d = this;
                            $.extend(true, a, b);
                            d.bind("socialShareSuccess", function (e, f) {
                                link_elements = d.find(".linkCapsule_topLevelContainer");
                                link_elements.each(function (c, g) {
                                    $elem = $(g);
                                    for (var h = $elem.attr("hash"), n = 0; n < f.shares.length; n++)
                                        for (var o = 0; o < f.links.length; o++)
                                            if (!f.shares[n].error)
                                                if (f.links[o].indexOf(h) > 1) {
                                                    o = "<p class='sharedLinkPermalink'>";
                                                    o += '<a target="_blank" href="' + f.shares[n].link + '">' + f.shares[n].link + "</a>";
                                                    o += "</p>";
                                                    $('<div class="sharedLinkPermalinkContainer" />').html(o).css("display",
                                "none").insertAfter($elem).fadeIn();
                                                    break
                                                }
                                })
                            });
                            return this
                        };
                        var a = { messageClearInterval: 5E3 }
                    })(jQuery);
                    (function (a) {
                        a.fn.sidebarClicks = function (d) {
                            function e(h) {
                                if (h.status_code === 200) {
                                    h = h.data.clicks;
                                    for (var n = 0, o, p = c.find(".sidebar_metrics_count"), m; n < h.length; n++) {
                                        o = h[n];
                                        if (!o.error) {
                                            m = p.filter("[type $='" + o.global_hash + "']");
                                            o.global_clicks > 1E3 && m.addClass("largeNumber");
                                            m.html(a.commifyNumber(o.global_clicks));
                                            m = p.filter("[type $='" + o.user_hash + "']");
                                            o.user_clicks > 1E3 && m.addClass("largeNumber");
                                            m.html(a.commifyNumber(o.user_clicks))
                                        }
                                    }
                                    h[0].global_hash === h[0].user_hash && c.find(".sidebarClicks_metricsList").eq(0).slideUp()
                                }
                            }
                            function f() {
                                c.trigger("errorMessage", { text: a._("Oops, we aren't able to access click metrics right now, do not worry your data is safe.") })
                            }
                            var c = this, g = a.extend(true, b, d);
                            if (c.length <= 0)
                                return this;
                            a(document.body).bind("shortenComplete", function (h, n) {
                                g.params.hash = [n.hash];
                                var o = g.url, p = g.params;
                                p._xsrf = a.cookie.get("_xsrf");
                                p = a.param(p);
                                a.ajax({ dataType: "json", type: "POST", data: p, url: o, success: e, error: f });
                                p = o = "";
                                p += '<div class="sidebarClicks_header">';
                                p += "<h3>" + a._("Clicks") + "</h3>";
                                p += "</div>";
                                o += p;
                                p = n.hash;
                                var m = n.global_hash, q = "";
                                q += '<div class="sidebarClicks_metrics">';
                                q += '<ul class="sidebarClicks_metricsList">';
                                q += '<li class="sidebarMetricsCountColumn"><a class="sidebar_metrics_count" type="' + p + '" href="http://' + g.host_name + "/" + p + '+">0</a></li>';
                                q += "<li>" + a._("On your bitly link") + " <br />" + a._("More info") + ': <a href="http://' + g.host_name + "/" + p + '+">http://' + g.host_name + "/" + p + "+</a></li>";
                                q += '<div class="hr"><hr /></div>';
                                q += "</ul>";
                                q += '<ul class="sidebarClicks_metricsList">';
                                q += '<li class="sidebarMetricsCountColumn"><a class="sidebar_metrics_count" type="' +
            m + '" href="http://' + g.host_name + "/" + m + '+">0</a></li>';
                                q += "<li>" + a._("On All bitly links to this page") + "<br />" + a._("More info") + ': <a href="http://' + g.host_name + "/" + m + '+">http://' + g.host_name + "/" + m + "+</a></li>";
                                q += '<div class="hr"><hr /></div>';
                                q += "</ul>";
                                q += '<div class="hr"><hr /></div>';
                                q += "</div>";
                                a(o + q).appendTo(c);
                                c.css("display", "block")
                            });
                            return this
                        };
                        var b = { url: "/data/clicks", params: { hash: [] }, host_name: "bit.ly", multiRowToggle: true }
                    })(jQuery);
                    (function () {
                        function a(d, e, f, c) {
                            e._xsrf = $.cookie.get("_xsrf");
                            e = $.param(e);
                            $.ajax({ dataType: "json", data: e, type: "POST", url: d, success: f, error: c })
                        }
                        $.fn.socialLinkedAccounts = function (d, e) {
                            function f(m) {
                                m.preventDefault();
                                m = $(this).parent("label").find(".i_cb_orig");
                                var q = $.trim(m.attr("account_type")), v = $.trim(m.attr("account_login"));
                                account_primary = m.attr("account_primary") == "true";
                                m.attr("account_primary", "" + !account_primary);
                                m.parent(".linked_account_item");
                                a(p.share_settings_url, { account_type: q,
                                    account_login: v, enabled: account_primary ? 0 : 1
                                }, function (w) {
                                    for (var s = 0; s < d.length; s++)
                                        if (d[s].login === w.data.login && d[s].account_type === w.data.account_type && d[s].account_login === w.data.account_login)
                                            d[s].primary = w.data.primary;
                                    o.trigger("shareAccounts", { accounts: d || [] })
                                });
                                o.trigger("track", { "plugin:socialLinkedAccounts": "Account enabled check box: " + account_primary })
                            }
                            function c() {
                                var m = $(this);
                                m = { account_login: m.data("login"), visible: m.attr("checked") ? "false" : "true" };
                                a(p.share_account_visibility_url,
            m)
                            }
                            function g() {
                                var m = $(this);
                                m = { account_login: m.data("login"), auto_import_links: m.attr("checked") ? "true" : "false" };
                                a(p.share_account_auto_import_url, m)
                            }
                            function h(m) {
                                for (var q = 0, v = m.length; v--; )
                                    m[v].allow_login && q++;
                                return q
                            }
                            function n(m) {
                                if (!BITLY.data.has_pwd) {
                                    var q = h(m), v = m.length, w;
                                    if (q === 1) {
                                        for (; v--; )
                                            if (m[v].allow_login)
                                                w = m[v].account_type + "_" + m[v].account_login;
                                        $(".linked_account_item").each(function (s, k) {
                                            var D = $(k);
                                            D.data("key") === w && D.find(".deleteThisLinkedAccountButton").fadeOut(function () {
                                                $(this).remove()
                                            })
                                        })
                                    }
                                }
                            }
                            var o = this, p = $.extend(true, b, e);
                            (function () {
                                for (var m = "", q = "", v = "", w = "", s = null, k = 0; k < d.length; k++) {
                                    s = d[k];
                                    w = "";
                                    w += '<div class="linked_account_item ' + s.account_type + '" type="' + s.account_type + '" account="' + s.account_login + '" data-key="' + s.account_type + "_" + s.account_login + '">';
                                    w += '<img class="activeAccount" alt="" src="/data/avatar/' + s.account_type + "/" + s.account_login + '.png" />';
                                    w += "<span>" + $.escapeHTML(s.account_name || s.account_login) + "</span>";
                                    w += " <label>Sharing:";
                                    w += '<input class="i_cb_orig" type="checkbox" ';
                                    w += ' account_login="' + $.escapeHTML(s.account_login) + '"';
                                    w += ' account_type="' + $.escapeHTML(s.account_type) + '"';
                                    w += ' account_primary="' + (s.primary ? "true" : "false") + '"';
                                    w += s.primary ? " checked=checked" : "";
                                    w += "/></label>";
                                    w += !BITLY.data.has_pwd && h(d) === 1 && s.allow_login ? "" : ' <a href="#" class="deleteThisLinkedAccountButton" >' + $._("Remove") + "</a>";
                                    if (BITLY.data.feature_flags.hamburger || BITLY.data.feature_flags.hamburger_prod || BITLY.data.feature_flags.hamburger_invite) {
                                        if (p.show_visibility) {
                                            w += "<label>";
                                            w += '<input class="toggleAccountVisibility" type="checkbox" ';
                                            w += ' data-login="' + $.escapeHTML(s.account_login) + '"';
                                            w += !s.visible ? " checked=checked" : "";
                                            w += "> " + $._("Hide from my profile") + "</label>"
                                        }
                                        if (s.account_type === "twitter" && p.show_auto_import) {
                                            w += "<label>";
                                            w += '<input class="toggleAccountAutoImport" type="checkbox" ';
                                            w += ' data-login="' + $.escapeHTML(s.account_login) + '"';
                                            w += s.auto_import_links ? " checked=checked" : "";
                                            w += "> " + $._("Auto import links I post to this account") + "</label>"
                                        }
                                    }
                                    w += "</div>";
                                    if (s.account_type ===
                "twitter")
                                        m += w;
                                    else if (s.account_type === "facebook")
                                        q += w
                                }
                                v += '<div class="shortenShareSettingsBox">';
                                v += "<h2>Sharing Accounts</h2>";
                                if (m || q) {
                                    v += "<p>" + $._("Share your links on:") + "</p>";
                                    v += m + q
                                }
                                v += '<div class="addAdditionalLinkedAccountsBentoBox">';
                                v += $._("Add Account") + ": ";
                                v += '<a class="addTwitterAccount" href="#">';
                                v += " Twitter</a>";
                                v += '<a class="addFacebookAccount" href="#">';
                                v += " Facebook</a> ";
                                v += "</div>";
                                v += "</div>";
                                $(v).appendTo(o)
                            })();
                            (function () {
                                o.find(".i_cb_orig").iCheckbox({ height: 15, width: 50,
                                    link_class: "toggleThisLinkedAccountButton"
                                });
                                o.find(".toggleThisLinkedAccountButton").bind("click", f);
                                o.find(".toggleAccountVisibility:checkbox").bind("click", c);
                                o.find(".toggleAccountAutoImport:checkbox").bind("click", g);
                                o.find(".addTwitterAccount").bind("click", function (m) {
                                    m.preventDefault();
                                    o.trigger("track", { "plugin:socialLinkedAccounts": "Add Twitter Account" });
                                    o.trigger("addTwitterViaOAuth", { share_text: "" })
                                });
                                o.find(".addFacebookAccount").bind("click", function (m) {
                                    m.preventDefault();
                                    o.trigger("track",
                { "plugin:socialLinkedAccounts": "Add Facebook Account" });
                                    o.trigger("addFacebookViaConnect", { share_text: "" })
                                });
                                o.find(".deleteThisLinkedAccountButton").bind("click", function (m) {
                                    m.preventDefault();
                                    var q = 0, v = $(this).parents(".linked_account_item");
                                    m = v.attr("type");
                                    var w = v.attr("account"), s = {};
                                    s = $.extend(true, {}, p.delete_twitter_params);
                                    s.account_login = $.trim(w);
                                    s.account_type = $.trim(m);
                                    a(p.remove_share_account_url, s, function (k) {
                                        if (k.status_code !== 200)
                                            o.trigger("errorMessage", { text: $._("Unable remove that account at this time:") +
                            " " + w
                                            });
                                        else {
                                            for (k = -1; q < d.length; q++)
                                                if (d[q].account_type === s.account_type && d[q].account_login === s.account_login)
                                                    k = q;
                                            k > -1 && d.splice(k, 1);
                                            v.parent().find(".linked_account_item");
                                            n(d);
                                            o.trigger("shareAccounts", { accounts: d });
                                            v.slideUp("normal", function () {
                                                v.remove()
                                            })
                                        }
                                    })
                                })
                            })();
                            o.trigger("shareAccounts", { accounts: d });
                            o.slideDown("normal");
                            return this
                        };
                        var b = { remove_share_account_url: "/data/remove_share_account", share_settings_url: "/data/toggle_share_account", share_account_visibility_url: "/data/toggle_share_account_visibility",
                            share_account_auto_import_url: "/data/toggle_share_account_auto_import", messageClearInterval: 5E3, check_twitter_params: { twitter_username: "", twitter_password: "" }, delete_twitter_params: { account_login: null, account_type: null }, show_visibility: false, show_auto_import: false
                        }
                    })(jQuery);
                    (function (a) {
                        a.fn.sparkLineWeekly = function (d) {
                            function e(o) {
                                if (o && o.data) {
                                    var p;
                                    p = [];
                                    var m = 0, q = o.data.clicks, v = 0;
                                    i = 0;
                                    for (len = q.length; i < len; i++) {
                                        o = q[i];
                                        v = Math.max(o.clicks, v);
                                        p.push([o.ts, o.clicks]);
                                        m += o.clicks
                                    }
                                    if (!(m <= 0)) {
                                        g.slideDown("slow", function () {
                                            g.trigger("sparklines_weekly_loaded")
                                        });
                                        p = { data: p, label: "7 " + a._("days"), max: v };
                                        if (o = $canvas[0].getContext("2d"))
                                            c(o, p);
                                        n.fadeIn("normal");
                                        a('<div class="weeklySparkLineDescText"></div>').html(a.commifyNumber(m) + " " + a._("clicks this week")).appendTo(g)
                                    }
                                }
                            }
                            function f() {
                            }
                            function c(o, p) {
                                var m = Math.floor(h.canvas.width / p.data.length), q = p.data, v = p.max, w;
                                o.clearRect(0, 0, h.canvas.width, h.canvas.height);
                                o.fillStyle = h.canvas.bar_color;
                                for (var s = 0; s < q.length; s++) {
                                    w = q[s][1] === v ? h.canvas.height : Math.max(1, Math.floor(h.canvas.height * (q[s][1] / v)));
                                    o.fillRect(s * m, h.canvas.height, Math.floor(m * 0.8), -1 * w)
                                }
                            }
                            var g = this, h = a.extend(true, b, d), n;
                            n = a('<div style="display:none;" class="innerWeeklyClickSummaryContainer"></div>').appendTo(g);
                            $canvas = a(function (o, p, m) {
                                var q;
                                if ("G_vmlCanvasManager" in window) {
                                    window.G_vmlCanvasManager.init_(document);
                                    q = document.createElement("canvas");
                                    q.width = p;
                                    q.id = o;
                                    q.height = m;
                                    q = window.G_vmlCanvasManager.initElement(q)
                                } else
                                    q = '<canvas id="' + o + '" width="' + p + '" height="' + m + '"></canvas>';
                                return q
                            } ("sparkline_canvas", h.canvas.width, h.canvas.height)).appendTo(n);
                            g.bind("click", function () {
                                document.location.href = "/a/summary"
                            });
                            setTimeout(function () {
                                var o = h.url, p = a.param(h.params);
                                a.ajax({ dataType: "json", data: p, traditional: true, type: "POST",
                                    url: o, success: e, error: f
                                })
                            }, 1500);
                            return this
                        };
                        var b = { url: "/data/clicks/summary", params: { timezone: "getTimezoneOffset" in Date.prototype ? parseInt((new Date).getTimezoneOffset() / -60, 10) : 0, units: 7, unit: "day" }, canvas: { height: 20, width: 66, bar_color: "#77C8FC"} }
                    })(jQuery);
                    (function (a) {
                        a.timeFormat = function (b) {
                            var d = new Date, e = " ", f = new Date(b * 1E3);
                            if (b) {
                                diff_in_minutes = Math.round((d.getTime() / 1E3 - f.getTime() / 1E3) / 60);
                                d = e;
                                f = diff_in_minutes;
                                e = " ";
                                if (f <= 1)
                                    e += a._("Now");
                                else if (f < 60)
                                    e += f + " " + a._("mins ago");
                                else if (f >= 60 && f < 120)
                                    e += Math.floor(f / 60) + " " + a._("hour ago");
                                else if (f < 1440)
                                    e += Math.floor(f / 60) + " " + a._("hours ago");
                                else if (f < 2880)
                                    e += "1 " + a._("day ago");
                                else if (f > 2880 && f < 4320)
                                    e += "2 " + a._("days ago");
                                else {
                                    b = new Date(parseInt(b, 10) * 1E3);
                                    e += a.i18n.months[b.getMonth()] +
                " " + b.getDate()
                                }
                                e = d + e
                            }
                            return e
                        }
                    })(jQuery);
                    (function (a) {
                        function b() {
                            if (a.browser.msie) {
                                var o = a(document).height(), p = a(window).height();
                                return [window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth, o - p < 20 ? p : o]
                            }
                            return [a(document).width(), a(document).height()]
                        }
                        function d(o) {
                            if (o)
                                return o.call(a.mask)
                        }
                        a.tools = a.tools || { version: "1.2.5" };
                        var e;
                        e = a.tools.expose = { conf: { maskId: "exposeMask", loadSpeed: "slow", closeSpeed: "fast", closeOnClick: true, closeOnEsc: true, zIndex: 9998, opacity: 0.8, startOpacity: 0, color: "#fff", onLoad: null,
                            onClose: null
                        }
                        };
                        var f, c, g, h, n;
                        a.mask = { load: function (o, p) {
                            if (g)
                                return this;
                            if (typeof o == "string")
                                o = { color: o };
                            o = o || h;
                            h = o = a.extend(a.extend({}, e.conf), o);
                            f = a("#" + o.maskId);
                            if (!f.length) {
                                f = a("<div/>").attr("id", o.maskId);
                                a("body").append(f)
                            }
                            var m = b();
                            f.css({ position: "absolute", top: 0, left: 0, width: m[0], height: m[1], display: "none", opacity: o.startOpacity, zIndex: o.zIndex });
                            o.color && f.css("backgroundColor", o.color);
                            if (d(o.onBeforeLoad) === false)
                                return this;
                            o.closeOnEsc && a(document).bind("keydown.mask", function (q) {
                                q.keyCode ==
                27 && a.mask.close(q)
                            });
                            o.closeOnClick && f.bind("click.mask", function (q) {
                                a.mask.close(q)
                            });
                            a(window).bind("resize.mask", function () {
                                a.mask.fit()
                            });
                            if (p && p.length) {
                                n = p.eq(0).css("zIndex");
                                a.each(p, function () {
                                    var q = a(this);
                                    /relative|absolute|fixed/i.test(q.css("position")) || q.css("position", "relative")
                                });
                                c = p.css({ zIndex: Math.max(o.zIndex + 1, n == "auto" ? 0 : n) })
                            }
                            f.css({ display: "block" }).fadeTo(o.loadSpeed, o.opacity, function () {
                                a.mask.fit();
                                d(o.onLoad);
                                g = "full"
                            });
                            g = true;
                            return this
                        }, close: function () {
                            if (g) {
                                if (d(h.onBeforeClose) ===
                false)
                                    return this;
                                f.fadeOut(h.closeSpeed, function () {
                                    d(h.onClose);
                                    c && c.css({ zIndex: n });
                                    g = false
                                });
                                a(document).unbind("keydown.mask");
                                f.unbind("click.mask");
                                a(window).unbind("resize.mask")
                            }
                            return this
                        }, fit: function () {
                            if (g) {
                                var o = b();
                                f.css({ width: o[0], height: o[1] })
                            }
                        }, getMask: function () {
                            return f
                        }, isLoaded: function (o) {
                            return o ? g == "full" : g
                        }, getConf: function () {
                            return h
                        }, getExposed: function () {
                            return c
                        } 
                        };
                        a.fn.mask = function (o) {
                            a.mask.load(o);
                            return this
                        };
                        a.fn.expose = function (o) {
                            a.mask.load(o, this);
                            return this
                        }
                    })(jQuery);
                    (function (a) {
                        function b(f, c) {
                            var g = this, h = f.add(g), n = a(window), o, p, m, q = a.tools.expose && (c.mask || c.expose), v = Math.random().toString().slice(10);
                            if (q) {
                                if (typeof q == "string")
                                    q = { color: q };
                                q.closeOnClick = q.closeOnEsc = false
                            }
                            var w = c.target || f.attr("rel");
                            p = w ? a(w) : f;
                            if (!p.length)
                                throw "Could not find Overlay: " + w;
                            f && f.index(p) == -1 && f.click(function (s) {
                                g.load(s);
                                return s.preventDefault()
                            });
                            a.extend(g, { load: function (s) {
                                if (g.isOpened())
                                    return g;
                                var k = e[c.effect];
                                if (!k)
                                    throw 'Overlay: cannot find effect : "' + c.effect +
                    '"';
                                c.oneInstance && a.each(d, function () {
                                    this.close(s)
                                });
                                s = s || a.Event();
                                s.type = "onBeforeLoad";
                                h.trigger(s);
                                if (s.isDefaultPrevented())
                                    return g;
                                m = true;
                                q && a(p).expose(q);
                                var D = c.top, M = c.left, J = p.outerWidth({ margin: true }), G = p.outerHeight({ margin: true });
                                if (typeof D == "string")
                                    D = D == "center" ? Math.max((n.height() - G) / 2, 0) : parseInt(D, 10) / 100 * n.height();
                                if (M == "center")
                                    M = Math.max((n.width() - J) / 2, 0);
                                k[0].call(g, { top: D, left: M }, function () {
                                    if (m) {
                                        s.type = "onLoad";
                                        h.trigger(s)
                                    }
                                });
                                q && c.closeOnClick && a.mask.getMask().one("click",
                g.close);
                                c.closeOnClick && a(document).bind("click." + v, function (P) {
                                    a(P.target).parents(p).length || g.close(P)
                                });
                                c.closeOnEsc && a(document).bind("keydown." + v, function (P) {
                                    P.keyCode == 27 && g.close(P)
                                });
                                return g
                            }, close: function (s) {
                                if (!g.isOpened())
                                    return g;
                                s = s || a.Event();
                                s.type = "onBeforeClose";
                                h.trigger(s);
                                if (!s.isDefaultPrevented()) {
                                    m = false;
                                    e[c.effect][1].call(g, function () {
                                        s.type = "onClose";
                                        h.trigger(s)
                                    });
                                    a(document).unbind("click." + v).unbind("keydown." + v);
                                    q && a.mask.close();
                                    return g
                                }
                            }, getOverlay: function () {
                                return p
                            },
                                getTrigger: function () {
                                    return f
                                }, getClosers: function () {
                                    return o
                                }, isOpened: function () {
                                    return m
                                }, getConf: function () {
                                    return c
                                } 
                            });
                            a.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","), function (s, k) {
                                a.isFunction(c[k]) && a(g).bind(k, c[k]);
                                g[k] = function (D) {
                                    D && a(g).bind(k, D);
                                    return g
                                }
                            });
                            o = p.find(c.close || ".close");
                            if (!o.length && !c.close) {
                                o = a('<a class="close"></a>');
                                p.prepend(o)
                            }
                            o.click(function (s) {
                                g.close(s)
                            });
                            c.load && g.load()
                        }
                        a.tools = a.tools || { version: "1.2.5" };
                        a.tools.overlay = { addEffect: function (f,
        c, g) {
                            e[f] = [c, g]
                        }, conf: { close: null, closeOnClick: true, closeOnEsc: true, closeSpeed: "fast", effect: "default", fixed: !a.browser.msie || a.browser.version > 6, left: "center", load: false, mask: null, oneInstance: true, speed: "normal", target: null, top: "10%"}
                        };
                        var d = [], e = {};
                        a.tools.overlay.addEffect("default", function (f, c) {
                            var g = this.getConf(), h = a(window);
                            if (!g.fixed) {
                                f.top += h.scrollTop();
                                f.left += h.scrollLeft()
                            }
                            f.position = g.fixed ? "fixed" : "absolute";
                            this.getOverlay().css(f).fadeIn(g.speed, c)
                        }, function (f) {
                            this.getOverlay().fadeOut(this.getConf().closeSpeed,
        f)
                        });
                        a.fn.overlay = function (f) {
                            var c = this.data("overlay");
                            if (c)
                                return c;
                            if (a.isFunction(f))
                                f = { onBeforeLoad: f };
                            f = a.extend(true, {}, a.tools.overlay.conf, f);
                            this.each(function () {
                                c = new b(a(this), f);
                                d.push(c);
                                a(this).data("overlay", c)
                            });
                            return f.api ? c : this
                        }
                    })(jQuery);
                    (function (a) {
                        function b(f) {
                            var c = f.offset();
                            return { top: c.top + f.height() / 2, left: c.left + f.width() / 2 }
                        }
                        var d = a.tools.overlay, e = a(window);
                        a.extend(d.conf, { start: { top: null, left: null }, fadeInSpeed: "fast", zIndex: 9999 });
                        d.addEffect("apple", function (f, c) {
                            var g = this.getOverlay(), h = this.getConf(), n = this.getTrigger(), o = this, p = g.outerWidth({ margin: true }), m = g.data("img"), q = h.fixed ? "fixed" : "absolute";
                            if (!m) {
                                m = g.css("backgroundImage");
                                if (!m)
                                    throw "background-image CSS property not set for overlay";
                                m = m.slice(m.indexOf("(") +
            1, m.indexOf(")")).replace(/\"/g, "");
                                g.css("backgroundImage", "none");
                                m = a('<img src="' + m + '"/>');
                                m.css({ border: 0, display: "none" }).width(p);
                                a("body").append(m);
                                g.data("img", m)
                            }
                            var v = h.start.top || Math.round(e.height() / 2), w = h.start.left || Math.round(e.width() / 2);
                            if (n) {
                                n = b(n);
                                v = n.top;
                                w = n.left
                            }
                            if (h.fixed) {
                                v -= e.scrollTop();
                                w -= e.scrollLeft()
                            } else {
                                f.top += e.scrollTop();
                                f.left += e.scrollLeft()
                            }
                            m.css({ position: "absolute", top: v, left: w, width: 0, zIndex: h.zIndex }).show();
                            f.position = q;
                            g.css(f);
                            m.animate({ top: g.css("top"),
                                left: g.css("left"), width: p
                            }, h.speed, function () {
                                g.css("zIndex", h.zIndex + 1).fadeIn(h.fadeInSpeed, function () {
                                    o.isOpened() && !a(this).index(g) ? c.call() : g.hide()
                                })
                            }).css("position", q)
                        }, function (f) {
                            var c = this.getOverlay().hide(), g = this.getConf(), h = this.getTrigger();
                            c = c.data("img");
                            var n = { top: g.start.top, left: g.start.left, width: 0 };
                            h && a.extend(n, b(h));
                            g.fixed && c.css({ position: "absolute" }).animate({ top: "+=" + e.scrollTop(), left: "+=" + e.scrollLeft() }, 0);
                            c.animate(n, g.closeSpeed, f)
                        })
                    })(jQuery);
                    (function (a) {
                        function b(f, c, g) {
                            var h = g.relative ? f.position().top : f.offset().top, n = g.relative ? f.position().left : f.offset().left, o = g.position[0];
                            h -= c.outerHeight() - g.offset[0];
                            n += f.outerWidth() + g.offset[1];
                            if (/iPad/i.test(navigator.userAgent))
                                h -= a(window).scrollTop();
                            var p = c.outerHeight() + f.outerHeight();
                            if (o == "center")
                                h += p / 2;
                            if (o == "bottom")
                                h += p;
                            o = g.position[1];
                            f = c.outerWidth() + f.outerWidth();
                            if (o == "center")
                                n -= f / 2;
                            if (o == "left")
                                n -= f;
                            return { top: h, left: n }
                        }
                        function d(f, c) {
                            var g = this, h = f.add(g), n, o = 0, p =
        0, m = f.attr("title"), q = f.attr("data-tooltip"), v = e[c.effect], w, s = f.is(":input"), k = s && f.is(":checkbox, :radio, select, :button, :submit"), D = f.attr("type"), M = c.events[D] || c.events[s ? k ? "widget" : "input" : "def"];
                            if (!v)
                                throw 'Nonexistent effect "' + c.effect + '"';
                            M = M.split(/,\s*/);
                            if (M.length != 2)
                                throw "Tooltip: bad events configuration for " + D;
                            f.bind(M[0], function (J) {
                                clearTimeout(o);
                                if (c.predelay)
                                    p = setTimeout(function () {
                                        g.show(J)
                                    }, c.predelay);
                                else
                                    g.show(J)
                            }).bind(M[1], function (J) {
                                clearTimeout(p);
                                if (c.delay)
                                    o =
                setTimeout(function () {
                    g.hide(J)
                }, c.delay);
                                else
                                    g.hide(J)
                            });
                            if (m && c.cancelDefault) {
                                f.removeAttr("title");
                                f.data("title", m)
                            }
                            a.extend(g, { show: function (J) {
                                if (!n) {
                                    if (q)
                                        n = a(q);
                                    else if (c.tip)
                                        n = a(c.tip).eq(0);
                                    else if (m)
                                        n = a(c.layout).addClass(c.tipClass).appendTo(document.body).hide().append(m);
                                    else {
                                        n = f.next();
                                        n.length || (n = f.parent().next())
                                    }
                                    if (!n.length)
                                        throw "Cannot find tooltip for " + f;
                                }
                                if (g.isShown())
                                    return g;
                                n.stop(true, true);
                                var G = b(f, n, c);
                                c.tip && n.html(f.data("title"));
                                J = J || a.Event();
                                J.type = "onBeforeShow";
                                h.trigger(J, [G]);
                                if (J.isDefaultPrevented())
                                    return g;
                                G = b(f, n, c);
                                n.css({ position: "absolute", top: G.top, left: G.left });
                                w = true;
                                v[0].call(g, function () {
                                    J.type = "onShow";
                                    w = "full";
                                    h.trigger(J)
                                });
                                G = c.events.tooltip.split(/,\s*/);
                                if (!n.data("__set")) {
                                    n.bind(G[0], function () {
                                        clearTimeout(o);
                                        clearTimeout(p)
                                    });
                                    G[1] && !f.is("input:not(:checkbox, :radio), textarea") && n.bind(G[1], function (P) {
                                        P.relatedTarget != f[0] && f.trigger(M[1].split(" ")[0])
                                    });
                                    n.data("__set", true)
                                }
                                return g
                            }, hide: function (J) {
                                if (!n || !g.isShown())
                                    return g;
                                J = J || a.Event();
                                J.type = "onBeforeHide";
                                h.trigger(J);
                                if (!J.isDefaultPrevented()) {
                                    w = false;
                                    e[c.effect][1].call(g, function () {
                                        J.type = "onHide";
                                        h.trigger(J)
                                    });
                                    return g
                                }
                            }, isShown: function (J) {
                                return J ? w == "full" : w
                            }, getConf: function () {
                                return c
                            }, getTip: function () {
                                return n
                            }, getTrigger: function () {
                                return f
                            } 
                            });
                            a.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","), function (J, G) {
                                a.isFunction(c[G]) && a(g).bind(G, c[G]);
                                g[G] = function (P) {
                                    P && a(g).bind(G, P);
                                    return g
                                }
                            })
                        }
                        a.tools = a.tools || { version: "1.2.5" };
                        a.tools.tooltip =
    { conf: { effect: "toggle", fadeOutSpeed: "fast", predelay: 0, delay: 30, opacity: 1, tip: 0, position: ["top", "center"], offset: [0, 0], relative: false, cancelDefault: true, events: { def: "mouseenter,mouseleave", input: "focus,blur", widget: "focus mouseenter,blur mouseleave", tooltip: "mouseenter,mouseleave" }, layout: "<div/>", tipClass: "tooltip" }, addEffect: function (f, c, g) {
        e[f] = [c, g]
    } 
    };
                        var e = { toggle: [function (f) {
                            var c = this.getConf(), g = this.getTip();
                            c = c.opacity;
                            c < 1 && g.css({ opacity: c });
                            g.show();
                            f.call()
                        }, function (f) {
                            this.getTip().hide();
                            f.call()
                        } ], fade: [function (f) {
                            var c = this.getConf();
                            this.getTip().fadeTo(c.fadeInSpeed, c.opacity, f)
                        }, function (f) {
                            this.getTip().fadeOut(this.getConf().fadeOutSpeed, f)
                        } ]
                        };
                        a.fn.tooltip = function (f) {
                            var c = this.data("tooltip");
                            if (c)
                                return c;
                            f = a.extend(true, {}, a.tools.tooltip.conf, f);
                            if (typeof f.position == "string")
                                f.position = f.position.split(/,?\s/);
                            this.each(function () {
                                c = new d(a(this), f);
                                a(this).data("tooltip", c)
                            });
                            return f.api ? c : this
                        }
                    })(jQuery);
                    (function (a) {
                        var b = a.tools.tooltip;
                        a.extend(b.conf, { direction: "up", bounce: false, slideOffset: 10, slideInSpeed: 200, slideOutSpeed: 200, slideFade: !a.browser.msie });
                        var d = { up: ["-", "top"], down: ["+", "top"], left: ["-", "left"], right: ["+", "left"] };
                        b.addEffect("slide", function (e) {
                            var f = this.getConf(), c = this.getTip(), g = f.slideFade ? { opacity: f.opacity} : {}, h = d[f.direction] || d.up;
                            g[h[1]] = h[0] + "=" + f.slideOffset;
                            f.slideFade && c.css({ opacity: 0 });
                            c.show().animate(g, f.slideInSpeed, e)
                        }, function (e) {
                            var f = this.getConf(), c = f.slideOffset,
        g = f.slideFade ? { opacity: 0} : {}, h = d[f.direction] || d.up, n = "" + h[0];
                            if (f.bounce)
                                n = n == "+" ? "-" : "+";
                            g[h[1]] = n + "=" + c;
                            this.getTip().animate(g, f.slideOutSpeed, function () {
                                a(this).hide();
                                e.call()
                            })
                        })
                    })(jQuery);
                    (function (a) {
                        a.fn.totalClicks = function (d) {
                            function e(h) {
                                if (h.status_code !== 200)
                                    return f(h);
                                var n = c.find(".userStats a, .globalStats a");
                                h = h.data.clicks;
                                for (var o = 0, p; o < h.length; o++) {
                                    p = h[o];
                                    if (!p.errror) {
                                        n.filter("[type $='" + p.global_hash + "']").html(a.commifyNumber(p.global_clicks));
                                        p.user_hash != p.global_hash && n.filter("[type $='" + p.user_hash + "']").html(a.commifyNumber(p.user_clicks))
                                    }
                                }
                                n.parents(".statsList").fadeIn("normal")
                            }
                            function f() {
                                c.trigger("errorMessage", { text: a._("Oops, we aren't able to access click metrics right now, do not worry your data is safe.") })
                            }
                            var c = this, g = a.extend(true, b, d);
                            if (c.length <= 0)
                                return this;
                            c.bind("hashList", function (h, n) {
                                if (n.userHashes.length !== 0) {
                                    g.params.hash = n.userHashes;
                                    setTimeout(function () {
                                        var o = g.url, p = f, m = a.param(g.params);
                                        a.ajax({ dataType: "json", type: "POST", data: m, url: o, success: e, error: p })
                                    }, 100)
                                }
                            });
                            return this
                        };
                        var b = { url: "/data/clicks", params: { hash: [] }, multiRowToggle: true }
                    })(jQuery);
                    (function (a, b) {
                        function d(e) {
                            return !a(e).parents().andSelf().filter(function () {
                                return a.curCSS(this, "visibility") === "hidden" || a.expr.filters.hidden(this)
                            }).length
                        }
                        a.ui = a.ui || {};
                        if (!a.ui.version) {
                            a.extend(a.ui, { version: "1.8.4", plugin: { add: function (e, f, c) {
                                e = a.ui[e].prototype;
                                for (var g in c) {
                                    e.plugins[g] = e.plugins[g] || [];
                                    e.plugins[g].push([f, c[g]])
                                }
                            }, call: function (e, f, c) {
                                if ((f = e.plugins[f]) && e.element[0].parentNode)
                                    for (var g = 0; g < f.length; g++)
                                        e.options[f[g][0]] && f[g][1].apply(e.element, c)
                            } 
                            }, contains: function (e,
            f) {
                                return document.compareDocumentPosition ? e.compareDocumentPosition(f) & 16 : e !== f && e.contains(f)
                            }, hasScroll: function (e, f) {
                                if (a(e).css("overflow") === "hidden")
                                    return false;
                                f = f && f === "left" ? "scrollLeft" : "scrollTop";
                                var c = false;
                                if (e[f] > 0)
                                    return true;
                                e[f] = 1;
                                c = e[f] > 0;
                                e[f] = 0;
                                return c
                            }, isOverAxis: function (e, f, c) {
                                return e > f && e < f + c
                            }, isOver: function (e, f, c, g, h, n) {
                                return a.ui.isOverAxis(e, c, h) && a.ui.isOverAxis(f, g, n)
                            }, keyCode: { ALT: 18, BACKSPACE: 8, CAPS_LOCK: 20, COMMA: 188, COMMAND: 91, COMMAND_LEFT: 91, COMMAND_RIGHT: 93,
                                CONTROL: 17, DELETE: 46, DOWN: 40, END: 35, ENTER: 13, ESCAPE: 27, HOME: 36, INSERT: 45, LEFT: 37, MENU: 93, NUMPAD_ADD: 107, NUMPAD_DECIMAL: 110, NUMPAD_DIVIDE: 111, NUMPAD_ENTER: 108, NUMPAD_MULTIPLY: 106, NUMPAD_SUBTRACT: 109, PAGE_DOWN: 34, PAGE_UP: 33, PERIOD: 190, RIGHT: 39, SHIFT: 16, SPACE: 32, TAB: 9, UP: 38, WINDOWS: 91
                            }
                            });
                            a.fn.extend({ _focus: a.fn.focus, focus: function (e, f) {
                                return typeof e === "number" ? this.each(function () {
                                    var c = this;
                                    setTimeout(function () {
                                        a(c).focus();
                                        f && f.call(c)
                                    }, e)
                                }) : this._focus.apply(this, arguments)
                            }, enableSelection: function () {
                                return this.attr("unselectable",
                "off").css("MozUserSelect", "")
                            }, disableSelection: function () {
                                return this.attr("unselectable", "on").css("MozUserSelect", "none")
                            }, scrollParent: function () {
                                var e;
                                e = a.browser.msie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? this.parents().filter(function () {
                                    return /(relative|absolute|fixed)/.test(a.curCSS(this, "position", 1)) && /(auto|scroll)/.test(a.curCSS(this, "overflow", 1) + a.curCSS(this, "overflow-y", 1) + a.curCSS(this, "overflow-x", 1))
                                }).eq(0) : this.parents().filter(function () {
                                    return /(auto|scroll)/.test(a.curCSS(this,
                    "overflow", 1) + a.curCSS(this, "overflow-y", 1) + a.curCSS(this, "overflow-x", 1))
                                }).eq(0);
                                return /fixed/.test(this.css("position")) || !e.length ? a(document) : e
                            }, zIndex: function (e) {
                                if (e !== b)
                                    return this.css("zIndex", e);
                                if (this.length) {
                                    e = a(this[0]);
                                    for (var f; e.length && e[0] !== document; ) {
                                        f = e.css("position");
                                        if (f === "absolute" || f === "relative" || f === "fixed") {
                                            f = parseInt(e.css("zIndex"));
                                            if (!isNaN(f) && f != 0)
                                                return f
                                        }
                                        e = e.parent()
                                    }
                                }
                                return 0
                            } 
                            });
                            a.each(["Width", "Height"], function (e, f) {
                                function c(o, p, m, q) {
                                    a.each(g, function () {
                                        p -=
                    parseFloat(a.curCSS(o, "padding" + this, true)) || 0;
                                        if (m)
                                            p -= parseFloat(a.curCSS(o, "border" + this + "Width", true)) || 0;
                                        if (q)
                                            p -= parseFloat(a.curCSS(o, "margin" + this, true)) || 0
                                    });
                                    return p
                                }
                                var g = f === "Width" ? ["Left", "Right"] : ["Top", "Bottom"], h = f.toLowerCase(), n = { innerWidth: a.fn.innerWidth, innerHeight: a.fn.innerHeight, outerWidth: a.fn.outerWidth, outerHeight: a.fn.outerHeight };
                                a.fn["inner" + f] = function (o) {
                                    if (o === b)
                                        return n["inner" + f].call(this);
                                    return this.each(function () {
                                        a.style(this, h, c(this, o) + "px")
                                    })
                                };
                                a.fn["outer" +
            f] = function (o, p) {
                if (typeof o !== "number")
                    return n["outer" + f].call(this, o);
                return this.each(function () {
                    a.style(this, h, c(this, o, true, p) + "px")
                })
            }
                            });
                            a.extend(a.expr[":"], { data: function (e, f, c) {
                                return !!a.data(e, c[3])
                            }, focusable: function (e) {
                                var f = e.nodeName.toLowerCase(), c = a.attr(e, "tabindex");
                                if ("area" === f) {
                                    f = e.parentNode;
                                    c = f.name;
                                    if (!e.href || !c || f.nodeName.toLowerCase() !== "map")
                                        return false;
                                    e = a("img[usemap=#" + c + "]")[0];
                                    return !!e && d(e)
                                }
                                return (/input|select|textarea|button|object/.test(f) ? !e.disabled : "a" ==
                f ? e.href || !isNaN(c) : !isNaN(c)) && d(e)
                            }, tabbable: function (e) {
                                var f = a.attr(e, "tabindex");
                                return (isNaN(f) || f >= 0) && a(e).is(":focusable")
                            } 
                            })
                        }
                    })(jQuery);
                    (function (a, b) {
                        var d = a.fn.remove;
                        a.fn.remove = function (e, f) {
                            return this.each(function () {
                                if (!f)
                                    if (!e || a.filter(e, [this]).length)
                                        a("*", this).add([this]).each(function () {
                                            a(this).triggerHandler("remove")
                                        });
                                return d.call(a(this), e, f)
                            })
                        };
                        a.widget = function (e, f, c) {
                            var g = e.split(".")[0], h;
                            e = e.split(".")[1];
                            h = g + "-" + e;
                            if (!c) {
                                c = f;
                                f = a.Widget
                            }
                            a.expr[":"][h] = function (n) {
                                return !!a.data(n, e)
                            };
                            a[g] = a[g] || {};
                            a[g][e] = function (n, o) {
                                arguments.length && this._createWidget(n, o)
                            };
                            f = new f;
                            f.options = a.extend(true, {}, f.options);
                            a[g][e].prototype = a.extend(true, f, { namespace: g, widgetName: e, widgetEventPrefix: a[g][e].prototype.widgetEventPrefix || e, widgetBaseClass: h }, c);
                            a.widget.bridge(e, a[g][e])
                        };
                        a.widget.bridge = function (e, f) {
                            a.fn[e] = function (c) {
                                var g = typeof c === "string", h = Array.prototype.slice.call(arguments, 1), n = this;
                                c = !g && h.length ? a.extend.apply(null, [true, c].concat(h)) : c;
                                if (g && c.substring(0, 1) === "_")
                                    return n;
                                g ? this.each(function () {
                                    var o = a.data(this, e), p = o && a.isFunction(o[c]) ? o[c].apply(o, h) : o;
                                    if (p !== o && p !== b) {
                                        n = p;
                                        return false
                                    }
                                }) :
            this.each(function () {
                var o = a.data(this, e);
                if (o) {
                    c && o.option(c);
                    o._init()
                } else
                    a.data(this, e, new f(c, this))
            });
                                return n
                            }
                        };
                        a.Widget = function (e, f) {
                            arguments.length && this._createWidget(e, f)
                        };
                        a.Widget.prototype = { widgetName: "widget", widgetEventPrefix: "", options: { disabled: false }, _createWidget: function (e, f) {
                            a.data(f, this.widgetName, this);
                            this.element = a(f);
                            this.options = a.extend(true, {}, this.options, a.metadata && a.metadata.get(f)[this.widgetName], e);
                            var c = this;
                            this.element.bind("remove." + this.widgetName, function () {
                                c.destroy()
                            });
                            this._create();
                            this._init()
                        }, _create: function () {
                        }, _init: function () {
                        }, destroy: function () {
                            this.element.unbind("." + this.widgetName).removeData(this.widgetName);
                            this.widget().unbind("." + this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass + "-disabled ui-state-disabled")
                        }, widget: function () {
                            return this.element
                        }, option: function (e, f) {
                            var c = e, g = this;
                            if (arguments.length === 0)
                                return a.extend({}, g.options);
                            if (typeof e === "string") {
                                if (f === b)
                                    return this.options[e];
                                c = {};
                                c[e] = f
                            }
                            a.each(c, function (h,
            n) {
                                g._setOption(h, n)
                            });
                            return g
                        }, _setOption: function (e, f) {
                            this.options[e] = f;
                            if (e === "disabled")
                                this.widget()[f ? "addClass" : "removeClass"](this.widgetBaseClass + "-disabled ui-state-disabled").attr("aria-disabled", f);
                            return this
                        }, enable: function () {
                            return this._setOption("disabled", false)
                        }, disable: function () {
                            return this._setOption("disabled", true)
                        }, _trigger: function (e, f, c) {
                            var g = this.options[e];
                            f = a.Event(f);
                            f.type = (e === this.widgetEventPrefix ? e : this.widgetEventPrefix + e).toLowerCase();
                            c = c || {};
                            if (f.originalEvent) {
                                e =
                a.event.props.length;
                                for (var h; e; ) {
                                    h = a.event.props[--e];
                                    f[h] = f.originalEvent[h]
                                }
                            }
                            this.element.trigger(f, c);
                            return !(a.isFunction(g) && g.call(this.element[0], f, c) === false || f.isDefaultPrevented())
                        } 
                        }
                    })(jQuery);
                    (function (a) {
                        a.widget("ui.mouse", { options: { cancel: ":input,option", distance: 1, delay: 0 }, _mouseInit: function () {
                            var b = this;
                            this.element.bind("mousedown." + this.widgetName, function (d) {
                                return b._mouseDown(d)
                            }).bind("click." + this.widgetName, function (d) {
                                if (b._preventClickEvent) {
                                    b._preventClickEvent = false;
                                    d.stopImmediatePropagation();
                                    return false
                                }
                            });
                            this.started = false
                        }, _mouseDestroy: function () {
                            this.element.unbind("." + this.widgetName)
                        }, _mouseDown: function (b) {
                            b.originalEvent = b.originalEvent || {};
                            if (!b.originalEvent.mouseHandled) {
                                this._mouseStarted &&
                this._mouseUp(b);
                                this._mouseDownEvent = b;
                                var d = this, e = b.which == 1, f = typeof this.options.cancel == "string" ? a(b.target).parents().add(b.target).filter(this.options.cancel).length : false;
                                if (!e || f || !this._mouseCapture(b))
                                    return true;
                                this.mouseDelayMet = !this.options.delay;
                                if (!this.mouseDelayMet)
                                    this._mouseDelayTimer = setTimeout(function () {
                                        d.mouseDelayMet = true
                                    }, this.options.delay);
                                if (this._mouseDistanceMet(b) && this._mouseDelayMet(b)) {
                                    this._mouseStarted = this._mouseStart(b) !== false;
                                    if (!this._mouseStarted) {
                                        b.preventDefault();
                                        return true
                                    }
                                }
                                this._mouseMoveDelegate = function (c) {
                                    return d._mouseMove(c)
                                };
                                this._mouseUpDelegate = function (c) {
                                    return d._mouseUp(c)
                                };
                                a(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate);
                                a.browser.safari || b.preventDefault();
                                return b.originalEvent.mouseHandled = true
                            }
                        }, _mouseMove: function (b) {
                            if (a.browser.msie && !b.button)
                                return this._mouseUp(b);
                            if (this._mouseStarted) {
                                this._mouseDrag(b);
                                return b.preventDefault()
                            }
                            if (this._mouseDistanceMet(b) &&
            this._mouseDelayMet(b))
                                (this._mouseStarted = this._mouseStart(this._mouseDownEvent, b) !== false) ? this._mouseDrag(b) : this._mouseUp(b);
                            return !this._mouseStarted
                        }, _mouseUp: function (b) {
                            a(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate);
                            if (this._mouseStarted) {
                                this._mouseStarted = false;
                                this._preventClickEvent = b.target == this._mouseDownEvent.target;
                                this._mouseStop(b)
                            }
                            return false
                        }, _mouseDistanceMet: function (b) {
                            return Math.max(Math.abs(this._mouseDownEvent.pageX -
            b.pageX), Math.abs(this._mouseDownEvent.pageY - b.pageY)) >= this.options.distance
                        }, _mouseDelayMet: function () {
                            return this.mouseDelayMet
                        }, _mouseStart: function () {
                        }, _mouseDrag: function () {
                        }, _mouseStop: function () {
                        }, _mouseCapture: function () {
                            return true
                        } 
                        })
                    })(jQuery);
                    (function (a) {
                        a.ui = a.ui || {};
                        var b = /left|center|right/, d = /top|center|bottom/, e = a.fn.position, f = a.fn.offset;
                        a.fn.position = function (c) {
                            if (!c || !c.of)
                                return e.apply(this, arguments);
                            c = a.extend({}, c);
                            var g = a(c.of), h = (c.collision || "flip").split(" "), n = c.offset ? c.offset.split(" ") : [0, 0], o, p, m;
                            if (c.of.nodeType === 9) {
                                o = g.width();
                                p = g.height();
                                m = { top: 0, left: 0 }
                            } else if (c.of.scrollTo && c.of.document) {
                                o = g.width();
                                p = g.height();
                                m = { top: g.scrollTop(), left: g.scrollLeft() }
                            } else if (c.of.preventDefault) {
                                c.at = "left top";
                                o = p =
            0;
                                m = { top: c.of.pageY, left: c.of.pageX }
                            } else {
                                o = g.outerWidth();
                                p = g.outerHeight();
                                m = g.offset()
                            }
                            a.each(["my", "at"], function () {
                                var q = (c[this] || "").split(" ");
                                if (q.length === 1)
                                    q = b.test(q[0]) ? q.concat(["center"]) : d.test(q[0]) ? ["center"].concat(q) : ["center", "center"];
                                q[0] = b.test(q[0]) ? q[0] : "center";
                                q[1] = d.test(q[1]) ? q[1] : "center";
                                c[this] = q
                            });
                            if (h.length === 1)
                                h[1] = h[0];
                            n[0] = parseInt(n[0], 10) || 0;
                            if (n.length === 1)
                                n[1] = n[0];
                            n[1] = parseInt(n[1], 10) || 0;
                            if (c.at[0] === "right")
                                m.left += o;
                            else if (c.at[0] === "center")
                                m.left +=
            o / 2;
                            if (c.at[1] === "bottom")
                                m.top += p;
                            else if (c.at[1] === "center")
                                m.top += p / 2;
                            m.left += n[0];
                            m.top += n[1];
                            return this.each(function () {
                                var q = a(this), v = q.outerWidth(), w = q.outerHeight(), s = a.extend({}, m);
                                if (c.my[0] === "right")
                                    s.left -= v;
                                else if (c.my[0] === "center")
                                    s.left -= v / 2;
                                if (c.my[1] === "bottom")
                                    s.top -= w;
                                else if (c.my[1] === "center")
                                    s.top -= w / 2;
                                s.left = parseInt(s.left);
                                s.top = parseInt(s.top);
                                a.each(["left", "top"], function (k, D) {
                                    a.ui.position[h[k]] && a.ui.position[h[k]][D](s, { targetWidth: o, targetHeight: p, elemWidth: v,
                                        elemHeight: w, offset: n, my: c.my, at: c.at
                                    })
                                });
                                a.fn.bgiframe && q.bgiframe();
                                q.offset(a.extend(s, { using: c.using }))
                            })
                        };
                        a.ui.position = { fit: { left: function (c, g) {
                            var h = a(window);
                            g = c.left + g.elemWidth - h.width() - h.scrollLeft();
                            c.left = g > 0 ? c.left - g : Math.max(0, c.left)
                        }, top: function (c, g) {
                            var h = a(window);
                            g = c.top + g.elemHeight - h.height() - h.scrollTop();
                            c.top = g > 0 ? c.top - g : Math.max(0, c.top)
                        } 
                        }, flip: { left: function (c, g) {
                            if (g.at[0] !== "center") {
                                var h = a(window);
                                h = c.left + g.elemWidth - h.width() - h.scrollLeft();
                                var n = g.my[0] === "left" ?
                    -g.elemWidth : g.my[0] === "right" ? g.elemWidth : 0, o = -2 * g.offset[0];
                                c.left += c.left < 0 ? n + g.targetWidth + o : h > 0 ? n - g.targetWidth + o : 0
                            }
                        }, top: function (c, g) {
                            if (g.at[1] !== "center") {
                                var h = a(window);
                                h = c.top + g.elemHeight - h.height() - h.scrollTop();
                                var n = g.my[1] === "top" ? -g.elemHeight : g.my[1] === "bottom" ? g.elemHeight : 0, o = g.at[1] === "top" ? g.targetHeight : -g.targetHeight, p = -2 * g.offset[1];
                                c.top += c.top < 0 ? n + g.targetHeight + p : h > 0 ? n + o + p : 0
                            }
                        } 
                        }
                        };
                        if (!a.offset.setOffset) {
                            a.offset.setOffset = function (c, g) {
                                if (/static/.test(a.curCSS(c, "position")))
                                    c.style.position =
                "relative";
                                var h = a(c), n = h.offset(), o = parseInt(a.curCSS(c, "top", true), 10) || 0, p = parseInt(a.curCSS(c, "left", true), 10) || 0;
                                n = { top: g.top - n.top + o, left: g.left - n.left + p };
                                "using" in g ? g.using.call(c, n) : h.css(n)
                            };
                            a.fn.offset = function (c) {
                                var g = this[0];
                                if (!g || !g.ownerDocument)
                                    return null;
                                if (c)
                                    return this.each(function () {
                                        a.offset.setOffset(this, c)
                                    });
                                return f.call(this)
                            }
                        }
                    })(jQuery);
                    (function (a) {
                        a.widget("ui.draggable", a.ui.mouse, { widgetEventPrefix: "drag", options: { addClasses: true, appendTo: "parent", axis: false, connectToSortable: false, containment: false, cursor: "auto", cursorAt: false, grid: false, handle: false, helper: "original", iframeFix: false, opacity: false, refreshPositions: false, revert: false, revertDuration: 500, scope: "default", scroll: true, scrollSensitivity: 20, scrollSpeed: 20, snap: false, snapMode: "both", snapTolerance: 20, stack: false, zIndex: false }, _create: function () {
                            if (this.options.helper ==
            "original" && !/^(?:r|a|f)/.test(this.element.css("position")))
                                this.element[0].style.position = "relative";
                            this.options.addClasses && this.element.addClass("ui-draggable");
                            this.options.disabled && this.element.addClass("ui-draggable-disabled");
                            this._mouseInit()
                        }, destroy: function () {
                            if (this.element.data("draggable")) {
                                this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");
                                this._mouseDestroy();
                                return this
                            }
                        }, _mouseCapture: function (b) {
                            var d =
            this.options;
                            if (this.helper || d.disabled || a(b.target).is(".ui-resizable-handle"))
                                return false;
                            this.handle = this._getHandle(b);
                            if (!this.handle)
                                return false;
                            return true
                        }, _mouseStart: function (b) {
                            var d = this.options;
                            this.helper = this._createHelper(b);
                            this._cacheHelperProportions();
                            if (a.ui.ddmanager)
                                a.ui.ddmanager.current = this;
                            this._cacheMargins();
                            this.cssPosition = this.helper.css("position");
                            this.scrollParent = this.helper.scrollParent();
                            this.offset = this.positionAbs = this.element.offset();
                            this.offset = { top: this.offset.top -
                this.margins.top, left: this.offset.left - this.margins.left
                            };
                            a.extend(this.offset, { click: { left: b.pageX - this.offset.left, top: b.pageY - this.offset.top }, parent: this._getParentOffset(), relative: this._getRelativeOffset() });
                            this.originalPosition = this.position = this._generatePosition(b);
                            this.originalPageX = b.pageX;
                            this.originalPageY = b.pageY;
                            d.cursorAt && this._adjustOffsetFromHelper(d.cursorAt);
                            d.containment && this._setContainment();
                            if (this._trigger("start", b) === false) {
                                this._clear();
                                return false
                            }
                            this._cacheHelperProportions();
                            a.ui.ddmanager && !d.dropBehaviour && a.ui.ddmanager.prepareOffsets(this, b);
                            this.helper.addClass("ui-draggable-dragging");
                            this._mouseDrag(b, true);
                            return true
                        }, _mouseDrag: function (b, d) {
                            this.position = this._generatePosition(b);
                            this.positionAbs = this._convertPositionTo("absolute");
                            if (!d) {
                                d = this._uiHash();
                                if (this._trigger("drag", b, d) === false) {
                                    this._mouseUp({});
                                    return false
                                }
                                this.position = d.position
                            }
                            if (!this.options.axis || this.options.axis != "y")
                                this.helper[0].style.left = this.position.left + "px";
                            if (!this.options.axis ||
            this.options.axis != "x")
                                this.helper[0].style.top = this.position.top + "px";
                            a.ui.ddmanager && a.ui.ddmanager.drag(this, b);
                            return false
                        }, _mouseStop: function (b) {
                            var d = false;
                            if (a.ui.ddmanager && !this.options.dropBehaviour)
                                d = a.ui.ddmanager.drop(this, b);
                            if (this.dropped) {
                                d = this.dropped;
                                this.dropped = false
                            }
                            if (!this.element[0] || !this.element[0].parentNode)
                                return false;
                            if (this.options.revert == "invalid" && !d || this.options.revert == "valid" && d || this.options.revert === true || a.isFunction(this.options.revert) && this.options.revert.call(this.element,
            d)) {
                                var e = this;
                                a(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function () {
                                    e._trigger("stop", b) !== false && e._clear()
                                })
                            } else
                                this._trigger("stop", b) !== false && this._clear();
                            return false
                        }, cancel: function () {
                            this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) : this._clear();
                            return this
                        }, _getHandle: function (b) {
                            var d = !this.options.handle || !a(this.options.handle, this.element).length ? true : false;
                            a(this.options.handle, this.element).find("*").andSelf().each(function () {
                                if (this ==
                b.target)
                                    d = true
                            });
                            return d
                        }, _createHelper: function (b) {
                            var d = this.options;
                            b = a.isFunction(d.helper) ? a(d.helper.apply(this.element[0], [b])) : d.helper == "clone" ? this.element.clone() : this.element;
                            b.parents("body").length || b.appendTo(d.appendTo == "parent" ? this.element[0].parentNode : d.appendTo);
                            b[0] != this.element[0] && !/(fixed|absolute)/.test(b.css("position")) && b.css("position", "absolute");
                            return b
                        }, _adjustOffsetFromHelper: function (b) {
                            if (typeof b == "string")
                                b = b.split(" ");
                            if (a.isArray(b))
                                b = { left: +b[0], top: +b[1] ||
                    0
                                };
                            if ("left" in b)
                                this.offset.click.left = b.left + this.margins.left;
                            if ("right" in b)
                                this.offset.click.left = this.helperProportions.width - b.right + this.margins.left;
                            if ("top" in b)
                                this.offset.click.top = b.top + this.margins.top;
                            if ("bottom" in b)
                                this.offset.click.top = this.helperProportions.height - b.bottom + this.margins.top
                        }, _getParentOffset: function () {
                            this.offsetParent = this.helper.offsetParent();
                            var b = this.offsetParent.offset();
                            if (this.cssPosition == "absolute" && this.scrollParent[0] != document && a.ui.contains(this.scrollParent[0],
            this.offsetParent[0])) {
                                b.left += this.scrollParent.scrollLeft();
                                b.top += this.scrollParent.scrollTop()
                            }
                            if (this.offsetParent[0] == document.body || this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() == "html" && a.browser.msie)
                                b = { top: 0, left: 0 };
                            return { top: b.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0), left: b.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0) }
                        }, _getRelativeOffset: function () {
                            if (this.cssPosition == "relative") {
                                var b = this.element.position();
                                return { top: b.top -
                    (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(), left: b.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                                }
                            } else
                                return { top: 0, left: 0 }
                        }, _cacheMargins: function () {
                            this.margins = { left: parseInt(this.element.css("marginLeft"), 10) || 0, top: parseInt(this.element.css("marginTop"), 10) || 0 }
                        }, _cacheHelperProportions: function () {
                            this.helperProportions = { width: this.helper.outerWidth(), height: this.helper.outerHeight() }
                        }, _setContainment: function () {
                            var b = this.options;
                            if (b.containment ==
            "parent")
                                b.containment = this.helper[0].parentNode;
                            if (b.containment == "document" || b.containment == "window")
                                this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, a(b.containment == "document" ? document : window).width() - this.helperProportions.width - this.margins.left, (a(b.containment == "document" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];
                            if (!/^(document|window|parent)$/.test(b.containment) &&
            b.containment.constructor != Array) {
                                var d = a(b.containment)[0];
                                if (d) {
                                    b = a(b.containment).offset();
                                    var e = a(d).css("overflow") != "hidden";
                                    this.containment = [b.left + (parseInt(a(d).css("borderLeftWidth"), 10) || 0) + (parseInt(a(d).css("paddingLeft"), 10) || 0) - this.margins.left, b.top + (parseInt(a(d).css("borderTopWidth"), 10) || 0) + (parseInt(a(d).css("paddingTop"), 10) || 0) - this.margins.top, b.left + (e ? Math.max(d.scrollWidth, d.offsetWidth) : d.offsetWidth) - (parseInt(a(d).css("borderLeftWidth"), 10) || 0) - (parseInt(a(d).css("paddingRight"),
                        10) || 0) - this.helperProportions.width - this.margins.left, b.top + (e ? Math.max(d.scrollHeight, d.offsetHeight) : d.offsetHeight) - (parseInt(a(d).css("borderTopWidth"), 10) || 0) - (parseInt(a(d).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top]
                                }
                            } else if (b.containment.constructor == Array)
                                this.containment = b.containment
                        }, _convertPositionTo: function (b, d) {
                            if (!d)
                                d = this.position;
                            b = b == "absolute" ? 1 : -1;
                            var e = this.cssPosition == "absolute" && !(this.scrollParent[0] != document && a.ui.contains(this.scrollParent[0],
            this.offsetParent[0])) ? this.offsetParent : this.scrollParent, f = /(html|body)/i.test(e[0].tagName);
                            return { top: d.top + this.offset.relative.top * b + this.offset.parent.top * b - (a.browser.safari && a.browser.version < 526 && this.cssPosition == "fixed" ? 0 : (this.cssPosition == "fixed" ? -this.scrollParent.scrollTop() : f ? 0 : e.scrollTop()) * b), left: d.left + this.offset.relative.left * b + this.offset.parent.left * b - (a.browser.safari && a.browser.version < 526 && this.cssPosition == "fixed" ? 0 : (this.cssPosition == "fixed" ? -this.scrollParent.scrollLeft() :
                f ? 0 : e.scrollLeft()) * b)
                            }
                        }, _generatePosition: function (b) {
                            var d = this.options, e = this.cssPosition == "absolute" && !(this.scrollParent[0] != document && a.ui.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, f = /(html|body)/i.test(e[0].tagName), c = b.pageX, g = b.pageY;
                            if (this.originalPosition) {
                                if (this.containment) {
                                    if (b.pageX - this.offset.click.left < this.containment[0])
                                        c = this.containment[0] + this.offset.click.left;
                                    if (b.pageY - this.offset.click.top < this.containment[1])
                                        g = this.containment[1] +
                        this.offset.click.top;
                                    if (b.pageX - this.offset.click.left > this.containment[2])
                                        c = this.containment[2] + this.offset.click.left;
                                    if (b.pageY - this.offset.click.top > this.containment[3])
                                        g = this.containment[3] + this.offset.click.top
                                }
                                if (d.grid) {
                                    g = this.originalPageY + Math.round((g - this.originalPageY) / d.grid[1]) * d.grid[1];
                                    g = this.containment ? !(g - this.offset.click.top < this.containment[1] || g - this.offset.click.top > this.containment[3]) ? g : !(g - this.offset.click.top < this.containment[1]) ? g - d.grid[1] : g + d.grid[1] : g;
                                    c = this.originalPageX +
                    Math.round((c - this.originalPageX) / d.grid[0]) * d.grid[0];
                                    c = this.containment ? !(c - this.offset.click.left < this.containment[0] || c - this.offset.click.left > this.containment[2]) ? c : !(c - this.offset.click.left < this.containment[0]) ? c - d.grid[0] : c + d.grid[0] : c
                                }
                            }
                            return { top: g - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + (a.browser.safari && a.browser.version < 526 && this.cssPosition == "fixed" ? 0 : this.cssPosition == "fixed" ? -this.scrollParent.scrollTop() : f ? 0 : e.scrollTop()), left: c - this.offset.click.left -
                this.offset.relative.left - this.offset.parent.left + (a.browser.safari && a.browser.version < 526 && this.cssPosition == "fixed" ? 0 : this.cssPosition == "fixed" ? -this.scrollParent.scrollLeft() : f ? 0 : e.scrollLeft())
                            }
                        }, _clear: function () {
                            this.helper.removeClass("ui-draggable-dragging");
                            this.helper[0] != this.element[0] && !this.cancelHelperRemoval && this.helper.remove();
                            this.helper = null;
                            this.cancelHelperRemoval = false
                        }, _trigger: function (b, d, e) {
                            e = e || this._uiHash();
                            a.ui.plugin.call(this, b, [d, e]);
                            if (b == "drag")
                                this.positionAbs =
                this._convertPositionTo("absolute");
                            return a.Widget.prototype._trigger.call(this, b, d, e)
                        }, plugins: {}, _uiHash: function () {
                            return { helper: this.helper, position: this.position, originalPosition: this.originalPosition, offset: this.positionAbs }
                        } 
                        });
                        a.extend(a.ui.draggable, { version: "1.8.4" });
                        a.ui.plugin.add("draggable", "connectToSortable", { start: function (b, d) {
                            var e = a(this).data("draggable"), f = e.options, c = a.extend({}, d, { item: e.element });
                            e.sortables = [];
                            a(f.connectToSortable).each(function () {
                                var g = a.data(this, "sortable");
                                if (g && !g.options.disabled) {
                                    e.sortables.push({ instance: g, shouldRevert: g.options.revert });
                                    g._refreshItems();
                                    g._trigger("activate", b, c)
                                }
                            })
                        }, stop: function (b, d) {
                            var e = a(this).data("draggable"), f = a.extend({}, d, { item: e.element });
                            a.each(e.sortables, function () {
                                if (this.instance.isOver) {
                                    this.instance.isOver = 0;
                                    e.cancelHelperRemoval = true;
                                    this.instance.cancelHelperRemoval = false;
                                    if (this.shouldRevert)
                                        this.instance.options.revert = true;
                                    this.instance._mouseStop(b);
                                    this.instance.options.helper = this.instance.options._helper;
                                    e.options.helper == "original" && this.instance.currentItem.css({ top: "auto", left: "auto" })
                                } else {
                                    this.instance.cancelHelperRemoval = false;
                                    this.instance._trigger("deactivate", b, f)
                                }
                            })
                        }, drag: function (b, d) {
                            var e = a(this).data("draggable"), f = this;
                            a.each(e.sortables, function () {
                                this.instance.positionAbs = e.positionAbs;
                                this.instance.helperProportions = e.helperProportions;
                                this.instance.offset.click = e.offset.click;
                                if (this.instance._intersectsWith(this.instance.containerCache)) {
                                    if (!this.instance.isOver) {
                                        this.instance.isOver =
                        1;
                                        this.instance.currentItem = a(f).clone().appendTo(this.instance.element).data("sortable-item", true);
                                        this.instance.options._helper = this.instance.options.helper;
                                        this.instance.options.helper = function () {
                                            return d.helper[0]
                                        };
                                        b.target = this.instance.currentItem[0];
                                        this.instance._mouseCapture(b, true);
                                        this.instance._mouseStart(b, true, true);
                                        this.instance.offset.click.top = e.offset.click.top;
                                        this.instance.offset.click.left = e.offset.click.left;
                                        this.instance.offset.parent.left -= e.offset.parent.left - this.instance.offset.parent.left;
                                        this.instance.offset.parent.top -= e.offset.parent.top - this.instance.offset.parent.top;
                                        e._trigger("toSortable", b);
                                        e.dropped = this.instance.element;
                                        e.currentItem = e.element;
                                        this.instance.fromOutside = e
                                    }
                                    this.instance.currentItem && this.instance._mouseDrag(b)
                                } else if (this.instance.isOver) {
                                    this.instance.isOver = 0;
                                    this.instance.cancelHelperRemoval = true;
                                    this.instance.options.revert = false;
                                    this.instance._trigger("out", b, this.instance._uiHash(this.instance));
                                    this.instance._mouseStop(b, true);
                                    this.instance.options.helper =
                    this.instance.options._helper;
                                    this.instance.currentItem.remove();
                                    this.instance.placeholder && this.instance.placeholder.remove();
                                    e._trigger("fromSortable", b);
                                    e.dropped = false
                                }
                            })
                        } 
                        });
                        a.ui.plugin.add("draggable", "cursor", { start: function () {
                            var b = a("body"), d = a(this).data("draggable").options;
                            if (b.css("cursor"))
                                d._cursor = b.css("cursor");
                            b.css("cursor", d.cursor)
                        }, stop: function () {
                            var b = a(this).data("draggable").options;
                            b._cursor && a("body").css("cursor", b._cursor)
                        } 
                        });
                        a.ui.plugin.add("draggable", "iframeFix", { start: function () {
                            var b =
            a(this).data("draggable").options;
                            a(b.iframeFix === true ? "iframe" : b.iframeFix).each(function () {
                                a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({ width: this.offsetWidth + "px", height: this.offsetHeight + "px", position: "absolute", opacity: "0.001", zIndex: 1E3 }).css(a(this).offset()).appendTo("body")
                            })
                        }, stop: function () {
                            a("div.ui-draggable-iframeFix").each(function () {
                                this.parentNode.removeChild(this)
                            })
                        } 
                        });
                        a.ui.plugin.add("draggable", "opacity", { start: function (b, d) {
                            b = a(d.helper);
                            d = a(this).data("draggable").options;
                            if (b.css("opacity"))
                                d._opacity = b.css("opacity");
                            b.css("opacity", d.opacity)
                        }, stop: function (b, d) {
                            b = a(this).data("draggable").options;
                            b._opacity && a(d.helper).css("opacity", b._opacity)
                        } 
                        });
                        a.ui.plugin.add("draggable", "scroll", { start: function () {
                            var b = a(this).data("draggable");
                            if (b.scrollParent[0] != document && b.scrollParent[0].tagName != "HTML")
                                b.overflowOffset = b.scrollParent.offset()
                        }, drag: function (b) {
                            var d = a(this).data("draggable"), e = d.options, f = false;
                            if (d.scrollParent[0] != document && d.scrollParent[0].tagName !=
            "HTML") {
                                if (!e.axis || e.axis != "x")
                                    if (d.overflowOffset.top + d.scrollParent[0].offsetHeight - b.pageY < e.scrollSensitivity)
                                        d.scrollParent[0].scrollTop = f = d.scrollParent[0].scrollTop + e.scrollSpeed;
                                    else if (b.pageY - d.overflowOffset.top < e.scrollSensitivity)
                                        d.scrollParent[0].scrollTop = f = d.scrollParent[0].scrollTop - e.scrollSpeed;
                                if (!e.axis || e.axis != "y")
                                    if (d.overflowOffset.left + d.scrollParent[0].offsetWidth - b.pageX < e.scrollSensitivity)
                                        d.scrollParent[0].scrollLeft = f = d.scrollParent[0].scrollLeft + e.scrollSpeed;
                                    else if (b.pageX -
                    d.overflowOffset.left < e.scrollSensitivity)
                                        d.scrollParent[0].scrollLeft = f = d.scrollParent[0].scrollLeft - e.scrollSpeed
                                } else {
                                    if (!e.axis || e.axis != "x")
                                        if (b.pageY - a(document).scrollTop() < e.scrollSensitivity)
                                            f = a(document).scrollTop(a(document).scrollTop() - e.scrollSpeed);
                                        else if (a(window).height() - (b.pageY - a(document).scrollTop()) < e.scrollSensitivity)
                                            f = a(document).scrollTop(a(document).scrollTop() + e.scrollSpeed);
                                    if (!e.axis || e.axis != "y")
                                        if (b.pageX - a(document).scrollLeft() < e.scrollSensitivity)
                                            f = a(document).scrollLeft(a(document).scrollLeft() -
                        e.scrollSpeed);
                                        else if (a(window).width() - (b.pageX - a(document).scrollLeft()) < e.scrollSensitivity)
                                            f = a(document).scrollLeft(a(document).scrollLeft() + e.scrollSpeed)
                                }
                                f !== false && a.ui.ddmanager && !e.dropBehaviour && a.ui.ddmanager.prepareOffsets(d, b)
                            } 
                        });
                        a.ui.plugin.add("draggable", "snap", { start: function () {
                            var b = a(this).data("draggable"), d = b.options;
                            b.snapElements = [];
                            a(d.snap.constructor != String ? d.snap.items || ":data(draggable)" : d.snap).each(function () {
                                var e = a(this), f = e.offset();
                                this != b.element[0] && b.snapElements.push({ item: this,
                                    width: e.outerWidth(), height: e.outerHeight(), top: f.top, left: f.left
                                })
                            })
                        }, drag: function (b, d) {
                            for (var e = a(this).data("draggable"), f = e.options, c = f.snapTolerance, g = d.offset.left, h = g + e.helperProportions.width, n = d.offset.top, o = n + e.helperProportions.height, p = e.snapElements.length - 1; p >= 0; p--) {
                                var m = e.snapElements[p].left, q = m + e.snapElements[p].width, v = e.snapElements[p].top, w = v + e.snapElements[p].height;
                                if (m - c < g && g < q + c && v - c < n && n < w + c || m - c < g && g < q + c && v - c < o && o < w + c || m - c < h && h < q + c && v - c < n && n < w + c || m - c < h && h < q + c && v - c < o &&
                o < w + c) {
                                    if (f.snapMode != "inner") {
                                        var s = Math.abs(v - o) <= c, k = Math.abs(w - n) <= c, D = Math.abs(m - h) <= c, M = Math.abs(q - g) <= c;
                                        if (s)
                                            d.position.top = e._convertPositionTo("relative", { top: v - e.helperProportions.height, left: 0 }).top - e.margins.top;
                                        if (k)
                                            d.position.top = e._convertPositionTo("relative", { top: w, left: 0 }).top - e.margins.top;
                                        if (D)
                                            d.position.left = e._convertPositionTo("relative", { top: 0, left: m - e.helperProportions.width }).left - e.margins.left;
                                        if (M)
                                            d.position.left = e._convertPositionTo("relative", { top: 0, left: q }).left - e.margins.left
                                    }
                                    var J =
                    s || k || D || M;
                                    if (f.snapMode != "outer") {
                                        s = Math.abs(v - n) <= c;
                                        k = Math.abs(w - o) <= c;
                                        D = Math.abs(m - g) <= c;
                                        M = Math.abs(q - h) <= c;
                                        if (s)
                                            d.position.top = e._convertPositionTo("relative", { top: v, left: 0 }).top - e.margins.top;
                                        if (k)
                                            d.position.top = e._convertPositionTo("relative", { top: w - e.helperProportions.height, left: 0 }).top - e.margins.top;
                                        if (D)
                                            d.position.left = e._convertPositionTo("relative", { top: 0, left: m }).left - e.margins.left;
                                        if (M)
                                            d.position.left = e._convertPositionTo("relative", { top: 0, left: q - e.helperProportions.width }).left - e.margins.left
                                    }
                                    if (!e.snapElements[p].snapping &&
                    (s || k || D || M || J))
                                        e.options.snap.snap && e.options.snap.snap.call(e.element, b, a.extend(e._uiHash(), { snapItem: e.snapElements[p].item }));
                                    e.snapElements[p].snapping = s || k || D || M || J
                                } else {
                                    e.snapElements[p].snapping && e.options.snap.release && e.options.snap.release.call(e.element, b, a.extend(e._uiHash(), { snapItem: e.snapElements[p].item }));
                                    e.snapElements[p].snapping = false
                                }
                            }
                        } 
                        });
                        a.ui.plugin.add("draggable", "stack", { start: function () {
                            var b = a(this).data("draggable").options;
                            b = a.makeArray(a(b.stack)).sort(function (e, f) {
                                return (parseInt(a(e).css("zIndex"),
                10) || 0) - (parseInt(a(f).css("zIndex"), 10) || 0)
                            });
                            if (b.length) {
                                var d = parseInt(b[0].style.zIndex) || 0;
                                a(b).each(function (e) {
                                    this.style.zIndex = d + e
                                });
                                this[0].style.zIndex = d + b.length
                            }
                        } 
                        });
                        a.ui.plugin.add("draggable", "zIndex", { start: function (b, d) {
                            b = a(d.helper);
                            d = a(this).data("draggable").options;
                            if (b.css("zIndex"))
                                d._zIndex = b.css("zIndex");
                            b.css("zIndex", d.zIndex)
                        }, stop: function (b, d) {
                            b = a(this).data("draggable").options;
                            b._zIndex && a(d.helper).css("zIndex", b._zIndex)
                        } 
                        })
                    })(jQuery);
                    (function (a) {
                        a.widget("ui.droppable", { widgetEventPrefix: "drop", options: { accept: "*", activeClass: false, addClasses: true, greedy: false, hoverClass: false, scope: "default", tolerance: "intersect" }, _create: function () {
                            var b = this.options, d = b.accept;
                            this.isover = 0;
                            this.isout = 1;
                            this.accept = a.isFunction(d) ? d : function (e) {
                                return e.is(d)
                            };
                            this.proportions = { width: this.element[0].offsetWidth, height: this.element[0].offsetHeight };
                            a.ui.ddmanager.droppables[b.scope] = a.ui.ddmanager.droppables[b.scope] || [];
                            a.ui.ddmanager.droppables[b.scope].push(this);
                            b.addClasses && this.element.addClass("ui-droppable")
                        }, destroy: function () {
                            for (var b = a.ui.ddmanager.droppables[this.options.scope], d = 0; d < b.length; d++)
                                b[d] == this && b.splice(d, 1);
                            this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");
                            return this
                        }, _setOption: function (b, d) {
                            if (b == "accept")
                                this.accept = a.isFunction(d) ? d : function (e) {
                                    return e.is(d)
                                };
                            a.Widget.prototype._setOption.apply(this, arguments)
                        }, _activate: function (b) {
                            var d = a.ui.ddmanager.current;
                            this.options.activeClass &&
            this.element.addClass(this.options.activeClass);
                            d && this._trigger("activate", b, this.ui(d))
                        }, _deactivate: function (b) {
                            var d = a.ui.ddmanager.current;
                            this.options.activeClass && this.element.removeClass(this.options.activeClass);
                            d && this._trigger("deactivate", b, this.ui(d))
                        }, _over: function (b) {
                            var d = a.ui.ddmanager.current;
                            if (!(!d || (d.currentItem || d.element)[0] == this.element[0]))
                                if (this.accept.call(this.element[0], d.currentItem || d.element)) {
                                    this.options.hoverClass && this.element.addClass(this.options.hoverClass);
                                    this._trigger("over", b, this.ui(d))
                                }
                        }, _out: function (b) {
                            var d = a.ui.ddmanager.current;
                            if (!(!d || (d.currentItem || d.element)[0] == this.element[0]))
                                if (this.accept.call(this.element[0], d.currentItem || d.element)) {
                                    this.options.hoverClass && this.element.removeClass(this.options.hoverClass);
                                    this._trigger("out", b, this.ui(d))
                                }
                        }, _drop: function (b, d) {
                            var e = d || a.ui.ddmanager.current;
                            if (!e || (e.currentItem || e.element)[0] == this.element[0])
                                return false;
                            var f = false;
                            this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function () {
                                var c =
                a.data(this, "droppable");
                                if (c.options.greedy && !c.options.disabled && c.options.scope == e.options.scope && c.accept.call(c.element[0], e.currentItem || e.element) && a.ui.intersect(e, a.extend(c, { offset: c.element.offset() }), c.options.tolerance)) {
                                    f = true;
                                    return false
                                }
                            });
                            if (f)
                                return false;
                            if (this.accept.call(this.element[0], e.currentItem || e.element)) {
                                this.options.activeClass && this.element.removeClass(this.options.activeClass);
                                this.options.hoverClass && this.element.removeClass(this.options.hoverClass);
                                this._trigger("drop",
                b, this.ui(e));
                                return this.element
                            }
                            return false
                        }, ui: function (b) {
                            return { draggable: b.currentItem || b.element, helper: b.helper, position: b.position, offset: b.positionAbs }
                        } 
                        });
                        a.extend(a.ui.droppable, { version: "1.8.4" });
                        a.ui.intersect = function (b, d, e) {
                            if (!d.offset)
                                return false;
                            var f = (b.positionAbs || b.position.absolute).left, c = f + b.helperProportions.width, g = (b.positionAbs || b.position.absolute).top, h = g + b.helperProportions.height, n = d.offset.left, o = n + d.proportions.width, p = d.offset.top, m = p + d.proportions.height;
                            switch (e) {
                                case "fit":
                                    return n <=
                f && c <= o && p <= g && h <= m;
                                case "intersect":
                                    return n < f + b.helperProportions.width / 2 && c - b.helperProportions.width / 2 < o && p < g + b.helperProportions.height / 2 && h - b.helperProportions.height / 2 < m;
                                case "pointer":
                                    return a.ui.isOver((b.positionAbs || b.position.absolute).top + (b.clickOffset || b.offset.click).top, (b.positionAbs || b.position.absolute).left + (b.clickOffset || b.offset.click).left, p, n, d.proportions.height, d.proportions.width);
                                case "touch":
                                    return (g >= p && g <= m || h >= p && h <= m || g < p && h > m) && (f >= n && f <= o || c >= n && c <= o || f < n && c > o);
                                default:
                                    return false
                            }
                        };
                        a.ui.ddmanager = { current: null, droppables: { "default": [] }, prepareOffsets: function (b, d) {
                            var e = a.ui.ddmanager.droppables[b.options.scope] || [], f = d ? d.type : null, c = (b.currentItem || b.element).find(":data(droppable)").andSelf(), g = 0;
                            a: for (; g < e.length; g++)
                                if (!(e[g].options.disabled || b && !e[g].accept.call(e[g].element[0], b.currentItem || b.element))) {
                                    for (var h = 0; h < c.length; h++)
                                        if (c[h] == e[g].element[0]) {
                                            e[g].proportions.height = 0;
                                            continue a
                                        }
                                    e[g].visible = e[g].element.css("display") != "none";
                                    if (e[g].visible) {
                                        e[g].offset =
                        e[g].element.offset();
                                        e[g].proportions = { width: e[g].element[0].offsetWidth, height: e[g].element[0].offsetHeight };
                                        f == "mousedown" && e[g]._activate.call(e[g], d)
                                    }
                                }
                        }, drop: function (b, d) {
                            var e = false;
                            a.each(a.ui.ddmanager.droppables[b.options.scope] || [], function () {
                                if (this.options) {
                                    if (!this.options.disabled && this.visible && a.ui.intersect(b, this, this.options.tolerance))
                                        e = e || this._drop.call(this, d);
                                    if (!this.options.disabled && this.visible && this.accept.call(this.element[0], b.currentItem || b.element)) {
                                        this.isout = 1;
                                        this.isover = 0;
                                        this._deactivate.call(this, d)
                                    }
                                }
                            });
                            return e
                        }, drag: function (b, d) {
                            b.options.refreshPositions && a.ui.ddmanager.prepareOffsets(b, d);
                            a.each(a.ui.ddmanager.droppables[b.options.scope] || [], function () {
                                if (!(this.options.disabled || this.greedyChild || !this.visible)) {
                                    var e = a.ui.intersect(b, this, this.options.tolerance);
                                    if (e = !e && this.isover == 1 ? "isout" : e && this.isover == 0 ? "isover" : null) {
                                        var f;
                                        if (this.options.greedy) {
                                            var c = this.element.parents(":data(droppable):eq(0)");
                                            if (c.length) {
                                                f = a.data(c[0], "droppable");
                                                f.greedyChild = e == "isover" ? 1 : 0
                                            }
                                        }
                                        if (f && e == "isover") {
                                            f.isover = 0;
                                            f.isout = 1;
                                            f._out.call(f, d)
                                        }
                                        this[e] = 1;
                                        this[e == "isout" ? "isover" : "isout"] = 0;
                                        this[e == "isover" ? "_over" : "_out"].call(this, d);
                                        if (f && e == "isout") {
                                            f.isout = 0;
                                            f.isover = 1;
                                            f._over.call(f, d)
                                        }
                                    }
                                }
                            })
                        } 
                        }
                    })(jQuery);
                    (function (a) {
                        a.widget("ui.resizable", a.ui.mouse, { widgetEventPrefix: "resize", options: { alsoResize: false, animate: false, animateDuration: "slow", animateEasing: "swing", aspectRatio: false, autoHide: false, containment: false, ghost: false, grid: false, handles: "e,s,se", helper: false, maxHeight: null, maxWidth: null, minHeight: 10, minWidth: 10, zIndex: 1E3 }, _create: function () {
                            var e = this, f = this.options;
                            this.element.addClass("ui-resizable");
                            a.extend(this, { _aspectRatio: !!f.aspectRatio, aspectRatio: f.aspectRatio, originalElement: this.element,
                                _proportionallyResizeElements: [], _helper: f.helper || f.ghost || f.animate ? f.helper || "ui-resizable-helper" : null
                            });
                            if (this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)) {
                                /relative/.test(this.element.css("position")) && a.browser.opera && this.element.css({ position: "relative", top: "auto", left: "auto" });
                                this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({ position: this.element.css("position"), width: this.element.outerWidth(), height: this.element.outerHeight(),
                                    top: this.element.css("top"), left: this.element.css("left")
                                }));
                                this.element = this.element.parent().data("resizable", this.element.data("resizable"));
                                this.elementIsWrapper = true;
                                this.element.css({ marginLeft: this.originalElement.css("marginLeft"), marginTop: this.originalElement.css("marginTop"), marginRight: this.originalElement.css("marginRight"), marginBottom: this.originalElement.css("marginBottom") });
                                this.originalElement.css({ marginLeft: 0, marginTop: 0, marginRight: 0, marginBottom: 0 });
                                this.originalResizeStyle =
                this.originalElement.css("resize");
                                this.originalElement.css("resize", "none");
                                this._proportionallyResizeElements.push(this.originalElement.css({ position: "static", zoom: 1, display: "block" }));
                                this.originalElement.css({ margin: this.originalElement.css("margin") });
                                this._proportionallyResize()
                            }
                            this.handles = f.handles || (!a(".ui-resizable-handle", this.element).length ? "e,s,se" : { n: ".ui-resizable-n", e: ".ui-resizable-e", s: ".ui-resizable-s", w: ".ui-resizable-w", se: ".ui-resizable-se", sw: ".ui-resizable-sw", ne: ".ui-resizable-ne",
                                nw: ".ui-resizable-nw"
                            });
                            if (this.handles.constructor == String) {
                                if (this.handles == "all")
                                    this.handles = "n,e,s,w,se,sw,ne,nw";
                                var c = this.handles.split(",");
                                this.handles = {};
                                for (var g = 0; g < c.length; g++) {
                                    var h = a.trim(c[g]), n = a('<div class="ui-resizable-handle ' + ("ui-resizable-" + h) + '"></div>');
                                    /sw|se|ne|nw/.test(h) && n.css({ zIndex: ++f.zIndex });
                                    "se" == h && n.addClass("ui-icon ui-icon-gripsmall-diagonal-se");
                                    this.handles[h] = ".ui-resizable-" + h;
                                    this.element.append(n)
                                }
                            }
                            this._renderAxis = function (o) {
                                o = o || this.element;
                                for (var p in this.handles) {
                                    if (this.handles[p].constructor ==
                    String)
                                        this.handles[p] = a(this.handles[p], this.element).show();
                                    if (this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i)) {
                                        var m = a(this.handles[p], this.element), q = 0;
                                        q = /sw|ne|nw|se|n|s/.test(p) ? m.outerHeight() : m.outerWidth();
                                        m = ["padding", /ne|nw|n/.test(p) ? "Top" : /se|sw|s/.test(p) ? "Bottom" : /^e$/.test(p) ? "Right" : "Left"].join("");
                                        o.css(m, q);
                                        this._proportionallyResize()
                                    }
                                    a(this.handles[p])
                                }
                            };
                            this._renderAxis(this.element);
                            this._handles = a(".ui-resizable-handle", this.element).disableSelection();
                            this._handles.mouseover(function () {
                                if (!e.resizing) {
                                    if (this.className)
                                        var o = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);
                                    e.axis = o && o[1] ? o[1] : "se"
                                }
                            });
                            if (f.autoHide) {
                                this._handles.hide();
                                a(this.element).addClass("ui-resizable-autohide").hover(function () {
                                    a(this).removeClass("ui-resizable-autohide");
                                    e._handles.show()
                                }, function () {
                                    if (!e.resizing) {
                                        a(this).addClass("ui-resizable-autohide");
                                        e._handles.hide()
                                    }
                                })
                            }
                            this._mouseInit()
                        }, destroy: function () {
                            this._mouseDestroy();
                            var e = function (c) {
                                a(c).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()
                            };
                            if (this.elementIsWrapper) {
                                e(this.element);
                                var f = this.element;
                                f.after(this.originalElement.css({ position: f.css("position"), width: f.outerWidth(), height: f.outerHeight(), top: f.css("top"), left: f.css("left") })).remove()
                            }
                            this.originalElement.css("resize", this.originalResizeStyle);
                            e(this.originalElement);
                            return this
                        }, _mouseCapture: function (e) {
                            var f = false, c;
                            for (c in this.handles)
                                if (a(this.handles[c])[0] == e.target)
                                    f = true;
                            return !this.options.disabled && f
                        }, _mouseStart: function (e) {
                            var f = this.options, c = this.element.position(),
            g = this.element;
                            this.resizing = true;
                            this.documentScroll = { top: a(document).scrollTop(), left: a(document).scrollLeft() };
                            if (g.is(".ui-draggable") || /absolute/.test(g.css("position")))
                                g.css({ position: "absolute", top: c.top, left: c.left });
                            a.browser.opera && /relative/.test(g.css("position")) && g.css({ position: "relative", top: "auto", left: "auto" });
                            this._renderProxy();
                            c = b(this.helper.css("left"));
                            var h = b(this.helper.css("top"));
                            if (f.containment) {
                                c += a(f.containment).scrollLeft() || 0;
                                h += a(f.containment).scrollTop() || 0
                            }
                            this.offset =
            this.helper.offset();
                            this.position = { left: c, top: h };
                            this.size = this._helper ? { width: g.outerWidth(), height: g.outerHeight()} : { width: g.width(), height: g.height() };
                            this.originalSize = this._helper ? { width: g.outerWidth(), height: g.outerHeight()} : { width: g.width(), height: g.height() };
                            this.originalPosition = { left: c, top: h };
                            this.sizeDiff = { width: g.outerWidth() - g.width(), height: g.outerHeight() - g.height() };
                            this.originalMousePosition = { left: e.pageX, top: e.pageY };
                            this.aspectRatio = typeof f.aspectRatio == "number" ? f.aspectRatio :
            this.originalSize.width / this.originalSize.height || 1;
                            f = a(".ui-resizable-" + this.axis).css("cursor");
                            a("body").css("cursor", f == "auto" ? this.axis + "-resize" : f);
                            g.addClass("ui-resizable-resizing");
                            this._propagate("start", e);
                            return true
                        }, _mouseDrag: function (e) {
                            var f = this.helper, c = this.originalMousePosition, g = this._change[this.axis];
                            if (!g)
                                return false;
                            c = g.apply(this, [e, e.pageX - c.left || 0, e.pageY - c.top || 0]);
                            if (this._aspectRatio || e.shiftKey)
                                c = this._updateRatio(c, e);
                            c = this._respectSize(c, e);
                            this._propagate("resize",
            e);
                            f.css({ top: this.position.top + "px", left: this.position.left + "px", width: this.size.width + "px", height: this.size.height + "px" });
                            !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize();
                            this._updateCache(c);
                            this._trigger("resize", e, this.ui());
                            return false
                        }, _mouseStop: function (e) {
                            this.resizing = false;
                            var f = this.options;
                            if (this._helper) {
                                var c = this._proportionallyResizeElements, g = c.length && /textarea/i.test(c[0].nodeName);
                                c = g && a.ui.hasScroll(c[0], "left") ? 0 : this.sizeDiff.height;
                                g = { width: this.size.width - (g ? 0 : this.sizeDiff.width), height: this.size.height - c };
                                c = parseInt(this.element.css("left"), 10) + (this.position.left - this.originalPosition.left) || null;
                                var h = parseInt(this.element.css("top"), 10) + (this.position.top - this.originalPosition.top) || null;
                                f.animate || this.element.css(a.extend(g, { top: h, left: c }));
                                this.helper.height(this.size.height);
                                this.helper.width(this.size.width);
                                this._helper && !f.animate && this._proportionallyResize()
                            }
                            a("body").css("cursor", "auto");
                            this.element.removeClass("ui-resizable-resizing");
                            this._propagate("stop", e);
                            this._helper && this.helper.remove();
                            return false
                        }, _updateCache: function (e) {
                            this.offset = this.helper.offset();
                            if (d(e.left))
                                this.position.left = e.left;
                            if (d(e.top))
                                this.position.top = e.top;
                            if (d(e.height))
                                this.size.height = e.height;
                            if (d(e.width))
                                this.size.width = e.width
                        }, _updateRatio: function (e) {
                            var f = this.position, c = this.size, g = this.axis;
                            if (e.height)
                                e.width = c.height * this.aspectRatio;
                            else if (e.width)
                                e.height = c.width / this.aspectRatio;
                            if (g == "sw") {
                                e.left = f.left + (c.width - e.width);
                                e.top =
                null
                            }
                            if (g == "nw") {
                                e.top = f.top + (c.height - e.height);
                                e.left = f.left + (c.width - e.width)
                            }
                            return e
                        }, _respectSize: function (e) {
                            var f = this.options, c = this.axis, g = d(e.width) && f.maxWidth && f.maxWidth < e.width, h = d(e.height) && f.maxHeight && f.maxHeight < e.height, n = d(e.width) && f.minWidth && f.minWidth > e.width, o = d(e.height) && f.minHeight && f.minHeight > e.height;
                            if (n)
                                e.width = f.minWidth;
                            if (o)
                                e.height = f.minHeight;
                            if (g)
                                e.width = f.maxWidth;
                            if (h)
                                e.height = f.maxHeight;
                            var p = this.originalPosition.left + this.originalSize.width, m = this.position.top +
            this.size.height, q = /sw|nw|w/.test(c);
                            c = /nw|ne|n/.test(c);
                            if (n && q)
                                e.left = p - f.minWidth;
                            if (g && q)
                                e.left = p - f.maxWidth;
                            if (o && c)
                                e.top = m - f.minHeight;
                            if (h && c)
                                e.top = m - f.maxHeight;
                            if ((f = !e.width && !e.height) && !e.left && e.top)
                                e.top = null;
                            else if (f && !e.top && e.left)
                                e.left = null;
                            return e
                        }, _proportionallyResize: function () {
                            if (this._proportionallyResizeElements.length)
                                for (var e = this.helper || this.element, f = 0; f < this._proportionallyResizeElements.length; f++) {
                                    var c = this._proportionallyResizeElements[f];
                                    if (!this.borderDif) {
                                        var g =
                        [c.css("borderTopWidth"), c.css("borderRightWidth"), c.css("borderBottomWidth"), c.css("borderLeftWidth")], h = [c.css("paddingTop"), c.css("paddingRight"), c.css("paddingBottom"), c.css("paddingLeft")];
                                        this.borderDif = a.map(g, function (n, o) {
                                            n = parseInt(n, 10) || 0;
                                            o = parseInt(h[o], 10) || 0;
                                            return n + o
                                        })
                                    }
                                    a.browser.msie && (a(e).is(":hidden") || a(e).parents(":hidden").length) || c.css({ height: e.height() - this.borderDif[0] - this.borderDif[2] || 0, width: e.width() - this.borderDif[1] - this.borderDif[3] || 0 })
                                }
                        }, _renderProxy: function () {
                            var e =
            this.options;
                            this.elementOffset = this.element.offset();
                            if (this._helper) {
                                this.helper = this.helper || a('<div style="overflow:hidden;"></div>');
                                var f = a.browser.msie && a.browser.version < 7, c = f ? 1 : 0;
                                f = f ? 2 : -1;
                                this.helper.addClass(this._helper).css({ width: this.element.outerWidth() + f, height: this.element.outerHeight() + f, position: "absolute", left: this.elementOffset.left - c + "px", top: this.elementOffset.top - c + "px", zIndex: ++e.zIndex });
                                this.helper.appendTo("body").disableSelection()
                            } else
                                this.helper = this.element
                        }, _change: { e: function (e,
            f) {
                            return { width: this.originalSize.width + f }
                        }, w: function (e, f) {
                            return { left: this.originalPosition.left + f, width: this.originalSize.width - f }
                        }, n: function (e, f, c) {
                            return { top: this.originalPosition.top + c, height: this.originalSize.height - c }
                        }, s: function (e, f, c) {
                            return { height: this.originalSize.height + c }
                        }, se: function (e, f, c) {
                            return a.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [e, f, c]))
                        }, sw: function (e, f, c) {
                            return a.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [e, f,
                    c]))
                        }, ne: function (e, f, c) {
                            return a.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [e, f, c]))
                        }, nw: function (e, f, c) {
                            return a.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [e, f, c]))
                        } 
                        }, _propagate: function (e, f) {
                            a.ui.plugin.call(this, e, [f, this.ui()]);
                            e != "resize" && this._trigger(e, f, this.ui())
                        }, plugins: {}, ui: function () {
                            return { originalElement: this.originalElement, element: this.element, helper: this.helper, position: this.position, size: this.size, originalSize: this.originalSize,
                                originalPosition: this.originalPosition
                            }
                        } 
                        });
                        a.extend(a.ui.resizable, { version: "1.8.4" });
                        a.ui.plugin.add("resizable", "alsoResize", { start: function () {
                            var e = a(this).data("resizable").options, f = function (c) {
                                a(c).each(function () {
                                    var g = a(this);
                                    g.data("resizable-alsoresize", { width: parseInt(g.width(), 10), height: parseInt(g.height(), 10), left: parseInt(g.css("left"), 10), top: parseInt(g.css("top"), 10), position: g.css("position") })
                                })
                            };
                            if (typeof e.alsoResize == "object" && !e.alsoResize.parentNode)
                                if (e.alsoResize.length) {
                                    e.alsoResize =
                    e.alsoResize[0];
                                    f(e.alsoResize)
                                } else
                                    a.each(e.alsoResize, function (c) {
                                        f(c)
                                    });
                            else
                                f(e.alsoResize)
                        }, resize: function (e, f) {
                            var c = a(this).data("resizable");
                            e = c.options;
                            var g = c.originalSize, h = c.originalPosition, n = { height: c.size.height - g.height || 0, width: c.size.width - g.width || 0, top: c.position.top - h.top || 0, left: c.position.left - h.left || 0 }, o = function (p, m) {
                                a(p).each(function () {
                                    var q = a(this), v = a(this).data("resizable-alsoresize"), w = {}, s = m && m.length ? m : q.parents(f.originalElement[0]).length ? ["width", "height"] : ["width",
                        "height", "top", "left"];
                                    a.each(s, function (k, D) {
                                        if ((k = (v[D] || 0) + (n[D] || 0)) && k >= 0)
                                            w[D] = k || null
                                    });
                                    if (a.browser.opera && /relative/.test(q.css("position"))) {
                                        c._revertToRelativePosition = true;
                                        q.css({ position: "absolute", top: "auto", left: "auto" })
                                    }
                                    q.css(w)
                                })
                            };
                            typeof e.alsoResize == "object" && !e.alsoResize.nodeType ? a.each(e.alsoResize, function (p, m) {
                                o(p, m)
                            }) : o(e.alsoResize)
                        }, stop: function () {
                            var e = a(this).data("resizable"), f = e.options, c = function (g) {
                                a(g).each(function () {
                                    var h = a(this);
                                    h.css({ position: h.data("resizable-alsoresize").position })
                                })
                            };
                            if (e._revertToRelativePosition) {
                                e._revertToRelativePosition = false;
                                typeof f.alsoResize == "object" && !f.alsoResize.nodeType ? a.each(f.alsoResize, function (g) {
                                    c(g)
                                }) : c(f.alsoResize)
                            }
                            a(this).removeData("resizable-alsoresize")
                        } 
                        });
                        a.ui.plugin.add("resizable", "animate", { stop: function (e) {
                            var f = a(this).data("resizable"), c = f.options, g = f._proportionallyResizeElements, h = g.length && /textarea/i.test(g[0].nodeName), n = h && a.ui.hasScroll(g[0], "left") ? 0 : f.sizeDiff.height;
                            h = { width: f.size.width - (h ? 0 : f.sizeDiff.width), height: f.size.height -
                n
                            };
                            n = parseInt(f.element.css("left"), 10) + (f.position.left - f.originalPosition.left) || null;
                            var o = parseInt(f.element.css("top"), 10) + (f.position.top - f.originalPosition.top) || null;
                            f.element.animate(a.extend(h, o && n ? { top: o, left: n} : {}), { duration: c.animateDuration, easing: c.animateEasing, step: function () {
                                var p = { width: parseInt(f.element.css("width"), 10), height: parseInt(f.element.css("height"), 10), top: parseInt(f.element.css("top"), 10), left: parseInt(f.element.css("left"), 10) };
                                g && g.length && a(g[0]).css({ width: p.width,
                                    height: p.height
                                });
                                f._updateCache(p);
                                f._propagate("resize", e)
                            } 
                            })
                        } 
                        });
                        a.ui.plugin.add("resizable", "containment", { start: function () {
                            var e = a(this).data("resizable"), f = e.element, c = e.options.containment;
                            if (f = c instanceof a ? c.get(0) : /parent/.test(c) ? f.parent().get(0) : c) {
                                e.containerElement = a(f);
                                if (/document/.test(c) || c == document) {
                                    e.containerOffset = { left: 0, top: 0 };
                                    e.containerPosition = { left: 0, top: 0 };
                                    e.parentData = { element: a(document), left: 0, top: 0, width: a(document).width(), height: a(document).height() || document.body.parentNode.scrollHeight }
                                } else {
                                    var g =
                    a(f), h = [];
                                    a(["Top", "Right", "Left", "Bottom"]).each(function (p, m) {
                                        h[p] = b(g.css("padding" + m))
                                    });
                                    e.containerOffset = g.offset();
                                    e.containerPosition = g.position();
                                    e.containerSize = { height: g.innerHeight() - h[3], width: g.innerWidth() - h[1] };
                                    c = e.containerOffset;
                                    var n = e.containerSize.height, o = e.containerSize.width;
                                    o = a.ui.hasScroll(f, "left") ? f.scrollWidth : o;
                                    n = a.ui.hasScroll(f) ? f.scrollHeight : n;
                                    e.parentData = { element: f, left: c.left, top: c.top, width: o, height: n }
                                }
                            }
                        }, resize: function (e) {
                            var f = a(this).data("resizable"), c = f.options,
            g = f.containerOffset, h = f.position;
                            e = f._aspectRatio || e.shiftKey;
                            var n = { top: 0, left: 0 }, o = f.containerElement;
                            if (o[0] != document && /static/.test(o.css("position")))
                                n = g;
                            if (h.left < (f._helper ? g.left : 0)) {
                                f.size.width += f._helper ? f.position.left - g.left : f.position.left - n.left;
                                if (e)
                                    f.size.height = f.size.width / c.aspectRatio;
                                f.position.left = c.helper ? g.left : 0
                            }
                            if (h.top < (f._helper ? g.top : 0)) {
                                f.size.height += f._helper ? f.position.top - g.top : f.position.top;
                                if (e)
                                    f.size.width = f.size.height * c.aspectRatio;
                                f.position.top = f._helper ?
                g.top : 0
                            }
                            f.offset.left = f.parentData.left + f.position.left;
                            f.offset.top = f.parentData.top + f.position.top;
                            c = Math.abs((f._helper ? f.offset.left - n.left : f.offset.left - n.left) + f.sizeDiff.width);
                            g = Math.abs((f._helper ? f.offset.top - n.top : f.offset.top - g.top) + f.sizeDiff.height);
                            h = f.containerElement.get(0) == f.element.parent().get(0);
                            n = /relative|absolute/.test(f.containerElement.css("position"));
                            if (h && n)
                                c -= f.parentData.left;
                            if (c + f.size.width >= f.parentData.width) {
                                f.size.width = f.parentData.width - c;
                                if (e)
                                    f.size.height =
                    f.size.width / f.aspectRatio
                            }
                            if (g + f.size.height >= f.parentData.height) {
                                f.size.height = f.parentData.height - g;
                                if (e)
                                    f.size.width = f.size.height * f.aspectRatio
                            }
                        }, stop: function () {
                            var e = a(this).data("resizable"), f = e.options, c = e.containerOffset, g = e.containerPosition, h = e.containerElement, n = a(e.helper), o = n.offset(), p = n.outerWidth() - e.sizeDiff.width;
                            n = n.outerHeight() - e.sizeDiff.height;
                            e._helper && !f.animate && /relative/.test(h.css("position")) && a(this).css({ left: o.left - g.left - c.left, width: p, height: n });
                            e._helper && !f.animate &&
            /static/.test(h.css("position")) && a(this).css({ left: o.left - g.left - c.left, width: p, height: n })
                        } 
                        });
                        a.ui.plugin.add("resizable", "ghost", { start: function () {
                            var e = a(this).data("resizable"), f = e.options, c = e.size;
                            e.ghost = e.originalElement.clone();
                            e.ghost.css({ opacity: 0.25, display: "block", position: "relative", height: c.height, width: c.width, margin: 0, left: 0, top: 0 }).addClass("ui-resizable-ghost").addClass(typeof f.ghost == "string" ? f.ghost : "");
                            e.ghost.appendTo(e.helper)
                        }, resize: function () {
                            var e = a(this).data("resizable");
                            e.ghost && e.ghost.css({ position: "relative", height: e.size.height, width: e.size.width })
                        }, stop: function () {
                            var e = a(this).data("resizable");
                            e.ghost && e.helper && e.helper.get(0).removeChild(e.ghost.get(0))
                        } 
                        });
                        a.ui.plugin.add("resizable", "grid", { resize: function () {
                            var e = a(this).data("resizable"), f = e.options, c = e.size, g = e.originalSize, h = e.originalPosition, n = e.axis;
                            f.grid = typeof f.grid == "number" ? [f.grid, f.grid] : f.grid;
                            var o = Math.round((c.width - g.width) / (f.grid[0] || 1)) * (f.grid[0] || 1);
                            f = Math.round((c.height - g.height) /
            (f.grid[1] || 1)) * (f.grid[1] || 1);
                            if (/^(se|s|e)$/.test(n)) {
                                e.size.width = g.width + o;
                                e.size.height = g.height + f
                            } else if (/^(ne)$/.test(n)) {
                                e.size.width = g.width + o;
                                e.size.height = g.height + f;
                                e.position.top = h.top - f
                            } else {
                                if (/^(sw)$/.test(n)) {
                                    e.size.width = g.width + o;
                                    e.size.height = g.height + f
                                } else {
                                    e.size.width = g.width + o;
                                    e.size.height = g.height + f;
                                    e.position.top = h.top - f
                                }
                                e.position.left = h.left - o
                            }
                        } 
                        });
                        var b = function (e) {
                            return parseInt(e, 10) || 0
                        }, d = function (e) {
                            return !isNaN(parseInt(e, 10))
                        }
                    })(jQuery);
                    (function (a) {
                        a.widget("ui.selectable", a.ui.mouse, { options: { appendTo: "body", autoRefresh: true, distance: 0, filter: "*", tolerance: "touch" }, _create: function () {
                            var b = this;
                            this.element.addClass("ui-selectable");
                            this.dragged = false;
                            var d;
                            this.refresh = function () {
                                d = a(b.options.filter, b.element[0]);
                                d.each(function () {
                                    var e = a(this), f = e.offset();
                                    a.data(this, "selectable-item", { element: this, $element: e, left: f.left, top: f.top, right: f.left + e.outerWidth(), bottom: f.top + e.outerHeight(), startselected: false, selected: e.hasClass("ui-selected"),
                                        selecting: e.hasClass("ui-selecting"), unselecting: e.hasClass("ui-unselecting")
                                    })
                                })
                            };
                            this.refresh();
                            this.selectees = d.addClass("ui-selectee");
                            this._mouseInit();
                            this.helper = a("<div class='ui-selectable-helper'></div>")
                        }, destroy: function () {
                            this.selectees.removeClass("ui-selectee").removeData("selectable-item");
                            this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");
                            this._mouseDestroy();
                            return this
                        }, _mouseStart: function (b) {
                            var d = this;
                            this.opos = [b.pageX,
                b.pageY];
                            if (!this.options.disabled) {
                                var e = this.options;
                                this.selectees = a(e.filter, this.element[0]);
                                this._trigger("start", b);
                                a(e.appendTo).append(this.helper);
                                this.helper.css({ left: b.clientX, top: b.clientY, width: 0, height: 0 });
                                e.autoRefresh && this.refresh();
                                this.selectees.filter(".ui-selected").each(function () {
                                    var f = a.data(this, "selectable-item");
                                    f.startselected = true;
                                    if (!b.metaKey) {
                                        f.$element.removeClass("ui-selected");
                                        f.selected = false;
                                        f.$element.addClass("ui-unselecting");
                                        f.unselecting = true;
                                        d._trigger("unselecting",
                        b, { unselecting: f.element })
                                    }
                                });
                                a(b.target).parents().andSelf().each(function () {
                                    var f = a.data(this, "selectable-item");
                                    if (f) {
                                        var c = !b.metaKey || !f.$element.hasClass("ui-selected");
                                        f.$element.removeClass(c ? "ui-unselecting" : "ui-selected").addClass(c ? "ui-selecting" : "ui-unselecting");
                                        f.unselecting = !c;
                                        f.selecting = c;
                                        (f.selected = c) ? d._trigger("selecting", b, { selecting: f.element }) : d._trigger("unselecting", b, { unselecting: f.element });
                                        return false
                                    }
                                })
                            }
                        }, _mouseDrag: function (b) {
                            var d = this;
                            this.dragged = true;
                            if (!this.options.disabled) {
                                var e =
                this.options, f = this.opos[0], c = this.opos[1], g = b.pageX, h = b.pageY;
                                if (f > g) {
                                    var n = g;
                                    g = f;
                                    f = n
                                }
                                if (c > h) {
                                    n = h;
                                    h = c;
                                    c = n
                                }
                                this.helper.css({ left: f, top: c, width: g - f, height: h - c });
                                this.selectees.each(function () {
                                    var o = a.data(this, "selectable-item");
                                    if (!(!o || o.element == d.element[0])) {
                                        var p = false;
                                        if (e.tolerance == "touch")
                                            p = !(o.left > g || o.right < f || o.top > h || o.bottom < c);
                                        else if (e.tolerance == "fit")
                                            p = o.left > f && o.right < g && o.top > c && o.bottom < h;
                                        if (p) {
                                            if (o.selected) {
                                                o.$element.removeClass("ui-selected");
                                                o.selected = false
                                            }
                                            if (o.unselecting) {
                                                o.$element.removeClass("ui-unselecting");
                                                o.unselecting = false
                                            }
                                            if (!o.selecting) {
                                                o.$element.addClass("ui-selecting");
                                                o.selecting = true;
                                                d._trigger("selecting", b, { selecting: o.element })
                                            }
                                        } else {
                                            if (o.selecting)
                                                if (b.metaKey && o.startselected) {
                                                    o.$element.removeClass("ui-selecting");
                                                    o.selecting = false;
                                                    o.$element.addClass("ui-selected");
                                                    o.selected = true
                                                } else {
                                                    o.$element.removeClass("ui-selecting");
                                                    o.selecting = false;
                                                    if (o.startselected) {
                                                        o.$element.addClass("ui-unselecting");
                                                        o.unselecting = true
                                                    }
                                                    d._trigger("unselecting", b, { unselecting: o.element })
                                                }
                                            if (o.selected)
                                                if (!b.metaKey &&
                                !o.startselected) {
                                                    o.$element.removeClass("ui-selected");
                                                    o.selected = false;
                                                    o.$element.addClass("ui-unselecting");
                                                    o.unselecting = true;
                                                    d._trigger("unselecting", b, { unselecting: o.element })
                                                }
                                        }
                                    }
                                });
                                return false
                            }
                        }, _mouseStop: function (b) {
                            var d = this;
                            this.dragged = false;
                            a(".ui-unselecting", this.element[0]).each(function () {
                                var e = a.data(this, "selectable-item");
                                e.$element.removeClass("ui-unselecting");
                                e.unselecting = false;
                                e.startselected = false;
                                d._trigger("unselected", b, { unselected: e.element })
                            });
                            a(".ui-selecting", this.element[0]).each(function () {
                                var e =
                a.data(this, "selectable-item");
                                e.$element.removeClass("ui-selecting").addClass("ui-selected");
                                e.selecting = false;
                                e.selected = true;
                                e.startselected = true;
                                d._trigger("selected", b, { selected: e.element })
                            });
                            this._trigger("stop", b);
                            this.helper.remove();
                            return false
                        } 
                        });
                        a.extend(a.ui.selectable, { version: "1.8.4" })
                    })(jQuery);
                    (function (a) {
                        a.widget("ui.sortable", a.ui.mouse, { widgetEventPrefix: "sort", options: { appendTo: "parent", axis: false, connectWith: false, containment: false, cursor: "auto", cursorAt: false, dropOnEmpty: true, forcePlaceholderSize: false, forceHelperSize: false, grid: false, handle: false, helper: "original", items: "> *", opacity: false, placeholder: false, revert: false, scroll: true, scrollSensitivity: 20, scrollSpeed: 20, scope: "default", tolerance: "intersect", zIndex: 1E3 }, _create: function () {
                            this.containerCache = {};
                            this.element.addClass("ui-sortable");
                            this.refresh();
                            this.floating = this.items.length ? /left|right/.test(this.items[0].item.css("float")) : false;
                            this.offset = this.element.offset();
                            this._mouseInit()
                        }, destroy: function () {
                            this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");
                            this._mouseDestroy();
                            for (var b = this.items.length - 1; b >= 0; b--)
                                this.items[b].item.removeData("sortable-item");
                            return this
                        }, _setOption: function (b, d) {
                            if (b === "disabled") {
                                this.options[b] = d;
                                this.widget()[d ? "addClass" : "removeClass"]("ui-sortable-disabled")
                            } else
                                a.Widget.prototype._setOption.apply(this,
                arguments)
                        }, _mouseCapture: function (b, d) {
                            if (this.reverting)
                                return false;
                            if (this.options.disabled || this.options.type == "static")
                                return false;
                            this._refreshItems(b);
                            var e = null, f = this;
                            a(b.target).parents().each(function () {
                                if (a.data(this, "sortable-item") == f) {
                                    e = a(this);
                                    return false
                                }
                            });
                            if (a.data(b.target, "sortable-item") == f)
                                e = a(b.target);
                            if (!e)
                                return false;
                            if (this.options.handle && !d) {
                                var c = false;
                                a(this.options.handle, e).find("*").andSelf().each(function () {
                                    if (this == b.target)
                                        c = true
                                });
                                if (!c)
                                    return false
                            }
                            this.currentItem =
            e;
                            this._removeCurrentsFromItems();
                            return true
                        }, _mouseStart: function (b, d, e) {
                            d = this.options;
                            this.currentContainer = this;
                            this.refreshPositions();
                            this.helper = this._createHelper(b);
                            this._cacheHelperProportions();
                            this._cacheMargins();
                            this.scrollParent = this.helper.scrollParent();
                            this.offset = this.currentItem.offset();
                            this.offset = { top: this.offset.top - this.margins.top, left: this.offset.left - this.margins.left };
                            this.helper.css("position", "absolute");
                            this.cssPosition = this.helper.css("position");
                            a.extend(this.offset,
            { click: { left: b.pageX - this.offset.left, top: b.pageY - this.offset.top }, parent: this._getParentOffset(), relative: this._getRelativeOffset() });
                            this.originalPosition = this._generatePosition(b);
                            this.originalPageX = b.pageX;
                            this.originalPageY = b.pageY;
                            d.cursorAt && this._adjustOffsetFromHelper(d.cursorAt);
                            this.domPosition = { prev: this.currentItem.prev()[0], parent: this.currentItem.parent()[0] };
                            this.helper[0] != this.currentItem[0] && this.currentItem.hide();
                            this._createPlaceholder();
                            d.containment && this._setContainment();
                            if (d.cursor) {
                                if (a("body").css("cursor"))
                                    this._storedCursor = a("body").css("cursor");
                                a("body").css("cursor", d.cursor)
                            }
                            if (d.opacity) {
                                if (this.helper.css("opacity"))
                                    this._storedOpacity = this.helper.css("opacity");
                                this.helper.css("opacity", d.opacity)
                            }
                            if (d.zIndex) {
                                if (this.helper.css("zIndex"))
                                    this._storedZIndex = this.helper.css("zIndex");
                                this.helper.css("zIndex", d.zIndex)
                            }
                            if (this.scrollParent[0] != document && this.scrollParent[0].tagName != "HTML")
                                this.overflowOffset = this.scrollParent.offset();
                            this._trigger("start",
            b, this._uiHash());
                            this._preserveHelperProportions || this._cacheHelperProportions();
                            if (!e)
                                for (e = this.containers.length - 1; e >= 0; e--)
                                    this.containers[e]._trigger("activate", b, this._uiHash(this));
                            if (a.ui.ddmanager)
                                a.ui.ddmanager.current = this;
                            a.ui.ddmanager && !d.dropBehaviour && a.ui.ddmanager.prepareOffsets(this, b);
                            this.dragging = true;
                            this.helper.addClass("ui-sortable-helper");
                            this._mouseDrag(b);
                            return true
                        }, _mouseDrag: function (b) {
                            this.position = this._generatePosition(b);
                            this.positionAbs = this._convertPositionTo("absolute");
                            if (!this.lastPositionAbs)
                                this.lastPositionAbs = this.positionAbs;
                            if (this.options.scroll) {
                                var d = this.options, e = false;
                                if (this.scrollParent[0] != document && this.scrollParent[0].tagName != "HTML") {
                                    if (this.overflowOffset.top + this.scrollParent[0].offsetHeight - b.pageY < d.scrollSensitivity)
                                        this.scrollParent[0].scrollTop = e = this.scrollParent[0].scrollTop + d.scrollSpeed;
                                    else if (b.pageY - this.overflowOffset.top < d.scrollSensitivity)
                                        this.scrollParent[0].scrollTop = e = this.scrollParent[0].scrollTop - d.scrollSpeed;
                                    if (this.overflowOffset.left +
                    this.scrollParent[0].offsetWidth - b.pageX < d.scrollSensitivity)
                                        this.scrollParent[0].scrollLeft = e = this.scrollParent[0].scrollLeft + d.scrollSpeed;
                                    else if (b.pageX - this.overflowOffset.left < d.scrollSensitivity)
                                        this.scrollParent[0].scrollLeft = e = this.scrollParent[0].scrollLeft - d.scrollSpeed
                                } else {
                                    if (b.pageY - a(document).scrollTop() < d.scrollSensitivity)
                                        e = a(document).scrollTop(a(document).scrollTop() - d.scrollSpeed);
                                    else if (a(window).height() - (b.pageY - a(document).scrollTop()) < d.scrollSensitivity)
                                        e = a(document).scrollTop(a(document).scrollTop() +
                        d.scrollSpeed);
                                    if (b.pageX - a(document).scrollLeft() < d.scrollSensitivity)
                                        e = a(document).scrollLeft(a(document).scrollLeft() - d.scrollSpeed);
                                    else if (a(window).width() - (b.pageX - a(document).scrollLeft()) < d.scrollSensitivity)
                                        e = a(document).scrollLeft(a(document).scrollLeft() + d.scrollSpeed)
                                }
                                e !== false && a.ui.ddmanager && !d.dropBehaviour && a.ui.ddmanager.prepareOffsets(this, b)
                            }
                            this.positionAbs = this._convertPositionTo("absolute");
                            if (!this.options.axis || this.options.axis != "y")
                                this.helper[0].style.left = this.position.left +
                "px";
                            if (!this.options.axis || this.options.axis != "x")
                                this.helper[0].style.top = this.position.top + "px";
                            for (d = this.items.length - 1; d >= 0; d--) {
                                e = this.items[d];
                                var f = e.item[0], c = this._intersectsWithPointer(e);
                                if (c)
                                    if (f != this.currentItem[0] && this.placeholder[c == 1 ? "next" : "prev"]()[0] != f && !a.ui.contains(this.placeholder[0], f) && (this.options.type == "semi-dynamic" ? !a.ui.contains(this.element[0], f) : 1)) {
                                        this.direction = c == 1 ? "down" : "up";
                                        if (this.options.tolerance == "pointer" || this._intersectsWithSides(e))
                                            this._rearrange(b,
                            e);
                                        else
                                            break;
                                        this._trigger("change", b, this._uiHash());
                                        break
                                    }
                            }
                            this._contactContainers(b);
                            a.ui.ddmanager && a.ui.ddmanager.drag(this, b);
                            this._trigger("sort", b, this._uiHash());
                            this.lastPositionAbs = this.positionAbs;
                            return false
                        }, _mouseStop: function (b, d) {
                            if (b) {
                                a.ui.ddmanager && !this.options.dropBehaviour && a.ui.ddmanager.drop(this, b);
                                if (this.options.revert) {
                                    var e = this;
                                    d = e.placeholder.offset();
                                    e.reverting = true;
                                    a(this.helper).animate({ left: d.left - this.offset.parent.left - e.margins.left + (this.offsetParent[0] ==
                        document.body ? 0 : this.offsetParent[0].scrollLeft), top: d.top - this.offset.parent.top - e.margins.top + (this.offsetParent[0] == document.body ? 0 : this.offsetParent[0].scrollTop)
                                    }, parseInt(this.options.revert, 10) || 500, function () {
                                        e._clear(b)
                                    })
                                } else
                                    this._clear(b, d);
                                return false
                            }
                        }, cancel: function () {
                            if (this.dragging) {
                                this._mouseUp();
                                this.options.helper == "original" ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") : this.currentItem.show();
                                for (var b = this.containers.length - 1; b >= 0; b--) {
                                    this.containers[b]._trigger("deactivate",
                    null, this._uiHash(this));
                                    if (this.containers[b].containerCache.over) {
                                        this.containers[b]._trigger("out", null, this._uiHash(this));
                                        this.containers[b].containerCache.over = 0
                                    }
                                }
                            }
                            this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
                            this.options.helper != "original" && this.helper && this.helper[0].parentNode && this.helper.remove();
                            a.extend(this, { helper: null, dragging: false, reverting: false, _noFinalSort: null });
                            this.domPosition.prev ? a(this.domPosition.prev).after(this.currentItem) :
            a(this.domPosition.parent).prepend(this.currentItem);
                            return this
                        }, serialize: function (b) {
                            var d = this._getItemsAsjQuery(b && b.connected), e = [];
                            b = b || {};
                            a(d).each(function () {
                                var f = (a(b.item || this).attr(b.attribute || "id") || "").match(b.expression || /(.+)[-=_](.+)/);
                                if (f)
                                    e.push((b.key || f[1] + "[]") + "=" + (b.key && b.expression ? f[1] : f[2]))
                            });
                            !e.length && b.key && e.push(b.key + "=");
                            return e.join("&")
                        }, toArray: function (b) {
                            var d = this._getItemsAsjQuery(b && b.connected), e = [];
                            b = b || {};
                            d.each(function () {
                                e.push(a(b.item || this).attr(b.attribute ||
                "id") || "")
                            });
                            return e
                        }, _intersectsWith: function (b) {
                            var d = this.positionAbs.left, e = d + this.helperProportions.width, f = this.positionAbs.top, c = f + this.helperProportions.height, g = b.left, h = g + b.width, n = b.top, o = n + b.height, p = this.offset.click.top, m = this.offset.click.left;
                            return this.options.tolerance == "pointer" || this.options.forcePointerForContainers || this.options.tolerance != "pointer" && this.helperProportions[this.floating ? "width" : "height"] > b[this.floating ? "width" : "height"] ? f + p > n && f + p < o && d + m > g && d + m < h : g < d + this.helperProportions.width /
            2 && e - this.helperProportions.width / 2 < h && n < f + this.helperProportions.height / 2 && c - this.helperProportions.height / 2 < o
                        }, _intersectsWithPointer: function (b) {
                            var d = a.ui.isOverAxis(this.positionAbs.top + this.offset.click.top, b.top, b.height);
                            b = a.ui.isOverAxis(this.positionAbs.left + this.offset.click.left, b.left, b.width);
                            d = d && b;
                            b = this._getDragVerticalDirection();
                            var e = this._getDragHorizontalDirection();
                            if (!d)
                                return false;
                            return this.floating ? e && e == "right" || b == "down" ? 2 : 1 : b && (b == "down" ? 2 : 1)
                        }, _intersectsWithSides: function (b) {
                            var d =
            a.ui.isOverAxis(this.positionAbs.top + this.offset.click.top, b.top + b.height / 2, b.height);
                            b = a.ui.isOverAxis(this.positionAbs.left + this.offset.click.left, b.left + b.width / 2, b.width);
                            var e = this._getDragVerticalDirection(), f = this._getDragHorizontalDirection();
                            return this.floating && f ? f == "right" && b || f == "left" && !b : e && (e == "down" && d || e == "up" && !d)
                        }, _getDragVerticalDirection: function () {
                            var b = this.positionAbs.top - this.lastPositionAbs.top;
                            return b != 0 && (b > 0 ? "down" : "up")
                        }, _getDragHorizontalDirection: function () {
                            var b =
            this.positionAbs.left - this.lastPositionAbs.left;
                            return b != 0 && (b > 0 ? "right" : "left")
                        }, refresh: function (b) {
                            this._refreshItems(b);
                            this.refreshPositions();
                            return this
                        }, _connectWith: function () {
                            var b = this.options;
                            return b.connectWith.constructor == String ? [b.connectWith] : b.connectWith
                        }, _getItemsAsjQuery: function (b) {
                            var d = [], e = [], f = this._connectWith();
                            if (f && b)
                                for (b = f.length - 1; b >= 0; b--)
                                    for (var c = a(f[b]), g = c.length - 1; g >= 0; g--) {
                                        var h = a.data(c[g], "sortable");
                                        if (h && h != this && !h.options.disabled)
                                            e.push([a.isFunction(h.options.items) ?
                                h.options.items.call(h.element) : a(h.options.items, h.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), h])
                                    }
                            e.push([a.isFunction(this.options.items) ? this.options.items.call(this.element, null, { options: this.options, item: this.currentItem }) : a(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]);
                            for (b = e.length - 1; b >= 0; b--)
                                e[b][0].each(function () {
                                    d.push(this)
                                });
                            return a(d)
                        }, _removeCurrentsFromItems: function () {
                            for (var b = this.currentItem.find(":data(sortable-item)"),
            d = 0; d < this.items.length; d++)
                                for (var e = 0; e < b.length; e++)
                                    b[e] == this.items[d].item[0] && this.items.splice(d, 1)
                        }, _refreshItems: function (b) {
                            this.items = [];
                            this.containers = [this];
                            var d = this.items, e = [[a.isFunction(this.options.items) ? this.options.items.call(this.element[0], b, { item: this.currentItem }) : a(this.options.items, this.element), this]], f = this._connectWith();
                            if (f)
                                for (var c = f.length - 1; c >= 0; c--)
                                    for (var g = a(f[c]), h = g.length - 1; h >= 0; h--) {
                                        var n = a.data(g[h], "sortable");
                                        if (n && n != this && !n.options.disabled) {
                                            e.push([a.isFunction(n.options.items) ?
                                n.options.items.call(n.element[0], b, { item: this.currentItem }) : a(n.options.items, n.element), n]);
                                            this.containers.push(n)
                                        }
                                    }
                            for (c = e.length - 1; c >= 0; c--) {
                                b = e[c][1];
                                f = e[c][0];
                                h = 0;
                                for (g = f.length; h < g; h++) {
                                    n = a(f[h]);
                                    n.data("sortable-item", b);
                                    d.push({ item: n, instance: b, width: 0, height: 0, left: 0, top: 0 })
                                }
                            }
                        }, refreshPositions: function (b) {
                            if (this.offsetParent && this.helper)
                                this.offset.parent = this._getParentOffset();
                            for (var d = this.items.length - 1; d >= 0; d--) {
                                var e = this.items[d], f = this.options.toleranceElement ? a(this.options.toleranceElement,
                e.item) : e.item;
                                if (!b) {
                                    e.width = f.outerWidth();
                                    e.height = f.outerHeight()
                                }
                                f = f.offset();
                                e.left = f.left;
                                e.top = f.top
                            }
                            if (this.options.custom && this.options.custom.refreshContainers)
                                this.options.custom.refreshContainers.call(this);
                            else
                                for (d = this.containers.length - 1; d >= 0; d--) {
                                    f = this.containers[d].element.offset();
                                    this.containers[d].containerCache.left = f.left;
                                    this.containers[d].containerCache.top = f.top;
                                    this.containers[d].containerCache.width = this.containers[d].element.outerWidth();
                                    this.containers[d].containerCache.height =
                    this.containers[d].element.outerHeight()
                                }
                            return this
                        }, _createPlaceholder: function (b) {
                            var d = b || this, e = d.options;
                            if (!e.placeholder || e.placeholder.constructor == String) {
                                var f = e.placeholder;
                                e.placeholder = { element: function () {
                                    var c = a(document.createElement(d.currentItem[0].nodeName)).addClass(f || d.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];
                                    if (!f)
                                        c.style.visibility = "hidden";
                                    return c
                                }, update: function (c, g) {
                                    if (!(f && !e.forcePlaceholderSize)) {
                                        g.height() || g.height(d.currentItem.innerHeight() -
                            parseInt(d.currentItem.css("paddingTop") || 0, 10) - parseInt(d.currentItem.css("paddingBottom") || 0, 10));
                                        g.width() || g.width(d.currentItem.innerWidth() - parseInt(d.currentItem.css("paddingLeft") || 0, 10) - parseInt(d.currentItem.css("paddingRight") || 0, 10))
                                    }
                                } 
                                }
                            }
                            d.placeholder = a(e.placeholder.element.call(d.element, d.currentItem));
                            d.currentItem.after(d.placeholder);
                            e.placeholder.update(d, d.placeholder)
                        }, _contactContainers: function (b) {
                            for (var d = null, e = null, f = this.containers.length - 1; f >= 0; f--)
                                if (!a.ui.contains(this.currentItem[0],
                this.containers[f].element[0]))
                                    if (this._intersectsWith(this.containers[f].containerCache)) {
                                        if (!(d && a.ui.contains(this.containers[f].element[0], d.element[0]))) {
                                            d = this.containers[f];
                                            e = f
                                        }
                                    } else if (this.containers[f].containerCache.over) {
                                        this.containers[f]._trigger("out", b, this._uiHash(this));
                                        this.containers[f].containerCache.over = 0
                                    }
                            if (d)
                                if (this.containers.length === 1) {
                                    this.containers[e]._trigger("over", b, this._uiHash(this));
                                    this.containers[e].containerCache.over = 1
                                } else if (this.currentContainer != this.containers[e]) {
                                    d =
                    1E4;
                                    f = null;
                                    for (var c = this.positionAbs[this.containers[e].floating ? "left" : "top"], g = this.items.length - 1; g >= 0; g--)
                                        if (a.ui.contains(this.containers[e].element[0], this.items[g].item[0])) {
                                            var h = this.items[g][this.containers[e].floating ? "left" : "top"];
                                            if (Math.abs(h - c) < d) {
                                                d = Math.abs(h - c);
                                                f = this.items[g]
                                            }
                                        }
                                    if (f || this.options.dropOnEmpty) {
                                        this.currentContainer = this.containers[e];
                                        f ? this._rearrange(b, f, null, true) : this._rearrange(b, null, this.containers[e].element, true);
                                        this._trigger("change", b, this._uiHash());
                                        this.containers[e]._trigger("change",
                        b, this._uiHash(this));
                                        this.options.placeholder.update(this.currentContainer, this.placeholder);
                                        this.containers[e]._trigger("over", b, this._uiHash(this));
                                        this.containers[e].containerCache.over = 1
                                    }
                                }
                        }, _createHelper: function (b) {
                            var d = this.options;
                            b = a.isFunction(d.helper) ? a(d.helper.apply(this.element[0], [b, this.currentItem])) : d.helper == "clone" ? this.currentItem.clone() : this.currentItem;
                            b.parents("body").length || a(d.appendTo != "parent" ? d.appendTo : this.currentItem[0].parentNode)[0].appendChild(b[0]);
                            if (b[0] ==
            this.currentItem[0])
                                this._storedCSS = { width: this.currentItem[0].style.width, height: this.currentItem[0].style.height, position: this.currentItem.css("position"), top: this.currentItem.css("top"), left: this.currentItem.css("left") };
                            if (b[0].style.width == "" || d.forceHelperSize)
                                b.width(this.currentItem.width());
                            if (b[0].style.height == "" || d.forceHelperSize)
                                b.height(this.currentItem.height());
                            return b
                        }, _adjustOffsetFromHelper: function (b) {
                            if (typeof b == "string")
                                b = b.split(" ");
                            if (a.isArray(b))
                                b = { left: +b[0], top: +b[1] ||
                    0
                                };
                            if ("left" in b)
                                this.offset.click.left = b.left + this.margins.left;
                            if ("right" in b)
                                this.offset.click.left = this.helperProportions.width - b.right + this.margins.left;
                            if ("top" in b)
                                this.offset.click.top = b.top + this.margins.top;
                            if ("bottom" in b)
                                this.offset.click.top = this.helperProportions.height - b.bottom + this.margins.top
                        }, _getParentOffset: function () {
                            this.offsetParent = this.helper.offsetParent();
                            var b = this.offsetParent.offset();
                            if (this.cssPosition == "absolute" && this.scrollParent[0] != document && a.ui.contains(this.scrollParent[0],
            this.offsetParent[0])) {
                                b.left += this.scrollParent.scrollLeft();
                                b.top += this.scrollParent.scrollTop()
                            }
                            if (this.offsetParent[0] == document.body || this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() == "html" && a.browser.msie)
                                b = { top: 0, left: 0 };
                            return { top: b.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0), left: b.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0) }
                        }, _getRelativeOffset: function () {
                            if (this.cssPosition == "relative") {
                                var b = this.currentItem.position();
                                return { top: b.top -
                    (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(), left: b.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                                }
                            } else
                                return { top: 0, left: 0 }
                        }, _cacheMargins: function () {
                            this.margins = { left: parseInt(this.currentItem.css("marginLeft"), 10) || 0, top: parseInt(this.currentItem.css("marginTop"), 10) || 0 }
                        }, _cacheHelperProportions: function () {
                            this.helperProportions = { width: this.helper.outerWidth(), height: this.helper.outerHeight() }
                        }, _setContainment: function () {
                            var b = this.options;
                            if (b.containment == "parent")
                                b.containment = this.helper[0].parentNode;
                            if (b.containment == "document" || b.containment == "window")
                                this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, a(b.containment == "document" ? document : window).width() - this.helperProportions.width - this.margins.left, (a(b.containment == "document" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];
                            if (!/^(document|window|parent)$/.test(b.containment)) {
                                var d =
                a(b.containment)[0];
                                b = a(b.containment).offset();
                                var e = a(d).css("overflow") != "hidden";
                                this.containment = [b.left + (parseInt(a(d).css("borderLeftWidth"), 10) || 0) + (parseInt(a(d).css("paddingLeft"), 10) || 0) - this.margins.left, b.top + (parseInt(a(d).css("borderTopWidth"), 10) || 0) + (parseInt(a(d).css("paddingTop"), 10) || 0) - this.margins.top, b.left + (e ? Math.max(d.scrollWidth, d.offsetWidth) : d.offsetWidth) - (parseInt(a(d).css("borderLeftWidth"), 10) || 0) - (parseInt(a(d).css("paddingRight"), 10) || 0) - this.helperProportions.width -
                    this.margins.left, b.top + (e ? Math.max(d.scrollHeight, d.offsetHeight) : d.offsetHeight) - (parseInt(a(d).css("borderTopWidth"), 10) || 0) - (parseInt(a(d).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top]
                            }
                        }, _convertPositionTo: function (b, d) {
                            if (!d)
                                d = this.position;
                            b = b == "absolute" ? 1 : -1;
                            var e = this.cssPosition == "absolute" && !(this.scrollParent[0] != document && a.ui.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, f = /(html|body)/i.test(e[0].tagName);
                            return { top: d.top +
                this.offset.relative.top * b + this.offset.parent.top * b - (a.browser.safari && this.cssPosition == "fixed" ? 0 : (this.cssPosition == "fixed" ? -this.scrollParent.scrollTop() : f ? 0 : e.scrollTop()) * b), left: d.left + this.offset.relative.left * b + this.offset.parent.left * b - (a.browser.safari && this.cssPosition == "fixed" ? 0 : (this.cssPosition == "fixed" ? -this.scrollParent.scrollLeft() : f ? 0 : e.scrollLeft()) * b)
                            }
                        }, _generatePosition: function (b) {
                            var d = this.options, e = this.cssPosition == "absolute" && !(this.scrollParent[0] != document && a.ui.contains(this.scrollParent[0],
            this.offsetParent[0])) ? this.offsetParent : this.scrollParent, f = /(html|body)/i.test(e[0].tagName);
                            if (this.cssPosition == "relative" && !(this.scrollParent[0] != document && this.scrollParent[0] != this.offsetParent[0]))
                                this.offset.relative = this._getRelativeOffset();
                            var c = b.pageX, g = b.pageY;
                            if (this.originalPosition) {
                                if (this.containment) {
                                    if (b.pageX - this.offset.click.left < this.containment[0])
                                        c = this.containment[0] + this.offset.click.left;
                                    if (b.pageY - this.offset.click.top < this.containment[1])
                                        g = this.containment[1] + this.offset.click.top;
                                    if (b.pageX - this.offset.click.left > this.containment[2])
                                        c = this.containment[2] + this.offset.click.left;
                                    if (b.pageY - this.offset.click.top > this.containment[3])
                                        g = this.containment[3] + this.offset.click.top
                                }
                                if (d.grid) {
                                    g = this.originalPageY + Math.round((g - this.originalPageY) / d.grid[1]) * d.grid[1];
                                    g = this.containment ? !(g - this.offset.click.top < this.containment[1] || g - this.offset.click.top > this.containment[3]) ? g : !(g - this.offset.click.top < this.containment[1]) ? g - d.grid[1] : g + d.grid[1] : g;
                                    c = this.originalPageX + Math.round((c -
                    this.originalPageX) / d.grid[0]) * d.grid[0];
                                    c = this.containment ? !(c - this.offset.click.left < this.containment[0] || c - this.offset.click.left > this.containment[2]) ? c : !(c - this.offset.click.left < this.containment[0]) ? c - d.grid[0] : c + d.grid[0] : c
                                }
                            }
                            return { top: g - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + (a.browser.safari && this.cssPosition == "fixed" ? 0 : this.cssPosition == "fixed" ? -this.scrollParent.scrollTop() : f ? 0 : e.scrollTop()), left: c - this.offset.click.left - this.offset.relative.left - this.offset.parent.left +
                (a.browser.safari && this.cssPosition == "fixed" ? 0 : this.cssPosition == "fixed" ? -this.scrollParent.scrollLeft() : f ? 0 : e.scrollLeft())
                            }
                        }, _rearrange: function (b, d, e, f) {
                            e ? e[0].appendChild(this.placeholder[0]) : d.item[0].parentNode.insertBefore(this.placeholder[0], this.direction == "down" ? d.item[0] : d.item[0].nextSibling);
                            this.counter = this.counter ? ++this.counter : 1;
                            var c = this, g = this.counter;
                            window.setTimeout(function () {
                                g == c.counter && c.refreshPositions(!f)
                            }, 0)
                        }, _clear: function (b, d) {
                            this.reverting = false;
                            var e = [];
                            !this._noFinalSort &&
            this.currentItem[0].parentNode && this.placeholder.before(this.currentItem);
                            this._noFinalSort = null;
                            if (this.helper[0] == this.currentItem[0]) {
                                for (var f in this._storedCSS)
                                    if (this._storedCSS[f] == "auto" || this._storedCSS[f] == "static")
                                        this._storedCSS[f] = "";
                                this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")
                            } else
                                this.currentItem.show();
                            this.fromOutside && !d && e.push(function (c) {
                                this._trigger("receive", c, this._uiHash(this.fromOutside))
                            });
                            if ((this.fromOutside || this.domPosition.prev != this.currentItem.prev().not(".ui-sortable-helper")[0] ||
            this.domPosition.parent != this.currentItem.parent()[0]) && !d)
                                e.push(function (c) {
                                    this._trigger("update", c, this._uiHash())
                                });
                            if (!a.ui.contains(this.element[0], this.currentItem[0])) {
                                d || e.push(function (c) {
                                    this._trigger("remove", c, this._uiHash())
                                });
                                for (f = this.containers.length - 1; f >= 0; f--)
                                    if (a.ui.contains(this.containers[f].element[0], this.currentItem[0]) && !d) {
                                        e.push(function (c) {
                                            return function (g) {
                                                c._trigger("receive", g, this._uiHash(this))
                                            }
                                        } .call(this, this.containers[f]));
                                        e.push(function (c) {
                                            return function (g) {
                                                c._trigger("update",
                                g, this._uiHash(this))
                                            }
                                        } .call(this, this.containers[f]))
                                    }
                            }
                            for (f = this.containers.length - 1; f >= 0; f--) {
                                d || e.push(function (c) {
                                    return function (g) {
                                        c._trigger("deactivate", g, this._uiHash(this))
                                    }
                                } .call(this, this.containers[f]));
                                if (this.containers[f].containerCache.over) {
                                    e.push(function (c) {
                                        return function (g) {
                                            c._trigger("out", g, this._uiHash(this))
                                        }
                                    } .call(this, this.containers[f]));
                                    this.containers[f].containerCache.over = 0
                                }
                            }
                            this._storedCursor && a("body").css("cursor", this._storedCursor);
                            this._storedOpacity && this.helper.css("opacity",
            this._storedOpacity);
                            if (this._storedZIndex)
                                this.helper.css("zIndex", this._storedZIndex == "auto" ? "" : this._storedZIndex);
                            this.dragging = false;
                            if (this.cancelHelperRemoval) {
                                if (!d) {
                                    this._trigger("beforeStop", b, this._uiHash());
                                    for (f = 0; f < e.length; f++)
                                        e[f].call(this, b);
                                    this._trigger("stop", b, this._uiHash())
                                }
                                return false
                            }
                            d || this._trigger("beforeStop", b, this._uiHash());
                            this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
                            this.helper[0] != this.currentItem[0] && this.helper.remove();
                            this.helper = null;
                            if (!d) {
                                for (f =
                0; f < e.length; f++)
                                    e[f].call(this, b);
                                this._trigger("stop", b, this._uiHash())
                            }
                            this.fromOutside = false;
                            return true
                        }, _trigger: function () {
                            a.Widget.prototype._trigger.apply(this, arguments) === false && this.cancel()
                        }, _uiHash: function (b) {
                            var d = b || this;
                            return { helper: d.helper, placeholder: d.placeholder || a([]), position: d.position, originalPosition: d.originalPosition, offset: d.positionAbs, item: d.currentItem, sender: b ? b.element : null }
                        } 
                        });
                        a.extend(a.ui.sortable, { version: "1.8.4" })
                    })(jQuery);
                    (function (a) {
                        a.widget("ui.accordion", { options: { active: 0, animated: "slide", autoHeight: true, clearStyle: false, collapsible: false, event: "click", fillSpace: false, header: "> li > :first-child,> :not(li):even", icons: { header: "ui-icon-triangle-1-e", headerSelected: "ui-icon-triangle-1-s" }, navigation: false, navigationFilter: function () {
                            return this.href.toLowerCase() === location.href.toLowerCase()
                        } 
                        }, _create: function () {
                            var b = this, d = b.options;
                            b.running = 0;
                            b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix");
                            b.headers = b.element.find(d.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion", function () {
                                d.disabled || a(this).addClass("ui-state-hover")
                            }).bind("mouseleave.accordion", function () {
                                d.disabled || a(this).removeClass("ui-state-hover")
                            }).bind("focus.accordion", function () {
                                d.disabled || a(this).addClass("ui-state-focus")
                            }).bind("blur.accordion", function () {
                                d.disabled || a(this).removeClass("ui-state-focus")
                            });
                            b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");
                            if (d.navigation) {
                                var e = b.element.find("a").filter(d.navigationFilter).eq(0);
                                if (e.length) {
                                    var f = e.closest(".ui-accordion-header");
                                    b.active = f.length ? f : e.closest(".ui-accordion-content").prev()
                                }
                            }
                            b.active = b._findActive(b.active || d.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all ui-corner-top");
                            b.active.next().addClass("ui-accordion-content-active");
                            b._createIcons();
                            b.resize();
                            b.element.attr("role", "tablist");
                            b.headers.attr("role", "tab").bind("keydown.accordion", function (c) {
                                return b._keydown(c)
                            }).next().attr("role",
            "tabpanel");
                            b.headers.not(b.active || "").attr({ "aria-expanded": "false", tabIndex: -1 }).next().hide();
                            b.active.length ? b.active.attr({ "aria-expanded": "true", tabIndex: 0 }) : b.headers.eq(0).attr("tabIndex", 0);
                            a.browser.safari || b.headers.find("a").attr("tabIndex", -1);
                            d.event && b.headers.bind(d.event.split(" ").join(".accordion ") + ".accordion", function (c) {
                                b._clickHandler.call(b, c, this);
                                c.preventDefault()
                            })
                        }, _createIcons: function () {
                            var b = this.options;
                            if (b.icons) {
                                a("<span></span>").addClass("ui-icon " + b.icons.header).prependTo(this.headers);
                                this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected);
                                this.element.addClass("ui-accordion-icons")
                            }
                        }, _destroyIcons: function () {
                            this.headers.children(".ui-icon").remove();
                            this.element.removeClass("ui-accordion-icons")
                        }, destroy: function () {
                            var b = this.options;
                            this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");
                            this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabIndex");
                            this.headers.find("a").removeAttr("tabIndex");
                            this._destroyIcons();
                            var d = this.headers.next().css("display", "").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");
                            if (b.autoHeight || b.fillHeight)
                                d.css("height", "");
                            return a.Widget.prototype.destroy.call(this)
                        }, _setOption: function (b, d) {
                            a.Widget.prototype._setOption.apply(this, arguments);
                            b == "active" && this.activate(d);
                            if (b == "icons") {
                                this._destroyIcons();
                                d && this._createIcons()
                            }
                            if (b == "disabled")
                                this.headers.add(this.headers.next())[d ? "addClass" : "removeClass"]("ui-accordion-disabled ui-state-disabled")
                        }, _keydown: function (b) {
                            if (!(this.options.disabled || b.altKey || b.ctrlKey)) {
                                var d = a.ui.keyCode, e = this.headers.length, f = this.headers.index(b.target), c = false;
                                switch (b.keyCode) {
                                    case d.RIGHT:
                                    case d.DOWN:
                                        c = this.headers[(f + 1) % e];
                                        break;
                                    case d.LEFT:
                                    case d.UP:
                                        c = this.headers[(f - 1 + e) % e];
                                        break;
                                    case d.SPACE:
                                    case d.ENTER:
                                        this._clickHandler({ target: b.target }, b.target);
                                        b.preventDefault()
                                }
                                if (c) {
                                    a(b.target).attr("tabIndex", -1);
                                    a(c).attr("tabIndex", 0);
                                    c.focus();
                                    return false
                                }
                                return true
                            }
                        }, resize: function () {
                            var b = this.options, d;
                            if (b.fillSpace) {
                                if (a.browser.msie) {
                                    var e = this.element.parent().css("overflow");
                                    this.element.parent().css("overflow", "hidden")
                                }
                                d = this.element.parent().height();
                                a.browser.msie && this.element.parent().css("overflow", e);
                                this.headers.each(function () {
                                    d -= a(this).outerHeight(true)
                                });
                                this.headers.next().each(function () {
                                    a(this).height(Math.max(0, d - a(this).innerHeight() +
                    a(this).height()))
                                }).css("overflow", "auto")
                            } else if (b.autoHeight) {
                                d = 0;
                                this.headers.next().each(function () {
                                    d = Math.max(d, a(this).height("").height())
                                }).height(d)
                            }
                            return this
                        }, activate: function (b) {
                            this.options.active = b;
                            b = this._findActive(b)[0];
                            this._clickHandler({ target: b }, b);
                            return this
                        }, _findActive: function (b) {
                            return b ? typeof b === "number" ? this.headers.filter(":eq(" + b + ")") : this.headers.not(this.headers.not(b)) : b === false ? a([]) : this.headers.filter(":eq(0)")
                        }, _clickHandler: function (b, d) {
                            var e = this.options;
                            if (!e.disabled)
                                if (b.target) {
                                    b = a(b.currentTarget || d);
                                    d = b[0] === this.active[0];
                                    e.active = e.collapsible && d ? false : this.headers.index(b);
                                    if (!(this.running || !e.collapsible && d)) {
                                        this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(e.icons.headerSelected).addClass(e.icons.header);
                                        if (!d) {
                                            b.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(e.icons.header).addClass(e.icons.headerSelected);
                                            b.next().addClass("ui-accordion-content-active")
                                        }
                                        g = b.next();
                                        f = this.active.next();
                                        c = { options: e, newHeader: d && e.collapsible ? a([]) : b, oldHeader: this.active, newContent: d && e.collapsible ? a([]) : g, oldContent: f };
                                        e = this.headers.index(this.active[0]) > this.headers.index(b[0]);
                                        this.active = d ? a([]) : b;
                                        this._toggle(g, f, c, d, e)
                                    }
                                } else if (e.collapsible) {
                                    this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(e.icons.headerSelected).addClass(e.icons.header);
                                    this.active.next().addClass("ui-accordion-content-active");
                                    var f = this.active.next(), c = { options: e, newHeader: a([]), oldHeader: e.active, newContent: a([]), oldContent: f }, g = this.active = a([]);
                                    this._toggle(g, f, c)
                                }
                        }, _toggle: function (b, d, e, f, c) {
                            var g = this, h = g.options;
                            g.toShow = b;
                            g.toHide = d;
                            g.data = e;
                            var n = function () {
                                if (g)
                                    return g._completed.apply(g, arguments)
                            };
                            g._trigger("changestart", null, g.data);
                            g.running = d.size() === 0 ? b.size() : d.size();
                            if (h.animated) {
                                e = {};
                                e = h.collapsible && f ? { toShow: a([]), toHide: d, complete: n,
                                    down: c, autoHeight: h.autoHeight || h.fillSpace
                                } : { toShow: b, toHide: d, complete: n, down: c, autoHeight: h.autoHeight || h.fillSpace };
                                if (!h.proxied)
                                    h.proxied = h.animated;
                                if (!h.proxiedDuration)
                                    h.proxiedDuration = h.duration;
                                h.animated = a.isFunction(h.proxied) ? h.proxied(e) : h.proxied;
                                h.duration = a.isFunction(h.proxiedDuration) ? h.proxiedDuration(e) : h.proxiedDuration;
                                f = a.ui.accordion.animations;
                                var o = h.duration, p = h.animated;
                                if (p && !f[p] && !a.easing[p])
                                    p = "slide";
                                f[p] || (f[p] = function (m) {
                                    this.slide(m, { easing: p, duration: o || 700 })
                                });
                                f[p](e)
                            } else {
                                if (h.collapsible && f)
                                    b.toggle();
                                else {
                                    d.hide();
                                    b.show()
                                }
                                n(true)
                            }
                            d.prev().attr({ "aria-expanded": "false", tabIndex: -1 }).blur();
                            b.prev().attr({ "aria-expanded": "true", tabIndex: 0 }).focus()
                        }, _completed: function (b) {
                            this.running = b ? 0 : --this.running;
                            if (!this.running) {
                                this.options.clearStyle && this.toShow.add(this.toHide).css({ height: "", overflow: "" });
                                this.toHide.removeClass("ui-accordion-content-active");
                                this._trigger("change", null, this.data)
                            }
                        } 
                        });
                        a.extend(a.ui.accordion, { version: "1.8.4", animations: { slide: function (b,
            d) {
                            b = a.extend({ easing: "swing", duration: 300 }, b, d);
                            if (b.toHide.size())
                                if (b.toShow.size()) {
                                    var e = b.toShow.css("overflow"), f = 0, c = {}, g = {}, h;
                                    d = b.toShow;
                                    h = d[0].style.width;
                                    d.width(parseInt(d.parent().width(), 10) - parseInt(d.css("paddingLeft"), 10) - parseInt(d.css("paddingRight"), 10) - (parseInt(d.css("borderLeftWidth"), 10) || 0) - (parseInt(d.css("borderRightWidth"), 10) || 0));
                                    a.each(["height", "paddingTop", "paddingBottom"], function (n, o) {
                                        g[o] = "hide";
                                        n = ("" + a.css(b.toShow[0], o)).match(/^([\d+-.]+)(.*)$/);
                                        c[o] = { value: n[1],
                                            unit: n[2] || "px"
                                        }
                                    });
                                    b.toShow.css({ height: 0, overflow: "hidden" }).show();
                                    b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(g, { step: function (n, o) {
                                        if (o.prop == "height")
                                            f = o.end - o.start === 0 ? 0 : (o.now - o.start) / (o.end - o.start);
                                        b.toShow[0].style[o.prop] = f * c[o.prop].value + c[o.prop].unit
                                    }, duration: b.duration, easing: b.easing, complete: function () {
                                        b.autoHeight || b.toShow.css("height", "");
                                        b.toShow.css({ width: h, overflow: e });
                                        b.complete()
                                    } 
                                    })
                                } else
                                    b.toHide.animate({ height: "hide", paddingTop: "hide",
                                        paddingBottom: "hide"
                                    }, b);
                            else
                                b.toShow.animate({ height: "show", paddingTop: "show", paddingBottom: "show" }, b)
                        }, bounceslide: function (b) {
                            this.slide(b, { easing: b.down ? "easeOutBounce" : "swing", duration: b.down ? 1E3 : 200 })
                        } 
                        }
                        })
                    })(jQuery);
                    (function (a) {
                        a.widget("ui.autocomplete", { options: { appendTo: "body", delay: 300, minLength: 1, position: { my: "left top", at: "left bottom", collision: "none" }, source: null }, _create: function () {
                            var b = this, d = this.element[0].ownerDocument;
                            this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off").attr({ role: "textbox", "aria-autocomplete": "list", "aria-haspopup": "true" }).bind("keydown.autocomplete", function (e) {
                                if (!b.options.disabled) {
                                    var f = a.ui.keyCode;
                                    switch (e.keyCode) {
                                        case f.PAGE_UP:
                                            b._move("previousPage",
                            e);
                                            break;
                                        case f.PAGE_DOWN:
                                            b._move("nextPage", e);
                                            break;
                                        case f.UP:
                                            b._move("previous", e);
                                            e.preventDefault();
                                            break;
                                        case f.DOWN:
                                            b._move("next", e);
                                            e.preventDefault();
                                            break;
                                        case f.ENTER:
                                        case f.NUMPAD_ENTER:
                                            b.menu.element.is(":visible") && e.preventDefault();
                                        case f.TAB:
                                            if (!b.menu.active)
                                                break;
                                            b.menu.select(e);
                                            break;
                                        case f.ESCAPE:
                                            b.element.val(b.term);
                                            b.close(e);
                                            break;
                                        default:
                                            clearTimeout(b.searching);
                                            b.searching = setTimeout(function () {
                                                if (b.term != b.element.val()) {
                                                    b.selectedItem = null;
                                                    b.search(null, e)
                                                }
                                            }, b.options.delay)
                                    }
                                }
                            }).bind("focus.autocomplete",
            function () {
                if (!b.options.disabled) {
                    b.selectedItem = null;
                    b.previous = b.element.val()
                }
            }).bind("blur.autocomplete", function (e) {
                if (!b.options.disabled) {
                    clearTimeout(b.searching);
                    b.closing = setTimeout(function () {
                        b.close(e);
                        b._change(e)
                    }, 150)
                }
            });
                            this._initSource();
                            this.response = function () {
                                return b._response.apply(b, arguments)
                            };
                            this.menu = a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo || "body", d)[0]).mousedown(function (e) {
                                var f = b.menu.element[0];
                                e.target === f && setTimeout(function () {
                                    a(document).one("mousedown",
                    function (c) {
                        c.target !== b.element[0] && c.target !== f && !a.ui.contains(f, c.target) && b.close()
                    })
                                }, 1);
                                setTimeout(function () {
                                    clearTimeout(b.closing)
                                }, 13)
                            }).menu({ focus: function (e, f) {
                                f = f.item.data("item.autocomplete");
                                false !== b._trigger("focus", null, { item: f }) && /^key/.test(e.originalEvent.type) && b.element.val(f.value)
                            }, selected: function (e, f) {
                                f = f.item.data("item.autocomplete");
                                var c = b.previous;
                                if (b.element[0] !== d.activeElement) {
                                    b.element.focus();
                                    b.previous = c
                                }
                                false !== b._trigger("select", e, { item: f }) && b.element.val(f.value);
                                b.close(e);
                                b.selectedItem = f
                            }, blur: function () {
                                b.menu.element.is(":visible") && b.element.val() !== b.term && b.element.val(b.term)
                            } 
                            }).zIndex(this.element.zIndex() + 1).css({ top: 0, left: 0 }).hide().data("menu");
                            a.fn.bgiframe && this.menu.element.bgiframe()
                        }, destroy: function () {
                            this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");
                            this.menu.element.remove();
                            a.Widget.prototype.destroy.call(this)
                        }, _setOption: function (b,
        d) {
                            a.Widget.prototype._setOption.apply(this, arguments);
                            b === "source" && this._initSource();
                            if (b === "appendTo")
                                this.menu.element.appendTo(a(d || "body", this.element[0].ownerDocument)[0])
                        }, _initSource: function () {
                            var b, d;
                            if (a.isArray(this.options.source)) {
                                b = this.options.source;
                                this.source = function (e, f) {
                                    f(a.ui.autocomplete.filter(b, e.term))
                                }
                            } else if (typeof this.options.source === "string") {
                                d = this.options.source;
                                this.source = function (e, f) {
                                    a.getJSON(d, e, f)
                                }
                            } else
                                this.source = this.options.source
                        }, search: function (b,
        d) {
                            b = b != null ? b : this.element.val();
                            if (b.length < this.options.minLength)
                                return this.close(d);
                            clearTimeout(this.closing);
                            if (this._trigger("search") !== false)
                                return this._search(b)
                        }, _search: function (b) {
                            this.term = this.element.addClass("ui-autocomplete-loading").val();
                            this.source({ term: b }, this.response)
                        }, _response: function (b) {
                            if (b.length) {
                                b = this._normalize(b);
                                this._suggest(b);
                                this._trigger("open")
                            } else
                                this.close();
                            this.element.removeClass("ui-autocomplete-loading")
                        }, close: function (b) {
                            clearTimeout(this.closing);
                            if (this.menu.element.is(":visible")) {
                                this._trigger("close", b);
                                this.menu.element.hide();
                                this.menu.deactivate()
                            }
                        }, _change: function (b) {
                            this.previous !== this.element.val() && this._trigger("change", b, { item: this.selectedItem })
                        }, _normalize: function (b) {
                            if (b.length && b[0].label && b[0].value)
                                return b;
                            return a.map(b, function (d) {
                                if (typeof d === "string")
                                    return { label: d, value: d };
                                return a.extend({ label: d.label || d.value, value: d.value || d.label }, d)
                            })
                        }, _suggest: function (b) {
                            var d = this.menu.element.empty().zIndex(this.element.zIndex() +
            1), e;
                            this._renderMenu(d, b);
                            this.menu.deactivate();
                            this.menu.refresh();
                            this.menu.element.show().position(a.extend({ of: this.element }, this.options.position));
                            b = d.width("").outerWidth();
                            e = this.element.outerWidth();
                            d.outerWidth(Math.max(b, e))
                        }, _renderMenu: function (b, d) {
                            var e = this;
                            a.each(d, function (f, c) {
                                e._renderItem(b, c)
                            })
                        }, _renderItem: function (b, d) {
                            return a("<li></li>").data("item.autocomplete", d).append(a("<a></a>").text(d.label)).appendTo(b)
                        }, _move: function (b, d) {
                            if (this.menu.element.is(":visible"))
                                if (this.menu.first() &&
                /^previous/.test(b) || this.menu.last() && /^next/.test(b)) {
                                    this.element.val(this.term);
                                    this.menu.deactivate()
                                } else
                                    this.menu[b](d);
                            else
                                this.search(null, d)
                        }, widget: function () {
                            return this.menu.element
                        } 
                        });
                        a.extend(a.ui.autocomplete, { escapeRegex: function (b) {
                            return b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&")
                        }, filter: function (b, d) {
                            var e = RegExp(a.ui.autocomplete.escapeRegex(d), "i");
                            return a.grep(b, function (f) {
                                return e.test(f.label || f.value || f)
                            })
                        } 
                        })
                    })(jQuery);
                    (function (a) {
                        a.widget("ui.menu", { _create: function () {
                            var b = this;
                            this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({ role: "listbox", "aria-activedescendant": "ui-active-menuitem" }).click(function (d) {
                                if (a(d.target).closest(".ui-menu-item a").length) {
                                    d.preventDefault();
                                    b.select(d)
                                }
                            });
                            this.refresh()
                        }, refresh: function () {
                            var b = this;
                            this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role", "menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
            -1).mouseenter(function (d) {
                b.activate(d, a(this).parent())
            }).mouseleave(function () {
                b.deactivate()
            })
                        }, activate: function (b, d) {
                            this.deactivate();
                            if (this.hasScroll()) {
                                var e = d.offset().top - this.element.offset().top, f = this.element.attr("scrollTop"), c = this.element.height();
                                if (e < 0)
                                    this.element.attr("scrollTop", f + e);
                                else
                                    e > c && this.element.attr("scrollTop", f + e - c + d.height())
                            }
                            this.active = d.eq(0).children("a").addClass("ui-state-hover").attr("id", "ui-active-menuitem").end();
                            this._trigger("focus", b, { item: d })
                        }, deactivate: function () {
                            if (this.active) {
                                this.active.children("a").removeClass("ui-state-hover").removeAttr("id");
                                this._trigger("blur");
                                this.active = null
                            }
                        }, next: function (b) {
                            this.move("next", ".ui-menu-item:first", b)
                        }, previous: function (b) {
                            this.move("prev", ".ui-menu-item:last", b)
                        }, first: function () {
                            return this.active && !this.active.prevAll(".ui-menu-item").length
                        }, last: function () {
                            return this.active && !this.active.nextAll(".ui-menu-item").length
                        }, move: function (b, d, e) {
                            if (this.active) {
                                b = this.active[b + "All"](".ui-menu-item").eq(0);
                                b.length ? this.activate(e, b) : this.activate(e, this.element.children(d))
                            } else
                                this.activate(e,
                this.element.children(d))
                        }, nextPage: function (b) {
                            if (this.hasScroll())
                                if (!this.active || this.last())
                                    this.activate(b, this.element.children(":first"));
                                else {
                                    var d = this.active.offset().top, e = this.element.height(), f = this.element.children("li").filter(function () {
                                        var c = a(this).offset().top - d - e + a(this).height();
                                        return c < 10 && c > -10
                                    });
                                    f.length || (f = this.element.children(":last"));
                                    this.activate(b, f)
                                }
                            else
                                this.activate(b, this.element.children(!this.active || this.last() ? ":first" : ":last"))
                        }, previousPage: function (b) {
                            if (this.hasScroll())
                                if (!this.active ||
                this.first())
                                    this.activate(b, this.element.children(":last"));
                                else {
                                    var d = this.active.offset().top, e = this.element.height();
                                    result = this.element.children("li").filter(function () {
                                        var f = a(this).offset().top - d + e - a(this).height();
                                        return f < 10 && f > -10
                                    });
                                    result.length || (result = this.element.children(":first"));
                                    this.activate(b, result)
                                }
                            else
                                this.activate(b, this.element.children(!this.active || this.first() ? ":last" : ":first"))
                        }, hasScroll: function () {
                            return this.element.height() < this.element.attr("scrollHeight")
                        }, select: function (b) {
                            this._trigger("selected",
            b, { item: this.active })
                        } 
                        })
                    })(jQuery);
                    (function (a) {
                        var b, d = function (f) {
                            a(":ui-button", f.target.form).each(function () {
                                var c = a(this).data("button");
                                setTimeout(function () {
                                    c.refresh()
                                }, 1)
                            })
                        }, e = function (f) {
                            var c = f.name, g = f.form, h = a([]);
                            if (c)
                                h = g ? a(g).find("[name='" + c + "']") : a("[name='" + c + "']", f.ownerDocument).filter(function () {
                                    return !this.form
                                });
                            return h
                        };
                        a.widget("ui.button", { options: { text: true, label: null, icons: { primary: null, secondary: null} }, _create: function () {
                            this.element.closest("form").unbind("reset.button").bind("reset.button", d);
                            this._determineButtonType();
                            this.hasTitle = !!this.buttonElement.attr("title");
                            var f = this, c = this.options, g = this.type === "checkbox" || this.type === "radio", h = "ui-state-hover" + (!g ? " ui-state-active" : "");
                            if (c.label === null)
                                c.label = this.buttonElement.html();
                            if (this.element.is(":disabled"))
                                c.disabled = true;
                            this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role", "button").bind("mouseenter.button", function () {
                                if (!c.disabled) {
                                    a(this).addClass("ui-state-hover");
                                    this === b && a(this).addClass("ui-state-active")
                                }
                            }).bind("mouseleave.button",
            function () {
                c.disabled || a(this).removeClass(h)
            }).bind("focus.button", function () {
                a(this).addClass("ui-state-focus")
            }).bind("blur.button", function () {
                a(this).removeClass("ui-state-focus")
            });
                            g && this.element.bind("change.button", function () {
                                f.refresh()
                            });
                            if (this.type === "checkbox")
                                this.buttonElement.bind("click.button", function () {
                                    if (c.disabled)
                                        return false;
                                    a(this).toggleClass("ui-state-active");
                                    f.buttonElement.attr("aria-pressed", f.element[0].checked)
                                });
                            else if (this.type === "radio")
                                this.buttonElement.bind("click.button",
                function () {
                    if (c.disabled)
                        return false;
                    a(this).addClass("ui-state-active");
                    f.buttonElement.attr("aria-pressed", true);
                    var n = f.element[0];
                    e(n).not(n).map(function () {
                        return a(this).button("widget")[0]
                    }).removeClass("ui-state-active").attr("aria-pressed", false)
                });
                            else {
                                this.buttonElement.bind("mousedown.button", function () {
                                    if (c.disabled)
                                        return false;
                                    a(this).addClass("ui-state-active");
                                    b = this;
                                    a(document).one("mouseup", function () {
                                        b = null
                                    })
                                }).bind("mouseup.button", function () {
                                    if (c.disabled)
                                        return false;
                                    a(this).removeClass("ui-state-active")
                                }).bind("keydown.button",
                function (n) {
                    if (c.disabled)
                        return false;
                    if (n.keyCode == a.ui.keyCode.SPACE || n.keyCode == a.ui.keyCode.ENTER)
                        a(this).addClass("ui-state-active")
                }).bind("keyup.button", function () {
                    a(this).removeClass("ui-state-active")
                });
                                this.buttonElement.is("a") && this.buttonElement.keyup(function (n) {
                                    n.keyCode === a.ui.keyCode.SPACE && a(this).click()
                                })
                            }
                            this._setOption("disabled", c.disabled)
                        }, _determineButtonType: function () {
                            this.type = this.element.is(":checkbox") ? "checkbox" : this.element.is(":radio") ? "radio" : this.element.is("input") ?
            "input" : "button";
                            if (this.type === "checkbox" || this.type === "radio") {
                                this.buttonElement = this.element.parents().last().find("label[for=" + this.element.attr("id") + "]");
                                this.element.addClass("ui-helper-hidden-accessible");
                                var f = this.element.is(":checked");
                                f && this.buttonElement.addClass("ui-state-active");
                                this.buttonElement.attr("aria-pressed", f)
                            } else
                                this.buttonElement = this.element
                        }, widget: function () {
                            return this.buttonElement
                        }, destroy: function () {
                            this.element.removeClass("ui-helper-hidden-accessible");
                            this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
                            this.hasTitle || this.buttonElement.removeAttr("title");
                            a.Widget.prototype.destroy.call(this)
                        }, _setOption: function (f, c) {
                            a.Widget.prototype._setOption.apply(this, arguments);
                            if (f === "disabled")
                                c ? this.element.attr("disabled", true) : this.element.removeAttr("disabled");
                            this._resetButton()
                        }, refresh: function () {
                            var f = this.element.is(":disabled");
                            f !== this.options.disabled && this._setOption("disabled", f);
                            if (this.type === "radio")
                                e(this.element[0]).each(function () {
                                    a(this).is(":checked") ? a(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
                    true) : a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed", false)
                                });
                            else if (this.type === "checkbox")
                                this.element.is(":checked") ? this.buttonElement.addClass("ui-state-active").attr("aria-pressed", true) : this.buttonElement.removeClass("ui-state-active").attr("aria-pressed", false)
                        }, _resetButton: function () {
                            if (this.type === "input")
                                this.options.label && this.element.val(this.options.label);
                            else {
                                var f = this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
                c = a("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(f.empty()).text(), g = this.options.icons, h = g.primary && g.secondary;
                                if (g.primary || g.secondary) {
                                    f.addClass("ui-button-text-icon" + (h ? "s" : g.primary ? "-primary" : "-secondary"));
                                    g.primary && f.prepend("<span class='ui-button-icon-primary ui-icon " + g.primary + "'></span>");
                                    g.secondary && f.append("<span class='ui-button-icon-secondary ui-icon " + g.secondary + "'></span>");
                                    if (!this.options.text) {
                                        f.addClass(h ? "ui-button-icons-only" : "ui-button-icon-only").removeClass("ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary");
                                        this.hasTitle || f.attr("title", c)
                                    }
                                } else
                                    f.addClass("ui-button-text-only")
                            }
                        } 
                        });
                        a.widget("ui.buttonset", { _create: function () {
                            this.element.addClass("ui-buttonset");
                            this._init()
                        }, _init: function () {
                            this.refresh()
                        }, _setOption: function (f, c) {
                            f === "disabled" && this.buttons.button("option", f, c);
                            a.Widget.prototype._setOption.apply(this, arguments)
                        }, refresh: function () {
                            this.buttons = this.element.find(":button, :submit, :reset, :checkbox, :radio, a, :data(button)").filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function () {
                                return a(this).button("widget")[0]
                            }).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass("ui-corner-left").end().filter(":last").addClass("ui-corner-right").end().end()
                        },
                            destroy: function () {
                                this.element.removeClass("ui-buttonset");
                                this.buttons.map(function () {
                                    return a(this).button("widget")[0]
                                }).removeClass("ui-corner-left ui-corner-right").end().button("destroy");
                                a.Widget.prototype.destroy.call(this)
                            } 
                        })
                    })(jQuery);
                    (function (a, b) {
                        a.widget("ui.dialog", { options: { autoOpen: true, buttons: {}, closeOnEscape: true, closeText: "close", dialogClass: "", draggable: true, hide: null, height: "auto", maxHeight: false, maxWidth: false, minHeight: 150, minWidth: 150, modal: false, position: { my: "center", at: "center", of: window, collision: "fit", using: function (d) {
                            var e = a(this).css(d).offset().top;
                            e < 0 && a(this).css("top", d.top - e)
                        } 
                        }, resizable: true, show: null, stack: true, title: "", width: 300, zIndex: 1E3
                        }, _create: function () {
                            this.originalTitle = this.element.attr("title");
                            if (typeof this.originalTitle !== "string")
                                this.originalTitle = "";
                            var d = this, e = d.options, f = e.title || d.originalTitle || "&#160;", c = a.ui.dialog.getTitleId(d.element), g = (d.uiDialog = a("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all " + e.dialogClass).css({ zIndex: e.zIndex }).attr("tabIndex", -1).css("outline", 0).keydown(function (o) {
                                if (e.closeOnEscape && o.keyCode && o.keyCode === a.ui.keyCode.ESCAPE) {
                                    d.close(o);
                                    o.preventDefault()
                                }
                            }).attr({ role: "dialog", "aria-labelledby": c }).mousedown(function (o) {
                                d.moveToTop(false,
                o)
                            });
                            d.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g);
                            var h = (d.uiDialogTitlebar = a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g), n = a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role", "button").hover(function () {
                                n.addClass("ui-state-hover")
                            }, function () {
                                n.removeClass("ui-state-hover")
                            }).focus(function () {
                                n.addClass("ui-state-focus")
                            }).blur(function () {
                                n.removeClass("ui-state-focus")
                            }).click(function (o) {
                                d.close(o);
                                return false
                            }).appendTo(h);
                            (d.uiDialogTitlebarCloseText = a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(e.closeText).appendTo(n);
                            a("<span></span>").addClass("ui-dialog-title").attr("id", c).html(f).prependTo(h);
                            if (a.isFunction(e.beforeclose) && !a.isFunction(e.beforeClose))
                                e.beforeClose = e.beforeclose;
                            h.find("*").add(h).disableSelection();
                            e.draggable && a.fn.draggable && d._makeDraggable();
                            e.resizable && a.fn.resizable && d._makeResizable();
                            d._createButtons(e.buttons);
                            d._isOpen = false;
                            a.fn.bgiframe &&
            g.bgiframe()
                        }, _init: function () {
                            this.options.autoOpen && this.open()
                        }, destroy: function () {
                            this.overlay && this.overlay.destroy();
                            this.uiDialog.hide();
                            this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");
                            this.uiDialog.remove();
                            this.originalTitle && this.element.attr("title", this.originalTitle);
                            return this
                        }, widget: function () {
                            return this.uiDialog
                        }, close: function (d) {
                            var e = this, f;
                            if (false !== e._trigger("beforeClose", d)) {
                                e.overlay && e.overlay.destroy();
                                e.uiDialog.unbind("keypress.ui-dialog");
                                e._isOpen = false;
                                if (e.options.hide)
                                    e.uiDialog.hide(e.options.hide, function () {
                                        e._trigger("close", d)
                                    });
                                else {
                                    e.uiDialog.hide();
                                    e._trigger("close", d)
                                }
                                a.ui.dialog.overlay.resize();
                                if (e.options.modal) {
                                    f = 0;
                                    a(".ui-dialog").each(function () {
                                        if (this !== e.uiDialog[0])
                                            f = Math.max(f, a(this).css("z-index"))
                                    });
                                    a.ui.dialog.maxZ = f
                                }
                                return e
                            }
                        }, isOpen: function () {
                            return this._isOpen
                        }, moveToTop: function (d, e) {
                            var f = this.options;
                            if (f.modal && !d || !f.stack && !f.modal)
                                return this._trigger("focus",
                e);
                            if (f.zIndex > a.ui.dialog.maxZ)
                                a.ui.dialog.maxZ = f.zIndex;
                            if (this.overlay) {
                                a.ui.dialog.maxZ += 1;
                                this.overlay.$el.css("z-index", a.ui.dialog.overlay.maxZ = a.ui.dialog.maxZ)
                            }
                            d = { scrollTop: this.element.attr("scrollTop"), scrollLeft: this.element.attr("scrollLeft") };
                            a.ui.dialog.maxZ += 1;
                            this.uiDialog.css("z-index", a.ui.dialog.maxZ);
                            this.element.attr(d);
                            this._trigger("focus", e);
                            return this
                        }, open: function () {
                            if (!this._isOpen) {
                                var d = this.options, e = this.uiDialog;
                                this.overlay = d.modal ? new a.ui.dialog.overlay(this) :
                null;
                                e.next().length && e.appendTo("body");
                                this._size();
                                this._position(d.position);
                                e.show(d.show);
                                this.moveToTop(true);
                                d.modal && e.bind("keypress.ui-dialog", function (f) {
                                    if (f.keyCode === a.ui.keyCode.TAB) {
                                        var c = a(":tabbable", this), g = c.filter(":first");
                                        c = c.filter(":last");
                                        if (f.target === c[0] && !f.shiftKey) {
                                            g.focus(1);
                                            return false
                                        } else if (f.target === g[0] && f.shiftKey) {
                                            c.focus(1);
                                            return false
                                        }
                                    }
                                });
                                a(this.element.find(":tabbable").get().concat(e.find(".ui-dialog-buttonpane :tabbable").get().concat(e.get()))).eq(0).focus();
                                this._trigger("open");
                                this._isOpen = true;
                                return this
                            }
                        }, _createButtons: function (d) {
                            var e = this, f = false, c = a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"), g = a("<div></div>").addClass("ui-dialog-buttonset").appendTo(c);
                            e.uiDialog.find(".ui-dialog-buttonpane").remove();
                            typeof d === "object" && d !== null && a.each(d, function () {
                                return !(f = true)
                            });
                            if (f) {
                                a.each(d, function (h, n) {
                                    h = a('<button type="button"></button>').text(h).click(function () {
                                        n.apply(e.element[0], arguments)
                                    }).appendTo(g);
                                    a.fn.button && h.button()
                                });
                                c.appendTo(e.uiDialog)
                            }
                        }, _makeDraggable: function () {
                            function d(h) {
                                return { position: h.position, offset: h.offset }
                            }
                            var e = this, f = e.options, c = a(document), g;
                            e.uiDialog.draggable({ cancel: ".ui-dialog-content, .ui-dialog-titlebar-close", handle: ".ui-dialog-titlebar", containment: "document", start: function (h, n) {
                                g = f.height === "auto" ? "auto" : a(this).height();
                                a(this).height(a(this).height()).addClass("ui-dialog-dragging");
                                e._trigger("dragStart", h, d(n))
                            }, drag: function (h, n) {
                                e._trigger("drag", h,
                    d(n))
                            }, stop: function (h, n) {
                                f.position = [n.position.left - c.scrollLeft(), n.position.top - c.scrollTop()];
                                a(this).removeClass("ui-dialog-dragging").height(g);
                                e._trigger("dragStop", h, d(n));
                                a.ui.dialog.overlay.resize()
                            } 
                            })
                        }, _makeResizable: function (d) {
                            function e(h) {
                                return { originalPosition: h.originalPosition, originalSize: h.originalSize, position: h.position, size: h.size }
                            }
                            d = d === b ? this.options.resizable : d;
                            var f = this, c = f.options, g = f.uiDialog.css("position");
                            d = typeof d === "string" ? d : "n,e,s,w,se,sw,ne,nw";
                            f.uiDialog.resizable({ cancel: ".ui-dialog-content",
                                containment: "document", alsoResize: f.element, maxWidth: c.maxWidth, maxHeight: c.maxHeight, minWidth: c.minWidth, minHeight: f._minHeight(), handles: d, start: function (h, n) {
                                    a(this).addClass("ui-dialog-resizing");
                                    f._trigger("resizeStart", h, e(n))
                                }, resize: function (h, n) {
                                    f._trigger("resize", h, e(n))
                                }, stop: function (h, n) {
                                    a(this).removeClass("ui-dialog-resizing");
                                    c.height = a(this).height();
                                    c.width = a(this).width();
                                    f._trigger("resizeStop", h, e(n));
                                    a.ui.dialog.overlay.resize()
                                } 
                            }).css("position", g).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")
                        },
                            _minHeight: function () {
                                var d = this.options;
                                return d.height === "auto" ? d.minHeight : Math.min(d.minHeight, d.height)
                            }, _position: function (d) {
                                var e = [], f = [0, 0], c;
                                if (d) {
                                    if (typeof d === "string" || typeof d === "object" && "0" in d) {
                                        e = d.split ? d.split(" ") : [d[0], d[1]];
                                        if (e.length === 1)
                                            e[1] = e[0];
                                        a.each(["left", "top"], function (g, h) {
                                            if (+e[g] === e[g]) {
                                                f[g] = e[g];
                                                e[g] = h
                                            }
                                        });
                                        d = { my: e.join(" "), at: e.join(" "), offset: f.join(" ") }
                                    }
                                    d = a.extend({}, a.ui.dialog.prototype.options.position, d)
                                } else
                                    d = a.ui.dialog.prototype.options.position;
                                (c =
            this.uiDialog.is(":visible")) || this.uiDialog.show();
                                this.uiDialog.css({ top: 0, left: 0 }).position(d);
                                c || this.uiDialog.hide()
                            }, _setOption: function (d, e) {
                                var f = this.uiDialog, c = f.is(":data(resizable)"), g = false;
                                switch (d) {
                                    case "beforeclose":
                                        d = "beforeClose";
                                        break;
                                    case "buttons":
                                        this._createButtons(e);
                                        g = true;
                                        break;
                                    case "closeText":
                                        this.uiDialogTitlebarCloseText.text("" + e);
                                        break;
                                    case "dialogClass":
                                        f.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all " + e);
                                        break;
                                    case "disabled":
                                        e ? f.addClass("ui-dialog-disabled") : f.removeClass("ui-dialog-disabled");
                                        break;
                                    case "draggable":
                                        e ? this._makeDraggable() : f.draggable("destroy");
                                        break;
                                    case "height":
                                        g = true;
                                        break;
                                    case "maxHeight":
                                        c && f.resizable("option", "maxHeight", e);
                                        g = true;
                                        break;
                                    case "maxWidth":
                                        c && f.resizable("option", "maxWidth", e);
                                        g = true;
                                        break;
                                    case "minHeight":
                                        c && f.resizable("option", "minHeight", e);
                                        g = true;
                                        break;
                                    case "minWidth":
                                        c && f.resizable("option", "minWidth", e);
                                        g = true;
                                        break;
                                    case "position":
                                        this._position(e);
                                        break;
                                    case "resizable":
                                        c && !e && f.resizable("destroy");
                                        c && typeof e === "string" && f.resizable("option", "handles", e);
                                        !c && e !== false && this._makeResizable(e);
                                        break;
                                    case "title":
                                        a(".ui-dialog-title", this.uiDialogTitlebar).html("" + (e || "&#160;"));
                                        break;
                                    case "width":
                                        g = true
                                }
                                a.Widget.prototype._setOption.apply(this, arguments);
                                g && this._size()
                            }, _size: function () {
                                var d = this.options, e;
                                this.element.css({ width: "auto", minHeight: 0, height: 0 });
                                if (d.minWidth > d.width)
                                    d.width = d.minWidth;
                                e = this.uiDialog.css({ height: "auto", width: d.width }).height();
                                this.element.css(d.height === "auto" ? { minHeight: Math.max(d.minHeight - e, 0), height: "auto"} : { minHeight: 0, height: Math.max(d.height - e, 0) }).show();
                                this.uiDialog.is(":data(resizable)") && this.uiDialog.resizable("option", "minHeight", this._minHeight())
                            } 
                        });
                        a.extend(a.ui.dialog, { version: "1.8.4", uuid: 0, maxZ: 0, getTitleId: function (d) {
                            d = d.attr("id");
                            if (!d) {
                                this.uuid += 1;
                                d = this.uuid
                            }
                            return "ui-dialog-title-" + d
                        }, overlay: function (d) {
                            this.$el = a.ui.dialog.overlay.create(d)
                        } 
                        });
                        a.extend(a.ui.dialog.overlay, { instances: [], oldInstances: [],
                            maxZ: 0, events: a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","), function (d) {
                                return d + ".dialog-overlay"
                            }).join(" "), create: function (d) {
                                if (this.instances.length === 0) {
                                    setTimeout(function () {
                                        a.ui.dialog.overlay.instances.length && a(document).bind(a.ui.dialog.overlay.events, function (f) {
                                            return a(f.target).zIndex() >= a.ui.dialog.overlay.maxZ
                                        })
                                    }, 1);
                                    a(document).bind("keydown.dialog-overlay", function (f) {
                                        if (d.options.closeOnEscape && f.keyCode && f.keyCode === a.ui.keyCode.ESCAPE) {
                                            d.close(f);
                                            f.preventDefault()
                                        }
                                    });
                                    a(window).bind("resize.dialog-overlay", a.ui.dialog.overlay.resize)
                                }
                                var e = (this.oldInstances.pop() || a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({ width: this.width(), height: this.height() });
                                a.fn.bgiframe && e.bgiframe();
                                this.instances.push(e);
                                return e
                            }, destroy: function (d) {
                                this.oldInstances.push(this.instances.splice(a.inArray(d, this.instances), 1)[0]);
                                this.instances.length === 0 && a([document, window]).unbind(".dialog-overlay");
                                d.remove();
                                var e = 0;
                                a.each(this.instances, function () {
                                    e =
                Math.max(e, this.css("z-index"))
                                });
                                this.maxZ = e
                            }, height: function () {
                                var d, e;
                                if (a.browser.msie && a.browser.version < 7) {
                                    d = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight);
                                    e = Math.max(document.documentElement.offsetHeight, document.body.offsetHeight);
                                    return d < e ? a(window).height() + "px" : d + "px"
                                } else
                                    return a(document).height() + "px"
                            }, width: function () {
                                var d, e;
                                if (a.browser.msie && a.browser.version < 7) {
                                    d = Math.max(document.documentElement.scrollWidth, document.body.scrollWidth);
                                    e = Math.max(document.documentElement.offsetWidth,
                document.body.offsetWidth);
                                    return d < e ? a(window).width() + "px" : d + "px"
                                } else
                                    return a(document).width() + "px"
                            }, resize: function () {
                                var d = a([]);
                                a.each(a.ui.dialog.overlay.instances, function () {
                                    d = d.add(this)
                                });
                                d.css({ width: 0, height: 0 }).css({ width: a.ui.dialog.overlay.width(), height: a.ui.dialog.overlay.height() })
                            } 
                        });
                        a.extend(a.ui.dialog.overlay.prototype, { destroy: function () {
                            a.ui.dialog.overlay.destroy(this.$el)
                        } 
                        })
                    })(jQuery);
                    (function (a) {
                        a.widget("ui.slider", a.ui.mouse, { widgetEventPrefix: "slide", options: { animate: false, distance: 0, max: 100, min: 0, orientation: "horizontal", range: false, step: 1, value: 0, values: null }, _create: function () {
                            var b = this, d = this.options;
                            this._mouseSliding = this._keySliding = false;
                            this._animateOff = true;
                            this._handleIndex = null;
                            this._detectOrientation();
                            this._mouseInit();
                            this.element.addClass("ui-slider ui-slider-" + this.orientation + " ui-widget ui-widget-content ui-corner-all");
                            d.disabled && this.element.addClass("ui-slider-disabled ui-disabled");
                            this.range = a([]);
                            if (d.range) {
                                if (d.range === true) {
                                    this.range = a("<div></div>");
                                    if (!d.values)
                                        d.values = [this._valueMin(), this._valueMin()];
                                    if (d.values.length && d.values.length !== 2)
                                        d.values = [d.values[0], d.values[0]]
                                } else
                                    this.range = a("<div></div>");
                                this.range.appendTo(this.element).addClass("ui-slider-range");
                                if (d.range === "min" || d.range === "max")
                                    this.range.addClass("ui-slider-range-" + d.range);
                                this.range.addClass("ui-widget-header")
                            }
                            a(".ui-slider-handle", this.element).length === 0 && a("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");
                            if (d.values && d.values.length)
                                for (; a(".ui-slider-handle", this.element).length < d.values.length; )
                                    a("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");
                            this.handles = a(".ui-slider-handle", this.element).addClass("ui-state-default ui-corner-all");
                            this.handle = this.handles.eq(0);
                            this.handles.add(this.range).filter("a").click(function (e) {
                                e.preventDefault()
                            }).hover(function () {
                                d.disabled || a(this).addClass("ui-state-hover")
                            }, function () {
                                a(this).removeClass("ui-state-hover")
                            }).focus(function () {
                                if (d.disabled)
                                    a(this).blur();
                                else {
                                    a(".ui-slider .ui-state-focus").removeClass("ui-state-focus");
                                    a(this).addClass("ui-state-focus")
                                }
                            }).blur(function () {
                                a(this).removeClass("ui-state-focus")
                            });
                            this.handles.each(function (e) {
                                a(this).data("index.ui-slider-handle", e)
                            });
                            this.handles.keydown(function (e) {
                                var f = true, c = a(this).data("index.ui-slider-handle"), g, h, n;
                                if (!b.options.disabled) {
                                    switch (e.keyCode) {
                                        case a.ui.keyCode.HOME:
                                        case a.ui.keyCode.END:
                                        case a.ui.keyCode.PAGE_UP:
                                        case a.ui.keyCode.PAGE_DOWN:
                                        case a.ui.keyCode.UP:
                                        case a.ui.keyCode.RIGHT:
                                        case a.ui.keyCode.DOWN:
                                        case a.ui.keyCode.LEFT:
                                            f =
                            false;
                                            if (!b._keySliding) {
                                                b._keySliding = true;
                                                a(this).addClass("ui-state-active");
                                                g = b._start(e, c);
                                                if (g === false)
                                                    return
                                            }
                                    }
                                    n = b.options.step;
                                    g = b.options.values && b.options.values.length ? h = b.values(c) : h = b.value();
                                    switch (e.keyCode) {
                                        case a.ui.keyCode.HOME:
                                            h = b._valueMin();
                                            break;
                                        case a.ui.keyCode.END:
                                            h = b._valueMax();
                                            break;
                                        case a.ui.keyCode.PAGE_UP:
                                            h = b._trimAlignValue(g + (b._valueMax() - b._valueMin()) / 5);
                                            break;
                                        case a.ui.keyCode.PAGE_DOWN:
                                            h = b._trimAlignValue(g - (b._valueMax() - b._valueMin()) / 5);
                                            break;
                                        case a.ui.keyCode.UP:
                                        case a.ui.keyCode.RIGHT:
                                            if (g ===
                            b._valueMax())
                                                return;
                                            h = b._trimAlignValue(g + n);
                                            break;
                                        case a.ui.keyCode.DOWN:
                                        case a.ui.keyCode.LEFT:
                                            if (g === b._valueMin())
                                                return;
                                            h = b._trimAlignValue(g - n)
                                    }
                                    b._slide(e, c, h);
                                    return f
                                }
                            }).keyup(function (e) {
                                var f = a(this).data("index.ui-slider-handle");
                                if (b._keySliding) {
                                    b._keySliding = false;
                                    b._stop(e, f);
                                    b._change(e, f);
                                    a(this).removeClass("ui-state-active")
                                }
                            });
                            this._refreshValue();
                            this._animateOff = false
                        }, destroy: function () {
                            this.handles.remove();
                            this.range.remove();
                            this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");
                            this._mouseDestroy();
                            return this
                        }, _mouseCapture: function (b) {
                            var d = this.options, e, f, c, g, h;
                            if (d.disabled)
                                return false;
                            this.elementSize = { width: this.element.outerWidth(), height: this.element.outerHeight() };
                            this.elementOffset = this.element.offset();
                            e = this._normValueFromMouse({ x: b.pageX, y: b.pageY });
                            f = this._valueMax() - this._valueMin() + 1;
                            g = this;
                            this.handles.each(function (n) {
                                var o = Math.abs(e - g.values(n));
                                if (f > o) {
                                    f = o;
                                    c = a(this);
                                    h = n
                                }
                            });
                            if (d.range === true && this.values(1) === d.min) {
                                h += 1;
                                c = a(this.handles[h])
                            }
                            if (this._start(b,
            h) === false)
                                return false;
                            this._mouseSliding = true;
                            g._handleIndex = h;
                            c.addClass("ui-state-active").focus();
                            d = c.offset();
                            this._clickOffset = !a(b.target).parents().andSelf().is(".ui-slider-handle") ? { left: 0, top: 0} : { left: b.pageX - d.left - c.width() / 2, top: b.pageY - d.top - c.height() / 2 - (parseInt(c.css("borderTopWidth"), 10) || 0) - (parseInt(c.css("borderBottomWidth"), 10) || 0) + (parseInt(c.css("marginTop"), 10) || 0) };
                            this._slide(b, h, e);
                            return this._animateOff = true
                        }, _mouseStart: function () {
                            return true
                        }, _mouseDrag: function (b) {
                            var d =
            this._normValueFromMouse({ x: b.pageX, y: b.pageY });
                            this._slide(b, this._handleIndex, d);
                            return false
                        }, _mouseStop: function (b) {
                            this.handles.removeClass("ui-state-active");
                            this._mouseSliding = false;
                            this._stop(b, this._handleIndex);
                            this._change(b, this._handleIndex);
                            this._clickOffset = this._handleIndex = null;
                            return this._animateOff = false
                        }, _detectOrientation: function () {
                            this.orientation = this.options.orientation === "vertical" ? "vertical" : "horizontal"
                        }, _normValueFromMouse: function (b) {
                            var d;
                            if (this.orientation === "horizontal") {
                                d =
                this.elementSize.width;
                                b = b.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)
                            } else {
                                d = this.elementSize.height;
                                b = b.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)
                            }
                            d = b / d;
                            if (d > 1)
                                d = 1;
                            if (d < 0)
                                d = 0;
                            if (this.orientation === "vertical")
                                d = 1 - d;
                            b = this._valueMax() - this._valueMin();
                            return this._trimAlignValue(this._valueMin() + d * b)
                        }, _start: function (b, d) {
                            var e = { handle: this.handles[d], value: this.value() };
                            if (this.options.values && this.options.values.length) {
                                e.value = this.values(d);
                                e.values = this.values()
                            }
                            return this._trigger("start", b, e)
                        }, _slide: function (b, d, e) {
                            var f;
                            if (this.options.values && this.options.values.length) {
                                f = this.values(d ? 0 : 1);
                                if (this.options.values.length === 2 && this.options.range === true && (d === 0 && e > f || d === 1 && e < f))
                                    e = f;
                                if (e !== this.values(d)) {
                                    f = this.values();
                                    f[d] = e;
                                    b = this._trigger("slide", b, { handle: this.handles[d], value: e, values: f });
                                    this.values(d ? 0 : 1);
                                    b !== false && this.values(d, e, true)
                                }
                            } else if (e !== this.value()) {
                                b = this._trigger("slide", b, { handle: this.handles[d], value: e });
                                b !== false && this.value(e)
                            }
                        }, _stop: function (b, d) {
                            var e = { handle: this.handles[d], value: this.value() };
                            if (this.options.values && this.options.values.length) {
                                e.value = this.values(d);
                                e.values = this.values()
                            }
                            this._trigger("stop", b, e)
                        }, _change: function (b, d) {
                            if (!this._keySliding && !this._mouseSliding) {
                                var e = { handle: this.handles[d], value: this.value() };
                                if (this.options.values && this.options.values.length) {
                                    e.value = this.values(d);
                                    e.values = this.values()
                                }
                                this._trigger("change", b, e)
                            }
                        }, value: function (b) {
                            if (arguments.length) {
                                this.options.value =
                this._trimAlignValue(b);
                                this._refreshValue();
                                this._change(null, 0)
                            }
                            return this._value()
                        }, values: function (b, d) {
                            var e, f, c;
                            if (arguments.length > 1) {
                                this.options.values[b] = this._trimAlignValue(d);
                                this._refreshValue();
                                this._change(null, b)
                            }
                            if (arguments.length)
                                if (a.isArray(arguments[0])) {
                                    e = this.options.values;
                                    f = arguments[0];
                                    for (c = 0; c < e.length; c += 1) {
                                        e[c] = this._trimAlignValue(f[c]);
                                        this._change(null, c)
                                    }
                                    this._refreshValue()
                                } else
                                    return this.options.values && this.options.values.length ? this._values(b) : this.value();
                            else
                                return this._values()
                        }, _setOption: function (b, d) {
                            var e, f = 0;
                            if (a.isArray(this.options.values))
                                f = this.options.values.length;
                            a.Widget.prototype._setOption.apply(this, arguments);
                            switch (b) {
                                case "disabled":
                                    if (d) {
                                        this.handles.filter(".ui-state-focus").blur();
                                        this.handles.removeClass("ui-state-hover");
                                        this.handles.attr("disabled", "disabled");
                                        this.element.addClass("ui-disabled")
                                    } else {
                                        this.handles.removeAttr("disabled");
                                        this.element.removeClass("ui-disabled")
                                    }
                                    break;
                                case "orientation":
                                    this._detectOrientation();
                                    this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation);
                                    this._refreshValue();
                                    break;
                                case "value":
                                    this._animateOff = true;
                                    this._refreshValue();
                                    this._change(null, 0);
                                    this._animateOff = false;
                                    break;
                                case "values":
                                    this._animateOff = true;
                                    this._refreshValue();
                                    for (e = 0; e < f; e += 1)
                                        this._change(null, e);
                                    this._animateOff = false
                            }
                        }, _value: function () {
                            return this._trimAlignValue(this.options.value)
                        }, _values: function (b) {
                            var d, e;
                            if (arguments.length) {
                                d = this.options.values[b];
                                return this._trimAlignValue(d)
                            } else {
                                d = this.options.values.slice();
                                for (e = 0; e < d.length; e += 1)
                                    d[e] = this._trimAlignValue(d[e]);
                                return d
                            }
                        }, _trimAlignValue: function (b) {
                            if (b < this._valueMin())
                                return this._valueMin();
                            if (b > this._valueMax())
                                return this._valueMax();
                            var d = this.options.step > 0 ? this.options.step : 1, e = b % d;
                            b -= e;
                            if (Math.abs(e) * 2 >= d)
                                b += e > 0 ? d : -d;
                            return parseFloat(b.toFixed(5))
                        }, _valueMin: function () {
                            return this.options.min
                        }, _valueMax: function () {
                            return this.options.max
                        }, _refreshValue: function () {
                            var b = this.options.range,
            d = this.options, e = this, f = !this._animateOff ? d.animate : false, c, g = {}, h, n, o, p;
                            if (this.options.values && this.options.values.length)
                                this.handles.each(function (m) {
                                    c = (e.values(m) - e._valueMin()) / (e._valueMax() - e._valueMin()) * 100;
                                    g[e.orientation === "horizontal" ? "left" : "bottom"] = c + "%";
                                    a(this).stop(1, 1)[f ? "animate" : "css"](g, d.animate);
                                    if (e.options.range === true)
                                        if (e.orientation === "horizontal") {
                                            if (m === 0)
                                                e.range.stop(1, 1)[f ? "animate" : "css"]({ left: c + "%" }, d.animate);
                                            if (m === 1)
                                                e.range[f ? "animate" : "css"]({ width: c - h + "%" },
                                { queue: false, duration: d.animate })
                                        } else {
                                            if (m === 0)
                                                e.range.stop(1, 1)[f ? "animate" : "css"]({ bottom: c + "%" }, d.animate);
                                            if (m === 1)
                                                e.range[f ? "animate" : "css"]({ height: c - h + "%" }, { queue: false, duration: d.animate })
                                        }
                                    h = c
                                });
                            else {
                                n = this.value();
                                o = this._valueMin();
                                p = this._valueMax();
                                c = p !== o ? (n - o) / (p - o) * 100 : 0;
                                g[e.orientation === "horizontal" ? "left" : "bottom"] = c + "%";
                                this.handle.stop(1, 1)[f ? "animate" : "css"](g, d.animate);
                                if (b === "min" && this.orientation === "horizontal")
                                    this.range.stop(1, 1)[f ? "animate" : "css"]({ width: c + "%" }, d.animate);
                                if (b === "max" && this.orientation === "horizontal")
                                    this.range[f ? "animate" : "css"]({ width: 100 - c + "%" }, { queue: false, duration: d.animate });
                                if (b === "min" && this.orientation === "vertical")
                                    this.range.stop(1, 1)[f ? "animate" : "css"]({ height: c + "%" }, d.animate);
                                if (b === "max" && this.orientation === "vertical")
                                    this.range[f ? "animate" : "css"]({ height: 100 - c + "%" }, { queue: false, duration: d.animate })
                            }
                        } 
                        });
                        a.extend(a.ui.slider, { version: "1.8.4" })
                    })(jQuery);
                    (function (a, b) {
                        var d = 0, e = 0;
                        a.widget("ui.tabs", { options: { add: null, ajaxOptions: null, cache: false, cookie: null, collapsible: false, disable: null, disabled: [], enable: null, event: "click", fx: null, idPrefix: "ui-tabs-", load: null, panelTemplate: "<div></div>", remove: null, select: null, show: null, spinner: "<em>Loading&#8230;</em>", tabTemplate: "<li><a href='#{href}'><span>#{label}</span></a></li>" }, _create: function () {
                            this._tabify(true)
                        }, _setOption: function (f, c) {
                            if (f == "selected")
                                this.options.collapsible && c == this.options.selected ||
                this.select(c);
                            else {
                                this.options[f] = c;
                                this._tabify()
                            }
                        }, _tabId: function (f) {
                            return f.title && f.title.replace(/\s/g, "_").replace(/[^A-Za-z0-9\-_:\.]/g, "") || this.options.idPrefix + ++d
                        }, _sanitizeSelector: function (f) {
                            return f.replace(/:/g, "\\:")
                        }, _cookie: function () {
                            var f = this.cookie || (this.cookie = this.options.cookie.name || "ui-tabs-" + ++e);
                            return a.cookie.apply(null, [f].concat(a.makeArray(arguments)))
                        }, _ui: function (f, c) {
                            return { tab: f, panel: c, index: this.anchors.index(f) }
                        }, _cleanup: function () {
                            this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function () {
                                var f =
                a(this);
                                f.html(f.data("label.tabs")).removeData("label.tabs")
                            })
                        }, _tabify: function (f) {
                            function c(s, k) {
                                s.css("display", "");
                                !a.support.opacity && k.opacity && s[0].style.removeAttribute("filter")
                            }
                            var g = this, h = this.options, n = /^#.+/;
                            this.list = this.element.find("ol,ul").eq(0);
                            this.lis = a("li:has(a[href])", this.list);
                            this.anchors = this.lis.map(function () {
                                return a("a", this)[0]
                            });
                            this.panels = a([]);
                            this.anchors.each(function (s, k) {
                                var D = a(k).attr("href"), M = D.split("#")[0], J;
                                if (M && (M === location.toString().split("#")[0] ||
                (J = a("base")[0]) && M === J.href)) {
                                    D = k.hash;
                                    k.href = D
                                }
                                if (n.test(D))
                                    g.panels = g.panels.add(g._sanitizeSelector(D));
                                else if (D !== "#") {
                                    a.data(k, "href.tabs", D);
                                    a.data(k, "load.tabs", D.replace(/#.*$/, ""));
                                    D = g._tabId(k);
                                    k.href = "#" + D;
                                    k = a("#" + D);
                                    if (!k.length) {
                                        k = a(h.panelTemplate).attr("id", D).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(g.panels[s - 1] || g.list);
                                        k.data("destroy.tabs", true)
                                    }
                                    g.panels = g.panels.add(k)
                                } else
                                    h.disabled.push(s)
                            });
                            if (f) {
                                this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");
                                this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");
                                this.lis.addClass("ui-state-default ui-corner-top");
                                this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");
                                if (h.selected === b) {
                                    location.hash && this.anchors.each(function (s, k) {
                                        if (k.hash == location.hash) {
                                            h.selected = s;
                                            return false
                                        }
                                    });
                                    if (typeof h.selected !== "number" && h.cookie)
                                        h.selected = parseInt(g._cookie(), 10);
                                    if (typeof h.selected !== "number" && this.lis.filter(".ui-tabs-selected").length)
                                        h.selected =
                        this.lis.index(this.lis.filter(".ui-tabs-selected"));
                                    h.selected = h.selected || (this.lis.length ? 0 : -1)
                                } else if (h.selected === null)
                                    h.selected = -1;
                                h.selected = h.selected >= 0 && this.anchors[h.selected] || h.selected < 0 ? h.selected : 0;
                                h.disabled = a.unique(h.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"), function (s) {
                                    return g.lis.index(s)
                                }))).sort();
                                a.inArray(h.selected, h.disabled) != -1 && h.disabled.splice(a.inArray(h.selected, h.disabled), 1);
                                this.panels.addClass("ui-tabs-hide");
                                this.lis.removeClass("ui-tabs-selected ui-state-active");
                                if (h.selected >= 0 && this.anchors.length) {
                                    this.panels.eq(h.selected).removeClass("ui-tabs-hide");
                                    this.lis.eq(h.selected).addClass("ui-tabs-selected ui-state-active");
                                    g.element.queue("tabs", function () {
                                        g._trigger("show", null, g._ui(g.anchors[h.selected], g.panels[h.selected]))
                                    });
                                    this.load(h.selected)
                                }
                                a(window).bind("unload", function () {
                                    g.lis.add(g.anchors).unbind(".tabs");
                                    g.lis = g.anchors = g.panels = null
                                })
                            } else
                                h.selected = this.lis.index(this.lis.filter(".ui-tabs-selected"));
                            this.element[h.collapsible ? "addClass" :
            "removeClass"]("ui-tabs-collapsible");
                            h.cookie && this._cookie(h.selected, h.cookie);
                            f = 0;
                            for (var o; o = this.lis[f]; f++)
                                a(o)[a.inArray(f, h.disabled) != -1 && !a(o).hasClass("ui-tabs-selected") ? "addClass" : "removeClass"]("ui-state-disabled");
                            h.cache === false && this.anchors.removeData("cache.tabs");
                            this.lis.add(this.anchors).unbind(".tabs");
                            if (h.event !== "mouseover") {
                                var p = function (s, k) {
                                    k.is(":not(.ui-state-disabled)") && k.addClass("ui-state-" + s)
                                };
                                this.lis.bind("mouseover.tabs", function () {
                                    p("hover", a(this))
                                });
                                this.lis.bind("mouseout.tabs",
                function () {
                    a(this).removeClass("ui-state-hover")
                });
                                this.anchors.bind("focus.tabs", function () {
                                    p("focus", a(this).closest("li"))
                                });
                                this.anchors.bind("blur.tabs", function () {
                                    a(this).closest("li").removeClass("ui-state-focus")
                                })
                            }
                            var m, q;
                            if (h.fx)
                                if (a.isArray(h.fx)) {
                                    m = h.fx[0];
                                    q = h.fx[1]
                                } else
                                    m = q = h.fx;
                            var v = q ? function (s, k) {
                                a(s).closest("li").addClass("ui-tabs-selected ui-state-active");
                                k.hide().removeClass("ui-tabs-hide").animate(q, q.duration || "normal", function () {
                                    c(k, q);
                                    g._trigger("show", null, g._ui(s, k[0]))
                                })
                            } :
            function (s, k) {
                a(s).closest("li").addClass("ui-tabs-selected ui-state-active");
                k.removeClass("ui-tabs-hide");
                g._trigger("show", null, g._ui(s, k[0]))
            }, w = m ? function (s, k) {
                k.animate(m, m.duration || "normal", function () {
                    g.lis.removeClass("ui-tabs-selected ui-state-active");
                    k.addClass("ui-tabs-hide");
                    c(k, m);
                    g.element.dequeue("tabs")
                })
            } : function (s, k) {
                g.lis.removeClass("ui-tabs-selected ui-state-active");
                k.addClass("ui-tabs-hide");
                g.element.dequeue("tabs")
            };
                            this.anchors.bind(h.event + ".tabs", function () {
                                var s = this,
                k = a(s).closest("li"), D = g.panels.filter(":not(.ui-tabs-hide)"), M = a(g._sanitizeSelector(s.hash));
                                if (k.hasClass("ui-tabs-selected") && !h.collapsible || k.hasClass("ui-state-disabled") || k.hasClass("ui-state-processing") || g._trigger("select", null, g._ui(this, M[0])) === false) {
                                    this.blur();
                                    return false
                                }
                                h.selected = g.anchors.index(this);
                                g.abort();
                                if (h.collapsible)
                                    if (k.hasClass("ui-tabs-selected")) {
                                        h.selected = -1;
                                        h.cookie && g._cookie(h.selected, h.cookie);
                                        g.element.queue("tabs", function () {
                                            w(s, D)
                                        }).dequeue("tabs");
                                        this.blur();
                                        return false
                                    } else if (!D.length) {
                                        h.cookie && g._cookie(h.selected, h.cookie);
                                        g.element.queue("tabs", function () {
                                            v(s, M)
                                        });
                                        g.load(g.anchors.index(this));
                                        this.blur();
                                        return false
                                    }
                                h.cookie && g._cookie(h.selected, h.cookie);
                                if (M.length) {
                                    D.length && g.element.queue("tabs", function () {
                                        w(s, D)
                                    });
                                    g.element.queue("tabs", function () {
                                        v(s, M)
                                    });
                                    g.load(g.anchors.index(this))
                                } else
                                    throw "jQuery UI Tabs: Mismatching fragment identifier.";
                                a.browser.msie && this.blur()
                            });
                            this.anchors.bind("click.tabs", function () {
                                return false
                            })
                        }, _getIndex: function (f) {
                            if (typeof f ==
            "string")
                                f = this.anchors.index(this.anchors.filter("[href$=" + f + "]"));
                            return f
                        }, destroy: function () {
                            var f = this.options;
                            this.abort();
                            this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");
                            this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");
                            this.anchors.each(function () {
                                var c = a.data(this, "href.tabs");
                                if (c)
                                    this.href = c;
                                var g = a(this).unbind(".tabs");
                                a.each(["href", "load", "cache"],
                function (h, n) {
                    g.removeData(n + ".tabs")
                })
                            });
                            this.lis.unbind(".tabs").add(this.panels).each(function () {
                                a.data(this, "destroy.tabs") ? a(this).remove() : a(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")
                            });
                            f.cookie && this._cookie(null, f.cookie);
                            return this
                        }, add: function (f, c, g) {
                            if (g === b)
                                g = this.anchors.length;
                            var h = this, n = this.options;
                            c = a(n.tabTemplate.replace(/#\{href\}/g,
            f).replace(/#\{label\}/g, c));
                            f = !f.indexOf("#") ? f.replace("#", "") : this._tabId(a("a", c)[0]);
                            c.addClass("ui-state-default ui-corner-top").data("destroy.tabs", true);
                            var o = a("#" + f);
                            o.length || (o = a(n.panelTemplate).attr("id", f).data("destroy.tabs", true));
                            o.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");
                            if (g >= this.lis.length) {
                                c.appendTo(this.list);
                                o.appendTo(this.list[0].parentNode)
                            } else {
                                c.insertBefore(this.lis[g]);
                                o.insertBefore(this.panels[g])
                            }
                            n.disabled = a.map(n.disabled, function (p) {
                                return p >=
                g ? ++p : p
                            });
                            this._tabify();
                            if (this.anchors.length == 1) {
                                n.selected = 0;
                                c.addClass("ui-tabs-selected ui-state-active");
                                o.removeClass("ui-tabs-hide");
                                this.element.queue("tabs", function () {
                                    h._trigger("show", null, h._ui(h.anchors[0], h.panels[0]))
                                });
                                this.load(0)
                            }
                            this._trigger("add", null, this._ui(this.anchors[g], this.panels[g]));
                            return this
                        }, remove: function (f) {
                            f = this._getIndex(f);
                            var c = this.options, g = this.lis.eq(f).remove(), h = this.panels.eq(f).remove();
                            if (g.hasClass("ui-tabs-selected") && this.anchors.length > 1)
                                this.select(f +
                (f + 1 < this.anchors.length ? 1 : -1));
                            c.disabled = a.map(a.grep(c.disabled, function (n) {
                                return n != f
                            }), function (n) {
                                return n >= f ? --n : n
                            });
                            this._tabify();
                            this._trigger("remove", null, this._ui(g.find("a")[0], h[0]));
                            return this
                        }, enable: function (f) {
                            f = this._getIndex(f);
                            var c = this.options;
                            if (a.inArray(f, c.disabled) != -1) {
                                this.lis.eq(f).removeClass("ui-state-disabled");
                                c.disabled = a.grep(c.disabled, function (g) {
                                    return g != f
                                });
                                this._trigger("enable", null, this._ui(this.anchors[f], this.panels[f]));
                                return this
                            }
                        }, disable: function (f) {
                            f =
            this._getIndex(f);
                            var c = this.options;
                            if (f != c.selected) {
                                this.lis.eq(f).addClass("ui-state-disabled");
                                c.disabled.push(f);
                                c.disabled.sort();
                                this._trigger("disable", null, this._ui(this.anchors[f], this.panels[f]))
                            }
                            return this
                        }, select: function (f) {
                            f = this._getIndex(f);
                            if (f == -1)
                                if (this.options.collapsible && this.options.selected != -1)
                                    f = this.options.selected;
                                else
                                    return this;
                            this.anchors.eq(f).trigger(this.options.event + ".tabs");
                            return this
                        }, load: function (f) {
                            f = this._getIndex(f);
                            var c = this, g = this.options, h = this.anchors.eq(f)[0],
            n = a.data(h, "load.tabs");
                            this.abort();
                            if (!n || this.element.queue("tabs").length !== 0 && a.data(h, "cache.tabs"))
                                this.element.dequeue("tabs");
                            else {
                                this.lis.eq(f).addClass("ui-state-processing");
                                if (g.spinner) {
                                    var o = a("span", h);
                                    o.data("label.tabs", o.html()).html(g.spinner)
                                }
                                this.xhr = a.ajax(a.extend({}, g.ajaxOptions, { url: n, success: function (p, m) {
                                    a(c._sanitizeSelector(h.hash)).html(p);
                                    c._cleanup();
                                    g.cache && a.data(h, "cache.tabs", true);
                                    c._trigger("load", null, c._ui(c.anchors[f], c.panels[f]));
                                    try {
                                        g.ajaxOptions.success(p,
                            m)
                                    } catch (q) {
                                    }
                                }, error: function (p, m) {
                                    c._cleanup();
                                    c._trigger("load", null, c._ui(c.anchors[f], c.panels[f]));
                                    try {
                                        g.ajaxOptions.error(p, m, f, h)
                                    } catch (q) {
                                    }
                                } 
                                }));
                                c.element.dequeue("tabs");
                                return this
                            }
                        }, abort: function () {
                            this.element.queue([]);
                            this.panels.stop(false, true);
                            this.element.queue("tabs", this.element.queue("tabs").splice(-2, 2));
                            if (this.xhr) {
                                this.xhr.abort();
                                delete this.xhr
                            }
                            this._cleanup();
                            return this
                        }, url: function (f, c) {
                            this.anchors.eq(f).removeData("cache.tabs").data("load.tabs", c);
                            return this
                        }, length: function () {
                            return this.anchors.length
                        } 
                        });
                        a.extend(a.ui.tabs, { version: "1.8.4" });
                        a.extend(a.ui.tabs.prototype, { rotation: null, rotate: function (f, c) {
                            var g = this, h = this.options, n = g._rotate || (g._rotate = function (o) {
                                clearTimeout(g.rotation);
                                g.rotation = setTimeout(function () {
                                    var p = h.selected;
                                    g.select(++p < g.anchors.length ? p : 0)
                                }, f);
                                o && o.stopPropagation()
                            });
                            c = g._unrotate || (g._unrotate = !c ? function (o) {
                                o.clientX && g.rotate(null)
                            } : function () {
                                t = h.selected;
                                n()
                            });
                            if (f) {
                                this.element.bind("tabsshow", n);
                                this.anchors.bind(h.event + ".tabs", c);
                                n()
                            } else {
                                clearTimeout(g.rotation);
                                this.element.unbind("tabsshow", n);
                                this.anchors.unbind(h.event + ".tabs", c);
                                delete this._rotate;
                                delete this._unrotate
                            }
                            return this
                        } 
                        })
                    })(jQuery);
                    (function (a, b) {
                        function d() {
                            this.debug = false;
                            this._curInst = null;
                            this._keyEvent = false;
                            this._disabledInputs = [];
                            this._inDialog = this._datepickerShowing = false;
                            this._mainDivId = "ui-datepicker-div";
                            this._inlineClass = "ui-datepicker-inline";
                            this._appendClass = "ui-datepicker-append";
                            this._triggerClass = "ui-datepicker-trigger";
                            this._dialogClass = "ui-datepicker-dialog";
                            this._disableClass = "ui-datepicker-disabled";
                            this._unselectableClass = "ui-datepicker-unselectable";
                            this._currentClass = "ui-datepicker-current-day";
                            this._dayOverClass =
        "ui-datepicker-days-cell-over";
                            this.regional = [];
                            this.regional[""] = { closeText: "Done", prevText: "Prev", nextText: "Next", currentText: "Today", monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], dayNamesMin: ["Su",
                "Mo", "Tu", "We", "Th", "Fr", "Sa"], weekHeader: "Wk", dateFormat: "mm/dd/yy", firstDay: 0, isRTL: false, showMonthAfterYear: false, yearSuffix: ""
                            };
                            this._defaults = { showOn: "focus", showAnim: "fadeIn", showOptions: {}, defaultDate: null, appendText: "", buttonText: "...", buttonImage: "", buttonImageOnly: false, hideIfNoPrevNext: false, navigationAsDateFormat: false, gotoCurrent: false, changeMonth: false, changeYear: false, yearRange: "c-10:c+10", showOtherMonths: false, selectOtherMonths: false, showWeek: false, calculateWeek: this.iso8601Week, shortYearCutoff: "+10",
                                minDate: null, maxDate: null, duration: "fast", beforeShowDay: null, beforeShow: null, onSelect: null, onChangeMonthYear: null, onClose: null, numberOfMonths: 1, showCurrentAtPos: 0, stepMonths: 1, stepBigMonths: 12, altField: "", altFormat: "", constrainInput: true, showButtonPanel: false, autoSize: false
                            };
                            a.extend(this._defaults, this.regional[""]);
                            this.dpDiv = a('<div id="' + this._mainDivId + '" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"></div>')
                        }
                        function e(c, g) {
                            a.extend(c,
        g);
                            for (var h in g)
                                if (g[h] == null || g[h] == b)
                                    c[h] = g[h];
                            return c
                        }
                        a.extend(a.ui, { datepicker: { version: "1.8.4"} });
                        var f = (new Date).getTime();
                        a.extend(d.prototype, { markerClassName: "hasDatepicker", log: function () {
                            this.debug && console.log.apply("", arguments)
                        }, _widgetDatepicker: function () {
                            return this.dpDiv
                        }, setDefaults: function (c) {
                            e(this._defaults, c || {});
                            return this
                        }, _attachDatepicker: function (c, g) {
                            var h = null, n;
                            for (n in this._defaults) {
                                var o = c.getAttribute("date:" + n);
                                if (o) {
                                    h = h || {};
                                    try {
                                        h[n] = eval(o)
                                    } catch (p) {
                                        h[n] =
                        o
                                    }
                                }
                            }
                            n = c.nodeName.toLowerCase();
                            o = n == "div" || n == "span";
                            if (!c.id) {
                                this.uuid += 1;
                                c.id = "dp" + this.uuid
                            }
                            var m = this._newInst(a(c), o);
                            m.settings = a.extend({}, g || {}, h || {});
                            if (n == "input")
                                this._connectDatepicker(c, m);
                            else
                                o && this._inlineDatepicker(c, m)
                        }, _newInst: function (c, g) {
                            return { id: c[0].id.replace(/([^A-Za-z0-9_])/g, "\\\\$1"), input: c, selectedDay: 0, selectedMonth: 0, selectedYear: 0, drawMonth: 0, drawYear: 0, inline: g, dpDiv: !g ? this.dpDiv : a('<div class="' + this._inlineClass + ' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>') }
                        },
                            _connectDatepicker: function (c, g) {
                                var h = a(c);
                                g.append = a([]);
                                g.trigger = a([]);
                                if (!h.hasClass(this.markerClassName)) {
                                    this._attachments(h, g);
                                    h.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker", function (n, o, p) {
                                        g.settings[o] = p
                                    }).bind("getData.datepicker", function (n, o) {
                                        return this._get(g, o)
                                    });
                                    this._autoSize(g);
                                    a.data(c, "datepicker", g)
                                }
                            }, _attachments: function (c, g) {
                                var h = this._get(g, "appendText"), n = this._get(g, "isRTL");
                                g.append &&
            g.append.remove();
                                if (h) {
                                    g.append = a('<span class="' + this._appendClass + '">' + h + "</span>");
                                    c[n ? "before" : "after"](g.append)
                                }
                                c.unbind("focus", this._showDatepicker);
                                g.trigger && g.trigger.remove();
                                h = this._get(g, "showOn");
                                if (h == "focus" || h == "both")
                                    c.focus(this._showDatepicker);
                                if (h == "button" || h == "both") {
                                    h = this._get(g, "buttonText");
                                    var o = this._get(g, "buttonImage");
                                    g.trigger = a(this._get(g, "buttonImageOnly") ? a("<img/>").addClass(this._triggerClass).attr({ src: o, alt: h, title: h }) : a('<button type="button"></button>').addClass(this._triggerClass).html(o ==
                "" ? h : a("<img/>").attr({ src: o, alt: h, title: h })));
                                    c[n ? "before" : "after"](g.trigger);
                                    g.trigger.click(function () {
                                        a.datepicker._datepickerShowing && a.datepicker._lastInput == c[0] ? a.datepicker._hideDatepicker() : a.datepicker._showDatepicker(c[0]);
                                        return false
                                    })
                                }
                            }, _autoSize: function (c) {
                                if (this._get(c, "autoSize") && !c.inline) {
                                    var g = new Date(2009, 11, 20), h = this._get(c, "dateFormat");
                                    if (h.match(/[DM]/)) {
                                        var n = function (o) {
                                            for (var p = 0, m = 0, q = 0; q < o.length; q++)
                                                if (o[q].length > p) {
                                                    p = o[q].length;
                                                    m = q
                                                }
                                            return m
                                        };
                                        g.setMonth(n(this._get(c,
                    h.match(/MM/) ? "monthNames" : "monthNamesShort")));
                                        g.setDate(n(this._get(c, h.match(/DD/) ? "dayNames" : "dayNamesShort")) + 20 - g.getDay())
                                    }
                                    c.input.attr("size", this._formatDate(c, g).length)
                                }
                            }, _inlineDatepicker: function (c, g) {
                                var h = a(c);
                                if (!h.hasClass(this.markerClassName)) {
                                    h.addClass(this.markerClassName).append(g.dpDiv).bind("setData.datepicker", function (n, o, p) {
                                        g.settings[o] = p
                                    }).bind("getData.datepicker", function (n, o) {
                                        return this._get(g, o)
                                    });
                                    a.data(c, "datepicker", g);
                                    this._setDate(g, this._getDefaultDate(g),
                true);
                                    this._updateDatepicker(g);
                                    this._updateAlternate(g)
                                }
                            }, _dialogDatepicker: function (c, g, h, n, o) {
                                c = this._dialogInst;
                                if (!c) {
                                    this.uuid += 1;
                                    this._dialogInput = a('<input type="text" id="' + ("dp" + this.uuid) + '" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');
                                    this._dialogInput.keydown(this._doKeyDown);
                                    a("body").append(this._dialogInput);
                                    c = this._dialogInst = this._newInst(this._dialogInput, false);
                                    c.settings = {};
                                    a.data(this._dialogInput[0], "datepicker", c)
                                }
                                e(c.settings, n || {});
                                g = g && g.constructor ==
            Date ? this._formatDate(c, g) : g;
                                this._dialogInput.val(g);
                                this._pos = o ? o.length ? o : [o.pageX, o.pageY] : null;
                                if (!this._pos)
                                    this._pos = [document.documentElement.clientWidth / 2 - 100 + (document.documentElement.scrollLeft || document.body.scrollLeft), document.documentElement.clientHeight / 2 - 150 + (document.documentElement.scrollTop || document.body.scrollTop)];
                                this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px");
                                c.settings.onSelect = h;
                                this._inDialog = true;
                                this.dpDiv.addClass(this._dialogClass);
                                this._showDatepicker(this._dialogInput[0]);
                                a.blockUI && a.blockUI(this.dpDiv);
                                a.data(this._dialogInput[0], "datepicker", c);
                                return this
                            }, _destroyDatepicker: function (c) {
                                var g = a(c), h = a.data(c, "datepicker");
                                if (g.hasClass(this.markerClassName)) {
                                    var n = c.nodeName.toLowerCase();
                                    a.removeData(c, "datepicker");
                                    if (n == "input") {
                                        h.append.remove();
                                        h.trigger.remove();
                                        g.removeClass(this.markerClassName).unbind("focus", this._showDatepicker).unbind("keydown", this._doKeyDown).unbind("keypress", this._doKeyPress).unbind("keyup", this._doKeyUp)
                                    } else if (n == "div" || n == "span")
                                        g.removeClass(this.markerClassName).empty()
                                }
                            },
                            _enableDatepicker: function (c) {
                                var g = a(c), h = a.data(c, "datepicker");
                                if (g.hasClass(this.markerClassName)) {
                                    var n = c.nodeName.toLowerCase();
                                    if (n == "input") {
                                        c.disabled = false;
                                        h.trigger.filter("button").each(function () {
                                            this.disabled = false
                                        }).end().filter("img").css({ opacity: "1.0", cursor: "" })
                                    } else if (n == "div" || n == "span")
                                        g.children("." + this._inlineClass).children().removeClass("ui-state-disabled");
                                    this._disabledInputs = a.map(this._disabledInputs, function (o) {
                                        return o == c ? null : o
                                    })
                                }
                            }, _disableDatepicker: function (c) {
                                var g =
            a(c), h = a.data(c, "datepicker");
                                if (g.hasClass(this.markerClassName)) {
                                    var n = c.nodeName.toLowerCase();
                                    if (n == "input") {
                                        c.disabled = true;
                                        h.trigger.filter("button").each(function () {
                                            this.disabled = true
                                        }).end().filter("img").css({ opacity: "0.5", cursor: "default" })
                                    } else if (n == "div" || n == "span")
                                        g.children("." + this._inlineClass).children().addClass("ui-state-disabled");
                                    this._disabledInputs = a.map(this._disabledInputs, function (o) {
                                        return o == c ? null : o
                                    });
                                    this._disabledInputs[this._disabledInputs.length] = c
                                }
                            }, _isDisabledDatepicker: function (c) {
                                if (!c)
                                    return false;
                                for (var g = 0; g < this._disabledInputs.length; g++)
                                    if (this._disabledInputs[g] == c)
                                        return true;
                                return false
                            }, _getInst: function (c) {
                                try {
                                    return a.data(c, "datepicker")
                                } catch (g) {
                                    throw "Missing instance data for this datepicker";
                                }
                            }, _optionDatepicker: function (c, g, h) {
                                var n = this._getInst(c);
                                if (arguments.length == 2 && typeof g == "string")
                                    return g == "defaults" ? a.extend({}, a.datepicker._defaults) : n ? g == "all" ? a.extend({}, n.settings) : this._get(n, g) : null;
                                var o = g || {};
                                if (typeof g == "string") {
                                    o = {};
                                    o[g] = h
                                }
                                if (n) {
                                    this._curInst == n &&
                this._hideDatepicker();
                                    var p = this._getDateDatepicker(c, true);
                                    e(n.settings, o);
                                    this._attachments(a(c), n);
                                    this._autoSize(n);
                                    this._setDateDatepicker(c, p);
                                    this._updateDatepicker(n)
                                }
                            }, _changeDatepicker: function (c, g, h) {
                                this._optionDatepicker(c, g, h)
                            }, _refreshDatepicker: function (c) {
                                (c = this._getInst(c)) && this._updateDatepicker(c)
                            }, _setDateDatepicker: function (c, g) {
                                if (c = this._getInst(c)) {
                                    this._setDate(c, g);
                                    this._updateDatepicker(c);
                                    this._updateAlternate(c)
                                }
                            }, _getDateDatepicker: function (c, g) {
                                (c = this._getInst(c)) &&
            !c.inline && this._setDateFromField(c, g);
                                return c ? this._getDate(c) : null
                            }, _doKeyDown: function (c) {
                                var g = a.datepicker._getInst(c.target), h = true, n = g.dpDiv.is(".ui-datepicker-rtl");
                                g._keyEvent = true;
                                if (a.datepicker._datepickerShowing)
                                    switch (c.keyCode) {
                                    case 9:
                                        a.datepicker._hideDatepicker();
                                        h = false;
                                        break;
                                    case 13:
                                        h = a("td." + a.datepicker._dayOverClass, g.dpDiv).add(a("td." + a.datepicker._currentClass, g.dpDiv));
                                        h[0] ? a.datepicker._selectDay(c.target, g.selectedMonth, g.selectedYear, h[0]) : a.datepicker._hideDatepicker();
                                        return false;
                                    case 27:
                                        a.datepicker._hideDatepicker();
                                        break;
                                    case 33:
                                        a.datepicker._adjustDate(c.target, c.ctrlKey ? -a.datepicker._get(g, "stepBigMonths") : -a.datepicker._get(g, "stepMonths"), "M");
                                        break;
                                    case 34:
                                        a.datepicker._adjustDate(c.target, c.ctrlKey ? +a.datepicker._get(g, "stepBigMonths") : +a.datepicker._get(g, "stepMonths"), "M");
                                        break;
                                    case 35:
                                        if (c.ctrlKey || c.metaKey)
                                            a.datepicker._clearDate(c.target);
                                        h = c.ctrlKey || c.metaKey;
                                        break;
                                    case 36:
                                        if (c.ctrlKey || c.metaKey)
                                            a.datepicker._gotoToday(c.target);
                                        h = c.ctrlKey ||
                        c.metaKey;
                                        break;
                                    case 37:
                                        if (c.ctrlKey || c.metaKey)
                                            a.datepicker._adjustDate(c.target, n ? +1 : -1, "D");
                                        h = c.ctrlKey || c.metaKey;
                                        if (c.originalEvent.altKey)
                                            a.datepicker._adjustDate(c.target, c.ctrlKey ? -a.datepicker._get(g, "stepBigMonths") : -a.datepicker._get(g, "stepMonths"), "M");
                                        break;
                                    case 38:
                                        if (c.ctrlKey || c.metaKey)
                                            a.datepicker._adjustDate(c.target, -7, "D");
                                        h = c.ctrlKey || c.metaKey;
                                        break;
                                    case 39:
                                        if (c.ctrlKey || c.metaKey)
                                            a.datepicker._adjustDate(c.target, n ? -1 : +1, "D");
                                        h = c.ctrlKey || c.metaKey;
                                        if (c.originalEvent.altKey)
                                            a.datepicker._adjustDate(c.target,
                            c.ctrlKey ? +a.datepicker._get(g, "stepBigMonths") : +a.datepicker._get(g, "stepMonths"), "M");
                                        break;
                                    case 40:
                                        if (c.ctrlKey || c.metaKey)
                                            a.datepicker._adjustDate(c.target, +7, "D");
                                        h = c.ctrlKey || c.metaKey;
                                        break;
                                    default:
                                        h = false
                                }
                                else if (c.keyCode == 36 && c.ctrlKey)
                                    a.datepicker._showDatepicker(this);
                                else
                                    h = false;
                                if (h) {
                                    c.preventDefault();
                                    c.stopPropagation()
                                }
                            }, _doKeyPress: function (c) {
                                var g = a.datepicker._getInst(c.target);
                                if (a.datepicker._get(g, "constrainInput")) {
                                    g = a.datepicker._possibleChars(a.datepicker._get(g, "dateFormat"));
                                    var h = String.fromCharCode(c.charCode == b ? c.keyCode : c.charCode);
                                    return c.ctrlKey || h < " " || !g || g.indexOf(h) > -1
                                }
                            }, _doKeyUp: function (c) {
                                c = a.datepicker._getInst(c.target);
                                if (c.input.val() != c.lastVal)
                                    try {
                                        if (a.datepicker.parseDate(a.datepicker._get(c, "dateFormat"), c.input ? c.input.val() : null, a.datepicker._getFormatConfig(c))) {
                                            a.datepicker._setDateFromField(c);
                                            a.datepicker._updateAlternate(c);
                                            a.datepicker._updateDatepicker(c)
                                        }
                                    } catch (g) {
                                        a.datepicker.log(g)
                                    }
                                return true
                            }, _showDatepicker: function (c) {
                                c = c.target ||
            c;
                                if (c.nodeName.toLowerCase() != "input")
                                    c = a("input", c.parentNode)[0];
                                if (!(a.datepicker._isDisabledDatepicker(c) || a.datepicker._lastInput == c)) {
                                    var g = a.datepicker._getInst(c);
                                    a.datepicker._curInst && a.datepicker._curInst != g && a.datepicker._curInst.dpDiv.stop(true, true);
                                    var h = a.datepicker._get(g, "beforeShow");
                                    e(g.settings, h ? h.apply(c, [c, g]) : {});
                                    g.lastVal = null;
                                    a.datepicker._lastInput = c;
                                    a.datepicker._setDateFromField(g);
                                    if (a.datepicker._inDialog)
                                        c.value = "";
                                    if (!a.datepicker._pos) {
                                        a.datepicker._pos = a.datepicker._findPos(c);
                                        a.datepicker._pos[1] += c.offsetHeight
                                    }
                                    var n = false;
                                    a(c).parents().each(function () {
                                        n |= a(this).css("position") == "fixed";
                                        return !n
                                    });
                                    if (n && a.browser.opera) {
                                        a.datepicker._pos[0] -= document.documentElement.scrollLeft;
                                        a.datepicker._pos[1] -= document.documentElement.scrollTop
                                    }
                                    h = { left: a.datepicker._pos[0], top: a.datepicker._pos[1] };
                                    a.datepicker._pos = null;
                                    g.dpDiv.css({ position: "absolute", display: "block", top: "-1000px" });
                                    a.datepicker._updateDatepicker(g);
                                    h = a.datepicker._checkOffset(g, h, n);
                                    g.dpDiv.css({ position: a.datepicker._inDialog &&
                    a.blockUI ? "static" : n ? "fixed" : "absolute", display: "none", left: h.left + "px", top: h.top + "px"
                                    });
                                    if (!g.inline) {
                                        h = a.datepicker._get(g, "showAnim");
                                        var o = a.datepicker._get(g, "duration"), p = function () {
                                            a.datepicker._datepickerShowing = true;
                                            var m = a.datepicker._getBorders(g.dpDiv);
                                            g.dpDiv.find("iframe.ui-datepicker-cover").css({ left: -m[0], top: -m[1], width: g.dpDiv.outerWidth(), height: g.dpDiv.outerHeight() })
                                        };
                                        g.dpDiv.zIndex(a(c).zIndex() + 1);
                                        a.effects && a.effects[h] ? g.dpDiv.show(h, a.datepicker._get(g, "showOptions"), o,
                    p) : g.dpDiv[h || "show"](h ? o : null, p);
                                        if (!h || !o)
                                            p();
                                        g.input.is(":visible") && !g.input.is(":disabled") && g.input.focus();
                                        a.datepicker._curInst = g
                                    }
                                }
                            }, _updateDatepicker: function (c) {
                                var g = this, h = a.datepicker._getBorders(c.dpDiv);
                                c.dpDiv.empty().append(this._generateHTML(c)).find("iframe.ui-datepicker-cover").css({ left: -h[0], top: -h[1], width: c.dpDiv.outerWidth(), height: c.dpDiv.outerHeight() }).end().find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout", function () {
                                    a(this).removeClass("ui-state-hover");
                                    this.className.indexOf("ui-datepicker-prev") != -1 && a(this).removeClass("ui-datepicker-prev-hover");
                                    this.className.indexOf("ui-datepicker-next") != -1 && a(this).removeClass("ui-datepicker-next-hover")
                                }).bind("mouseover", function () {
                                    if (!g._isDisabledDatepicker(c.inline ? c.dpDiv.parent()[0] : c.input[0])) {
                                        a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");
                                        a(this).addClass("ui-state-hover");
                                        this.className.indexOf("ui-datepicker-prev") != -1 && a(this).addClass("ui-datepicker-prev-hover");
                                        this.className.indexOf("ui-datepicker-next") != -1 && a(this).addClass("ui-datepicker-next-hover")
                                    }
                                }).end().find("." + this._dayOverClass + " a").trigger("mouseover").end();
                                h = this._getNumberOfMonths(c);
                                var n = h[1];
                                n > 1 ? c.dpDiv.addClass("ui-datepicker-multi-" + n).css("width", 17 * n + "em") : c.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");
                                c.dpDiv[(h[0] != 1 || h[1] != 1 ? "add" : "remove") + "Class"]("ui-datepicker-multi");
                                c.dpDiv[(this._get(c, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl");
                                c == a.datepicker._curInst && a.datepicker._datepickerShowing && c.input && c.input.is(":visible") && !c.input.is(":disabled") && c.input.focus()
                            }, _getBorders: function (c) {
                                var g = function (h) {
                                    return { thin: 1, medium: 2, thick: 3}[h] || h
                                };
                                return [parseFloat(g(c.css("border-left-width"))), parseFloat(g(c.css("border-top-width")))]
                            }, _checkOffset: function (c, g, h) {
                                var n = c.dpDiv.outerWidth(), o = c.dpDiv.outerHeight(), p = c.input ? c.input.outerWidth() : 0, m = c.input ? c.input.outerHeight() : 0, q = document.documentElement.clientWidth + a(document).scrollLeft(),
            v = document.documentElement.clientHeight + a(document).scrollTop();
                                g.left -= this._get(c, "isRTL") ? n - p : 0;
                                g.left -= h && g.left == c.input.offset().left ? a(document).scrollLeft() : 0;
                                g.top -= h && g.top == c.input.offset().top + m ? a(document).scrollTop() : 0;
                                g.left -= Math.min(g.left, g.left + n > q && q > n ? Math.abs(g.left + n - q) : 0);
                                g.top -= Math.min(g.top, g.top + o > v && v > o ? Math.abs(o + m) : 0);
                                return g
                            }, _findPos: function (c) {
                                for (var g = this._get(this._getInst(c), "isRTL"); c && (c.type == "hidden" || c.nodeType != 1); )
                                    c = c[g ? "previousSibling" : "nextSibling"];
                                c = a(c).offset();
                                return [c.left, c.top]
                            }, _hideDatepicker: function (c) {
                                var g = this._curInst;
                                if (!(!g || c && g != a.data(c, "datepicker")))
                                    if (this._datepickerShowing) {
                                        c = this._get(g, "showAnim");
                                        var h = this._get(g, "duration"), n = function () {
                                            a.datepicker._tidyDialog(g);
                                            this._curInst = null
                                        };
                                        a.effects && a.effects[c] ? g.dpDiv.hide(c, a.datepicker._get(g, "showOptions"), h, n) : g.dpDiv[c == "slideDown" ? "slideUp" : c == "fadeIn" ? "fadeOut" : "hide"](c ? h : null, n);
                                        c || n();
                                        if (c = this._get(g, "onClose"))
                                            c.apply(g.input ? g.input[0] : null, [g.input ? g.input.val() :
                            "", g]);
                                        this._datepickerShowing = false;
                                        this._lastInput = null;
                                        if (this._inDialog) {
                                            this._dialogInput.css({ position: "absolute", left: "0", top: "-100px" });
                                            if (a.blockUI) {
                                                a.unblockUI();
                                                a("body").append(this.dpDiv)
                                            }
                                        }
                                        this._inDialog = false
                                    }
                            }, _tidyDialog: function (c) {
                                c.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")
                            }, _checkExternalClick: function (c) {
                                if (a.datepicker._curInst) {
                                    c = a(c.target);
                                    c[0].id != a.datepicker._mainDivId && c.parents("#" + a.datepicker._mainDivId).length == 0 && !c.hasClass(a.datepicker.markerClassName) &&
                !c.hasClass(a.datepicker._triggerClass) && a.datepicker._datepickerShowing && !(a.datepicker._inDialog && a.blockUI) && a.datepicker._hideDatepicker()
                                }
                            }, _adjustDate: function (c, g, h) {
                                c = a(c);
                                var n = this._getInst(c[0]);
                                if (!this._isDisabledDatepicker(c[0])) {
                                    this._adjustInstDate(n, g + (h == "M" ? this._get(n, "showCurrentAtPos") : 0), h);
                                    this._updateDatepicker(n)
                                }
                            }, _gotoToday: function (c) {
                                c = a(c);
                                var g = this._getInst(c[0]);
                                if (this._get(g, "gotoCurrent") && g.currentDay) {
                                    g.selectedDay = g.currentDay;
                                    g.drawMonth = g.selectedMonth = g.currentMonth;
                                    g.drawYear = g.selectedYear = g.currentYear
                                } else {
                                    var h = new Date;
                                    g.selectedDay = h.getDate();
                                    g.drawMonth = g.selectedMonth = h.getMonth();
                                    g.drawYear = g.selectedYear = h.getFullYear()
                                }
                                this._notifyChange(g);
                                this._adjustDate(c)
                            }, _selectMonthYear: function (c, g, h) {
                                c = a(c);
                                var n = this._getInst(c[0]);
                                n._selectingMonthYear = false;
                                n["selected" + (h == "M" ? "Month" : "Year")] = n["draw" + (h == "M" ? "Month" : "Year")] = parseInt(g.options[g.selectedIndex].value, 10);
                                this._notifyChange(n);
                                this._adjustDate(c)
                            }, _clickMonthYear: function (c) {
                                var g =
            this._getInst(a(c)[0]);
                                g.input && g._selectingMonthYear && setTimeout(function () {
                                    g.input.focus()
                                }, 0);
                                g._selectingMonthYear = !g._selectingMonthYear
                            }, _selectDay: function (c, g, h, n) {
                                var o = a(c);
                                if (!(a(n).hasClass(this._unselectableClass) || this._isDisabledDatepicker(o[0]))) {
                                    o = this._getInst(o[0]);
                                    o.selectedDay = o.currentDay = a("a", n).html();
                                    o.selectedMonth = o.currentMonth = g;
                                    o.selectedYear = o.currentYear = h;
                                    this._selectDate(c, this._formatDate(o, o.currentDay, o.currentMonth, o.currentYear))
                                }
                            }, _clearDate: function (c) {
                                c =
            a(c);
                                this._getInst(c[0]);
                                this._selectDate(c, "")
                            }, _selectDate: function (c, g) {
                                c = this._getInst(a(c)[0]);
                                g = g != null ? g : this._formatDate(c);
                                c.input && c.input.val(g);
                                this._updateAlternate(c);
                                var h = this._get(c, "onSelect");
                                if (h)
                                    h.apply(c.input ? c.input[0] : null, [g, c]);
                                else
                                    c.input && c.input.trigger("change");
                                if (c.inline)
                                    this._updateDatepicker(c);
                                else {
                                    this._hideDatepicker();
                                    this._lastInput = c.input[0];
                                    typeof c.input[0] != "object" && c.input.focus();
                                    this._lastInput = null
                                }
                            }, _updateAlternate: function (c) {
                                var g = this._get(c,
            "altField");
                                if (g) {
                                    var h = this._get(c, "altFormat") || this._get(c, "dateFormat"), n = this._getDate(c), o = this.formatDate(h, n, this._getFormatConfig(c));
                                    a(g).each(function () {
                                        a(this).val(o)
                                    })
                                }
                            }, noWeekends: function (c) {
                                c = c.getDay();
                                return [c > 0 && c < 6, ""]
                            }, iso8601Week: function (c) {
                                c = new Date(c.getTime());
                                c.setDate(c.getDate() + 4 - (c.getDay() || 7));
                                var g = c.getTime();
                                c.setMonth(0);
                                c.setDate(1);
                                return Math.floor(Math.round((g - c) / 864E5) / 7) + 1
                            }, parseDate: function (c, g, h) {
                                if (c == null || g == null)
                                    throw "Invalid arguments";
                                g = typeof g ==
            "object" ? g.toString() : g + "";
                                if (g == "")
                                    return null;
                                for (var n = (h ? h.shortYearCutoff : null) || this._defaults.shortYearCutoff, o = (h ? h.dayNamesShort : null) || this._defaults.dayNamesShort, p = (h ? h.dayNames : null) || this._defaults.dayNames, m = (h ? h.monthNamesShort : null) || this._defaults.monthNamesShort, q = (h ? h.monthNames : null) || this._defaults.monthNames, v = h = -1, w = -1, s = -1, k = false, D = function (ga) {
                                    (ga = U + 1 < c.length && c.charAt(U + 1) == ga) && U++;
                                    return ga
                                }, M = function (ga) {
                                    D(ga);
                                    ga = g.substring(P).match(RegExp("^\\d{1," + (ga == "@" ? 14 : ga ==
                "!" ? 20 : ga == "y" ? 4 : ga == "o" ? 3 : 2) + "}"));
                                    if (!ga)
                                        throw "Missing number at position " + P;
                                    P += ga[0].length;
                                    return parseInt(ga[0], 10)
                                }, J = function (ga, qa, S) {
                                    ga = D(ga) ? S : qa;
                                    for (qa = 0; qa < ga.length; qa++)
                                        if (g.substr(P, ga[qa].length) == ga[qa]) {
                                            P += ga[qa].length;
                                            return qa + 1
                                        }
                                    throw "Unknown name at position " + P;
                                }, G = function () {
                                    if (g.charAt(P) != c.charAt(U))
                                        throw "Unexpected literal at position " + P;
                                    P++
                                }, P = 0, U = 0; U < c.length; U++)
                                    if (k)
                                        if (c.charAt(U) == "'" && !D("'"))
                                            k = false;
                                        else
                                            G();
                                    else
                                        switch (c.charAt(U)) {
                                        case "d":
                                            w = M("d");
                                            break;
                                        case "D":
                                            J("D",
                            o, p);
                                            break;
                                        case "o":
                                            s = M("o");
                                            break;
                                        case "m":
                                            v = M("m");
                                            break;
                                        case "M":
                                            v = J("M", m, q);
                                            break;
                                        case "y":
                                            h = M("y");
                                            break;
                                        case "@":
                                            var fa = new Date(M("@"));
                                            h = fa.getFullYear();
                                            v = fa.getMonth() + 1;
                                            w = fa.getDate();
                                            break;
                                        case "!":
                                            fa = new Date((M("!") - this._ticksTo1970) / 1E4);
                                            h = fa.getFullYear();
                                            v = fa.getMonth() + 1;
                                            w = fa.getDate();
                                            break;
                                        case "'":
                                            if (D("'"))
                                                G();
                                            else
                                                k = true;
                                            break;
                                        default:
                                            G()
                                    }
                                if (h == -1)
                                    h = (new Date).getFullYear();
                                else if (h < 100)
                                    h += (new Date).getFullYear() - (new Date).getFullYear() % 100 + (h <= n ? 0 : -100);
                                if (s > -1) {
                                    v = 1;
                                    w =
                s;
                                    do {
                                        n = this._getDaysInMonth(h, v - 1);
                                        if (w <= n)
                                            break;
                                        v++;
                                        w -= n
                                    } while (1)
                                }
                                fa = this._daylightSavingAdjust(new Date(h, v - 1, w));
                                if (fa.getFullYear() != h || fa.getMonth() + 1 != v || fa.getDate() != w)
                                    throw "Invalid date";
                                return fa
                            }, ATOM: "yy-mm-dd", COOKIE: "D, dd M yy", ISO_8601: "yy-mm-dd", RFC_822: "D, d M y", RFC_850: "DD, dd-M-y", RFC_1036: "D, d M y", RFC_1123: "D, d M yy", RFC_2822: "D, d M yy", RSS: "D, d M y", TICKS: "!", TIMESTAMP: "@", W3C: "yy-mm-dd", _ticksTo1970: (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)) * 864E9, formatDate: function (c,
        g, h) {
                                if (!g)
                                    return "";
                                var n = (h ? h.dayNamesShort : null) || this._defaults.dayNamesShort, o = (h ? h.dayNames : null) || this._defaults.dayNames, p = (h ? h.monthNamesShort : null) || this._defaults.monthNamesShort;
                                h = (h ? h.monthNames : null) || this._defaults.monthNames;
                                var m = function (D) {
                                    (D = k + 1 < c.length && c.charAt(k + 1) == D) && k++;
                                    return D
                                }, q = function (D, M, J) {
                                    M = "" + M;
                                    if (m(D))
                                        for (; M.length < J; )
                                            M = "0" + M;
                                    return M
                                }, v = function (D, M, J, G) {
                                    return m(D) ? G[M] : J[M]
                                }, w = "", s = false;
                                if (g)
                                    for (var k = 0; k < c.length; k++)
                                        if (s)
                                            if (c.charAt(k) == "'" && !m("'"))
                                                s = false;
                                            else
                                                w += c.charAt(k);
                                        else
                                            switch (c.charAt(k)) {
                                            case "d":
                                                w += q("d", g.getDate(), 2);
                                                break;
                                            case "D":
                                                w += v("D", g.getDay(), n, o);
                                                break;
                                            case "o":
                                                w += q("o", (g.getTime() - (new Date(g.getFullYear(), 0, 0)).getTime()) / 864E5, 3);
                                                break;
                                            case "m":
                                                w += q("m", g.getMonth() + 1, 2);
                                                break;
                                            case "M":
                                                w += v("M", g.getMonth(), p, h);
                                                break;
                                            case "y":
                                                w += m("y") ? g.getFullYear() : (g.getYear() % 100 < 10 ? "0" : "") + g.getYear() % 100;
                                                break;
                                            case "@":
                                                w += g.getTime();
                                                break;
                                            case "!":
                                                w += g.getTime() * 1E4 + this._ticksTo1970;
                                                break;
                                            case "'":
                                                if (m("'"))
                                                    w += "'";
                                                else
                                                    s = true;
                                                break;
                                            default:
                                                w += c.charAt(k)
                                        }
                                return w
                            }, _possibleChars: function (c) {
                                for (var g = "", h = false, n = function (p) {
                                    (p = o + 1 < c.length && c.charAt(o + 1) == p) && o++;
                                    return p
                                }, o = 0; o < c.length; o++)
                                    if (h)
                                        if (c.charAt(o) == "'" && !n("'"))
                                            h = false;
                                        else
                                            g += c.charAt(o);
                                    else
                                        switch (c.charAt(o)) {
                                        case "d":
                                        case "m":
                                        case "y":
                                        case "@":
                                            g += "0123456789";
                                            break;
                                        case "D":
                                        case "M":
                                            return null;
                                        case "'":
                                            if (n("'"))
                                                g += "'";
                                            else
                                                h = true;
                                            break;
                                        default:
                                            g += c.charAt(o)
                                    }
                                return g
                            }, _get: function (c, g) {
                                return c.settings[g] !== b ? c.settings[g] : this._defaults[g]
                            }, _setDateFromField: function (c,
        g) {
                                if (c.input.val() != c.lastVal) {
                                    var h = this._get(c, "dateFormat"), n = c.lastVal = c.input ? c.input.val() : null, o, p;
                                    o = p = this._getDefaultDate(c);
                                    var m = this._getFormatConfig(c);
                                    try {
                                        o = this.parseDate(h, n, m) || p
                                    } catch (q) {
                                        this.log(q);
                                        n = g ? "" : n
                                    }
                                    c.selectedDay = o.getDate();
                                    c.drawMonth = c.selectedMonth = o.getMonth();
                                    c.drawYear = c.selectedYear = o.getFullYear();
                                    c.currentDay = n ? o.getDate() : 0;
                                    c.currentMonth = n ? o.getMonth() : 0;
                                    c.currentYear = n ? o.getFullYear() : 0;
                                    this._adjustInstDate(c)
                                }
                            }, _getDefaultDate: function (c) {
                                return this._restrictMinMax(c,
            this._determineDate(c, this._get(c, "defaultDate"), new Date))
                            }, _determineDate: function (c, g, h) {
                                var n = function (o) {
                                    var p = new Date;
                                    p.setDate(p.getDate() + o);
                                    return p
                                };
                                if (g = (g = g == null ? h : typeof g == "string" ? function (o) {
                                    try {
                                        return a.datepicker.parseDate(a.datepicker._get(c, "dateFormat"), o, a.datepicker._getFormatConfig(c))
                                    } catch (p) {
                                    }
                                    var m = (o.toLowerCase().match(/^c/) ? a.datepicker._getDate(c) : null) || new Date, q = m.getFullYear(), v = m.getMonth();
                                    m = m.getDate();
                                    for (var w = /([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g, s = w.exec(o); s; ) {
                                        switch (s[2] ||
                    "d") {
                                            case "d":
                                            case "D":
                                                m += parseInt(s[1], 10);
                                                break;
                                            case "w":
                                            case "W":
                                                m += parseInt(s[1], 10) * 7;
                                                break;
                                            case "m":
                                            case "M":
                                                v += parseInt(s[1], 10);
                                                m = Math.min(m, a.datepicker._getDaysInMonth(q, v));
                                                break;
                                            case "y":
                                            case "Y":
                                                q += parseInt(s[1], 10);
                                                m = Math.min(m, a.datepicker._getDaysInMonth(q, v))
                                        }
                                        s = w.exec(o)
                                    }
                                    return new Date(q, v, m)
                                } (g) : typeof g == "number" ? isNaN(g) ? h : n(g) : g) && g.toString() == "Invalid Date" ? h : g) {
                                    g.setHours(0);
                                    g.setMinutes(0);
                                    g.setSeconds(0);
                                    g.setMilliseconds(0)
                                }
                                return this._daylightSavingAdjust(g)
                            }, _daylightSavingAdjust: function (c) {
                                if (!c)
                                    return null;
                                c.setHours(c.getHours() > 12 ? c.getHours() + 2 : 0);
                                return c
                            }, _setDate: function (c, g, h) {
                                var n = !g, o = c.selectedMonth, p = c.selectedYear;
                                g = this._restrictMinMax(c, this._determineDate(c, g, new Date));
                                c.selectedDay = c.currentDay = g.getDate();
                                c.drawMonth = c.selectedMonth = c.currentMonth = g.getMonth();
                                c.drawYear = c.selectedYear = c.currentYear = g.getFullYear();
                                if ((o != c.selectedMonth || p != c.selectedYear) && !h)
                                    this._notifyChange(c);
                                this._adjustInstDate(c);
                                if (c.input)
                                    c.input.val(n ? "" : this._formatDate(c))
                            }, _getDate: function (c) {
                                return !c.currentYear ||
            c.input && c.input.val() == "" ? null : this._daylightSavingAdjust(new Date(c.currentYear, c.currentMonth, c.currentDay))
                            }, _generateHTML: function (c) {
                                var g = new Date;
                                g = this._daylightSavingAdjust(new Date(g.getFullYear(), g.getMonth(), g.getDate()));
                                var h = this._get(c, "isRTL"), n = this._get(c, "showButtonPanel"), o = this._get(c, "hideIfNoPrevNext"), p = this._get(c, "navigationAsDateFormat"), m = this._getNumberOfMonths(c), q = this._get(c, "showCurrentAtPos"), v = this._get(c, "stepMonths"), w = m[0] != 1 || m[1] != 1, s = this._daylightSavingAdjust(!c.currentDay ?
            new Date(9999, 9, 9) : new Date(c.currentYear, c.currentMonth, c.currentDay)), k = this._getMinMaxDate(c, "min"), D = this._getMinMaxDate(c, "max");
                                q = c.drawMonth - q;
                                var M = c.drawYear;
                                if (q < 0) {
                                    q += 12;
                                    M--
                                }
                                if (D) {
                                    var J = this._daylightSavingAdjust(new Date(D.getFullYear(), D.getMonth() - m[0] * m[1] + 1, D.getDate()));
                                    for (J = k && J < k ? k : J; this._daylightSavingAdjust(new Date(M, q, 1)) > J; ) {
                                        q--;
                                        if (q < 0) {
                                            q = 11;
                                            M--
                                        }
                                    }
                                }
                                c.drawMonth = q;
                                c.drawYear = M;
                                J = this._get(c, "prevText");
                                J = !p ? J : this.formatDate(J, this._daylightSavingAdjust(new Date(M, q - v, 1)), this._getFormatConfig(c));
                                J = this._canAdjustMonth(c, -1, M, q) ? '<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_' + f + ".datepicker._adjustDate('#" + c.id + "', -" + v + ", 'M');\" title=\"" + J + '"><span class="ui-icon ui-icon-circle-triangle-' + (h ? "e" : "w") + '">' + J + "</span></a>" : o ? "" : '<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="' + J + '"><span class="ui-icon ui-icon-circle-triangle-' + (h ? "e" : "w") + '">' + J + "</span></a>";
                                var G = this._get(c, "nextText");
                                G = !p ? G : this.formatDate(G, this._daylightSavingAdjust(new Date(M,
            q + v, 1)), this._getFormatConfig(c));
                                o = this._canAdjustMonth(c, +1, M, q) ? '<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_' + f + ".datepicker._adjustDate('#" + c.id + "', +" + v + ", 'M');\" title=\"" + G + '"><span class="ui-icon ui-icon-circle-triangle-' + (h ? "w" : "e") + '">' + G + "</span></a>" : o ? "" : '<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="' + G + '"><span class="ui-icon ui-icon-circle-triangle-' + (h ? "w" : "e") + '">' + G + "</span></a>";
                                v = this._get(c, "currentText");
                                G = this._get(c, "gotoCurrent") &&
            c.currentDay ? s : g;
                                v = !p ? v : this.formatDate(v, G, this._getFormatConfig(c));
                                p = !c.inline ? '<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_' + f + '.datepicker._hideDatepicker();">' + this._get(c, "closeText") + "</button>" : "";
                                n = n ? '<div class="ui-datepicker-buttonpane ui-widget-content">' + (h ? p : "") + (this._isInRange(c, G) ? '<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_' +
            f + ".datepicker._gotoToday('#" + c.id + "');\">" + v + "</button>" : "") + (h ? "" : p) + "</div>" : "";
                                p = parseInt(this._get(c, "firstDay"), 10);
                                p = isNaN(p) ? 0 : p;
                                v = this._get(c, "showWeek");
                                G = this._get(c, "dayNames");
                                this._get(c, "dayNamesShort");
                                var P = this._get(c, "dayNamesMin"), U = this._get(c, "monthNames"), fa = this._get(c, "monthNamesShort"), ga = this._get(c, "beforeShowDay"), qa = this._get(c, "showOtherMonths"), S = this._get(c, "selectOtherMonths");
                                this._get(c, "calculateWeek");
                                for (var K = this._getDefaultDate(c), N = "", T = 0; T < m[0]; T++) {
                                    for (var ea =
                "", ma = 0; ma < m[1]; ma++) {
                                        var ua = this._daylightSavingAdjust(new Date(M, q, c.selectedDay)), ka = " ui-corner-all", sa = "";
                                        if (w) {
                                            sa += '<div class="ui-datepicker-group';
                                            if (m[1] > 1)
                                                switch (ma) {
                                                case 0:
                                                    sa += " ui-datepicker-group-first";
                                                    ka = " ui-corner-" + (h ? "right" : "left");
                                                    break;
                                                case m[1] - 1:
                                                    sa += " ui-datepicker-group-last";
                                                    ka = " ui-corner-" + (h ? "left" : "right");
                                                    break;
                                                default:
                                                    sa += " ui-datepicker-group-middle";
                                                    ka = ""
                                            }
                                            sa += '">'
                                        }
                                        sa += '<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix' + ka + '">' + (/all|left/.test(ka) &&
                    T == 0 ? h ? o : J : "") + (/all|right/.test(ka) && T == 0 ? h ? J : o : "") + this._generateMonthYearHeader(c, q, M, k, D, T > 0 || ma > 0, U, fa) + '</div><table class="ui-datepicker-calendar"><thead><tr>';
                                        var F = v ? '<th class="ui-datepicker-week-col">' + this._get(c, "weekHeader") + "</th>" : "";
                                        for (ka = 0; ka < 7; ka++) {
                                            var V = (ka + p) % 7;
                                            F += "<th" + ((ka + p + 6) % 7 >= 5 ? ' class="ui-datepicker-week-end"' : "") + '><span title="' + G[V] + '">' + P[V] + "</span></th>"
                                        }
                                        sa += F + "</tr></thead><tbody>";
                                        F = this._getDaysInMonth(M, q);
                                        if (M == c.selectedYear && q == c.selectedMonth)
                                            c.selectedDay =
                        Math.min(c.selectedDay, F);
                                        ka = (this._getFirstDayOfMonth(M, q) - p + 7) % 7;
                                        F = w ? 6 : Math.ceil((ka + F) / 7);
                                        V = this._daylightSavingAdjust(new Date(M, q, 1 - ka));
                                        for (var da = 0; da < F; da++) {
                                            sa += "<tr>";
                                            var W = !v ? "" : '<td class="ui-datepicker-week-col">' + this._get(c, "calculateWeek")(V) + "</td>";
                                            for (ka = 0; ka < 7; ka++) {
                                                var xa = ga ? ga.apply(c.input ? c.input[0] : null, [V]) : [true, ""], wa = V.getMonth() != q, Ja = wa && !S || !xa[0] || k && V < k || D && V > D;
                                                W += '<td class="' + ((ka + p + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (wa ? " ui-datepicker-other-month" : "") + (V.getTime() ==
                            ua.getTime() && q == c.selectedMonth && c._keyEvent || K.getTime() == V.getTime() && K.getTime() == ua.getTime() ? " " + this._dayOverClass : "") + (Ja ? " " + this._unselectableClass + " ui-state-disabled" : "") + (wa && !qa ? "" : " " + xa[1] + (V.getTime() == s.getTime() ? " " + this._currentClass : "") + (V.getTime() == g.getTime() ? " ui-datepicker-today" : "")) + '"' + ((!wa || qa) && xa[2] ? ' title="' + xa[2] + '"' : "") + (Ja ? "" : ' onclick="DP_jQuery_' + f + ".datepicker._selectDay('#" + c.id + "'," + V.getMonth() + "," + V.getFullYear() + ', this);return false;"') + ">" + (wa && !qa ?
                            "&#xa0;" : Ja ? '<span class="ui-state-default">' + V.getDate() + "</span>" : '<a class="ui-state-default' + (V.getTime() == g.getTime() ? " ui-state-highlight" : "") + (V.getTime() == ua.getTime() ? " ui-state-active" : "") + (wa ? " ui-priority-secondary" : "") + '" href="#">' + V.getDate() + "</a>") + "</td>";
                                                V.setDate(V.getDate() + 1);
                                                V = this._daylightSavingAdjust(V)
                                            }
                                            sa += W + "</tr>"
                                        }
                                        q++;
                                        if (q > 11) {
                                            q = 0;
                                            M++
                                        }
                                        sa += "</tbody></table>" + (w ? "</div>" + (m[0] > 0 && ma == m[1] - 1 ? '<div class="ui-datepicker-row-break"></div>' : "") : "");
                                        ea += sa
                                    }
                                    N += ea
                                }
                                N += n + (a.browser.msie &&
            parseInt(a.browser.version, 10) < 7 && !c.inline ? '<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>' : "");
                                c._keyEvent = false;
                                return N
                            }, _generateMonthYearHeader: function (c, g, h, n, o, p, m, q) {
                                var v = this._get(c, "changeMonth"), w = this._get(c, "changeYear"), s = this._get(c, "showMonthAfterYear"), k = '<div class="ui-datepicker-title">', D = "";
                                if (p || !v)
                                    D += '<span class="ui-datepicker-month">' + m[g] + "</span>";
                                else {
                                    m = n && n.getFullYear() == h;
                                    var M = o && o.getFullYear() == h;
                                    D += '<select class="ui-datepicker-month" onchange="DP_jQuery_' +
                f + ".datepicker._selectMonthYear('#" + c.id + "', this, 'M');\" onclick=\"DP_jQuery_" + f + ".datepicker._clickMonthYear('#" + c.id + "');\">";
                                    for (var J = 0; J < 12; J++)
                                        if ((!m || J >= n.getMonth()) && (!M || J <= o.getMonth()))
                                            D += '<option value="' + J + '"' + (J == g ? ' selected="selected"' : "") + ">" + q[J] + "</option>";
                                    D += "</select>"
                                }
                                s || (k += D + (p || !(v && w) ? "&#xa0;" : ""));
                                if (p || !w)
                                    k += '<span class="ui-datepicker-year">' + h + "</span>";
                                else {
                                    q = this._get(c, "yearRange").split(":");
                                    var G = (new Date).getFullYear();
                                    m = function (P) {
                                        P = P.match(/c[+-].*/) ? h +
                    parseInt(P.substring(1), 10) : P.match(/[+-].*/) ? G + parseInt(P, 10) : parseInt(P, 10);
                                        return isNaN(P) ? G : P
                                    };
                                    g = m(q[0]);
                                    q = Math.max(g, m(q[1] || ""));
                                    g = n ? Math.max(g, n.getFullYear()) : g;
                                    q = o ? Math.min(q, o.getFullYear()) : q;
                                    for (k += '<select class="ui-datepicker-year" onchange="DP_jQuery_' + f + ".datepicker._selectMonthYear('#" + c.id + "', this, 'Y');\" onclick=\"DP_jQuery_" + f + ".datepicker._clickMonthYear('#" + c.id + "');\">"; g <= q; g++)
                                        k += '<option value="' + g + '"' + (g == h ? ' selected="selected"' : "") + ">" + g + "</option>";
                                    k += "</select>"
                                }
                                k +=
            this._get(c, "yearSuffix");
                                if (s)
                                    k += (p || !(v && w) ? "&#xa0;" : "") + D;
                                k += "</div>";
                                return k
                            }, _adjustInstDate: function (c, g, h) {
                                var n = c.drawYear + (h == "Y" ? g : 0), o = c.drawMonth + (h == "M" ? g : 0);
                                g = Math.min(c.selectedDay, this._getDaysInMonth(n, o)) + (h == "D" ? g : 0);
                                n = this._restrictMinMax(c, this._daylightSavingAdjust(new Date(n, o, g)));
                                c.selectedDay = n.getDate();
                                c.drawMonth = c.selectedMonth = n.getMonth();
                                c.drawYear = c.selectedYear = n.getFullYear();
                                if (h == "M" || h == "Y")
                                    this._notifyChange(c)
                            }, _restrictMinMax: function (c, g) {
                                var h = this._getMinMaxDate(c,
            "min");
                                c = this._getMinMaxDate(c, "max");
                                g = h && g < h ? h : g;
                                return c && g > c ? c : g
                            }, _notifyChange: function (c) {
                                var g = this._get(c, "onChangeMonthYear");
                                if (g)
                                    g.apply(c.input ? c.input[0] : null, [c.selectedYear, c.selectedMonth + 1, c])
                            }, _getNumberOfMonths: function (c) {
                                c = this._get(c, "numberOfMonths");
                                return c == null ? [1, 1] : typeof c == "number" ? [1, c] : c
                            }, _getMinMaxDate: function (c, g) {
                                return this._determineDate(c, this._get(c, g + "Date"), null)
                            }, _getDaysInMonth: function (c, g) {
                                return 32 - (new Date(c, g, 32)).getDate()
                            }, _getFirstDayOfMonth: function (c,
        g) {
                                return (new Date(c, g, 1)).getDay()
                            }, _canAdjustMonth: function (c, g, h, n) {
                                var o = this._getNumberOfMonths(c);
                                h = this._daylightSavingAdjust(new Date(h, n + (g < 0 ? g : o[0] * o[1]), 1));
                                g < 0 && h.setDate(this._getDaysInMonth(h.getFullYear(), h.getMonth()));
                                return this._isInRange(c, h)
                            }, _isInRange: function (c, g) {
                                var h = this._getMinMaxDate(c, "min");
                                c = this._getMinMaxDate(c, "max");
                                return (!h || g.getTime() >= h.getTime()) && (!c || g.getTime() <= c.getTime())
                            }, _getFormatConfig: function (c) {
                                var g = this._get(c, "shortYearCutoff");
                                g = typeof g !=
            "string" ? g : (new Date).getFullYear() % 100 + parseInt(g, 10);
                                return { shortYearCutoff: g, dayNamesShort: this._get(c, "dayNamesShort"), dayNames: this._get(c, "dayNames"), monthNamesShort: this._get(c, "monthNamesShort"), monthNames: this._get(c, "monthNames") }
                            }, _formatDate: function (c, g, h, n) {
                                if (!g) {
                                    c.currentDay = c.selectedDay;
                                    c.currentMonth = c.selectedMonth;
                                    c.currentYear = c.selectedYear
                                }
                                g = g ? typeof g == "object" ? g : this._daylightSavingAdjust(new Date(n, h, g)) : this._daylightSavingAdjust(new Date(c.currentYear, c.currentMonth, c.currentDay));
                                return this.formatDate(this._get(c, "dateFormat"), g, this._getFormatConfig(c))
                            } 
                        });
                        a.fn.datepicker = function (c) {
                            if (!a.datepicker.initialized) {
                                a(document).mousedown(a.datepicker._checkExternalClick).find("body").append(a.datepicker.dpDiv);
                                a.datepicker.initialized = true
                            }
                            var g = Array.prototype.slice.call(arguments, 1);
                            if (typeof c == "string" && (c == "isDisabled" || c == "getDate" || c == "widget"))
                                return a.datepicker["_" + c + "Datepicker"].apply(a.datepicker, [this[0]].concat(g));
                            if (c == "option" && arguments.length == 2 && typeof arguments[1] ==
        "string")
                                return a.datepicker["_" + c + "Datepicker"].apply(a.datepicker, [this[0]].concat(g));
                            return this.each(function () {
                                typeof c == "string" ? a.datepicker["_" + c + "Datepicker"].apply(a.datepicker, [this].concat(g)) : a.datepicker._attachDatepicker(this, c)
                            })
                        };
                        a.datepicker = new d;
                        a.datepicker.initialized = false;
                        a.datepicker.uuid = (new Date).getTime();
                        a.datepicker.version = "1.8.4";
                        window["DP_jQuery_" + f] = a
                    })(jQuery);
                    (function (a, b) {
                        a.widget("ui.progressbar", { options: { value: 0 }, min: 0, max: 100, _create: function () {
                            this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({ role: "progressbar", "aria-valuemin": this.min, "aria-valuemax": this.max, "aria-valuenow": this._value() });
                            this.valueDiv = a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);
                            this._refreshValue()
                        }, destroy: function () {
                            this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
                            this.valueDiv.remove();
                            a.Widget.prototype.destroy.apply(this, arguments)
                        }, value: function (d) {
                            if (d === b)
                                return this._value();
                            this._setOption("value", d);
                            return this
                        }, _setOption: function (d, e) {
                            if (d === "value") {
                                this.options.value = e;
                                this._refreshValue();
                                this._trigger("change")
                            }
                            a.Widget.prototype._setOption.apply(this, arguments)
                        }, _value: function () {
                            var d = this.options.value;
                            if (typeof d !== "number")
                                d = 0;
                            return Math.min(this.max, Math.max(this.min, d))
                        }, _refreshValue: function () {
                            var d = this.value();
                            this.valueDiv.toggleClass("ui-corner-right",
            d === this.max).width(d + "%");
                            this.element.attr("aria-valuenow", d)
                        } 
                        });
                        a.extend(a.ui.progressbar, { version: "1.8.4" })
                    })(jQuery);
                    jQuery.effects || function (a, b) {
                        function d(p) {
                            var m;
                            if (p && p.constructor == Array && p.length == 3)
                                return p;
                            if (m = /rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(p))
                                return [parseInt(m[1], 10), parseInt(m[2], 10), parseInt(m[3], 10)];
                            if (m = /rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(p))
                                return [parseFloat(m[1]) * 2.55, parseFloat(m[2]) * 2.55, parseFloat(m[3]) * 2.55];
                            if (m = /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(p))
                                return [parseInt(m[1],
                16), parseInt(m[2], 16), parseInt(m[3], 16)];
                            if (m = /#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(p))
                                return [parseInt(m[1] + m[1], 16), parseInt(m[2] + m[2], 16), parseInt(m[3] + m[3], 16)];
                            if (/rgba\(0, 0, 0, 0\)/.exec(p))
                                return h.transparent;
                            return h[a.trim(p).toLowerCase()]
                        }
                        function e() {
                            var p = document.defaultView ? document.defaultView.getComputedStyle(this, null) : this.currentStyle, m = {}, q, v;
                            if (p && p.length && p[0] && p[p[0]])
                                for (var w = p.length; w--; ) {
                                    q = p[w];
                                    if (typeof p[q] == "string") {
                                        v = q.replace(/\-(\w)/g, function (s, k) {
                                            return k.toUpperCase()
                                        });
                                        m[v] = p[q]
                                    }
                                }
                            else
                                for (q in p)
                                    if (typeof p[q] === "string")
                                        m[q] = p[q];
                            return m
                        }
                        function f(p) {
                            var m, q;
                            for (m in p) {
                                q = p[m];
                                if (q == null || a.isFunction(q) || m in o || /scrollbar/.test(m) || !/color/i.test(m) && isNaN(parseFloat(q)))
                                    delete p[m]
                            }
                            return p
                        }
                        function c(p, m) {
                            var q = { _: 0 }, v;
                            for (v in m)
                                if (p[v] != m[v])
                                    q[v] = m[v];
                            return q
                        }
                        function g(p, m, q, v) {
                            if (typeof p == "object") {
                                v = m;
                                q = null;
                                m = p;
                                p = m.effect
                            }
                            if (a.isFunction(m)) {
                                v = m;
                                q = null;
                                m = {}
                            }
                            if (typeof m == "number" || a.fx.speeds[m]) {
                                v = q;
                                q = m;
                                m = {}
                            }
                            if (a.isFunction(q)) {
                                v = q;
                                q = null
                            }
                            m = m || {};
                            q = q || m.duration;
                            q = a.fx.off ? 0 : typeof q == "number" ? q : a.fx.speeds[q] || a.fx.speeds._default;
                            v = v || m.complete;
                            return [p, m, q, v]
                        }
                        a.effects = {};
                        a.each(["backgroundColor", "borderBottomColor", "borderLeftColor", "borderRightColor", "borderTopColor", "color", "outlineColor"], function (p, m) {
                            a.fx.step[m] = function (q) {
                                if (!q.colorInit) {
                                    var v;
                                    v = q.elem;
                                    var w = m, s;
                                    do {
                                        s = a.curCSS(v, w);
                                        if (s != "" && s != "transparent" || a.nodeName(v, "body"))
                                            break;
                                        w = "backgroundColor"
                                    } while (v = v.parentNode);
                                    v = d(s);
                                    q.start = v;
                                    q.end = d(q.end);
                                    q.colorInit = true
                                }
                                q.elem.style[m] =
            "rgb(" + Math.max(Math.min(parseInt(q.pos * (q.end[0] - q.start[0]) + q.start[0], 10), 255), 0) + "," + Math.max(Math.min(parseInt(q.pos * (q.end[1] - q.start[1]) + q.start[1], 10), 255), 0) + "," + Math.max(Math.min(parseInt(q.pos * (q.end[2] - q.start[2]) + q.start[2], 10), 255), 0) + ")"
                            }
                        });
                        var h = { aqua: [0, 255, 255], azure: [240, 255, 255], beige: [245, 245, 220], black: [0, 0, 0], blue: [0, 0, 255], brown: [165, 42, 42], cyan: [0, 255, 255], darkblue: [0, 0, 139], darkcyan: [0, 139, 139], darkgrey: [169, 169, 169], darkgreen: [0, 100, 0], darkkhaki: [189, 183, 107], darkmagenta: [139,
            0, 139], darkolivegreen: [85, 107, 47], darkorange: [255, 140, 0], darkorchid: [153, 50, 204], darkred: [139, 0, 0], darksalmon: [233, 150, 122], darkviolet: [148, 0, 211], fuchsia: [255, 0, 255], gold: [255, 215, 0], green: [0, 128, 0], indigo: [75, 0, 130], khaki: [240, 230, 140], lightblue: [173, 216, 230], lightcyan: [224, 255, 255], lightgreen: [144, 238, 144], lightgrey: [211, 211, 211], lightpink: [255, 182, 193], lightyellow: [255, 255, 224], lime: [0, 255, 0], magenta: [255, 0, 255], maroon: [128, 0, 0], navy: [0, 0, 128], olive: [128, 128, 0], orange: [255, 165, 0], pink: [255, 192,
            203], purple: [128, 0, 128], violet: [128, 0, 128], red: [255, 0, 0], silver: [192, 192, 192], white: [255, 255, 255], yellow: [255, 255, 0], transparent: [255, 255, 255]
                        }, n = ["add", "remove", "toggle"], o = { border: 1, borderBottom: 1, borderColor: 1, borderLeft: 1, borderRight: 1, borderTop: 1, borderWidth: 1, margin: 1, padding: 1 };
                        a.effects.animateClass = function (p, m, q, v) {
                            if (a.isFunction(q)) {
                                v = q;
                                q = null
                            }
                            return this.each(function () {
                                var w = a(this), s = w.attr("style") || " ", k = f(e.call(this)), D, M = w.attr("className");
                                a.each(n, function (J, G) {
                                    p[G] && w[G + "Class"](p[G])
                                });
                                D = f(e.call(this));
                                w.attr("className", M);
                                w.animate(c(k, D), m, q, function () {
                                    a.each(n, function (J, G) {
                                        p[G] && w[G + "Class"](p[G])
                                    });
                                    if (typeof w.attr("style") == "object") {
                                        w.attr("style").cssText = "";
                                        w.attr("style").cssText = s
                                    } else
                                        w.attr("style", s);
                                    v && v.apply(this, arguments)
                                })
                            })
                        };
                        a.fn.extend({ _addClass: a.fn.addClass, addClass: function (p, m, q, v) {
                            return m ? a.effects.animateClass.apply(this, [{ add: p }, m, q, v]) : this._addClass(p)
                        }, _removeClass: a.fn.removeClass, removeClass: function (p, m, q, v) {
                            return m ? a.effects.animateClass.apply(this,
            [{ remove: p }, m, q, v]) : this._removeClass(p)
                        }, _toggleClass: a.fn.toggleClass, toggleClass: function (p, m, q, v, w) {
                            return typeof m == "boolean" || m === b ? q ? a.effects.animateClass.apply(this, [m ? { add: p} : { remove: p }, q, v, w]) : this._toggleClass(p, m) : a.effects.animateClass.apply(this, [{ toggle: p }, m, q, v])
                        }, switchClass: function (p, m, q, v, w) {
                            return a.effects.animateClass.apply(this, [{ add: m, remove: p }, q, v, w])
                        } 
                        });
                        a.extend(a.effects, { version: "1.8.4", save: function (p, m) {
                            for (var q = 0; q < m.length; q++)
                                m[q] !== null && p.data("ec.storage." + m[q],
                p[0].style[m[q]])
                        }, restore: function (p, m) {
                            for (var q = 0; q < m.length; q++)
                                m[q] !== null && p.css(m[q], p.data("ec.storage." + m[q]))
                        }, setMode: function (p, m) {
                            if (m == "toggle")
                                m = p.is(":hidden") ? "show" : "hide";
                            return m
                        }, getBaseline: function (p, m) {
                            var q;
                            switch (p[0]) {
                                case "top":
                                    q = 0;
                                    break;
                                case "middle":
                                    q = 0.5;
                                    break;
                                case "bottom":
                                    q = 1;
                                    break;
                                default:
                                    q = p[0] / m.height
                            }
                            switch (p[1]) {
                                case "left":
                                    p = 0;
                                    break;
                                case "center":
                                    p = 0.5;
                                    break;
                                case "right":
                                    p = 1;
                                    break;
                                default:
                                    p = p[1] / m.width
                            }
                            return { x: p, y: q }
                        }, createWrapper: function (p) {
                            if (p.parent().is(".ui-effects-wrapper"))
                                return p.parent();
                            var m = { width: p.outerWidth(true), height: p.outerHeight(true), "float": p.css("float") }, q = a("<div></div>").addClass("ui-effects-wrapper").css({ fontSize: "100%", background: "transparent", border: "none", margin: 0, padding: 0 });
                            p.wrap(q);
                            q = p.parent();
                            if (p.css("position") == "static") {
                                q.css({ position: "relative" });
                                p.css({ position: "relative" })
                            } else {
                                a.extend(m, { position: p.css("position"), zIndex: p.css("z-index") });
                                a.each(["top", "left", "bottom", "right"], function (v, w) {
                                    m[w] = p.css(w);
                                    if (isNaN(parseInt(m[w], 10)))
                                        m[w] = "auto"
                                });
                                p.css({ position: "relative", top: 0, left: 0 })
                            }
                            return q.css(m).show()
                        }, removeWrapper: function (p) {
                            if (p.parent().is(".ui-effects-wrapper"))
                                return p.parent().replaceWith(p);
                            return p
                        }, setTransition: function (p, m, q, v) {
                            v = v || {};
                            a.each(m, function (w, s) {
                                unit = p.cssUnit(s);
                                if (unit[0] > 0)
                                    v[s] = unit[0] * q + unit[1]
                            });
                            return v
                        } 
                        });
                        a.fn.extend({ effect: function (p) {
                            var m = g.apply(this, arguments);
                            m = { options: m[1], duration: m[2], callback: m[3] };
                            var q = a.effects[p];
                            return q && !a.fx.off ? q.call(this, m) : this
                        }, _show: a.fn.show, show: function (p) {
                            if (!p ||
            typeof p == "number" || a.fx.speeds[p])
                                return this._show.apply(this, arguments);
                            else {
                                var m = g.apply(this, arguments);
                                m[1].mode = "show";
                                return this.effect.apply(this, m)
                            }
                        }, _hide: a.fn.hide, hide: function (p) {
                            if (!p || typeof p == "number" || a.fx.speeds[p])
                                return this._hide.apply(this, arguments);
                            else {
                                var m = g.apply(this, arguments);
                                m[1].mode = "hide";
                                return this.effect.apply(this, m)
                            }
                        }, __toggle: a.fn.toggle, toggle: function (p) {
                            if (!p || typeof p == "number" || a.fx.speeds[p] || typeof p == "boolean" || a.isFunction(p))
                                return this.__toggle.apply(this,
                arguments);
                            else {
                                var m = g.apply(this, arguments);
                                m[1].mode = "toggle";
                                return this.effect.apply(this, m)
                            }
                        }, cssUnit: function (p) {
                            var m = this.css(p), q = [];
                            a.each(["em", "px", "%", "pt"], function (v, w) {
                                if (m.indexOf(w) > 0)
                                    q = [parseFloat(m), w]
                            });
                            return q
                        } 
                        });
                        a.easing.jswing = a.easing.swing;
                        a.extend(a.easing, { def: "easeOutQuad", swing: function (p, m, q, v, w) {
                            return a.easing[a.easing.def](p, m, q, v, w)
                        }, easeInQuad: function (p, m, q, v, w) {
                            return v * (m /= w) * m + q
                        }, easeOutQuad: function (p, m, q, v, w) {
                            return -v * (m /= w) * (m - 2) + q
                        }, easeInOutQuad: function (p,
        m, q, v, w) {
                            if ((m /= w / 2) < 1)
                                return v / 2 * m * m + q;
                            return -v / 2 * (--m * (m - 2) - 1) + q
                        }, easeInCubic: function (p, m, q, v, w) {
                            return v * (m /= w) * m * m + q
                        }, easeOutCubic: function (p, m, q, v, w) {
                            return v * ((m = m / w - 1) * m * m + 1) + q
                        }, easeInOutCubic: function (p, m, q, v, w) {
                            if ((m /= w / 2) < 1)
                                return v / 2 * m * m * m + q;
                            return v / 2 * ((m -= 2) * m * m + 2) + q
                        }, easeInQuart: function (p, m, q, v, w) {
                            return v * (m /= w) * m * m * m + q
                        }, easeOutQuart: function (p, m, q, v, w) {
                            return -v * ((m = m / w - 1) * m * m * m - 1) + q
                        }, easeInOutQuart: function (p, m, q, v, w) {
                            if ((m /= w / 2) < 1)
                                return v / 2 * m * m * m * m + q;
                            return -v / 2 * ((m -= 2) * m * m * m - 2) +
            q
                        }, easeInQuint: function (p, m, q, v, w) {
                            return v * (m /= w) * m * m * m * m + q
                        }, easeOutQuint: function (p, m, q, v, w) {
                            return v * ((m = m / w - 1) * m * m * m * m + 1) + q
                        }, easeInOutQuint: function (p, m, q, v, w) {
                            if ((m /= w / 2) < 1)
                                return v / 2 * m * m * m * m * m + q;
                            return v / 2 * ((m -= 2) * m * m * m * m + 2) + q
                        }, easeInSine: function (p, m, q, v, w) {
                            return -v * Math.cos(m / w * (Math.PI / 2)) + v + q
                        }, easeOutSine: function (p, m, q, v, w) {
                            return v * Math.sin(m / w * (Math.PI / 2)) + q
                        }, easeInOutSine: function (p, m, q, v, w) {
                            return -v / 2 * (Math.cos(Math.PI * m / w) - 1) + q
                        }, easeInExpo: function (p, m, q, v, w) {
                            return m == 0 ? q : v * Math.pow(2,
            10 * (m / w - 1)) + q
                        }, easeOutExpo: function (p, m, q, v, w) {
                            return m == w ? q + v : v * (-Math.pow(2, -10 * m / w) + 1) + q
                        }, easeInOutExpo: function (p, m, q, v, w) {
                            if (m == 0)
                                return q;
                            if (m == w)
                                return q + v;
                            if ((m /= w / 2) < 1)
                                return v / 2 * Math.pow(2, 10 * (m - 1)) + q;
                            return v / 2 * (-Math.pow(2, -10 * --m) + 2) + q
                        }, easeInCirc: function (p, m, q, v, w) {
                            return -v * (Math.sqrt(1 - (m /= w) * m) - 1) + q
                        }, easeOutCirc: function (p, m, q, v, w) {
                            return v * Math.sqrt(1 - (m = m / w - 1) * m) + q
                        }, easeInOutCirc: function (p, m, q, v, w) {
                            if ((m /= w / 2) < 1)
                                return -v / 2 * (Math.sqrt(1 - m * m) - 1) + q;
                            return v / 2 * (Math.sqrt(1 - (m -= 2) *
            m) + 1) + q
                        }, easeInElastic: function (p, m, q, v, w) {
                            var s = 0, k = v;
                            if (m == 0)
                                return q;
                            if ((m /= w) == 1)
                                return q + v;
                            s || (s = w * 0.3);
                            if (k < Math.abs(v)) {
                                k = v;
                                p = s / 4
                            } else
                                p = s / (2 * Math.PI) * Math.asin(v / k);
                            return -(k * Math.pow(2, 10 * (m -= 1)) * Math.sin((m * w - p) * 2 * Math.PI / s)) + q
                        }, easeOutElastic: function (p, m, q, v, w) {
                            var s = 0, k = v;
                            if (m == 0)
                                return q;
                            if ((m /= w) == 1)
                                return q + v;
                            s || (s = w * 0.3);
                            if (k < Math.abs(v)) {
                                k = v;
                                p = s / 4
                            } else
                                p = s / (2 * Math.PI) * Math.asin(v / k);
                            return k * Math.pow(2, -10 * m) * Math.sin((m * w - p) * 2 * Math.PI / s) + v + q
                        }, easeInOutElastic: function (p, m, q, v, w) {
                            var s =
            0, k = v;
                            if (m == 0)
                                return q;
                            if ((m /= w / 2) == 2)
                                return q + v;
                            s || (s = w * 0.3 * 1.5);
                            if (k < Math.abs(v)) {
                                k = v;
                                p = s / 4
                            } else
                                p = s / (2 * Math.PI) * Math.asin(v / k);
                            if (m < 1)
                                return -0.5 * k * Math.pow(2, 10 * (m -= 1)) * Math.sin((m * w - p) * 2 * Math.PI / s) + q;
                            return k * Math.pow(2, -10 * (m -= 1)) * Math.sin((m * w - p) * 2 * Math.PI / s) * 0.5 + v + q
                        }, easeInBack: function (p, m, q, v, w, s) {
                            if (s == b)
                                s = 1.70158;
                            return v * (m /= w) * m * ((s + 1) * m - s) + q
                        }, easeOutBack: function (p, m, q, v, w, s) {
                            if (s == b)
                                s = 1.70158;
                            return v * ((m = m / w - 1) * m * ((s + 1) * m + s) + 1) + q
                        }, easeInOutBack: function (p, m, q, v, w, s) {
                            if (s == b)
                                s = 1.70158;
                            if ((m /= w / 2) < 1)
                                return v / 2 * m * m * (((s *= 1.525) + 1) * m - s) + q;
                            return v / 2 * ((m -= 2) * m * (((s *= 1.525) + 1) * m + s) + 2) + q
                        }, easeInBounce: function (p, m, q, v, w) {
                            return v - a.easing.easeOutBounce(p, w - m, 0, v, w) + q
                        }, easeOutBounce: function (p, m, q, v, w) {
                            return (m /= w) < 1 / 2.75 ? v * 7.5625 * m * m + q : m < 2 / 2.75 ? v * (7.5625 * (m -= 1.5 / 2.75) * m + 0.75) + q : m < 2.5 / 2.75 ? v * (7.5625 * (m -= 2.25 / 2.75) * m + 0.9375) + q : v * (7.5625 * (m -= 2.625 / 2.75) * m + 0.984375) + q
                        }, easeInOutBounce: function (p, m, q, v, w) {
                            if (m < w / 2)
                                return a.easing.easeInBounce(p, m * 2, 0, v, w) * 0.5 + q;
                            return a.easing.easeOutBounce(p,
            m * 2 - w, 0, v, w) * 0.5 + v * 0.5 + q
                        } 
                        })
                    } (jQuery);
                    (function (a) {
                        a.effects.blind = function (b) {
                            return this.queue(function () {
                                var d = a(this), e = ["position", "top", "left"], f = a.effects.setMode(d, b.options.mode || "hide"), c = b.options.direction || "vertical";
                                a.effects.save(d, e);
                                d.show();
                                var g = a.effects.createWrapper(d).css({ overflow: "hidden" }), h = c == "vertical" ? "height" : "width";
                                c = c == "vertical" ? g.height() : g.width();
                                f == "show" && g.css(h, 0);
                                var n = {};
                                n[h] = f == "show" ? c : 0;
                                g.animate(n, b.duration, b.options.easing, function () {
                                    f == "hide" && d.hide();
                                    a.effects.restore(d, e);
                                    a.effects.removeWrapper(d);
                                    b.callback && b.callback.apply(d[0], arguments);
                                    d.dequeue()
                                })
                            })
                        }
                    })(jQuery);
                    (function (a) {
                        a.effects.bounce = function (b) {
                            return this.queue(function () {
                                var d = a(this), e = ["position", "top", "left"], f = a.effects.setMode(d, b.options.mode || "effect"), c = b.options.direction || "up", g = b.options.distance || 20, h = b.options.times || 5, n = b.duration || 250;
                                /show|hide/.test(f) && e.push("opacity");
                                a.effects.save(d, e);
                                d.show();
                                a.effects.createWrapper(d);
                                var o = c == "up" || c == "down" ? "top" : "left";
                                c = c == "up" || c == "left" ? "pos" : "neg";
                                g = b.options.distance || (o == "top" ? d.outerHeight({ margin: true }) / 3 : d.outerWidth({ margin: true }) /
            3);
                                if (f == "show")
                                    d.css("opacity", 0).css(o, c == "pos" ? -g : g);
                                if (f == "hide")
                                    g /= h * 2;
                                f != "hide" && h--;
                                if (f == "show") {
                                    var p = { opacity: 1 };
                                    p[o] = (c == "pos" ? "+=" : "-=") + g;
                                    d.animate(p, n / 2, b.options.easing);
                                    g /= 2;
                                    h--
                                }
                                for (p = 0; p < h; p++) {
                                    var m = {}, q = {};
                                    m[o] = (c == "pos" ? "-=" : "+=") + g;
                                    q[o] = (c == "pos" ? "+=" : "-=") + g;
                                    d.animate(m, n / 2, b.options.easing).animate(q, n / 2, b.options.easing);
                                    g = f == "hide" ? g * 2 : g / 2
                                }
                                if (f == "hide") {
                                    p = { opacity: 0 };
                                    p[o] = (c == "pos" ? "-=" : "+=") + g;
                                    d.animate(p, n / 2, b.options.easing, function () {
                                        d.hide();
                                        a.effects.restore(d, e);
                                        a.effects.removeWrapper(d);
                                        b.callback && b.callback.apply(this, arguments)
                                    })
                                } else {
                                    m = {};
                                    q = {};
                                    m[o] = (c == "pos" ? "-=" : "+=") + g;
                                    q[o] = (c == "pos" ? "+=" : "-=") + g;
                                    d.animate(m, n / 2, b.options.easing).animate(q, n / 2, b.options.easing, function () {
                                        a.effects.restore(d, e);
                                        a.effects.removeWrapper(d);
                                        b.callback && b.callback.apply(this, arguments)
                                    })
                                }
                                d.queue("fx", function () {
                                    d.dequeue()
                                });
                                d.dequeue()
                            })
                        }
                    })(jQuery);
                    (function (a) {
                        a.effects.clip = function (b) {
                            return this.queue(function () {
                                var d = a(this), e = ["position", "top", "left", "height", "width"], f = a.effects.setMode(d, b.options.mode || "hide"), c = b.options.direction || "vertical";
                                a.effects.save(d, e);
                                d.show();
                                var g = a.effects.createWrapper(d).css({ overflow: "hidden" });
                                g = d[0].tagName == "IMG" ? g : d;
                                var h = { size: c == "vertical" ? "height" : "width", position: c == "vertical" ? "top" : "left" };
                                c = c == "vertical" ? g.height() : g.width();
                                if (f == "show") {
                                    g.css(h.size, 0);
                                    g.css(h.position, c / 2)
                                }
                                var n = {};
                                n[h.size] =
            f == "show" ? c : 0;
                                n[h.position] = f == "show" ? 0 : c / 2;
                                g.animate(n, { queue: false, duration: b.duration, easing: b.options.easing, complete: function () {
                                    f == "hide" && d.hide();
                                    a.effects.restore(d, e);
                                    a.effects.removeWrapper(d);
                                    b.callback && b.callback.apply(d[0], arguments);
                                    d.dequeue()
                                } 
                                })
                            })
                        }
                    })(jQuery);
                    (function (a) {
                        a.effects.drop = function (b) {
                            return this.queue(function () {
                                var d = a(this), e = ["position", "top", "left", "opacity"], f = a.effects.setMode(d, b.options.mode || "hide"), c = b.options.direction || "left";
                                a.effects.save(d, e);
                                d.show();
                                a.effects.createWrapper(d);
                                var g = c == "up" || c == "down" ? "top" : "left";
                                c = c == "up" || c == "left" ? "pos" : "neg";
                                var h = b.options.distance || (g == "top" ? d.outerHeight({ margin: true }) / 2 : d.outerWidth({ margin: true }) / 2);
                                if (f == "show")
                                    d.css("opacity", 0).css(g, c == "pos" ? -h : h);
                                var n = { opacity: f == "show" ? 1 :
                0
                                };
                                n[g] = (f == "show" ? c == "pos" ? "+=" : "-=" : c == "pos" ? "-=" : "+=") + h;
                                d.animate(n, { queue: false, duration: b.duration, easing: b.options.easing, complete: function () {
                                    f == "hide" && d.hide();
                                    a.effects.restore(d, e);
                                    a.effects.removeWrapper(d);
                                    b.callback && b.callback.apply(this, arguments);
                                    d.dequeue()
                                } 
                                })
                            })
                        }
                    })(jQuery);
                    (function (a) {
                        a.effects.explode = function (b) {
                            return this.queue(function () {
                                var d = b.options.pieces ? Math.round(Math.sqrt(b.options.pieces)) : 3, e = b.options.pieces ? Math.round(Math.sqrt(b.options.pieces)) : 3;
                                b.options.mode = b.options.mode == "toggle" ? a(this).is(":visible") ? "hide" : "show" : b.options.mode;
                                var f = a(this).show().css("visibility", "hidden"), c = f.offset();
                                c.top -= parseInt(f.css("marginTop"), 10) || 0;
                                c.left -= parseInt(f.css("marginLeft"), 10) || 0;
                                for (var g = f.outerWidth(true), h = f.outerHeight(true), n = 0; n < d; n++)
                                    for (var o =
                0; o < e; o++)
                                        f.clone().appendTo("body").wrap("<div></div>").css({ position: "absolute", visibility: "visible", left: -o * (g / e), top: -n * (h / d) }).parent().addClass("ui-effects-explode").css({ position: "absolute", overflow: "hidden", width: g / e, height: h / d, left: c.left + o * (g / e) + (b.options.mode == "show" ? (o - Math.floor(e / 2)) * (g / e) : 0), top: c.top + n * (h / d) + (b.options.mode == "show" ? (n - Math.floor(d / 2)) * (h / d) : 0), opacity: b.options.mode == "show" ? 0 : 1 }).animate({ left: c.left + o * (g / e) + (b.options.mode == "show" ? 0 : (o - Math.floor(e / 2)) * (g / e)), top: c.top +
                        n * (h / d) + (b.options.mode == "show" ? 0 : (n - Math.floor(d / 2)) * (h / d)), opacity: b.options.mode == "show" ? 1 : 0
                                        }, b.duration || 500);
                                setTimeout(function () {
                                    b.options.mode == "show" ? f.css({ visibility: "visible" }) : f.css({ visibility: "visible" }).hide();
                                    b.callback && b.callback.apply(f[0]);
                                    f.dequeue();
                                    a("div.ui-effects-explode").remove()
                                }, b.duration || 500)
                            })
                        }
                    })(jQuery);
                    (function (a) {
                        a.effects.fold = function (b) {
                            return this.queue(function () {
                                var d = a(this), e = ["position", "top", "left"], f = a.effects.setMode(d, b.options.mode || "hide"), c = b.options.size || 15, g = !!b.options.horizFirst, h = b.duration ? b.duration / 2 : a.fx.speeds._default / 2;
                                a.effects.save(d, e);
                                d.show();
                                var n = a.effects.createWrapper(d).css({ overflow: "hidden" }), o = f == "show" != g, p = o ? ["width", "height"] : ["height", "width"];
                                o = o ? [n.width(), n.height()] : [n.height(), n.width()];
                                var m = /([0-9]+)%/.exec(c);
                                if (m)
                                    c = parseInt(m[1], 10) / 100 *
                o[f == "hide" ? 0 : 1];
                                if (f == "show")
                                    n.css(g ? { height: 0, width: c} : { height: c, width: 0 });
                                g = {};
                                m = {};
                                g[p[0]] = f == "show" ? o[0] : c;
                                m[p[1]] = f == "show" ? o[1] : 0;
                                n.animate(g, h, b.options.easing).animate(m, h, b.options.easing, function () {
                                    f == "hide" && d.hide();
                                    a.effects.restore(d, e);
                                    a.effects.removeWrapper(d);
                                    b.callback && b.callback.apply(d[0], arguments);
                                    d.dequeue()
                                })
                            })
                        }
                    })(jQuery);
                    (function (a) {
                        a.effects.highlight = function (b) {
                            return this.queue(function () {
                                var d = a(this), e = ["backgroundImage", "backgroundColor", "opacity"], f = a.effects.setMode(d, b.options.mode || "show"), c = { backgroundColor: d.css("backgroundColor") };
                                if (f == "hide")
                                    c.opacity = 0;
                                a.effects.save(d, e);
                                d.show().css({ backgroundImage: "none", backgroundColor: b.options.color || "#ffff99" }).animate(c, { queue: false, duration: b.duration, easing: b.options.easing, complete: function () {
                                    f == "hide" && d.hide();
                                    a.effects.restore(d, e);
                                    f == "show" && !a.support.opacity &&
                    this.style.removeAttribute("filter");
                                    b.callback && b.callback.apply(this, arguments);
                                    d.dequeue()
                                } 
                                })
                            })
                        }
                    })(jQuery);
                    (function (a) {
                        a.effects.pulsate = function (b) {
                            return this.queue(function () {
                                var d = a(this), e = a.effects.setMode(d, b.options.mode || "show");
                                times = (b.options.times || 5) * 2 - 1;
                                duration = b.duration ? b.duration / 2 : a.fx.speeds._default / 2;
                                isVisible = d.is(":visible");
                                animateTo = 0;
                                if (!isVisible) {
                                    d.css("opacity", 0).show();
                                    animateTo = 1
                                }
                                if (e == "hide" && isVisible || e == "show" && !isVisible)
                                    times--;
                                for (e = 0; e < times; e++) {
                                    d.animate({ opacity: animateTo }, duration, b.options.easing);
                                    animateTo = (animateTo + 1) % 2
                                }
                                d.animate({ opacity: animateTo }, duration,
            b.options.easing, function () {
                animateTo == 0 && d.hide();
                b.callback && b.callback.apply(this, arguments)
            });
                                d.queue("fx", function () {
                                    d.dequeue()
                                }).dequeue()
                            })
                        }
                    })(jQuery);
                    (function (a) {
                        a.effects.puff = function (b) {
                            return this.queue(function () {
                                var d = a(this), e = a.effects.setMode(d, b.options.mode || "hide"), f = parseInt(b.options.percent, 10) || 150, c = f / 100, g = { height: d.height(), width: d.width() };
                                a.extend(b.options, { fade: true, mode: e, percent: e == "hide" ? f : 100, from: e == "hide" ? g : { height: g.height * c, width: g.width * c} });
                                d.effect("scale", b.options, b.duration, b.callback);
                                d.dequeue()
                            })
                        };
                        a.effects.scale = function (b) {
                            return this.queue(function () {
                                var d = a(this), e = a.extend(true, {}, b.options), f = a.effects.setMode(d,
            b.options.mode || "effect"), c = parseInt(b.options.percent, 10) || (parseInt(b.options.percent, 10) == 0 ? 0 : f == "hide" ? 0 : 100), g = b.options.direction || "both", h = b.options.origin;
                                if (f != "effect") {
                                    e.origin = h || ["middle", "center"];
                                    e.restore = true
                                }
                                h = { height: d.height(), width: d.width() };
                                d.from = b.options.from || (f == "show" ? { height: 0, width: 0} : h);
                                c = { y: g != "horizontal" ? c / 100 : 1, x: g != "vertical" ? c / 100 : 1 };
                                d.to = { height: h.height * c.y, width: h.width * c.x };
                                if (b.options.fade) {
                                    if (f == "show") {
                                        d.from.opacity = 0;
                                        d.to.opacity = 1
                                    }
                                    if (f == "hide") {
                                        d.from.opacity =
                    1;
                                        d.to.opacity = 0
                                    }
                                }
                                e.from = d.from;
                                e.to = d.to;
                                e.mode = f;
                                d.effect("size", e, b.duration, b.callback);
                                d.dequeue()
                            })
                        };
                        a.effects.size = function (b) {
                            return this.queue(function () {
                                var d = a(this), e = ["position", "top", "left", "width", "height", "overflow", "opacity"], f = ["position", "top", "left", "overflow", "opacity"], c = ["width", "height", "overflow"], g = ["fontSize"], h = ["borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom"], n = ["borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight"], o = a.effects.setMode(d,
            b.options.mode || "effect"), p = b.options.restore || false, m = b.options.scale || "both", q = b.options.origin, v = { height: d.height(), width: d.width() };
                                d.from = b.options.from || v;
                                d.to = b.options.to || v;
                                if (q) {
                                    q = a.effects.getBaseline(q, v);
                                    d.from.top = (v.height - d.from.height) * q.y;
                                    d.from.left = (v.width - d.from.width) * q.x;
                                    d.to.top = (v.height - d.to.height) * q.y;
                                    d.to.left = (v.width - d.to.width) * q.x
                                }
                                var w = { from: { y: d.from.height / v.height, x: d.from.width / v.width }, to: { y: d.to.height / v.height, x: d.to.width / v.width} };
                                if (m == "box" || m == "both") {
                                    if (w.from.y !=
                w.to.y) {
                                        e = e.concat(h);
                                        d.from = a.effects.setTransition(d, h, w.from.y, d.from);
                                        d.to = a.effects.setTransition(d, h, w.to.y, d.to)
                                    }
                                    if (w.from.x != w.to.x) {
                                        e = e.concat(n);
                                        d.from = a.effects.setTransition(d, n, w.from.x, d.from);
                                        d.to = a.effects.setTransition(d, n, w.to.x, d.to)
                                    }
                                }
                                if (m == "content" || m == "both")
                                    if (w.from.y != w.to.y) {
                                        e = e.concat(g);
                                        d.from = a.effects.setTransition(d, g, w.from.y, d.from);
                                        d.to = a.effects.setTransition(d, g, w.to.y, d.to)
                                    }
                                a.effects.save(d, p ? e : f);
                                d.show();
                                a.effects.createWrapper(d);
                                d.css("overflow", "hidden").css(d.from);
                                if (m == "content" || m == "both") {
                                    h = h.concat(["marginTop", "marginBottom"]).concat(g);
                                    n = n.concat(["marginLeft", "marginRight"]);
                                    c = e.concat(h).concat(n);
                                    d.find("*[width]").each(function () {
                                        child = a(this);
                                        p && a.effects.save(child, c);
                                        var s = { height: child.height(), width: child.width() };
                                        child.from = { height: s.height * w.from.y, width: s.width * w.from.x };
                                        child.to = { height: s.height * w.to.y, width: s.width * w.to.x };
                                        if (w.from.y != w.to.y) {
                                            child.from = a.effects.setTransition(child, h, w.from.y, child.from);
                                            child.to = a.effects.setTransition(child,
                        h, w.to.y, child.to)
                                        }
                                        if (w.from.x != w.to.x) {
                                            child.from = a.effects.setTransition(child, n, w.from.x, child.from);
                                            child.to = a.effects.setTransition(child, n, w.to.x, child.to)
                                        }
                                        child.css(child.from);
                                        child.animate(child.to, b.duration, b.options.easing, function () {
                                            p && a.effects.restore(child, c)
                                        })
                                    })
                                }
                                d.animate(d.to, { queue: false, duration: b.duration, easing: b.options.easing, complete: function () {
                                    d.to.opacity === 0 && d.css("opacity", d.from.opacity);
                                    o == "hide" && d.hide();
                                    a.effects.restore(d, p ? e : f);
                                    a.effects.removeWrapper(d);
                                    b.callback &&
                    b.callback.apply(this, arguments);
                                    d.dequeue()
                                } 
                                })
                            })
                        }
                    })(jQuery);
                    (function (a) {
                        a.effects.shake = function (b) {
                            return this.queue(function () {
                                var d = a(this), e = ["position", "top", "left"];
                                a.effects.setMode(d, b.options.mode || "effect");
                                var f = b.options.direction || "left", c = b.options.distance || 20, g = b.options.times || 3, h = b.duration || b.options.duration || 140;
                                a.effects.save(d, e);
                                d.show();
                                a.effects.createWrapper(d);
                                var n = f == "up" || f == "down" ? "top" : "left", o = f == "up" || f == "left" ? "pos" : "neg";
                                f = {};
                                var p = {}, m = {};
                                f[n] = (o == "pos" ? "-=" : "+=") + c;
                                p[n] = (o == "pos" ? "+=" : "-=") + c * 2;
                                m[n] = (o == "pos" ? "-=" : "+=") +
            c * 2;
                                d.animate(f, h, b.options.easing);
                                for (c = 1; c < g; c++)
                                    d.animate(p, h, b.options.easing).animate(m, h, b.options.easing);
                                d.animate(p, h, b.options.easing).animate(f, h / 2, b.options.easing, function () {
                                    a.effects.restore(d, e);
                                    a.effects.removeWrapper(d);
                                    b.callback && b.callback.apply(this, arguments)
                                });
                                d.queue("fx", function () {
                                    d.dequeue()
                                });
                                d.dequeue()
                            })
                        }
                    })(jQuery);
                    (function (a) {
                        a.effects.slide = function (b) {
                            return this.queue(function () {
                                var d = a(this), e = ["position", "top", "left"], f = a.effects.setMode(d, b.options.mode || "show"), c = b.options.direction || "left";
                                a.effects.save(d, e);
                                d.show();
                                a.effects.createWrapper(d).css({ overflow: "hidden" });
                                var g = c == "up" || c == "down" ? "top" : "left";
                                c = c == "up" || c == "left" ? "pos" : "neg";
                                var h = b.options.distance || (g == "top" ? d.outerHeight({ margin: true }) : d.outerWidth({ margin: true }));
                                if (f == "show")
                                    d.css(g, c == "pos" ? -h : h);
                                var n = {};
                                n[g] = (f == "show" ? c == "pos" ?
            "+=" : "-=" : c == "pos" ? "-=" : "+=") + h;
                                d.animate(n, { queue: false, duration: b.duration, easing: b.options.easing, complete: function () {
                                    f == "hide" && d.hide();
                                    a.effects.restore(d, e);
                                    a.effects.removeWrapper(d);
                                    b.callback && b.callback.apply(this, arguments);
                                    d.dequeue()
                                } 
                                })
                            })
                        }
                    })(jQuery);
                    (function (a) {
                        a.effects.transfer = function (b) {
                            return this.queue(function () {
                                var d = a(this), e = a(b.options.to), f = e.offset();
                                e = { top: f.top, left: f.left, height: e.innerHeight(), width: e.innerWidth() };
                                f = d.offset();
                                var c = a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({ top: f.top, left: f.left, height: d.innerHeight(), width: d.innerWidth(), position: "absolute" }).animate(e, b.duration, b.options.easing, function () {
                                    c.remove();
                                    b.callback && b.callback.apply(d[0], arguments);
                                    d.dequeue()
                                })
                            })
                        }
                    })(jQuery);
                    (function () {
                        $.extend({ urlParams: function () {
                            for (var a = [], b, d = window.location.href.slice(window.location.href.indexOf("?") + 1).split("&"), e = 0; e < d.length; e++) {
                                b = d[e].split("=");
                                a.push(b[0]);
                                a[b[0]] = b[1]
                            }
                            return a
                        }, urlParamGet: function (a) {
                            return $.urlParams()[a]
                        } 
                        })
                    })(jQuery);
                    (function (a) {
                        a.validateUrl = function (d) {
                            matches = d.match(b);
                            if (!matches)
                                return null;
                            return matches
                        };
                        var b = RegExp("((?:(https?|ftp|itms)://)?(?:(?:[^\\s\\!\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\\\[\\]\\^\\_`\\{\\|\\}\\~]+\\.)+(?:aero|arpa|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|local|example|invalid|test|\u0645\u0635\u0631|\u0440\u0444|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|\u0627\u0645\u0627\u0631\u0627\u062a|xn--wgbh1c|xn--p1ai|xn--mgberp4a5d4ar|xn--mgbaam7a8h|\u4e2d\u56fd|\u4e2d\u570b|\u9999\u6e2f|\u0627\u0644\u0627\u0631\u062f\u0646|\u0641\u0644\u0633\u0637\u064a\u0646|\u0642\u0637\u0631|\u0dbd\u0d82\u0d9a\u0dcf|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u53f0\u7063|\u53f0\u6e7e|\u0e44\u0e17\u0e22|\u062a\u0648\u0646\u0633|xn--fiqs8S|xn--fiqz9S|xn--j6w193g|xn--mgbayh7gpa|xn--ygbi2ammx|xn--wgbl6a|xn--fzc2c9e2c|xn--xkc2al3hye2a|xn--kpry57d|xn--kprw13d|xn--o3cw4h|xn--pgbs0dh|\u0625\u062e\u062a\u0628\u0627\u0631|\u0622\u0632\u0645\u0627\u06cc\u0634\u06cc|\u6d4b\u8bd5|\u6e2c\u8a66|\u0438\u0441\u043f\u044b\u0442\u0430\u043d\u0438\u0435|\u092a\u0930\u0940\u0915\u094d\u0937\u093e|\u03b4\u03bf\u03ba\u03b9\u03bc\u03ae|\ud14c\uc2a4\ud2b8|\u05d8\u05e2\u05e1\u05d8|\u30c6\u30b9\u30c8|\u0baa\u0bb0\u0bbf\u0b9f\u0bcd\u0b9a\u0bc8|xn--kgbechtv|xn--hgbk6aj7f53bba|xn--0zwm56d|xn--g6w251d|xn--80akhbyknj4f|xn--11b5bs3a9aj6g|xn--jxalpdlp|xn--9t4b11yi5a|xn--deba0ad|xn--zckzah|xn--hlcj6aya9esc7a|[a-z]{2})(?::[0-9]+)?|(?:[0-9]{1,3}\\.){3}(?:[0-9]{1,3}))(?:\\/?[\\S]+)?)", "gi")
                    })(jQuery);
